{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"source/images/Pastedimage20250615154243.png","path":"images/Pastedimage20250615154243.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615170843.png","path":"images/Pastedimage20250615170843.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615172423.png","path":"images/Pastedimage20250615172423.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615173326.png","path":"images/Pastedimage20250615173326.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615175444.png","path":"images/Pastedimage20250615175444.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615172020.png","path":"images/Pastedimage20250615172020.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615175558.png","path":"images/Pastedimage20250615175558.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615184116.png","path":"images/Pastedimage20250615184116.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615175613.png","path":"images/Pastedimage20250615175613.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615195658.png","path":"images/Pastedimage20250615195658.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615213033.png","path":"images/Pastedimage20250615213033.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615211618.png","path":"images/Pastedimage20250615211618.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615213603.png","path":"images/Pastedimage20250615213603.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615223116.png","path":"images/Pastedimage20250615223116.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615223118.png","path":"images/Pastedimage20250615223118.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615223111.png","path":"images/Pastedimage20250615223111.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615223202.png","path":"images/Pastedimage20250615223202.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615223538.png","path":"images/Pastedimage20250615223538.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250615230527.png","path":"images/Pastedimage20250615230527.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250616212809.png","path":"images/Pastedimage20250616212809.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250616212818.png","path":"images/Pastedimage20250616212818.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250616213051.png","path":"images/Pastedimage20250616213051.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250616213103.png","path":"images/Pastedimage20250616213103.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250617210149.png","path":"images/Pastedimage20250617210149.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250616213139.png","path":"images/Pastedimage20250616213139.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250618163248.png","path":"images/Pastedimage20250618163248.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250619132929.png","path":"images/Pastedimage20250619132929.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250619142148.png","path":"images/Pastedimage20250619142148.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250724161028.png","path":"images/Pastedimage20250724161028.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250724161308.png","path":"images/Pastedimage20250724161308.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250724161956.png","path":"images/Pastedimage20250724161956.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250724161951.png","path":"images/Pastedimage20250724161951.png","modified":0,"renderable":0},{"_id":"source/images/Pastedimage20250724162824.png","path":"images/Pastedimage20250724162824.png","modified":0,"renderable":0},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","path":"css/noscript.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","path":"js/comments-buttons.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","path":"js/comments.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/config.js","path":"js/config.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","path":"js/pjax.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","path":"js/schedule.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","path":"js/sidebar.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","path":"js/third-party/addtoany.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","path":"js/third-party/fancybox.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","path":"js/third-party/pace.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","path":"js/third-party/quicklink.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","path":"js/third-party/analytics/growingio.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","path":"js/third-party/analytics/matomo.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","path":"js/third-party/chat/chatra.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","path":"js/third-party/chat/tidio.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","path":"js/third-party/analytics/google-analytics.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","path":"js/third-party/analytics/baidu-analytics.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","path":"js/third-party/comments/changyan.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","path":"js/third-party/comments/disqus.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","path":"js/third-party/comments/disqusjs.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","path":"js/third-party/comments/isso.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","path":"js/third-party/comments/livere.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","path":"js/third-party/comments/utterances.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","path":"js/third-party/comments/gitalk.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","path":"js/third-party/math/katex.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","path":"js/third-party/math/mathjax.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","path":"js/third-party/search/algolia-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","path":"js/third-party/statistics/firestore.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","path":"js/third-party/tags/mermaid.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","path":"js/third-party/statistics/lean-analytics.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","path":"js/third-party/search/local-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","path":"js/third-party/tags/pdf.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","path":"js/third-party/tags/wavedrom.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/CS61B/Leb03.md","hash":"3b426b5a3058290c4be33f542b82ba56e12ab6dd","modified":1751083136375},{"_id":"source/CS61B/proj1b.md","hash":"437874dca763a3c208012859f1fbd80d51a4baaa","modified":1751082950039},{"_id":"source/CS61B/index.md","hash":"e1b2e13a2501b83153eee8c071af26af41b32d7a","modified":1751081885582},{"_id":"source/CS61B/proj0.md","hash":"e9ef1f43a6876895c63e464a7442587d434cd540","modified":1750072204451},{"_id":"source/CS61B/proj1a.md","hash":"04d7f7d21e1ea65e837700acc1121a4b1e83f6ab","modified":1751031117306},{"_id":"source/.obsidian/appearance.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1753346781896},{"_id":"source/.obsidian/app.json","hash":"0f285b534318ec6420714e235f8d6cb3541d8907","modified":1753346781895},{"_id":"source/.obsidian/core-plugins.json","hash":"2a08642e2455d9db3afbaebcfb27b2884a1fb59e","modified":1753346781419},{"_id":"source/Serve/SSH面试.md","hash":"4adcfbee2259eb179b60f2fad3a992ff4ba7aa61","modified":1753348603709},{"_id":"source/Serve/Shell.md","hash":"b858cb282617fb0956d960215c8e84d1ccf909c6","modified":1752754757558},{"_id":"source/.obsidian/workspace.json","hash":"5f62d02d060929cd46ebdc860c523bb17eba1f19","modified":1753348842349},{"_id":"source/Serve/Tomcat基础.md","hash":"2814365897c501ec61ce268e23ddd0411a7f13bf","modified":1753347974168},{"_id":"source/Serve/SSH概念.md","hash":"fa82e9fe3e901046e22be5c03e32399c4bc1e171","modified":1752816274384},{"_id":"source/Serve/为什么称Tomcat为服务器？.md","hash":"807e75a096ce49810ce270080ad9e86a38a61e2e","modified":1752662398988},{"_id":"source/数据结构/index.md","hash":"4c189703e192b56bf0f60ba5ee9d35462c3a3212","modified":1753347665290},{"_id":"source/Serve/Tomcat面试.md","hash":"d3aa822fa67d381a557fad7da0f0067aad8e0b39","modified":1753348116632},{"_id":"source/Serve/index.md","hash":"68fd0aa33c6920fdb6e8cdaead6e37a53d5a41e4","modified":1753348217873},{"_id":"source/数据结构/数组（顺序存储）基本原理.md","hash":"ac1367c9cb3deff25e5c6da9f7ef7f55ea0df575","modified":1752678065003},{"_id":"source/数据结构/动态数组代码实现.md","hash":"ce5dbd2966a01bc8f6e0b193ae11a3f97925486d","modified":1752910351749},{"_id":"source/Debug/index.md","hash":"cc9c91fd6aceaf7c8d45f868b7334bf3aed957fe","modified":1753347849369},{"_id":"source/Debug/使用Docker自托管Obsidian并通过网页浏览器访问.md","hash":"47e503e37661d9c67cc997e0f9f6ce1819f095ab","modified":1753348876593},{"_id":"source/数据结构/链表代码实现.md","hash":"cb350b8c2b827358f19056b834048e9e4f2de3e9","modified":1752921880836},{"_id":"source/Debug/博客流程.md","hash":"17d8d14a95ef1e2e794c1fcd3b0571e0f492e5d9","modified":1753348450162},{"_id":"source/数据结构/链表（链式存储）基本原理.md","hash":"017e6774a84bc23ee214de9e09335c3d07427e64","modified":1752750230588},{"_id":"source/images/Pastedimage20250615170843.png","hash":"7b7a71e247393af48dfedcd03852fa2fc3f21fb9","modified":1749978523781},{"_id":"source/images/Pastedimage20250615172423.png","hash":"bab763c6f5d11648e13f3184407fa3f63d72f51d","modified":1749979463732},{"_id":"source/images/Pastedimage20250615154243.png","hash":"d1072ea1435886d68292a14ec6f91a69df24ff36","modified":1749973363641},{"_id":"source/images/Pastedimage20250615173326.png","hash":"7c25360c9cc092acca14fb194d89fbdcd28b69c1","modified":1749980006027},{"_id":"source/images/Pastedimage20250615175444.png","hash":"5c570b1c5cd756410875ab019745a4bd933ed1d2","modified":1749981284055},{"_id":"source/images/Pastedimage20250615172020.png","hash":"287e42bc4a16f00698823170ea61249949139221","modified":1749979220438},{"_id":"source/images/Pastedimage20250615175558.png","hash":"10e11dec577257727fac0d3e84a05fa5314198cb","modified":1749981358413},{"_id":"source/images/Pastedimage20250615184116.png","hash":"4916dc0d99713069f7a71c0d6224aab013ab6343","modified":1749984076894},{"_id":"source/images/Pastedimage20250615175613.png","hash":"dcb37094635acdc153b7731a4f8a8499535ad6ef","modified":1749981373173},{"_id":"source/images/Pastedimage20250615195658.png","hash":"af0157dd38d013c05880bcc1f6c57bea7721f1f0","modified":1749988618638},{"_id":"source/images/Pastedimage20250615213033.png","hash":"ac1ab4a24982b1544349e8514dccd44920b0d941","modified":1749994233464},{"_id":"source/images/Pastedimage20250615211618.png","hash":"fc83ae0142b34f6254ee391f7251fce3fbb44d7b","modified":1749993378522},{"_id":"source/images/Pastedimage20250615213603.png","hash":"4d66767a0eaa866f42f89d3c2f9692907144a8f1","modified":1749994563826},{"_id":"source/images/Pastedimage20250615223116.png","hash":"54aa531107a7fa450cbec6949f9440bd703bcd83","modified":1749997876144},{"_id":"source/images/Pastedimage20250615223111.png","hash":"513dcbc39dd434cabf019a6eea78256fb8167af6","modified":1749997871086},{"_id":"source/images/Pastedimage20250615223538.png","hash":"cf39b6b5f9d2a7d1a9b5013283bcf2589f1b0c0e","modified":1749998138600},{"_id":"source/images/Pastedimage20250616212809.png","hash":"ce297fb24fa844351d8f7f953a1c4d716b6ea124","modified":1750080489331},{"_id":"source/images/Pastedimage20250615223118.png","hash":"54aa531107a7fa450cbec6949f9440bd703bcd83","modified":1749997878694},{"_id":"source/images/Pastedimage20250615230527.png","hash":"21e9faf20a6c1c3f186356e53690fe89b2caabde","modified":1749999927572},{"_id":"source/images/Pastedimage20250616213051.png","hash":"86a44f8a29b555e4aa4e1c5cbc3ef057f4a31b93","modified":1750080651779},{"_id":"source/images/Pastedimage20250616212818.png","hash":"843be5e635391f83ef21161dd40432991df331fd","modified":1750080498218},{"_id":"source/images/Pastedimage20250617210149.png","hash":"ebadca84d0e85954244fb3aeb155e0d3c6025679","modified":1750165309324},{"_id":"source/images/Pastedimage20250616213103.png","hash":"50332bf8167328dee4b9ef8107d27587ae22e563","modified":1750080663465},{"_id":"source/images/Pastedimage20250616213139.png","hash":"1ceb8afbccde54cbdafbcbef09e7a1ccc0e703fa","modified":1750080699198},{"_id":"source/images/Pastedimage20250619132929.png","hash":"a26246ae54a655cf5090c5387fc6c5bc278cbb96","modified":1750310969593},{"_id":"source/images/Pastedimage20250618163248.png","hash":"1d524f9fac00d74f709f2029c71ea006f6b520aa","modified":1750235568596},{"_id":"source/images/Pastedimage20250619142148.png","hash":"79202edd3b9c2696f249faf4d63fb8e2d7a9110d","modified":1750314108648},{"_id":"source/images/Pastedimage20250724161028.png","hash":"2aaab456d7583f042be2b47d97b2967435b230b5","modified":1753344628758},{"_id":"source/images/Pastedimage20250724161308.png","hash":"3795b4ccdda31e65b52682b457ed5ae990519a27","modified":1753344788914},{"_id":"source/CS61B/.obsidian/app.json","hash":"009a3952701c890112985208d91a34d936f858dc","modified":1750065122976},{"_id":"source/images/Pastedimage20250724162824.png","hash":"c39a6680aa2fc403d431215763cf2fcf5083426b","modified":1753345704351},{"_id":"source/CS61B/.obsidian/appearance.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1750065122977},{"_id":"source/_posts/CS61B/index.md","hash":"8d2d58c609341aba4ca7e6381f463966636661e4","modified":1752570194285},{"_id":"source/CS61B/.obsidian/workspace.json","hash":"5173122b5ce0909f4a2358763b906ba0bc058cdf","modified":1750065123005},{"_id":"source/_posts/数据结构/index.md","hash":"19fabe177a131c3c38c1445062324ceea54d0435","modified":1753348129125},{"_id":"source/_posts/Debug/index.md","hash":"66eaf33b4fe21ba229ebfa0d4dbb59445d3e265a","modified":1753347906824},{"_id":"source/_posts/Serve/index.md","hash":"ec505dcccfea2a92f80f00fd15506b19511ecb20","modified":1753348776413},{"_id":"source/CS61B/.obsidian/core-plugins.json","hash":"2a08642e2455d9db3afbaebcfb27b2884a1fb59e","modified":1750065122486},{"_id":"source/images/Pastedimage20250615223202.png","hash":"edd8c4c4a706a8ef8a05a91c461f53a4f7114a4b","modified":1749997922580},{"_id":"source/images/Pastedimage20250724161956.png","hash":"d5e840504e9fcfc773489cbef256f31d27f63f19","modified":1753345196578},{"_id":"source/images/Pastedimage20250724161951.png","hash":"d5e840504e9fcfc773489cbef256f31d27f63f19","modified":1753348318303},{"_id":"node_modules/hexo-theme-next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1749893986706},{"_id":"node_modules/hexo-theme-next/README.md","hash":"da88b205b702bcf222548466ddcac1883c9e347e","modified":1749893986931},{"_id":"node_modules/hexo-theme-next/_vendors.yml","hash":"49743c5be6dfff1fb78db0c8042f1b72b596201b","modified":1749893987214},{"_id":"node_modules/hexo-theme-next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1749893986573},{"_id":"node_modules/hexo-theme-next/package.json","hash":"ac9f70b4cb0c0385fc89f51acfb4a8507cdba992","modified":1749893986564},{"_id":"node_modules/hexo-theme-next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1749893986576},{"_id":"node_modules/hexo-theme-next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1749893987204},{"_id":"node_modules/hexo-theme-next/languages/ar.yml","hash":"7d0f39e8684284a04bb9808521c87fecda8bd131","modified":1749893987218},{"_id":"node_modules/hexo-theme-next/languages/bn.yml","hash":"564bed75da6e05b11dce6164508f97a15e2fb6c2","modified":1749893987220},{"_id":"node_modules/hexo-theme-next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1749893986929},{"_id":"node_modules/hexo-theme-next/_config.yml","hash":"5d78b4d02279d87a45724d1616c01b738c084adc","modified":1749893987212},{"_id":"node_modules/hexo-theme-next/languages/de.yml","hash":"79b37df731c29665dee6cd7c90d278e1edfb6e24","modified":1749893987222},{"_id":"node_modules/hexo-theme-next/languages/es.yml","hash":"dffc63ef42e1266b88e0acf08994fd17a9908d53","modified":1749893987589},{"_id":"node_modules/hexo-theme-next/languages/en.yml","hash":"ba0fd79a2b1d8db01a034180556061745965ff05","modified":1749893987225},{"_id":"node_modules/hexo-theme-next/languages/fa.yml","hash":"f3ffc444599f4ac92d62e9ed00a1490ebc277d70","modified":1749893987592},{"_id":"node_modules/hexo-theme-next/languages/eo.yml","hash":"e34bb33ae827bf2f0727088599a73bc64bdad1b0","modified":1749893987227},{"_id":"node_modules/hexo-theme-next/languages/fr.yml","hash":"8ac44e58f71a38b7697a2f7f98a6971ed818cb5b","modified":1749893987595},{"_id":"node_modules/hexo-theme-next/languages/ko.yml","hash":"d345a303310c8a5f4836c3683f3580f861ebd1b4","modified":1749893987603},{"_id":"node_modules/hexo-theme-next/languages/it.yml","hash":"16d716ecfd748def2f6486ef5a82d0ab7ceb4890","modified":1749893987598},{"_id":"node_modules/hexo-theme-next/languages/id.yml","hash":"929df147f4f17d638b07de5fe52ca13e2549ab1c","modified":1749893987596},{"_id":"node_modules/hexo-theme-next/languages/pt.yml","hash":"b62faaa767a45a613dd042b5f1903675eb5a8cf9","modified":1749893987608},{"_id":"node_modules/hexo-theme-next/languages/ja.yml","hash":"543222bfc516aab6c33e8534f807972ecb8943a9","modified":1749893987601},{"_id":"node_modules/hexo-theme-next/languages/nl.yml","hash":"3cb3687696635ec71b4ca40c5fc43b56acc8843e","modified":1749893987604},{"_id":"node_modules/hexo-theme-next/languages/ru.yml","hash":"c6d8de0ff7d8148d09993257cfd3b7aca755696c","modified":1749893987610},{"_id":"node_modules/hexo-theme-next/languages/pt-BR.yml","hash":"76b8576ce228d540a16b1f0af5af2cce20923194","modified":1749893987606},{"_id":"node_modules/hexo-theme-next/languages/si.yml","hash":"2d712eedf3f60d04d36c3108cf5a12e2a52e875c","modified":1749893987612},{"_id":"node_modules/hexo-theme-next/languages/tr.yml","hash":"a57e4ed089b893a95f5e1ecff17ce625165f4d46","modified":1749893987616},{"_id":"node_modules/hexo-theme-next/languages/tk.yml","hash":"511726054873f6f8d7ce0d2e803f6731de0ddbe7","modified":1749893987615},{"_id":"node_modules/hexo-theme-next/languages/uk.yml","hash":"ff537047b4b4c3ca9a7b64fa7f428a9942751eeb","modified":1749893987617},{"_id":"node_modules/hexo-theme-next/languages/zh-HK.yml","hash":"8eb6a9f231ce1bfa54cc54418ccf14f01dcc9a31","modified":1749893987622},{"_id":"node_modules/hexo-theme-next/languages/vi.yml","hash":"7ebcba5e1128784195e4681dffc9d34c4e873fec","modified":1749893987619},{"_id":"node_modules/hexo-theme-next/languages/zh-CN.yml","hash":"741d7efe0262c9cdc2c648014b55599665d90f6b","modified":1749893987620},{"_id":"node_modules/hexo-theme-next/layout/_layout.njk","hash":"b17d44bd7379c23241053a0b7fbd38c9c43cc239","modified":1749893986933},{"_id":"node_modules/hexo-theme-next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1749893986939},{"_id":"node_modules/hexo-theme-next/languages/zh-TW.yml","hash":"5c0f00cdac3f4727b880dd223f622a535736fa8e","modified":1749893987623},{"_id":"node_modules/hexo-theme-next/languages/th.yml","hash":"6829e998b39f8f143e20b276bb1f62d95a29de58","modified":1749893987613},{"_id":"node_modules/hexo-theme-next/layout/index.njk","hash":"dd63e488ae8cc144335a5958acedf6a16edd7a92","modified":1749893986976},{"_id":"node_modules/hexo-theme-next/layout/category.njk","hash":"c68b7343d0f8145010f93351908cc36ef6212ec1","modified":1749893986945},{"_id":"node_modules/hexo-theme-next/layout/page.njk","hash":"af6d7570621be760536c216a56d74e40a1cceae2","modified":1749893986995},{"_id":"node_modules/hexo-theme-next/layout/post.njk","hash":"0bfce9f133f501a9a4837257e3b862b3bbca15be","modified":1749893987014},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CONTRIBUTING.md","hash":"a089f7a8368ab0b7d7b9b7ec0ac3767a453435df","modified":1749893986705},{"_id":"node_modules/hexo-theme-next/layout/tag.njk","hash":"9e16ba20c28a7f2c6bc75aa427f48122301a30aa","modified":1749893987022},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"12a6631617695504d5cf2a94b57d87bd331bef6f","modified":1749893986579},{"_id":"node_modules/hexo-theme-next/layout/_macro/post.njk","hash":"ec9bb9c5ede773c02f0c8d8475245a8a437a2b71","modified":1749893987013},{"_id":"node_modules/hexo-theme-next/docs/zh-CN/README.md","hash":"bd9109d20dbc7feef3279386106a2efda3c98525","modified":1749893986927},{"_id":"node_modules/hexo-theme-next/docs/ru/README.md","hash":"294b6aebb8b766b5e167bcf816f485a73e0c7fa5","modified":1749893986924},{"_id":"node_modules/hexo-theme-next/layout/_partials/comments.njk","hash":"d0c470b0f6690aa217e9ada848c5e2e73fb27c6f","modified":1749893986951},{"_id":"node_modules/hexo-theme-next/layout/_partials/footer.njk","hash":"fbf8232cacf0df87e88e74860be66c9f86018302","modified":1749893986957},{"_id":"node_modules/hexo-theme-next/layout/_macro/post-collapse.njk","hash":"313637fe3569f98fd926e8cd0fcc75d098eb6e6e","modified":1749893987000},{"_id":"node_modules/hexo-theme-next/layout/_partials/languages.njk","hash":"e43f22198cccb5f6e306b1ce0d28d12a4fb891f8","modified":1749893986980},{"_id":"node_modules/hexo-theme-next/layout/_macro/sidebar.njk","hash":"547c62ab14d9e05d2d9116db9048a677fbe1fb6d","modified":1749893987018},{"_id":"node_modules/hexo-theme-next/layout/_partials/pagination.njk","hash":"bc719473ed5948ab6859449d60b8d36cfc1542b4","modified":1749893986996},{"_id":"node_modules/hexo-theme-next/layout/_partials/widgets.njk","hash":"d83fb59f02c5e6630a7770401a05c02f6f07358b","modified":1749893987031},{"_id":"node_modules/hexo-theme-next/layout/_scripts/index.njk","hash":"2a7dfffebad19b67dc9e3b2a6b2986d0630ef930","modified":1749893986969},{"_id":"node_modules/hexo-theme-next/layout/_scripts/vendors.njk","hash":"7261e24287984853c8ef08cda8bbc80cacf9bd6f","modified":1749893987028},{"_id":"node_modules/hexo-theme-next/layout/_third-party/addtoany.njk","hash":"ef64c6bfb8540cd874701236b9be47db2496e98e","modified":1749893986935},{"_id":"node_modules/hexo-theme-next/layout/_third-party/index.njk","hash":"dfd7cdd6ba89f8c3deabc27726c7a350cadafd11","modified":1749893986972},{"_id":"node_modules/hexo-theme-next/layout/_third-party/fancybox.njk","hash":"844559f46e2ff1c8be234d5763703106e2072a7b","modified":1749893986954},{"_id":"node_modules/hexo-theme-next/layout/_third-party/pace.njk","hash":"d7ad5714079f7f65446f880baf14722435ca9061","modified":1749893986992},{"_id":"node_modules/hexo-theme-next/layout/_third-party/quicklink.njk","hash":"0efed71ed530447718c4ea5bbd5fc8695b0b0d5f","modified":1749893987015},{"_id":"node_modules/hexo-theme-next/scripts/events/index.js","hash":"bd9ea82376cd87df611ea3ae077875c7c595a3df","modified":1749893986375},{"_id":"node_modules/hexo-theme-next/scripts/helpers/font.js","hash":"4c84d45daac86396edf656d2a8abe6e7583491ea","modified":1749893986363},{"_id":"node_modules/hexo-theme-next/scripts/helpers/engine.js","hash":"83235f2879567eb8686431c9554a4b99f14ab665","modified":1749893986354},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-config.js","hash":"4bc2eb87f3fa26981652f517d1ab3f81de2ab89d","modified":1749893986419},{"_id":"node_modules/hexo-theme-next/scripts/helpers/navigation.js","hash":"78107021101553c3d23e89290f7530b60cf4aa86","modified":1749893986415},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-url.js","hash":"6281d47c1de98eb38f3aa0f6df29bbb19d412173","modified":1749893986422},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-paginator.js","hash":"e86c764b546e4fbb87970cabc4135a56f9ef9fe1","modified":1749893986420},{"_id":"node_modules/hexo-theme-next/scripts/helpers/next-vendors.js","hash":"af3946a595f997eb43d9af87428e4898c9acbc82","modified":1749893986425},{"_id":"node_modules/hexo-theme-next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1749893986346},{"_id":"node_modules/hexo-theme-next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1749893986316},{"_id":"node_modules/hexo-theme-next/scripts/filters/locals.js","hash":"9eb5310664759931287dd28ea39165dfb67f12ed","modified":1749893986398},{"_id":"node_modules/hexo-theme-next/scripts/filters/post.js","hash":"fdc8a0af90035e89c3fcb754a0eb189b8951a2bc","modified":1749893986437},{"_id":"node_modules/hexo-theme-next/scripts/filters/minify.js","hash":"2063aaa1db448ebcf7b0fdbbc54d3991a368bbd3","modified":1749893986408},{"_id":"node_modules/hexo-theme-next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1749893986320},{"_id":"node_modules/hexo-theme-next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1749893986322},{"_id":"node_modules/hexo-theme-next/scripts/tags/index.js","hash":"1f6aba7820f1fb58b61969485148db21846e1aa9","modified":1749893986377},{"_id":"node_modules/hexo-theme-next/scripts/tags/group-pictures.js","hash":"f57f7e09eb6220f681fa8385082b0960502ce5c4","modified":1749893986369},{"_id":"node_modules/hexo-theme-next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1749893986387},{"_id":"node_modules/hexo-theme-next/scripts/tags/mermaid.js","hash":"7d7bbc4a9970bd4c5449bc71b94364a8ec61e5d2","modified":1749893986403},{"_id":"node_modules/hexo-theme-next/scripts/tags/link-grid.js","hash":"18a483c2d5afd701f6080ffdddf2d1321370336c","modified":1749893986391},{"_id":"node_modules/hexo-theme-next/scripts/tags/tabs.js","hash":"0eabe51da40b4b13e16419c8fe02452d9a4fef73","modified":1749893986442},{"_id":"node_modules/hexo-theme-next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1749893986431},{"_id":"node_modules/hexo-theme-next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1749893986427},{"_id":"node_modules/hexo-theme-next/scripts/tags/wavedrom.js","hash":"b44dfeeb58b41945d469141787f3dbce4b117d08","modified":1749893986562},{"_id":"node_modules/hexo-theme-next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1749893986561},{"_id":"node_modules/hexo-theme-next/source/css/_mixins.styl","hash":"e21309d4165ebb6645084eed8dd749846ae981f1","modified":1749893987050},{"_id":"node_modules/hexo-theme-next/source/css/_colors.styl","hash":"ebfe0954e3931431f46f913abe08d0212e06e7c2","modified":1749893987036},{"_id":"node_modules/hexo-theme-next/source/css/main.styl","hash":"921a58577f411cf4eb5cfd66db0a241f8f88578c","modified":1749893987097},{"_id":"node_modules/hexo-theme-next/source/css/noscript.styl","hash":"dadc81256afb127b77eac6763d5ee0ec9c77f0a3","modified":1749893987113},{"_id":"node_modules/hexo-theme-next/source/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1749893986333},{"_id":"node_modules/hexo-theme-next/source/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1749893986314},{"_id":"node_modules/hexo-theme-next/source/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1749893986341},{"_id":"node_modules/hexo-theme-next/source/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1749893986335},{"_id":"node_modules/hexo-theme-next/source/js/next-boot.js","hash":"523bbaeda463e82ab0be428cc0005717038ec63e","modified":1749893986417},{"_id":"node_modules/hexo-theme-next/source/js/motion.js","hash":"6f751f5c9499a39d7c5e1d323db3260342dd9431","modified":1749893986411},{"_id":"node_modules/hexo-theme-next/source/js/pjax.js","hash":"694b271819aab37ce473b15db9e6aded971d82e5","modified":1749893986435},{"_id":"node_modules/hexo-theme-next/source/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1749893986440},{"_id":"node_modules/hexo-theme-next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1749893987032},{"_id":"node_modules/hexo-theme-next/source/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1749893986296},{"_id":"node_modules/hexo-theme-next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1749893987033},{"_id":"node_modules/hexo-theme-next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1749893987034},{"_id":"node_modules/hexo-theme-next/source/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1749893987196},{"_id":"node_modules/hexo-theme-next/source/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1749893987199},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head-unique.njk","hash":"93c1d103d9d16581c944c51f3d0638f57c80ee41","modified":1749893986962},{"_id":"node_modules/hexo-theme-next/source/js/utils.js","hash":"345a8158e6c34e19245a07c778f5699c8673f1b1","modified":1749893986451},{"_id":"node_modules/hexo-theme-next/layout/_partials/head/head.njk","hash":"5388b157bba4a40b9312f4a45c6678974ccf0837","modified":1749893986964},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/brand.njk","hash":"dd9c4c03e99dfde0dfb8edefcb2c933f2f560efc","modified":1749893986941},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/index.njk","hash":"650de421a8ce4cf685428ffbe0087ff84cbd1356","modified":1749893986966},{"_id":"node_modules/hexo-theme-next/source/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1749893986441},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu-item.njk","hash":"41a8b0cc16f60fa085cb719d07216d86b6bc4bf8","modified":1749893986986},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/menu.njk","hash":"ee6fc2f111572d3eeab0a2fecbb2d6b3e37ab26b","modified":1749893986988},{"_id":"node_modules/hexo-theme-next/layout/_partials/header/sub-menu.njk","hash":"06480d8ec5f0b87eafd47f082f07968d7282dd5c","modified":1749893987021},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/breadcrumb.njk","hash":"89825e75cc45e9709fa6ba89883669eedaff6f46","modified":1749893986941},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1749893986994},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-copyright.njk","hash":"bfff923526d6800218f08dba6ce0bbf5c17755fd","modified":1749893987002},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1749893986944},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/schedule.njk","hash":"0f4bc8e257da60f77c0c1738607b2bde55810684","modified":1749893987016},{"_id":"node_modules/hexo-theme-next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1749893987024},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-followme.njk","hash":"c1e33b4889f75acc490af3c8bde0ec56c518ff41","modified":1749893987004},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-meta.njk","hash":"9fa47e4fb342811da590ee4adc91cf81118c0a39","modified":1749893987007},{"_id":"node_modules/hexo-theme-next/layout/_partials/search/index.njk","hash":"6ad43135bd3aecf933ffdd750763e27ade36f97c","modified":1749893986967},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-related.njk","hash":"e0986db00a0201dd3c60570f964829c84ba5bc68","modified":1749893987008},{"_id":"node_modules/hexo-theme-next/layout/_partials/sidebar/site-overview.njk","hash":"bc5708e38b6070dff0cab6bf9480971017ce4dda","modified":1749893987020},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-reward.njk","hash":"e8b8a7c41e9ec612d0c0c73419529d55d1c16256","modified":1749893987010},{"_id":"node_modules/hexo-theme-next/layout/_partials/post/post-share.njk","hash":"16696990e4ce65fc8db18c4635082a5d5d06ff07","modified":1749893987011},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/baidu-analytics.njk","hash":"6215309aee028dcb734452beec448c5afb6c63fc","modified":1749893986940},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/cloudflare.njk","hash":"a5b8297c2c383124dd6a56e256ecc0c0dcf489be","modified":1749893986949},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/google-analytics.njk","hash":"d89066ff53879693f023e540d59c86137172c529","modified":1749893986959},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/growingio.njk","hash":"8afaa772c390bd9d53a5cff9645ac3168334eb98","modified":1749893986960},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/index.njk","hash":"f900306497b133e8b098bd9f4b96b93d1d96c185","modified":1749893986971},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/matomo.njk","hash":"4e89648a8ec8194c5823064cbca39c938a799006","modified":1749893986985},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/microsoft-clarity.njk","hash":"1efeeda00db08a3c033798228dd0092ee532cc36","modified":1749893986991},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/chatra.njk","hash":"d7263fca16d0278ccf1f6aa1c6df6902a6344a09","modified":1749893986948},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/umami.njk","hash":"3343750682fbd8535e50f8129be3003ad26015b4","modified":1749893987026},{"_id":"node_modules/hexo-theme-next/layout/_third-party/analytics/plausible.njk","hash":"ef9f2bb7110507f1c4336800af9157d5fa9765bd","modified":1749893986998},{"_id":"node_modules/hexo-theme-next/layout/_third-party/chat/tidio.njk","hash":"02aab857c27fc103216029be991688b12a73a525","modified":1749893987025},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/changyan.njk","hash":"d1c950f8fbdf85e7a3eae5463767a89e858e8220","modified":1749893986946},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqus.njk","hash":"9375b19a89b7fa9474e558d085af5448d4c5c50c","modified":1749893986952},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/disqusjs.njk","hash":"0749cb6902baecdfd01f779a2a2513f6d2f6a823","modified":1749893986953},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/gitalk.njk","hash":"b63b7e2ede0d3e66e732fa1a06bda9b19e1e85d4","modified":1749893986958},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/isso.njk","hash":"64cc3bdaf644fd32c0d0a247f29f5b6904da9af3","modified":1749893986977},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/livere.njk","hash":"3b13b09fba84ec6000886890a6710736a2b8fafe","modified":1749893986982},{"_id":"node_modules/hexo-theme-next/layout/_third-party/comments/utterances.njk","hash":"5a94032bc3512a10ad4328fc19ec07b819a1d687","modified":1749893987027},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/index.njk","hash":"abf37fc55aa86702118e8fdf5bf2d389dd589aa0","modified":1749893986974},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/mathjax.njk","hash":"3677017fd4572b158311f5f5d870590ab25184e0","modified":1749893986984},{"_id":"node_modules/hexo-theme-next/layout/_third-party/math/katex.njk","hash":"1ebf658690468ea197bdd0416eb7cfa4bd0b083a","modified":1749893986979},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/algolia-search.njk","hash":"41b28f05e6233fb37700f7151f55868be10a0965","modified":1749893986937},{"_id":"node_modules/hexo-theme-next/layout/_third-party/search/localsearch.njk","hash":"e45ea3542cdc9ed7ec8447b5e6f35df4c5e82758","modified":1749893986983},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"55c2468b2b7f035881d494085527d6554f37b556","modified":1749893986943},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/firestore.njk","hash":"d32ebe94560fa95824478ebbff531bffc47b194d","modified":1749893986955},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1749893986975},{"_id":"node_modules/hexo-theme-next/layout/_third-party/statistics/lean-analytics.njk","hash":"2446e748cdc102c78492216319ac02148db7daf6","modified":1749893986981},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/mermaid.njk","hash":"099e031f52fb8e47b3af5b2684737efc9e643ee7","modified":1749893986990},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/pdf.njk","hash":"2c81984cc4f5123103460442f6e046f5b6c97127","modified":1749893986997},{"_id":"node_modules/hexo-theme-next/layout/_third-party/tags/wavedrom.njk","hash":"02202bf563fb5eedde2ccad4d6c5b9109d30a703","modified":1749893987029},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/config.js","hash":"00af4f5f9a79eaccf051f9e372d233d65d44c8a5","modified":1749893986340},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/highlight.js","hash":"8a8f752260be5b8098393f9879b61ffe904465e8","modified":1749893986373},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/injects.js","hash":"d987709267a1bc6e5014411e9983d7c49c102c16","modified":1749893986380},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/navigation.js","hash":"dd3562686d95a50375e6fd32e717ccb0d99c1e3d","modified":1749893986413},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/utils.js","hash":"5942feb3f31ed3480bf50b0f5a4a305b5bdca3d6","modified":1749893986446},{"_id":"node_modules/hexo-theme-next/scripts/events/lib/vendors.js","hash":"e2b4a9d6b08155735ec336eedc506763d5671821","modified":1749893986560},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/changyan.js","hash":"5798cfc8f63665031dd3e01debed051628cec319","modified":1749893986326},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/common.js","hash":"19a402a225c31edffc50f202a14e0d582d3db23e","modified":1749893986336},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1749893986344},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqus.js","hash":"7f71d6b271ba65ff333d5682e7575711d368c0d2","modified":1749893986347},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/disqusjs.js","hash":"a600a98e7436edeb31e291abca359885567df3c9","modified":1749893986350},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1749893986382},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/gitalk.js","hash":"7bb7dafdd7f6bca8464b54e17e552ce7f1714195","modified":1749893986364},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/livere.js","hash":"5a07d8bb52bc1d51a624ca8db54be144566c306b","modified":1749893986392},{"_id":"node_modules/hexo-theme-next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1749893986453},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1749893987075},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Mist.styl","hash":"2c800eaab6c613e5d091be2111aaa786641aa0c2","modified":1749893987104},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Pisces.styl","hash":"20d5c6aa136bbb55e03906d98ee90ad3fbaa80a7","modified":1749893987117},{"_id":"node_modules/hexo-theme-next/source/css/_variables/Muse.styl","hash":"879b49f693af0c04c285b2dd0c9cccaf77347b7c","modified":1749893987107},{"_id":"node_modules/hexo-theme-next/source/css/_variables/base.styl","hash":"b724edca546373d5eaf9b3602868f971c9094cf6","modified":1749893987063},{"_id":"node_modules/hexo-theme-next/source/js/third-party/addtoany.js","hash":"5276c8f78ee562a8965216dc67d762e59cb4a9f2","modified":1749893986302},{"_id":"node_modules/hexo-theme-next/source/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1749893986357},{"_id":"node_modules/hexo-theme-next/source/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1749893986429},{"_id":"node_modules/hexo-theme-next/source/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1749893986439},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/index.styl","hash":"8e34df131830d4fa3725e4590a672ba1cf1903e5","modified":1749893987084},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/base.styl","hash":"f316ba87f8d3299677fbf8345e1e993c35210e2e","modified":1749893987061},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/reading-progress.styl","hash":"90a86045a33c1bae49fc2f6fa1e1b53170c7f77b","modified":1749893987141},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1749893987070},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/back-to-top.styl","hash":"b8445c828d78a38e2de50bdc86b3bff66285ea0f","modified":1749893987058},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1749893987068},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/index.styl","hash":"2298e521253b3bf376a2412271bc2a7d305051f3","modified":1749893987077},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1749893987087},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/mobile.styl","hash":"48b2dfc04df6409c6e0736ccc11462ad97d349b1","modified":1749893987105},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1749893987112},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/toggles.styl","hash":"69c66aab4651e2e7ae9e65f08600144970648c60","modified":1749893987189},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1749893987182},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_header.styl","hash":"dafc6d23c80d6fe3e55a7711e94210d2479b629a","modified":1749893987039},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/pagination.styl","hash":"f4228c759db4a650c8d38745c2edd1dc83c45687","modified":1749893987115},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Gemini/index.styl","hash":"bcbf498d8d3ecea84324f0a59b7f95f389a52b8d","modified":1749893987089},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_layout.styl","hash":"6569a6640f79d247a8235b3914772c0e2f99ead2","modified":1749893987045},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_header.styl","hash":"3fbfab591f280e2e7f3b0265901c93bc4bd137ed","modified":1749893987041},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_menu.styl","hash":"f23c53e32d140091b819be2603d1afbbb5d66933","modified":1749893987046},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_layout.styl","hash":"fa4fd8f76464e214fb7318f325b13c2b62f4b478","modified":1749893987044},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/_posts-expand.styl","hash":"485d23ccb42c0d0c8ead7ea8930dd3e06d79a285","modified":1749893987051},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_menu.styl","hash":"e31f6adbb22a451f07e4661cff9a2f12e4e99a36","modified":1749893987048},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1749893987089},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sidebar.styl","hash":"c29a827e82d2820ed8977c92994da73721200fac","modified":1749893987052},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_header.styl","hash":"dc03835e42d82eaf2633cf3b627990ad3e1f5967","modified":1749893987043},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_layout.styl","hash":"a92c4eb16bdb7806079467eb022ccf193bb0f794","modified":1749893987046},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1749893987054},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1749893987090},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_menu.styl","hash":"a03f16ffc7dfdbdc6053f9fd68d77257ba0c559e","modified":1749893987049},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sidebar.styl","hash":"e792a6233e1d4dbc5fd2f10ae97b7a790b82568b","modified":1749893987053},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1749893987092},{"_id":"node_modules/hexo-theme-next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1749893987055},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1749893986371},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1749893986444},{"_id":"node_modules/hexo-theme-next/source/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1749893986331},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1749893986367},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1749893986401},{"_id":"node_modules/hexo-theme-next/source/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1749893986312},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1749893986349},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1749893986351},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1749893986384},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1749893986329},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1749893986386},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1749893986394},{"_id":"node_modules/hexo-theme-next/source/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1749893986399},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1749893986454},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/algolia-search.js","hash":"1905978ef587bf08fe088ce4693a4c08db07cfbb","modified":1749893986308},{"_id":"node_modules/hexo-theme-next/source/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1749893986366},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/mermaid.js","hash":"df01075f52302873f7de36050b5408c8d1afb452","modified":1749893986406},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1749893986361},{"_id":"node_modules/hexo-theme-next/source/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1749893986390},{"_id":"node_modules/hexo-theme-next/source/js/third-party/search/local-search.js","hash":"3968d972f47b79acc6c3fe44028bad77c9c5aab7","modified":1749893986396},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1749893986432},{"_id":"node_modules/hexo-theme-next/source/js/third-party/tags/wavedrom.js","hash":"40dcd10df6edf124088c329346e0cc0bdac74ef1","modified":1749893986563},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1749893987068},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/categories.styl","hash":"51a97a33879289904cb523ddc2d88b5b0c60fa72","modified":1749893987069},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/index.styl","hash":"098d4bd034e986fcf7e443eac4fc2193935461b7","modified":1749893987079},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1749893987147},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1749893987078},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1749893987187},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-body.styl","hash":"93f014809d6442da23f8b7d729f7375e2badba7d","modified":1749893987118},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-collapse.styl","hash":"809bab3414b1eb1ae44444eb821126868f764414","modified":1749893987119},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-followme.styl","hash":"026cd5735fd2a75bb60b7bf8bd09139583d602b9","modified":1749893987121},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-footer.styl","hash":"0f4830e19026317ed850f3be2979556e38f97f4a","modified":1749893987124},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1749893987135},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/disqusjs.styl","hash":"877a537d5b95beb048142e4fdee6f17e6ef9c7bb","modified":1749893987073},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-reward.styl","hash":"b47fb36915962309553ff7fb1782341585ed2b76","modified":1749893987137},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-header.styl","hash":"424de4f64b12c521e8c6bfbc711d7961490ab36e","modified":1749893987133},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-widgets.styl","hash":"ebfba158a0a4af3d1dabcacbc58986664de52140","modified":1749893987140},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1749893987126},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/gitalk.styl","hash":"8f094c4ac17e2ab45569b12d157747f9c7333c12","modified":1749893987075},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/index.styl","hash":"54d12e2c5d9982f7b9e5b23be5133954a8514e9d","modified":1749893987081},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/search.styl","hash":"1874e2b5d86cdeeaf2ccdc2669146a2b0c72d9db","modified":1749893987150},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/math.styl","hash":"9d995eb4871a6c273d9d51558676a1fdabf69e72","modified":1749893987099},{"_id":"node_modules/hexo-theme-next/source/css/_common/components/third-party/utterances.styl","hash":"56d90ae0559caa55b75f3c300ff2711f9ed65fc4","modified":1749893987191},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/footer/index.styl","hash":"4e967702cf4c637132346bc74ec8854426f1a68c","modified":1749893987082},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/index.styl","hash":"21acb11e397526132605eef23bde7b307aa1eab5","modified":1749893987085},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/related-posts.styl","hash":"b05908f04ef95f2d91e6eba89b12411c378d050f","modified":1749893987143},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"0847400d8579b0a2dd1bf662c78954c10adf2680","modified":1749893987152},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1749893987153},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"ce36bf1602233298e0351b4babc592315529eb26","modified":1749893987157},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-copyright.styl","hash":"56805b77fe236fac19e19c716a49363bcf986311","modified":1749893987163},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"46eece42510c2c89bb9209afb0262ad76a4b0b36","modified":1749893987160},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"24752d145c6fb8f5344dca9c7b9640839c02e009","modified":1749893987165},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/bookmark.styl","hash":"e74f4bb47a101b014ee2a1783c87f3b87323f9a0","modified":1749893987067},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"c2e354a565c8c1b32bd0ceacc972b17982758b67","modified":1749893987167},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"741566d6ac5f852b5c8dee6a8996b65e48e7c97f","modified":1749893987170},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/sidebar/site-state.styl","hash":"26dd0adfcb1db6df29c6090c8d7e9b5a43583fb0","modified":1749893987178},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/github-banner.styl","hash":"38c64c2d04e46848382bfa246a0e9c508294767b","modified":1749893987076},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/index.styl","hash":"6e0d0796ef7fbbb62ffdfb448753a850de82c74f","modified":1749893987083},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-meta.styl","hash":"a851e9d5aefcd027c95eeb323860b6da70f202d1","modified":1749893987172},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"5c31f3a86e4e6fbf2f8419415620461fa8a63c56","modified":1749893987071},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/menu.styl","hash":"a3dd3edea9c01b66b28a8367185269b9dcc3bdee","modified":1749893987100},{"_id":"node_modules/hexo-theme-next/source/css/_common/outline/header/site-nav.styl","hash":"bf3ad8b4268f763a1e26377681644887694bc009","modified":1749893987176},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"d6418fd2bbfba7b73ddf11ec62db9637fdf5d8af","modified":1749893987065},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/index.styl","hash":"9b0217e1caecd91e05572c7e8e52d32016ca312f","modified":1749893987086},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/highlight/fold.styl","hash":"42a0b65491ad85438596b3fe0b7f23973e4cef34","modified":1749893987074},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1749893987077},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/index.styl","hash":"22cd37bd5df9972d5074710896aba4424ad5161c","modified":1749893987087},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"49329a7144f3413d1c832e52a1f4954171ef11e1","modified":1749893987094},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1749893987093},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/note.styl","hash":"8213015d9cae45d2c9945f8aba9d8db39c734efc","modified":1749893987114},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"48d35dba575a7c9e8845b16652e76b7d4a4646de","modified":1749893987101},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b6654a1d7cf82577d8263faffee8af3ad4a5c0e8","modified":1749893987116},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/tabs.styl","hash":"c3be8b0738f693e750486bb71769c3dbbec174cc","modified":1749893987184},{"_id":"node_modules/hexo-theme-next/source/css/_common/scaffolding/tags/wavedrom.styl","hash":"af113411ad9cca7674177be36af8dd399680834d","modified":1749893987193},{"_id":"public/CS61B/Leb03.html","hash":"27202dfc1342aa5305231893ccf766da81f9f70a","modified":1753348886795},{"_id":"public/CS61B/index.html","hash":"3dbac372e4abaca2a9296782ceae7f0492906d5e","modified":1753348886795},{"_id":"public/CS61B/proj1a.html","hash":"e03b31c8294bd41cf0b9828757e2950aa5c2645f","modified":1753348886795},{"_id":"public/CS61B/proj0.html","hash":"9fcc82d480e00aa652448bde2c383fc4d2b0ea3a","modified":1753348886795},{"_id":"public/CS61B/proj1b.html","hash":"e45c0ffefdbadba771a47681833c59a4a639a8ca","modified":1753348886795},{"_id":"public/Serve/SSH面试.html","hash":"5a8e80d40f537961eb315c3f2ff45bda142347b6","modified":1753348886795},{"_id":"public/Serve/Tomcat基础.html","hash":"6fd41dda9152ec7fe436c62adf5e42dcfb7da70c","modified":1753348886795},{"_id":"public/Serve/Shell.html","hash":"c38d9505539df5089d1b54971117372a37645842","modified":1753348886795},{"_id":"public/数据结构/index.html","hash":"d87c4500237cf7e0eca30b5950dd9515088acd4d","modified":1753348886795},{"_id":"public/Serve/Tomcat面试.html","hash":"d4338ff3b19fafa6e12c3c03b1d0d50515bd136d","modified":1753348886795},{"_id":"public/Serve/SSH概念.html","hash":"1ae4435374a1b9453e15e237223a30838797b617","modified":1753348886795},{"_id":"public/Serve/index.html","hash":"37a0332ee1bb8099d909c3b2a269f4bd56ea5e5c","modified":1753348886795},{"_id":"public/Debug/index.html","hash":"e05e67e8177f4d161bb9a79db2feac86b83b78aa","modified":1753348886795},{"_id":"public/数据结构/链表代码实现.html","hash":"7d2f8ce7b2a29b8f5c6d70026a1608487373c19b","modified":1753348886795},{"_id":"public/Debug/使用Docker自托管Obsidian并通过网页浏览器访问.html","hash":"b083f449430acea4ddb95342e8991081e8ee165b","modified":1753348886795},{"_id":"public/数据结构/数组（顺序存储）基本原理.html","hash":"1ec3ef324563bc688f9ad6705368f7a6afc1573b","modified":1753348886795},{"_id":"public/Serve/为什么称Tomcat为服务器？.html","hash":"59b4a1820a4b60dcd5c4140272d8061927815417","modified":1753348886795},{"_id":"public/数据结构/链表（链式存储）基本原理.html","hash":"98044deb17904fac8e971846e40686f96cb0386c","modified":1753348886795},{"_id":"public/Debug/博客流程.html","hash":"43bd61f32d4aa9fe227880883a63aa55c1373c77","modified":1753348886795},{"_id":"public/数据结构/动态数组代码实现.html","hash":"06ebdcd0210fd8ca0ab8e26018cc21ef61c99529","modified":1753348886795},{"_id":"public/2025/07/16/数据结构/index/index.html","hash":"a230a2250d0171f699fd6eece39c8ef87998fc33","modified":1753348886795},{"_id":"public/2025/07/15/Serve/index/index.html","hash":"cc7f57a90e44f8dea8f7011a85fb155f55775ad2","modified":1753348886795},{"_id":"public/archives/index.html","hash":"54df61c70f6305e2f240ce5bf2c3d905db785dc9","modified":1753348886795},{"_id":"public/2025/06/14/CS61B/index/index.html","hash":"412abe86363564562ed12b5cf4c732d750c3b8e8","modified":1753348886795},{"_id":"public/2025/06/14/Debug/index/index.html","hash":"e7b726296a148deec7f19c102f0e591d03722e92","modified":1753348886795},{"_id":"public/archives/2025/index.html","hash":"23c57957acfe2ccfdd65d3f9a1ad8e10a676cebf","modified":1753348886795},{"_id":"public/archives/2025/06/index.html","hash":"54bf327d3fcde13d3c0ff3b5931c11919f1e3444","modified":1753348886795},{"_id":"public/archives/2025/07/index.html","hash":"9db878433857f006da3731152b8990eccaab0105","modified":1753348886795},{"_id":"public/categories/CS61B/index.html","hash":"efb7048dec7c0624cc2e79e2f30dc53cc3416a8c","modified":1753348886795},{"_id":"public/categories/Debug/index.html","hash":"8662fe1540eff351ce45366aeff7a069f466a1fe","modified":1753348886795},{"_id":"public/categories/数据结构/index.html","hash":"92c9faee5626fc2e8978fb6837d14ee66f74d019","modified":1753348886795},{"_id":"public/index.html","hash":"df313830f905e49ef8df96dfd848377dad08ba17","modified":1753348886795},{"_id":"public/tags/Serve/index.html","hash":"dda5058a3d07d3fde013e0b3b4c2c4584ccc2454","modified":1753348886795},{"_id":"public/images/Pastedimage20250615154243.png","hash":"d1072ea1435886d68292a14ec6f91a69df24ff36","modified":1753348886795},{"_id":"public/images/Pastedimage20250615170843.png","hash":"7b7a71e247393af48dfedcd03852fa2fc3f21fb9","modified":1753348886795},{"_id":"public/images/Pastedimage20250615173326.png","hash":"7c25360c9cc092acca14fb194d89fbdcd28b69c1","modified":1753348886795},{"_id":"public/images/Pastedimage20250615184116.png","hash":"4916dc0d99713069f7a71c0d6224aab013ab6343","modified":1753348886795},{"_id":"public/images/Pastedimage20250615172020.png","hash":"287e42bc4a16f00698823170ea61249949139221","modified":1753348886795},{"_id":"public/images/Pastedimage20250615175613.png","hash":"dcb37094635acdc153b7731a4f8a8499535ad6ef","modified":1753348886795},{"_id":"public/images/Pastedimage20250615175558.png","hash":"10e11dec577257727fac0d3e84a05fa5314198cb","modified":1753348886795},{"_id":"public/images/Pastedimage20250615213033.png","hash":"ac1ab4a24982b1544349e8514dccd44920b0d941","modified":1753348886795},{"_id":"public/images/Pastedimage20250615172423.png","hash":"bab763c6f5d11648e13f3184407fa3f63d72f51d","modified":1753348886795},{"_id":"public/images/Pastedimage20250615175444.png","hash":"5c570b1c5cd756410875ab019745a4bd933ed1d2","modified":1753348886795},{"_id":"public/images/Pastedimage20250615211618.png","hash":"fc83ae0142b34f6254ee391f7251fce3fbb44d7b","modified":1753348886795},{"_id":"public/images/Pastedimage20250615213603.png","hash":"4d66767a0eaa866f42f89d3c2f9692907144a8f1","modified":1753348886795},{"_id":"public/images/Pastedimage20250615195658.png","hash":"af0157dd38d013c05880bcc1f6c57bea7721f1f0","modified":1753348886795},{"_id":"public/images/Pastedimage20250615223116.png","hash":"54aa531107a7fa450cbec6949f9440bd703bcd83","modified":1753348886795},{"_id":"public/images/Pastedimage20250615223118.png","hash":"54aa531107a7fa450cbec6949f9440bd703bcd83","modified":1753348886795},{"_id":"public/images/Pastedimage20250615223111.png","hash":"513dcbc39dd434cabf019a6eea78256fb8167af6","modified":1753348886795},{"_id":"public/images/Pastedimage20250616212818.png","hash":"843be5e635391f83ef21161dd40432991df331fd","modified":1753348886795},{"_id":"public/images/Pastedimage20250615223538.png","hash":"cf39b6b5f9d2a7d1a9b5013283bcf2589f1b0c0e","modified":1753348886795},{"_id":"public/images/Pastedimage20250616213051.png","hash":"86a44f8a29b555e4aa4e1c5cbc3ef057f4a31b93","modified":1753348886795},{"_id":"public/images/Pastedimage20250616213103.png","hash":"50332bf8167328dee4b9ef8107d27587ae22e563","modified":1753348886795},{"_id":"public/images/Pastedimage20250615230527.png","hash":"21e9faf20a6c1c3f186356e53690fe89b2caabde","modified":1753348886795},{"_id":"public/images/Pastedimage20250617210149.png","hash":"ebadca84d0e85954244fb3aeb155e0d3c6025679","modified":1753348886795},{"_id":"public/images/Pastedimage20250616213139.png","hash":"1ceb8afbccde54cbdafbcbef09e7a1ccc0e703fa","modified":1753348886795},{"_id":"public/images/Pastedimage20250618163248.png","hash":"1d524f9fac00d74f709f2029c71ea006f6b520aa","modified":1753348886795},{"_id":"public/images/Pastedimage20250616212809.png","hash":"ce297fb24fa844351d8f7f953a1c4d716b6ea124","modified":1753348886795},{"_id":"public/images/Pastedimage20250619142148.png","hash":"79202edd3b9c2696f249faf4d63fb8e2d7a9110d","modified":1753348886795},{"_id":"public/images/Pastedimage20250724161308.png","hash":"3795b4ccdda31e65b52682b457ed5ae990519a27","modified":1753348886795},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1753348886795},{"_id":"public/images/Pastedimage20250724161028.png","hash":"2aaab456d7583f042be2b47d97b2967435b230b5","modified":1753348886795},{"_id":"public/images/Pastedimage20250619132929.png","hash":"a26246ae54a655cf5090c5387fc6c5bc278cbb96","modified":1753348886795},{"_id":"public/images/Pastedimage20250724162824.png","hash":"c39a6680aa2fc403d431215763cf2fcf5083426b","modified":1753348886795},{"_id":"public/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1753348886795},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1753348886795},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1753348886795},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"a38c6d92b368bfc42c72ad799ad03f3274957065","modified":1753348886795},{"_id":"public/images/logo.svg","hash":"099e11ab995a2c8981427a85476d082609848c77","modified":1753348886795},{"_id":"public/css/main.css","hash":"eb9f7075aa3fb3db78355ac4af75cca5f8d049d9","modified":1753348886795},{"_id":"public/css/noscript.css","hash":"4cd5301e478e0e0d4b176740ec314087ec5cb707","modified":1753348886795},{"_id":"public/js/bookmark.js","hash":"9ba4cceafd12c6d5ba8a6b986a046ef8319a7811","modified":1753348886795},{"_id":"public/js/comments-buttons.js","hash":"1a7344440321713426a0b2ab17e276b5bdf85ade","modified":1753348886795},{"_id":"public/js/config.js","hash":"4c4ebbe3b3f3841a26f9d5af6d0ba8bc6da01c54","modified":1753348886795},{"_id":"public/js/next-boot.js","hash":"523bbaeda463e82ab0be428cc0005717038ec63e","modified":1753348886795},{"_id":"public/js/comments.js","hash":"66ae2e26ea36a41b72c638ea8b220296638ae952","modified":1753348886795},{"_id":"public/js/motion.js","hash":"6f751f5c9499a39d7c5e1d323db3260342dd9431","modified":1753348886795},{"_id":"public/js/pjax.js","hash":"694b271819aab37ce473b15db9e6aded971d82e5","modified":1753348886795},{"_id":"public/js/sidebar.js","hash":"2ee359ae48273b01ba1e0768704524e08702c7eb","modified":1753348886795},{"_id":"public/js/schedule.js","hash":"a1333258726caf84f368a8f8454639c7dc1626bb","modified":1753348886795},{"_id":"public/js/third-party/addtoany.js","hash":"5276c8f78ee562a8965216dc67d762e59cb4a9f2","modified":1753348886795},{"_id":"public/js/utils.js","hash":"345a8158e6c34e19245a07c778f5699c8673f1b1","modified":1753348886795},{"_id":"public/js/third-party/fancybox.js","hash":"819f382c561fe5ec23c67cc5fabd63dd1cc22dc1","modified":1753348886795},{"_id":"public/js/third-party/pace.js","hash":"0ef04218b93561ba4d0ff420d556c3d90a756d32","modified":1753348886795},{"_id":"public/images/Pastedimage20250615223202.png","hash":"edd8c4c4a706a8ef8a05a91c461f53a4f7114a4b","modified":1753348886795},{"_id":"public/images/Pastedimage20250724161951.png","hash":"d5e840504e9fcfc773489cbef256f31d27f63f19","modified":1753348886795},{"_id":"public/images/Pastedimage20250724161956.png","hash":"d5e840504e9fcfc773489cbef256f31d27f63f19","modified":1753348886795},{"_id":"public/js/third-party/quicklink.js","hash":"eed02e6fced8e5a653077205d4d4d7834ca71472","modified":1753348886795},{"_id":"public/js/third-party/analytics/matomo.js","hash":"c6a25b26a1443caa70b47fd3dfa282271574deb5","modified":1753348886795},{"_id":"public/js/third-party/analytics/google-analytics.js","hash":"def07bcc7c17d8a0caad177fb1dd2f3a5e5b3536","modified":1753348886795},{"_id":"public/js/third-party/chat/chatra.js","hash":"c32180522788c10e51df1803aa6842ef0432ddc9","modified":1753348886795},{"_id":"public/js/third-party/chat/tidio.js","hash":"b0079f6a4601e06ca6fe46e83a2f5af553e9bc3c","modified":1753348886795},{"_id":"public/js/third-party/analytics/growingio.js","hash":"78dd3cf04082b7dbe6246e404b2aa8e726922402","modified":1753348886795},{"_id":"public/js/third-party/analytics/baidu-analytics.js","hash":"f629acc46ff40c071ffd31b77d5c7616f0fdd778","modified":1753348886795},{"_id":"public/js/third-party/comments/disqus.js","hash":"da361917d65e5dca8362f8cdeb6c8cc0e8316cec","modified":1753348886795},{"_id":"public/js/third-party/comments/changyan.js","hash":"260d1a77d6a3bb33a579d3e4cca1997003e799b5","modified":1753348886795},{"_id":"public/js/third-party/comments/isso.js","hash":"753a873b6f566aff5ba77ca23f91b78eb880ca64","modified":1753348886795},{"_id":"public/js/third-party/comments/disqusjs.js","hash":"1e826dea3f684c0515f362dc1352447a1f0eae71","modified":1753348886795},{"_id":"public/js/third-party/math/katex.js","hash":"83c54ee536e487a1031783443fe0cb63b1b4767e","modified":1753348886795},{"_id":"public/js/third-party/comments/utterances.js","hash":"f67f90eb03e284c82da2b8cf2f1e31801813c16d","modified":1753348886795},{"_id":"public/js/third-party/comments/livere.js","hash":"2247d88c934c765c43013337860774aaa99f0b31","modified":1753348886795},{"_id":"public/js/third-party/statistics/firestore.js","hash":"6e0682bb42170d61b13b786295f45f9c785f8b73","modified":1753348886795},{"_id":"public/js/third-party/math/mathjax.js","hash":"5c749b9c1c3bb738122d0516211ecff6496d4907","modified":1753348886795},{"_id":"public/js/third-party/tags/mermaid.js","hash":"df01075f52302873f7de36050b5408c8d1afb452","modified":1753348886795},{"_id":"public/js/third-party/search/algolia-search.js","hash":"1905978ef587bf08fe088ce4693a4c08db07cfbb","modified":1753348886795},{"_id":"public/js/third-party/search/local-search.js","hash":"3968d972f47b79acc6c3fe44028bad77c9c5aab7","modified":1753348886795},{"_id":"public/js/third-party/statistics/lean-analytics.js","hash":"835cbf54c49ef1327f47df70ff2636ad36b6f57d","modified":1753348886795},{"_id":"public/js/third-party/tags/wavedrom.js","hash":"40dcd10df6edf124088c329346e0cc0bdac74ef1","modified":1753348886795},{"_id":"public/js/third-party/tags/pdf.js","hash":"af78c22f0e61c8c8aa8794e585e0d632c6d4fcb8","modified":1753348886795},{"_id":"public/js/third-party/comments/gitalk.js","hash":"0ec038cf83e8ec067534f16a54041e47a3c1e59a","modified":1753348886795}],"Category":[{"name":"CS61B","_id":"cmdh6nnwe00039gv3cjhk2kak"},{"name":"Debug","_id":"cmdh6nnwn000p9gv3fut24n6q"},{"name":"数据结构","_id":"cmdh6nnwo000s9gv3a64i9hlo"}],"Data":[],"Page":[{"title":"Leb03","date":"2025-06-14T16:00:00.000Z","cssclasses":"CS61B","_content":"![Pastedimage20250615154243](/images/Pastedimage20250615154243.png)\n### Debug `BeeCountingStage` \n\n#### Expected lines modified: 1\n![Pasted20image2020250615170843](/images/Pastedimage20250615170843.png)\n跳转到`BeeCountingStage.java:54`,看到：\n```java\nthis.input.add(input);\n```\n也就是这个类有一个input变量和input局部变量，`because \"this.input\" is null`看起来应该是`this.input`的问题，向上看到：\n```java\nimport java.util.List; // this.input是个List类\n...\nprivate List<String> input; // 猜对了，有声明\npublic BeeCountingStage(In in) {  \n    this.in = in;  \n    this.responses = Map.of(\"go\", new SpeciesListStage(in));  // 没有实例化\n}\n...\nthis.input.add(input); // this.input应该是个List类(毕竟目前只讲到这个),看看引入的工具包\n```\n那加个实例化就好了，这里卡了我好一会，不明白官方怎么做到只改一行代码的：\n```java\nimport java.util.ArrayList; // 加上\n...\npublic BeeCountingStage(In in) {  \n    this.in = in;  \n    this.responses = Map.of(\"go\", new SpeciesListStage(in));  \n    this.input = new ArrayList<>(); // 加上\n}\n```\n\n#### Expected lines modified: 1\n![Pasted image 20250615172020.png](/images/Pastedimage20250615172020.png)\n简单的超出索引异常，这里比较不同的是不能根据堆栈跟踪的第一行直接判断出错的位置，只能通过调试工具找，最终修改：\n```java\nprivate int sumInput() {  \n    int sum = 0;  \n    for (int i = 0; i < this.input.size(); i++) {  \n    // 这里的 i <= this.input.size() 就是导致异常的原因\n        sum += Integer.parseInt(this.input.get(i));  \n    }  \n    return sum;  \n}\n```\n修改之后就可以通过测试了：\n![Pasted image 20250615172423.png](/images/Pastedimage20250615172423.png)\n\n复盘时看到官方说：\n```jobs \n修正SpeciesListStage中的错误。如果你在发生异常的方法内部（堆栈跟踪的第一行）没有发现问题所在，通常查看第二行，了解该方法是从何处被调用以及使用了哪些参数，这是个不错的办法。 \n```\n回去看了看出错点，的确就在下面的第三行有提到。\n\n### Debug `PalindromeStage`\n#### Expected lines modified: 3\n![Pasted image 20250615173326.png](/images/Pastedimage20250615173326.png)\n查了下含义，是算术异常，表示程序尝试执行**除以零**的操作。\n直接跳转到`SpeciesListStage.java:102`，改一下就好：\n```java\n    public static int arraySimilarity(List<String> listOne, List<String> listTwo) {  \n        ...\n        for (String o : listTwo) {  \n\t\t...\n        }  \n        if (similarObjects > 0) {  \n            return 1;  \n        }else {  \n            return 0;  \n        }  \n        //return similarObjects / listOne.size();  \n    }  \n}\n```\n\n\n#### Expected lines modified: 2-5\n![Pasted image 20250615175444.png](/images/Pastedimage20250615175444.png)\n跳转到：\n![Pasted image 20250615175613.png](/images/Pastedimage20250615175613.png)\n先`Ctl+F`找一下`Preconditions`类，发现是引入的工具包，那直接一整个复制搜索的大操作，然后从这里开始调试，但是会发现很多次返回错误点，那就很难判断到底是哪次的错误了，于是点开被折叠的堆栈跟踪。\n![Pasted image 20250615211618.png](/images/Pastedimage20250615211618.png)\n从第一条蓝色标注的开始看(虽然不知道什么原理，但是从上面的经验来看，标蓝的最有可能)\n后来复盘时查了下，写在下面：\n* 在 IDE的报错堆栈信息里，标蓝的部分一般是**与你当前项目代码直接相关的类和方法** ，也就是你自己编写的代码文件里的内容，方便你快速定位到项目中出错的具体位置\n* 不标蓝的，是 **JDK 内部的类和方法** 。这些属于 Java 标准库的代码，不是你项目里自己写的代码。IDE 通常不会把它们标蓝突出显示，因为一般情况下，我们不会去修改 JDK 源码，主要是聚焦在自己项目代码里找问题，它们更多是辅助说明错误发生时的调用链路。\n然后点旁边的灯泡，会看到提示：\n![Pasted image 20250615184116.png](/images/Pastedimage20250615184116.png)\n这个比较好改，仔细点就行：\n```java\nprivate static IntList digitsToIntList(String s) { \n    int[] a = new int[s.length()];  \n    for (int i = s.length(); i >= 1; i--) {  \n        a[s.length() - i] = Character.getNumericValue(s.charAt(i-1));  \n    } \n    return IntList.of(a);  \n}\n```\n\n接下来先看官方提示：\n```\n如果你还没有，请通读上面的注释。查看调用`digitsToIntList`的方法。如果你在该方法中设置断点并通过调试器运行，我们是否曾经退出`while`循环？我们需要满足什么条件才能跳出`while`循环？这个条件是否得到满足？尝试结合使用Java可视化工具，这样你就可以借助可视化工具更仔细地检查这个错误。\n```\n直接`ctl+F`找到调用`digitsToIntList` 的方法`playStage`，大概看一遍就能找到第一个比较明显的错误：\n![Pasted image 20250615213033.png](/images/Pastedimage20250615213033.png)\n一看就是死循环的料，我的修改方案是引入一个`boolean`值：\n```java\n    boolean finish = false;  // 修改\n    while (!finish) {  // 修改\n        ...\n        while (!AdventureUtils.isInt(input)) {  \n            ...\n        }  \n        ...\n        if (numLst.equals(reversedLst)) {  \n            System.out.println(\"Wow, nice room number!\");  \n            finish = true;  // 修改\n            break;  \n        }\n        ...\n    }  \n}\n```\n\n之后在运行就会一直进入死循环：\n![Pasted image 20250615213603.png](/images/Pastedimage20250615213603.png)\n通过调试工具发现问题在45行，结果一直为`false`:\n```java\nif (numLst.equals(reversedLst)) {  \n    System.out.println(\"Wow, nice room number!\");  \n    finish = true;  \n    break;  \n}\n```\n就是这里卡了我好久，一个个说：\n首先是：\n```java\npublic void playStage() { \n        ...\n    while (!finish) {  \n        String input = in.readLine();\n        while (!AdventureUtils.isInt(input)) {  \n            ...\n            input = this.in.readLine();  \n        }  \n        ...\n    }\n}\n```\n我不理解`in.readLine()`到底是什么，找资料可以知道这是'读取输入流从当前位置到下一行结束符（\\n、\\r或\\r\\n）的所有字符，并返回为字符串'的作用，但是我没有找到什么`输入流`，调试工具里看它们也是突然冒出来的，后来我以为`输入流`指的是开始时输出的一大串，然后通过调试工具发现，`input`的值和我预期的不同：\n```\ninput值的变化：'404'->'va cafe'->'go'->'null'->一直为'null'\n```\n所以我的猜想是错的，后来我猜想这个程序是找到回文数的目的，那会不会准确的程序应该在`input = 404`时就结束，后来通过调试根据发现：\n```java\npublic boolean equals(Object other) {  \n    if (other instanceof IntList oL) {  \n        if (first != oL.first) {  \n            return false;  //本来改反悔true的值，却返回false\n        } else if (rest == null && oL.rest == null) {  \n            ...\n        } else if (rest != null && oL.rest != null) {  \n            ...  \n        } else {  \n            ... \n        }  \n    }  \n    return false;  \n}\n```\n最后只要把对应的`return false;`改成`return true;`就行了。\n\n复盘时，关于`输入流`,我想到个有意思的：\n```java\npublic class ReadLineExample {\n    public static void main(String[] args) {\n        // 1. 第1次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  \n\n        // 2. 创建Scanner（初始化扫描器，不触发输入）\n        Scanner scanner = new Scanner(System.in); \n\n        // 3. 第2次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  \n\n        // 4. 第3次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  // 第六行代码\n\n        // 5. 关键：仅读取1次用户输入！\n        // 程序会暂停，等待用户在控制台输入（无论前面打印多少次提示）\n        String line = scanner.nextLine();  // 第七行代码\n\n        // 6. 输出结果\n        System.out.println(\"你输入的内容是：\" + line);\n        scanner.close();\n    }\n}\n```\n如果在计算机刚刚读取完第六行代码(上面代码里标注的一行)，在读取第七行前输入，那是不是就会卡bug了，用户的输入信息丢失。\n查了下，遗憾地发现不会：\n即使 “计算机刚刚读完第 6 行还没执行第 7 行”，用户此时在控制台输入内容：\n- 输入的内容会被**暂存到系统的输入缓冲区**（属于 `System.in` 的一部分），不会丢失。\n- 当程序执行到 `scanner.nextLine()` 时，会直接从缓冲区读取用户输入的内容，程序继续执行。\n\n### Debug `MachineStage`\n#### Expected lines modified: 2-5\n\n这一块写的很顺利，逻辑也很流畅：\n先运行一遍，通过调试工具的查看差异功能，定位到`machineResult`参数，通过参数的定义锁定`sumOfElementwiseMax(arrOne, arrTwo)`方法，在这里打上断点，开始调试：\n\n![Pasted image 20250615223538.png](/images/Pastedimage20250615223538.png)\n发现`maxes`数组错误，定位到`arrayMax`方法，打上断点，发现`biggerValue`错了：\n![Pasted image 20250615223111.png](/images/Pastedimage20250615223111.png)\n定位到`mysteryMax`方法，重写方法：\n```java\npublic static int mysteryMax(int a, int b) {  \n    int max;  \n    if(a > b) {  \n        max = a;  \n    }else {  \n        max = b;  \n    }  \n    return max;  \n}\n```\n再运行程序，依然错，通过调试工具的查看差异功能，定位`machineResult`参数，再查看`sumOfElementwiseMax(arrOne, arrTwo)`方法，`maxes`数组没有问题，查看`arraySum`方法，通过调试工具发现`mysteryAdd`方法的错误，这里有个小坑，我一开始理所当然的以为`mysteryAdd`方法返回的应该时两数之和，但是运行错误，仔细看才发现不对：\n```java\npublic static int mysteryAdd(int a, int b) {  \n    return b;\n```\n\n最后运行程序成功：\n![Pasted image 20250615230527.png](/images/Pastedimage20250615230527.png)\n\n以上就是这次`Lab03`的内容。","source":"CS61B/Leb03.md","raw":"---\ntitle: Leb03\ndate: 2025-06-15\ncssclasses: CS61B\n---\n![Pastedimage20250615154243](/images/Pastedimage20250615154243.png)\n### Debug `BeeCountingStage` \n\n#### Expected lines modified: 1\n![Pasted20image2020250615170843](/images/Pastedimage20250615170843.png)\n跳转到`BeeCountingStage.java:54`,看到：\n```java\nthis.input.add(input);\n```\n也就是这个类有一个input变量和input局部变量，`because \"this.input\" is null`看起来应该是`this.input`的问题，向上看到：\n```java\nimport java.util.List; // this.input是个List类\n...\nprivate List<String> input; // 猜对了，有声明\npublic BeeCountingStage(In in) {  \n    this.in = in;  \n    this.responses = Map.of(\"go\", new SpeciesListStage(in));  // 没有实例化\n}\n...\nthis.input.add(input); // this.input应该是个List类(毕竟目前只讲到这个),看看引入的工具包\n```\n那加个实例化就好了，这里卡了我好一会，不明白官方怎么做到只改一行代码的：\n```java\nimport java.util.ArrayList; // 加上\n...\npublic BeeCountingStage(In in) {  \n    this.in = in;  \n    this.responses = Map.of(\"go\", new SpeciesListStage(in));  \n    this.input = new ArrayList<>(); // 加上\n}\n```\n\n#### Expected lines modified: 1\n![Pasted image 20250615172020.png](/images/Pastedimage20250615172020.png)\n简单的超出索引异常，这里比较不同的是不能根据堆栈跟踪的第一行直接判断出错的位置，只能通过调试工具找，最终修改：\n```java\nprivate int sumInput() {  \n    int sum = 0;  \n    for (int i = 0; i < this.input.size(); i++) {  \n    // 这里的 i <= this.input.size() 就是导致异常的原因\n        sum += Integer.parseInt(this.input.get(i));  \n    }  \n    return sum;  \n}\n```\n修改之后就可以通过测试了：\n![Pasted image 20250615172423.png](/images/Pastedimage20250615172423.png)\n\n复盘时看到官方说：\n```jobs \n修正SpeciesListStage中的错误。如果你在发生异常的方法内部（堆栈跟踪的第一行）没有发现问题所在，通常查看第二行，了解该方法是从何处被调用以及使用了哪些参数，这是个不错的办法。 \n```\n回去看了看出错点，的确就在下面的第三行有提到。\n\n### Debug `PalindromeStage`\n#### Expected lines modified: 3\n![Pasted image 20250615173326.png](/images/Pastedimage20250615173326.png)\n查了下含义，是算术异常，表示程序尝试执行**除以零**的操作。\n直接跳转到`SpeciesListStage.java:102`，改一下就好：\n```java\n    public static int arraySimilarity(List<String> listOne, List<String> listTwo) {  \n        ...\n        for (String o : listTwo) {  \n\t\t...\n        }  \n        if (similarObjects > 0) {  \n            return 1;  \n        }else {  \n            return 0;  \n        }  \n        //return similarObjects / listOne.size();  \n    }  \n}\n```\n\n\n#### Expected lines modified: 2-5\n![Pasted image 20250615175444.png](/images/Pastedimage20250615175444.png)\n跳转到：\n![Pasted image 20250615175613.png](/images/Pastedimage20250615175613.png)\n先`Ctl+F`找一下`Preconditions`类，发现是引入的工具包，那直接一整个复制搜索的大操作，然后从这里开始调试，但是会发现很多次返回错误点，那就很难判断到底是哪次的错误了，于是点开被折叠的堆栈跟踪。\n![Pasted image 20250615211618.png](/images/Pastedimage20250615211618.png)\n从第一条蓝色标注的开始看(虽然不知道什么原理，但是从上面的经验来看，标蓝的最有可能)\n后来复盘时查了下，写在下面：\n* 在 IDE的报错堆栈信息里，标蓝的部分一般是**与你当前项目代码直接相关的类和方法** ，也就是你自己编写的代码文件里的内容，方便你快速定位到项目中出错的具体位置\n* 不标蓝的，是 **JDK 内部的类和方法** 。这些属于 Java 标准库的代码，不是你项目里自己写的代码。IDE 通常不会把它们标蓝突出显示，因为一般情况下，我们不会去修改 JDK 源码，主要是聚焦在自己项目代码里找问题，它们更多是辅助说明错误发生时的调用链路。\n然后点旁边的灯泡，会看到提示：\n![Pasted image 20250615184116.png](/images/Pastedimage20250615184116.png)\n这个比较好改，仔细点就行：\n```java\nprivate static IntList digitsToIntList(String s) { \n    int[] a = new int[s.length()];  \n    for (int i = s.length(); i >= 1; i--) {  \n        a[s.length() - i] = Character.getNumericValue(s.charAt(i-1));  \n    } \n    return IntList.of(a);  \n}\n```\n\n接下来先看官方提示：\n```\n如果你还没有，请通读上面的注释。查看调用`digitsToIntList`的方法。如果你在该方法中设置断点并通过调试器运行，我们是否曾经退出`while`循环？我们需要满足什么条件才能跳出`while`循环？这个条件是否得到满足？尝试结合使用Java可视化工具，这样你就可以借助可视化工具更仔细地检查这个错误。\n```\n直接`ctl+F`找到调用`digitsToIntList` 的方法`playStage`，大概看一遍就能找到第一个比较明显的错误：\n![Pasted image 20250615213033.png](/images/Pastedimage20250615213033.png)\n一看就是死循环的料，我的修改方案是引入一个`boolean`值：\n```java\n    boolean finish = false;  // 修改\n    while (!finish) {  // 修改\n        ...\n        while (!AdventureUtils.isInt(input)) {  \n            ...\n        }  \n        ...\n        if (numLst.equals(reversedLst)) {  \n            System.out.println(\"Wow, nice room number!\");  \n            finish = true;  // 修改\n            break;  \n        }\n        ...\n    }  \n}\n```\n\n之后在运行就会一直进入死循环：\n![Pasted image 20250615213603.png](/images/Pastedimage20250615213603.png)\n通过调试工具发现问题在45行，结果一直为`false`:\n```java\nif (numLst.equals(reversedLst)) {  \n    System.out.println(\"Wow, nice room number!\");  \n    finish = true;  \n    break;  \n}\n```\n就是这里卡了我好久，一个个说：\n首先是：\n```java\npublic void playStage() { \n        ...\n    while (!finish) {  \n        String input = in.readLine();\n        while (!AdventureUtils.isInt(input)) {  \n            ...\n            input = this.in.readLine();  \n        }  \n        ...\n    }\n}\n```\n我不理解`in.readLine()`到底是什么，找资料可以知道这是'读取输入流从当前位置到下一行结束符（\\n、\\r或\\r\\n）的所有字符，并返回为字符串'的作用，但是我没有找到什么`输入流`，调试工具里看它们也是突然冒出来的，后来我以为`输入流`指的是开始时输出的一大串，然后通过调试工具发现，`input`的值和我预期的不同：\n```\ninput值的变化：'404'->'va cafe'->'go'->'null'->一直为'null'\n```\n所以我的猜想是错的，后来我猜想这个程序是找到回文数的目的，那会不会准确的程序应该在`input = 404`时就结束，后来通过调试根据发现：\n```java\npublic boolean equals(Object other) {  \n    if (other instanceof IntList oL) {  \n        if (first != oL.first) {  \n            return false;  //本来改反悔true的值，却返回false\n        } else if (rest == null && oL.rest == null) {  \n            ...\n        } else if (rest != null && oL.rest != null) {  \n            ...  \n        } else {  \n            ... \n        }  \n    }  \n    return false;  \n}\n```\n最后只要把对应的`return false;`改成`return true;`就行了。\n\n复盘时，关于`输入流`,我想到个有意思的：\n```java\npublic class ReadLineExample {\n    public static void main(String[] args) {\n        // 1. 第1次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  \n\n        // 2. 创建Scanner（初始化扫描器，不触发输入）\n        Scanner scanner = new Scanner(System.in); \n\n        // 3. 第2次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  \n\n        // 4. 第3次打印提示（仅输出，不阻塞）\n        System.out.println(\"请输入一行文本：\");  // 第六行代码\n\n        // 5. 关键：仅读取1次用户输入！\n        // 程序会暂停，等待用户在控制台输入（无论前面打印多少次提示）\n        String line = scanner.nextLine();  // 第七行代码\n\n        // 6. 输出结果\n        System.out.println(\"你输入的内容是：\" + line);\n        scanner.close();\n    }\n}\n```\n如果在计算机刚刚读取完第六行代码(上面代码里标注的一行)，在读取第七行前输入，那是不是就会卡bug了，用户的输入信息丢失。\n查了下，遗憾地发现不会：\n即使 “计算机刚刚读完第 6 行还没执行第 7 行”，用户此时在控制台输入内容：\n- 输入的内容会被**暂存到系统的输入缓冲区**（属于 `System.in` 的一部分），不会丢失。\n- 当程序执行到 `scanner.nextLine()` 时，会直接从缓冲区读取用户输入的内容，程序继续执行。\n\n### Debug `MachineStage`\n#### Expected lines modified: 2-5\n\n这一块写的很顺利，逻辑也很流畅：\n先运行一遍，通过调试工具的查看差异功能，定位到`machineResult`参数，通过参数的定义锁定`sumOfElementwiseMax(arrOne, arrTwo)`方法，在这里打上断点，开始调试：\n\n![Pasted image 20250615223538.png](/images/Pastedimage20250615223538.png)\n发现`maxes`数组错误，定位到`arrayMax`方法，打上断点，发现`biggerValue`错了：\n![Pasted image 20250615223111.png](/images/Pastedimage20250615223111.png)\n定位到`mysteryMax`方法，重写方法：\n```java\npublic static int mysteryMax(int a, int b) {  \n    int max;  \n    if(a > b) {  \n        max = a;  \n    }else {  \n        max = b;  \n    }  \n    return max;  \n}\n```\n再运行程序，依然错，通过调试工具的查看差异功能，定位`machineResult`参数，再查看`sumOfElementwiseMax(arrOne, arrTwo)`方法，`maxes`数组没有问题，查看`arraySum`方法，通过调试工具发现`mysteryAdd`方法的错误，这里有个小坑，我一开始理所当然的以为`mysteryAdd`方法返回的应该时两数之和，但是运行错误，仔细看才发现不对：\n```java\npublic static int mysteryAdd(int a, int b) {  \n    return b;\n```\n\n最后运行程序成功：\n![Pasted image 20250615230527.png](/images/Pastedimage20250615230527.png)\n\n以上就是这次`Lab03`的内容。","updated":"2025-06-28T03:58:56.375Z","path":"CS61B/Leb03.html","comments":1,"layout":"page","_id":"cmdh6nnwa00009gv313n0gpun","content":"<p><img src=\"/images/Pastedimage20250615154243.png\" alt=\"Pastedimage20250615154243\"></p>\n<h3 id=\"Debug-BeeCountingStage\"><a href=\"#Debug-BeeCountingStage\" class=\"headerlink\" title=\"Debug BeeCountingStage\"></a>Debug <code>BeeCountingStage</code></h3><h4 id=\"Expected-lines-modified-1\"><a href=\"#Expected-lines-modified-1\" class=\"headerlink\" title=\"Expected lines modified: 1\"></a>Expected lines modified: 1</h4><p><img src=\"/images/Pastedimage20250615170843.png\" alt=\"Pasted20image2020250615170843\"><br>跳转到<code>BeeCountingStage.java:54</code>,看到：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.input.add(input);</span><br></pre></td></tr></table></figure>\n<p>也就是这个类有一个input变量和input局部变量，<code>because &quot;this.input&quot; is null</code>看起来应该是<code>this.input</code>的问题，向上看到：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.List; <span class=\"comment\">// this.input是个List类</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; input; <span class=\"comment\">// 猜对了，有声明</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">BeeCountingStage</span><span class=\"params\">(In in)</span> &#123;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.in = in;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.responses = Map.of(<span class=\"string\">&quot;go&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">SpeciesListStage</span>(in));  <span class=\"comment\">// 没有实例化</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">this</span>.input.add(input); <span class=\"comment\">// this.input应该是个List类(毕竟目前只讲到这个),看看引入的工具包</span></span><br></pre></td></tr></table></figure>\n<p>那加个实例化就好了，这里卡了我好一会，不明白官方怎么做到只改一行代码的：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList; <span class=\"comment\">// 加上</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">BeeCountingStage</span><span class=\"params\">(In in)</span> &#123;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.in = in;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.responses = Map.of(<span class=\"string\">&quot;go&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">SpeciesListStage</span>(in));  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.input = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;(); <span class=\"comment\">// 加上</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Expected-lines-modified-1-1\"><a href=\"#Expected-lines-modified-1-1\" class=\"headerlink\" title=\"Expected lines modified: 1\"></a>Expected lines modified: 1</h4><p><img src=\"/images/Pastedimage20250615172020.png\" alt=\"Pasted image 20250615172020.png\"><br>简单的超出索引异常，这里比较不同的是不能根据堆栈跟踪的第一行直接判断出错的位置，只能通过调试工具找，最终修改：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"title function_\">sumInput</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">this</span>.input.size(); i++) &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 这里的 i &lt;= this.input.size() 就是导致异常的原因</span></span><br><span class=\"line\">        sum += Integer.parseInt(<span class=\"built_in\">this</span>.input.get(i));  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改之后就可以通过测试了：<br><img src=\"/images/Pastedimage20250615172423.png\" alt=\"Pasted image 20250615172423.png\"></p>\n<p>复盘时看到官方说：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修正SpeciesListStage中的错误。如果你在发生异常的方法内部（堆栈跟踪的第一行）没有发现问题所在，通常查看第二行，了解该方法是从何处被调用以及使用了哪些参数，这是个不错的办法。 </span><br></pre></td></tr></table></figure>\n<p>回去看了看出错点，的确就在下面的第三行有提到。</p>\n<h3 id=\"Debug-PalindromeStage\"><a href=\"#Debug-PalindromeStage\" class=\"headerlink\" title=\"Debug PalindromeStage\"></a>Debug <code>PalindromeStage</code></h3><h4 id=\"Expected-lines-modified-3\"><a href=\"#Expected-lines-modified-3\" class=\"headerlink\" title=\"Expected lines modified: 3\"></a>Expected lines modified: 3</h4><p><img src=\"/images/Pastedimage20250615173326.png\" alt=\"Pasted image 20250615173326.png\"><br>查了下含义，是算术异常，表示程序尝试执行<strong>除以零</strong>的操作。<br>直接跳转到<code>SpeciesListStage.java:102</code>，改一下就好：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">arraySimilarity</span><span class=\"params\">(List&lt;String&gt; listOne, List&lt;String&gt; listTwo)</span> &#123;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String o : listTwo) &#123;  </span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (similarObjects &gt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"comment\">//return similarObjects / listOne.size();  </span></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Expected-lines-modified-2-5\"><a href=\"#Expected-lines-modified-2-5\" class=\"headerlink\" title=\"Expected lines modified: 2-5\"></a>Expected lines modified: 2-5</h4><p><img src=\"/images/Pastedimage20250615175444.png\" alt=\"Pasted image 20250615175444.png\"><br>跳转到：<br><img src=\"/images/Pastedimage20250615175613.png\" alt=\"Pasted image 20250615175613.png\"><br>先<code>Ctl+F</code>找一下<code>Preconditions</code>类，发现是引入的工具包，那直接一整个复制搜索的大操作，然后从这里开始调试，但是会发现很多次返回错误点，那就很难判断到底是哪次的错误了，于是点开被折叠的堆栈跟踪。<br><img src=\"/images/Pastedimage20250615211618.png\" alt=\"Pasted image 20250615211618.png\"><br>从第一条蓝色标注的开始看(虽然不知道什么原理，但是从上面的经验来看，标蓝的最有可能)<br>后来复盘时查了下，写在下面：</p>\n<ul>\n<li>在 IDE的报错堆栈信息里，标蓝的部分一般是<strong>与你当前项目代码直接相关的类和方法</strong> ，也就是你自己编写的代码文件里的内容，方便你快速定位到项目中出错的具体位置</li>\n<li>不标蓝的，是 <strong>JDK 内部的类和方法</strong> 。这些属于 Java 标准库的代码，不是你项目里自己写的代码。IDE 通常不会把它们标蓝突出显示，因为一般情况下，我们不会去修改 JDK 源码，主要是聚焦在自己项目代码里找问题，它们更多是辅助说明错误发生时的调用链路。<br>然后点旁边的灯泡，会看到提示：<br><img src=\"/images/Pastedimage20250615184116.png\" alt=\"Pasted image 20250615184116.png\"><br>这个比较好改，仔细点就行：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> IntList <span class=\"title function_\">digitsToIntList</span><span class=\"params\">(String s)</span> &#123; </span><br><span class=\"line\">    <span class=\"type\">int</span>[] a = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[s.length()];  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> s.length(); i &gt;= <span class=\"number\">1</span>; i--) &#123;  </span><br><span class=\"line\">        a[s.length() - i] = Character.getNumericValue(s.charAt(i-<span class=\"number\">1</span>));  </span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> IntList.of(a);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>接下来先看官方提示：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果你还没有，请通读上面的注释。查看调用`digitsToIntList`的方法。如果你在该方法中设置断点并通过调试器运行，我们是否曾经退出`while`循环？我们需要满足什么条件才能跳出`while`循环？这个条件是否得到满足？尝试结合使用Java可视化工具，这样你就可以借助可视化工具更仔细地检查这个错误。</span><br></pre></td></tr></table></figure>\n<p>直接<code>ctl+F</code>找到调用<code>digitsToIntList</code> 的方法<code>playStage</code>，大概看一遍就能找到第一个比较明显的错误：<br><img src=\"/images/Pastedimage20250615213033.png\" alt=\"Pasted image 20250615213033.png\"><br>一看就是死循环的料，我的修改方案是引入一个<code>boolean</code>值：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">finish</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!finish) &#123;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!AdventureUtils.isInt(input)) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (numLst.equals(reversedLst)) &#123;  </span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Wow, nice room number!&quot;</span>);  </span><br><span class=\"line\">            finish = <span class=\"literal\">true</span>;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后在运行就会一直进入死循环：<br><img src=\"/images/Pastedimage20250615213603.png\" alt=\"Pasted image 20250615213603.png\"><br>通过调试工具发现问题在45行，结果一直为<code>false</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (numLst.equals(reversedLst)) &#123;  </span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Wow, nice room number!&quot;</span>);  </span><br><span class=\"line\">    finish = <span class=\"literal\">true</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>就是这里卡了我好久，一个个说：<br>首先是：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">playStage</span><span class=\"params\">()</span> &#123; </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!finish) &#123;  </span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">input</span> <span class=\"operator\">=</span> in.readLine();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!AdventureUtils.isInt(input)) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">            input = <span class=\"built_in\">this</span>.in.readLine();  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>我不理解<code>in.readLine()</code>到底是什么，找资料可以知道这是’读取输入流从当前位置到下一行结束符（\\n、\\r或\\r\\n）的所有字符，并返回为字符串’的作用，但是我没有找到什么<code>输入流</code>，调试工具里看它们也是突然冒出来的，后来我以为<code>输入流</code>指的是开始时输出的一大串，然后通过调试工具发现，<code>input</code>的值和我预期的不同：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">input值的变化：&#x27;404&#x27;-&gt;&#x27;va cafe&#x27;-&gt;&#x27;go&#x27;-&gt;&#x27;null&#x27;-&gt;一直为&#x27;null&#x27;</span><br></pre></td></tr></table></figure>\n<p>所以我的猜想是错的，后来我猜想这个程序是找到回文数的目的，那会不会准确的程序应该在<code>input = 404</code>时就结束，后来通过调试根据发现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">equals</span><span class=\"params\">(Object other)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (other <span class=\"keyword\">instanceof</span> IntList oL) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first != oL.first) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  <span class=\"comment\">//本来改反悔true的值，却返回false</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (rest == <span class=\"literal\">null</span> &amp;&amp; oL.rest == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (rest != <span class=\"literal\">null</span> &amp;&amp; oL.rest != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            ...  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            ... </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最后只要把对应的<code>return false;</code>改成<code>return true;</code>就行了。</p>\n<p>复盘时，关于<code>输入流</code>,我想到个有意思的：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ReadLineExample</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1. 第1次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2. 创建Scanner（初始化扫描器，不触发输入）</span></span><br><span class=\"line\">        <span class=\"type\">Scanner</span> <span class=\"variable\">scanner</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Scanner</span>(System.in); </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 3. 第2次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 4. 第3次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  <span class=\"comment\">// 第六行代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 5. 关键：仅读取1次用户输入！</span></span><br><span class=\"line\">        <span class=\"comment\">// 程序会暂停，等待用户在控制台输入（无论前面打印多少次提示）</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">line</span> <span class=\"operator\">=</span> scanner.nextLine();  <span class=\"comment\">// 第七行代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 6. 输出结果</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;你输入的内容是：&quot;</span> + line);</span><br><span class=\"line\">        scanner.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如果在计算机刚刚读取完第六行代码(上面代码里标注的一行)，在读取第七行前输入，那是不是就会卡bug了，用户的输入信息丢失。<br>查了下，遗憾地发现不会：<br>即使 “计算机刚刚读完第 6 行还没执行第 7 行”，用户此时在控制台输入内容：</p>\n<ul>\n<li>输入的内容会被<strong>暂存到系统的输入缓冲区</strong>（属于 <code>System.in</code> 的一部分），不会丢失。</li>\n<li>当程序执行到 <code>scanner.nextLine()</code> 时，会直接从缓冲区读取用户输入的内容，程序继续执行。</li>\n</ul>\n<h3 id=\"Debug-MachineStage\"><a href=\"#Debug-MachineStage\" class=\"headerlink\" title=\"Debug MachineStage\"></a>Debug <code>MachineStage</code></h3><h4 id=\"Expected-lines-modified-2-5-1\"><a href=\"#Expected-lines-modified-2-5-1\" class=\"headerlink\" title=\"Expected lines modified: 2-5\"></a>Expected lines modified: 2-5</h4><p>这一块写的很顺利，逻辑也很流畅：<br>先运行一遍，通过调试工具的查看差异功能，定位到<code>machineResult</code>参数，通过参数的定义锁定<code>sumOfElementwiseMax(arrOne, arrTwo)</code>方法，在这里打上断点，开始调试：</p>\n<p><img src=\"/images/Pastedimage20250615223538.png\" alt=\"Pasted image 20250615223538.png\"><br>发现<code>maxes</code>数组错误，定位到<code>arrayMax</code>方法，打上断点，发现<code>biggerValue</code>错了：<br><img src=\"/images/Pastedimage20250615223111.png\" alt=\"Pasted image 20250615223111.png\"><br>定位到<code>mysteryMax</code>方法，重写方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">mysteryMax</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> max;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(a &gt; b) &#123;  </span><br><span class=\"line\">        max = a;  </span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        max = b;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> max;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>再运行程序，依然错，通过调试工具的查看差异功能，定位<code>machineResult</code>参数，再查看<code>sumOfElementwiseMax(arrOne, arrTwo)</code>方法，<code>maxes</code>数组没有问题，查看<code>arraySum</code>方法，通过调试工具发现<code>mysteryAdd</code>方法的错误，这里有个小坑，我一开始理所当然的以为<code>mysteryAdd</code>方法返回的应该时两数之和，但是运行错误，仔细看才发现不对：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">mysteryAdd</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br></pre></td></tr></table></figure>\n\n<p>最后运行程序成功：<br><img src=\"/images/Pastedimage20250615230527.png\" alt=\"Pasted image 20250615230527.png\"></p>\n<p>以上就是这次<code>Lab03</code>的内容。</p>\n","excerpt":"","more":"<p><img src=\"/images/Pastedimage20250615154243.png\" alt=\"Pastedimage20250615154243\"></p>\n<h3 id=\"Debug-BeeCountingStage\"><a href=\"#Debug-BeeCountingStage\" class=\"headerlink\" title=\"Debug BeeCountingStage\"></a>Debug <code>BeeCountingStage</code></h3><h4 id=\"Expected-lines-modified-1\"><a href=\"#Expected-lines-modified-1\" class=\"headerlink\" title=\"Expected lines modified: 1\"></a>Expected lines modified: 1</h4><p><img src=\"/images/Pastedimage20250615170843.png\" alt=\"Pasted20image2020250615170843\"><br>跳转到<code>BeeCountingStage.java:54</code>,看到：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.input.add(input);</span><br></pre></td></tr></table></figure>\n<p>也就是这个类有一个input变量和input局部变量，<code>because &quot;this.input&quot; is null</code>看起来应该是<code>this.input</code>的问题，向上看到：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.List; <span class=\"comment\">// this.input是个List类</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;String&gt; input; <span class=\"comment\">// 猜对了，有声明</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">BeeCountingStage</span><span class=\"params\">(In in)</span> &#123;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.in = in;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.responses = Map.of(<span class=\"string\">&quot;go&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">SpeciesListStage</span>(in));  <span class=\"comment\">// 没有实例化</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">this</span>.input.add(input); <span class=\"comment\">// this.input应该是个List类(毕竟目前只讲到这个),看看引入的工具包</span></span><br></pre></td></tr></table></figure>\n<p>那加个实例化就好了，这里卡了我好一会，不明白官方怎么做到只改一行代码的：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList; <span class=\"comment\">// 加上</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"title function_\">BeeCountingStage</span><span class=\"params\">(In in)</span> &#123;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.in = in;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.responses = Map.of(<span class=\"string\">&quot;go&quot;</span>, <span class=\"keyword\">new</span> <span class=\"title class_\">SpeciesListStage</span>(in));  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.input = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;(); <span class=\"comment\">// 加上</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Expected-lines-modified-1-1\"><a href=\"#Expected-lines-modified-1-1\" class=\"headerlink\" title=\"Expected lines modified: 1\"></a>Expected lines modified: 1</h4><p><img src=\"/images/Pastedimage20250615172020.png\" alt=\"Pasted image 20250615172020.png\"><br>简单的超出索引异常，这里比较不同的是不能根据堆栈跟踪的第一行直接判断出错的位置，只能通过调试工具找，最终修改：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"type\">int</span> <span class=\"title function_\">sumInput</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">sum</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">this</span>.input.size(); i++) &#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 这里的 i &lt;= this.input.size() 就是导致异常的原因</span></span><br><span class=\"line\">        sum += Integer.parseInt(<span class=\"built_in\">this</span>.input.get(i));  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改之后就可以通过测试了：<br><img src=\"/images/Pastedimage20250615172423.png\" alt=\"Pasted image 20250615172423.png\"></p>\n<p>复盘时看到官方说：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修正SpeciesListStage中的错误。如果你在发生异常的方法内部（堆栈跟踪的第一行）没有发现问题所在，通常查看第二行，了解该方法是从何处被调用以及使用了哪些参数，这是个不错的办法。 </span><br></pre></td></tr></table></figure>\n<p>回去看了看出错点，的确就在下面的第三行有提到。</p>\n<h3 id=\"Debug-PalindromeStage\"><a href=\"#Debug-PalindromeStage\" class=\"headerlink\" title=\"Debug PalindromeStage\"></a>Debug <code>PalindromeStage</code></h3><h4 id=\"Expected-lines-modified-3\"><a href=\"#Expected-lines-modified-3\" class=\"headerlink\" title=\"Expected lines modified: 3\"></a>Expected lines modified: 3</h4><p><img src=\"/images/Pastedimage20250615173326.png\" alt=\"Pasted image 20250615173326.png\"><br>查了下含义，是算术异常，表示程序尝试执行<strong>除以零</strong>的操作。<br>直接跳转到<code>SpeciesListStage.java:102</code>，改一下就好：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">arraySimilarity</span><span class=\"params\">(List&lt;String&gt; listOne, List&lt;String&gt; listTwo)</span> &#123;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String o : listTwo) &#123;  </span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (similarObjects &gt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"comment\">//return similarObjects / listOne.size();  </span></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"Expected-lines-modified-2-5\"><a href=\"#Expected-lines-modified-2-5\" class=\"headerlink\" title=\"Expected lines modified: 2-5\"></a>Expected lines modified: 2-5</h4><p><img src=\"/images/Pastedimage20250615175444.png\" alt=\"Pasted image 20250615175444.png\"><br>跳转到：<br><img src=\"/images/Pastedimage20250615175613.png\" alt=\"Pasted image 20250615175613.png\"><br>先<code>Ctl+F</code>找一下<code>Preconditions</code>类，发现是引入的工具包，那直接一整个复制搜索的大操作，然后从这里开始调试，但是会发现很多次返回错误点，那就很难判断到底是哪次的错误了，于是点开被折叠的堆栈跟踪。<br><img src=\"/images/Pastedimage20250615211618.png\" alt=\"Pasted image 20250615211618.png\"><br>从第一条蓝色标注的开始看(虽然不知道什么原理，但是从上面的经验来看，标蓝的最有可能)<br>后来复盘时查了下，写在下面：</p>\n<ul>\n<li>在 IDE的报错堆栈信息里，标蓝的部分一般是<strong>与你当前项目代码直接相关的类和方法</strong> ，也就是你自己编写的代码文件里的内容，方便你快速定位到项目中出错的具体位置</li>\n<li>不标蓝的，是 <strong>JDK 内部的类和方法</strong> 。这些属于 Java 标准库的代码，不是你项目里自己写的代码。IDE 通常不会把它们标蓝突出显示，因为一般情况下，我们不会去修改 JDK 源码，主要是聚焦在自己项目代码里找问题，它们更多是辅助说明错误发生时的调用链路。<br>然后点旁边的灯泡，会看到提示：<br><img src=\"/images/Pastedimage20250615184116.png\" alt=\"Pasted image 20250615184116.png\"><br>这个比较好改，仔细点就行：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> IntList <span class=\"title function_\">digitsToIntList</span><span class=\"params\">(String s)</span> &#123; </span><br><span class=\"line\">    <span class=\"type\">int</span>[] a = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[s.length()];  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> s.length(); i &gt;= <span class=\"number\">1</span>; i--) &#123;  </span><br><span class=\"line\">        a[s.length() - i] = Character.getNumericValue(s.charAt(i-<span class=\"number\">1</span>));  </span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">    <span class=\"keyword\">return</span> IntList.of(a);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>接下来先看官方提示：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果你还没有，请通读上面的注释。查看调用`digitsToIntList`的方法。如果你在该方法中设置断点并通过调试器运行，我们是否曾经退出`while`循环？我们需要满足什么条件才能跳出`while`循环？这个条件是否得到满足？尝试结合使用Java可视化工具，这样你就可以借助可视化工具更仔细地检查这个错误。</span><br></pre></td></tr></table></figure>\n<p>直接<code>ctl+F</code>找到调用<code>digitsToIntList</code> 的方法<code>playStage</code>，大概看一遍就能找到第一个比较明显的错误：<br><img src=\"/images/Pastedimage20250615213033.png\" alt=\"Pasted image 20250615213033.png\"><br>一看就是死循环的料，我的修改方案是引入一个<code>boolean</code>值：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">finish</span> <span class=\"operator\">=</span> <span class=\"literal\">false</span>;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!finish) &#123;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!AdventureUtils.isInt(input)) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (numLst.equals(reversedLst)) &#123;  </span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Wow, nice room number!&quot;</span>);  </span><br><span class=\"line\">            finish = <span class=\"literal\">true</span>;  <span class=\"comment\">// 修改</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后在运行就会一直进入死循环：<br><img src=\"/images/Pastedimage20250615213603.png\" alt=\"Pasted image 20250615213603.png\"><br>通过调试工具发现问题在45行，结果一直为<code>false</code>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (numLst.equals(reversedLst)) &#123;  </span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;Wow, nice room number!&quot;</span>);  </span><br><span class=\"line\">    finish = <span class=\"literal\">true</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>就是这里卡了我好久，一个个说：<br>首先是：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">playStage</span><span class=\"params\">()</span> &#123; </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!finish) &#123;  </span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">input</span> <span class=\"operator\">=</span> in.readLine();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!AdventureUtils.isInt(input)) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">            input = <span class=\"built_in\">this</span>.in.readLine();  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>我不理解<code>in.readLine()</code>到底是什么，找资料可以知道这是’读取输入流从当前位置到下一行结束符（\\n、\\r或\\r\\n）的所有字符，并返回为字符串’的作用，但是我没有找到什么<code>输入流</code>，调试工具里看它们也是突然冒出来的，后来我以为<code>输入流</code>指的是开始时输出的一大串，然后通过调试工具发现，<code>input</code>的值和我预期的不同：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">input值的变化：&#x27;404&#x27;-&gt;&#x27;va cafe&#x27;-&gt;&#x27;go&#x27;-&gt;&#x27;null&#x27;-&gt;一直为&#x27;null&#x27;</span><br></pre></td></tr></table></figure>\n<p>所以我的猜想是错的，后来我猜想这个程序是找到回文数的目的，那会不会准确的程序应该在<code>input = 404</code>时就结束，后来通过调试根据发现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">equals</span><span class=\"params\">(Object other)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (other <span class=\"keyword\">instanceof</span> IntList oL) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first != oL.first) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  <span class=\"comment\">//本来改反悔true的值，却返回false</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (rest == <span class=\"literal\">null</span> &amp;&amp; oL.rest == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            ...</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (rest != <span class=\"literal\">null</span> &amp;&amp; oL.rest != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            ...  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            ... </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最后只要把对应的<code>return false;</code>改成<code>return true;</code>就行了。</p>\n<p>复盘时，关于<code>输入流</code>,我想到个有意思的：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ReadLineExample</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1. 第1次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2. 创建Scanner（初始化扫描器，不触发输入）</span></span><br><span class=\"line\">        <span class=\"type\">Scanner</span> <span class=\"variable\">scanner</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Scanner</span>(System.in); </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 3. 第2次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 4. 第3次打印提示（仅输出，不阻塞）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;请输入一行文本：&quot;</span>);  <span class=\"comment\">// 第六行代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 5. 关键：仅读取1次用户输入！</span></span><br><span class=\"line\">        <span class=\"comment\">// 程序会暂停，等待用户在控制台输入（无论前面打印多少次提示）</span></span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">line</span> <span class=\"operator\">=</span> scanner.nextLine();  <span class=\"comment\">// 第七行代码</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 6. 输出结果</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;你输入的内容是：&quot;</span> + line);</span><br><span class=\"line\">        scanner.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如果在计算机刚刚读取完第六行代码(上面代码里标注的一行)，在读取第七行前输入，那是不是就会卡bug了，用户的输入信息丢失。<br>查了下，遗憾地发现不会：<br>即使 “计算机刚刚读完第 6 行还没执行第 7 行”，用户此时在控制台输入内容：</p>\n<ul>\n<li>输入的内容会被<strong>暂存到系统的输入缓冲区</strong>（属于 <code>System.in</code> 的一部分），不会丢失。</li>\n<li>当程序执行到 <code>scanner.nextLine()</code> 时，会直接从缓冲区读取用户输入的内容，程序继续执行。</li>\n</ul>\n<h3 id=\"Debug-MachineStage\"><a href=\"#Debug-MachineStage\" class=\"headerlink\" title=\"Debug MachineStage\"></a>Debug <code>MachineStage</code></h3><h4 id=\"Expected-lines-modified-2-5-1\"><a href=\"#Expected-lines-modified-2-5-1\" class=\"headerlink\" title=\"Expected lines modified: 2-5\"></a>Expected lines modified: 2-5</h4><p>这一块写的很顺利，逻辑也很流畅：<br>先运行一遍，通过调试工具的查看差异功能，定位到<code>machineResult</code>参数，通过参数的定义锁定<code>sumOfElementwiseMax(arrOne, arrTwo)</code>方法，在这里打上断点，开始调试：</p>\n<p><img src=\"/images/Pastedimage20250615223538.png\" alt=\"Pasted image 20250615223538.png\"><br>发现<code>maxes</code>数组错误，定位到<code>arrayMax</code>方法，打上断点，发现<code>biggerValue</code>错了：<br><img src=\"/images/Pastedimage20250615223111.png\" alt=\"Pasted image 20250615223111.png\"><br>定位到<code>mysteryMax</code>方法，重写方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">mysteryMax</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> max;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(a &gt; b) &#123;  </span><br><span class=\"line\">        max = a;  </span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        max = b;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> max;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>再运行程序，依然错，通过调试工具的查看差异功能，定位<code>machineResult</code>参数，再查看<code>sumOfElementwiseMax(arrOne, arrTwo)</code>方法，<code>maxes</code>数组没有问题，查看<code>arraySum</code>方法，通过调试工具发现<code>mysteryAdd</code>方法的错误，这里有个小坑，我一开始理所当然的以为<code>mysteryAdd</code>方法返回的应该时两数之和，但是运行错误，仔细看才发现不对：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">mysteryAdd</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br></pre></td></tr></table></figure>\n\n<p>最后运行程序成功：<br><img src=\"/images/Pastedimage20250615230527.png\" alt=\"Pasted image 20250615230527.png\"></p>\n<p>以上就是这次<code>Lab03</code>的内容。</p>\n"},{"title":"proj1a","date":"2025-06-15T16:00:00.000Z","cssclasses":["CS61B"],"_content":"**目标：** \n* 理解数据结构中辅助链表的使用。\n* 有使用测试和测试驱动开发来评估自己数据结构正确性的经验。\n\n我参考的结构：\n![Pastedimage20250617210149.png](/images/Pastedimage20250617210149.png)\n\n这个`proj1a` 整体不难，这个结构挺有意思的，我在写`python` 的时候用的结构都是头尾两个`sentinel`节点，第一次实现这个结构，发现这个结构更加优雅简单。\n\n---\n\n### JUnit Tests\n you’ll need to create a `Node` class and introduce one or more instance variables.\n\n刚开始我希望实现一个基于数组的链表：\n![Pastedimage20250616212809.png](/images/Pastedimage20250616212809.png)\n提示运行错误：\n![[Pastedimage20250616212818.png]](/images/Pastedimage20250616212818.png)\n我发现应该是要实现一个双链表结构(认真读题真的很重要)：\n![[Pastedimage20250616213051.png]](/images/Pastedimage20250616213051.png)\n提示：\n![[Pastedimage20250616213103.png]](/images/Pastedimage20250616213103.png)\n就是内部类`Node`不该自己搞泛型，用外部类的泛型，把内部类的泛型声明去掉 ：\n![[Pastedimage20250616213139.png]](/images/Pastedimage20250616213139.png)\n\n[707. 设计链表 - 力扣](https://leetcode.cn/problems/design-linked-list/submissions/603212018/)参考了下这个。\n\n### Writing and Verifying \n下面都是先编写测试，然后实现它，就是“测试驱动开发”。我不详细写了，写一些有意思的：\n### The Remaining Methods\n[Truth测试库](https://truth.dev/api/latest/index.html?overview-summary.html)\n这里要求用递归实现`get()`方法：\n```java\n    @Override  \n    public T getRecursive(int index) {  \n        if (index >= this.length || index < 0) {  \n            return null;  \n        } else {  \n            List<T> lst = toList();  \n            return getRecindex(lst,index);  \n            }  \n        }  \n  \n    public T getRecindex(List<T> lst,int idx) {  \n        if (idx == 0) {  \n            return lst.get(idx);  \n        }else {  \n            List<T> newLst = lst.subList(1,lst.size());  \n            getRecindex(newLst,idx-1);  \n        }  \n        return null;  \n    }  \n}\n```\n然后测试一直返回`null`:\n![[Pastedimage20250619132929.png]](/images/Pastedimage20250619132929.png)\n其实是老毛病了，写`python`的时候也经常犯，递归调用的返回值被直接丢弃了，方法最终会执行 return null;。因此，无论递归过程中是否正确找到了目标元素，最终都会返回 null。  \n```java\n@Override  \npublic T getRecursive(int index) {  \n    if (index >= this.length || index < 0) {  \n        return null;  \n    } else {  \n        List<T> lst = toList();  \n        return getRecindex(lst,index);  \n        }  \n    }  \n  \npublic T getRecindex(List<T> lst,int idx) {  \n    if (idx == 0) {  \n        return lst.get(idx);  \n    }else {  \n        List<T> newLst = lst.subList(1,lst.size());  \n        // getRecindex(newLst,idx-1); \n        return getRecindex(newLst,idx-1);  \n    }  \n}\n```\n最后放个胜利结算画面\n![[Pastedimage20250619142148.png]](/images/Pastedimage20250619142148.png)","source":"CS61B/proj1a.md","raw":"---\ntitle: proj1a\ndate: 2025-06-16\ncssclasses:\n  - CS61B\n---\n**目标：** \n* 理解数据结构中辅助链表的使用。\n* 有使用测试和测试驱动开发来评估自己数据结构正确性的经验。\n\n我参考的结构：\n![Pastedimage20250617210149.png](/images/Pastedimage20250617210149.png)\n\n这个`proj1a` 整体不难，这个结构挺有意思的，我在写`python` 的时候用的结构都是头尾两个`sentinel`节点，第一次实现这个结构，发现这个结构更加优雅简单。\n\n---\n\n### JUnit Tests\n you’ll need to create a `Node` class and introduce one or more instance variables.\n\n刚开始我希望实现一个基于数组的链表：\n![Pastedimage20250616212809.png](/images/Pastedimage20250616212809.png)\n提示运行错误：\n![[Pastedimage20250616212818.png]](/images/Pastedimage20250616212818.png)\n我发现应该是要实现一个双链表结构(认真读题真的很重要)：\n![[Pastedimage20250616213051.png]](/images/Pastedimage20250616213051.png)\n提示：\n![[Pastedimage20250616213103.png]](/images/Pastedimage20250616213103.png)\n就是内部类`Node`不该自己搞泛型，用外部类的泛型，把内部类的泛型声明去掉 ：\n![[Pastedimage20250616213139.png]](/images/Pastedimage20250616213139.png)\n\n[707. 设计链表 - 力扣](https://leetcode.cn/problems/design-linked-list/submissions/603212018/)参考了下这个。\n\n### Writing and Verifying \n下面都是先编写测试，然后实现它，就是“测试驱动开发”。我不详细写了，写一些有意思的：\n### The Remaining Methods\n[Truth测试库](https://truth.dev/api/latest/index.html?overview-summary.html)\n这里要求用递归实现`get()`方法：\n```java\n    @Override  \n    public T getRecursive(int index) {  \n        if (index >= this.length || index < 0) {  \n            return null;  \n        } else {  \n            List<T> lst = toList();  \n            return getRecindex(lst,index);  \n            }  \n        }  \n  \n    public T getRecindex(List<T> lst,int idx) {  \n        if (idx == 0) {  \n            return lst.get(idx);  \n        }else {  \n            List<T> newLst = lst.subList(1,lst.size());  \n            getRecindex(newLst,idx-1);  \n        }  \n        return null;  \n    }  \n}\n```\n然后测试一直返回`null`:\n![[Pastedimage20250619132929.png]](/images/Pastedimage20250619132929.png)\n其实是老毛病了，写`python`的时候也经常犯，递归调用的返回值被直接丢弃了，方法最终会执行 return null;。因此，无论递归过程中是否正确找到了目标元素，最终都会返回 null。  \n```java\n@Override  \npublic T getRecursive(int index) {  \n    if (index >= this.length || index < 0) {  \n        return null;  \n    } else {  \n        List<T> lst = toList();  \n        return getRecindex(lst,index);  \n        }  \n    }  \n  \npublic T getRecindex(List<T> lst,int idx) {  \n    if (idx == 0) {  \n        return lst.get(idx);  \n    }else {  \n        List<T> newLst = lst.subList(1,lst.size());  \n        // getRecindex(newLst,idx-1); \n        return getRecindex(newLst,idx-1);  \n    }  \n}\n```\n最后放个胜利结算画面\n![[Pastedimage20250619142148.png]](/images/Pastedimage20250619142148.png)","updated":"2025-06-27T13:31:57.306Z","path":"CS61B/proj1a.html","comments":1,"layout":"page","_id":"cmdh6nnwd00029gv34y941qpw","content":"<p><strong>目标：</strong> </p>\n<ul>\n<li>理解数据结构中辅助链表的使用。</li>\n<li>有使用测试和测试驱动开发来评估自己数据结构正确性的经验。</li>\n</ul>\n<p>我参考的结构：<br><img src=\"/images/Pastedimage20250617210149.png\" alt=\"Pastedimage20250617210149.png\"></p>\n<p>这个<code>proj1a</code> 整体不难，这个结构挺有意思的，我在写<code>python</code> 的时候用的结构都是头尾两个<code>sentinel</code>节点，第一次实现这个结构，发现这个结构更加优雅简单。</p>\n<hr>\n<h3 id=\"JUnit-Tests\"><a href=\"#JUnit-Tests\" class=\"headerlink\" title=\"JUnit Tests\"></a>JUnit Tests</h3><p> you’ll need to create a <code>Node</code> class and introduce one or more instance variables.</p>\n<p>刚开始我希望实现一个基于数组的链表：<br><img src=\"/images/Pastedimage20250616212809.png\" alt=\"Pastedimage20250616212809.png\"><br>提示运行错误：<br><img src=\"/images/Pastedimage20250616212818.png\" alt=\"[Pastedimage20250616212818.png]\"><br>我发现应该是要实现一个双链表结构(认真读题真的很重要)：<br><img src=\"/images/Pastedimage20250616213051.png\" alt=\"[Pastedimage20250616213051.png]\"><br>提示：<br><img src=\"/images/Pastedimage20250616213103.png\" alt=\"[Pastedimage20250616213103.png]\"><br>就是内部类<code>Node</code>不该自己搞泛型，用外部类的泛型，把内部类的泛型声明去掉 ：<br><img src=\"/images/Pastedimage20250616213139.png\" alt=\"[Pastedimage20250616213139.png]\"></p>\n<p><a href=\"https://leetcode.cn/problems/design-linked-list/submissions/603212018/\">707. 设计链表 - 力扣</a>参考了下这个。</p>\n<h3 id=\"Writing-and-Verifying\"><a href=\"#Writing-and-Verifying\" class=\"headerlink\" title=\"Writing and Verifying\"></a>Writing and Verifying</h3><p>下面都是先编写测试，然后实现它，就是“测试驱动开发”。我不详细写了，写一些有意思的：</p>\n<h3 id=\"The-Remaining-Methods\"><a href=\"#The-Remaining-Methods\" class=\"headerlink\" title=\"The Remaining Methods\"></a>The Remaining Methods</h3><p><a href=\"https://truth.dev/api/latest/index.html?overview-summary.html\">Truth测试库</a><br>这里要求用递归实现<code>get()</code>方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> T <span class=\"title function_\">getRecursive</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &gt;= <span class=\"built_in\">this</span>.length || index &lt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            List&lt;T&gt; lst = toList();  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> getRecindex(lst,index);  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> T <span class=\"title function_\">getRecindex</span><span class=\"params\">(List&lt;T&gt; lst,<span class=\"type\">int</span> idx)</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (idx == <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> lst.get(idx);  </span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            List&lt;T&gt; newLst = lst.subList(<span class=\"number\">1</span>,lst.size());  </span><br><span class=\"line\">            getRecindex(newLst,idx-<span class=\"number\">1</span>);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后测试一直返回<code>null</code>:<br><img src=\"/images/Pastedimage20250619132929.png\" alt=\"[Pastedimage20250619132929.png]\"><br>其实是老毛病了，写<code>python</code>的时候也经常犯，递归调用的返回值被直接丢弃了，方法最终会执行 return null;。因此，无论递归过程中是否正确找到了目标元素，最终都会返回 null。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> T <span class=\"title function_\">getRecursive</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index &gt;= <span class=\"built_in\">this</span>.length || index &lt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        List&lt;T&gt; lst = toList();  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> getRecindex(lst,index);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">public</span> T <span class=\"title function_\">getRecindex</span><span class=\"params\">(List&lt;T&gt; lst,<span class=\"type\">int</span> idx)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (idx == <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> lst.get(idx);  </span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        List&lt;T&gt; newLst = lst.subList(<span class=\"number\">1</span>,lst.size());  </span><br><span class=\"line\">        <span class=\"comment\">// getRecindex(newLst,idx-1); </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> getRecindex(newLst,idx-<span class=\"number\">1</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最后放个胜利结算画面<br><img src=\"/images/Pastedimage20250619142148.png\" alt=\"[Pastedimage20250619142148.png]\"></p>\n","excerpt":"","more":"<p><strong>目标：</strong> </p>\n<ul>\n<li>理解数据结构中辅助链表的使用。</li>\n<li>有使用测试和测试驱动开发来评估自己数据结构正确性的经验。</li>\n</ul>\n<p>我参考的结构：<br><img src=\"/images/Pastedimage20250617210149.png\" alt=\"Pastedimage20250617210149.png\"></p>\n<p>这个<code>proj1a</code> 整体不难，这个结构挺有意思的，我在写<code>python</code> 的时候用的结构都是头尾两个<code>sentinel</code>节点，第一次实现这个结构，发现这个结构更加优雅简单。</p>\n<hr>\n<h3 id=\"JUnit-Tests\"><a href=\"#JUnit-Tests\" class=\"headerlink\" title=\"JUnit Tests\"></a>JUnit Tests</h3><p> you’ll need to create a <code>Node</code> class and introduce one or more instance variables.</p>\n<p>刚开始我希望实现一个基于数组的链表：<br><img src=\"/images/Pastedimage20250616212809.png\" alt=\"Pastedimage20250616212809.png\"><br>提示运行错误：<br><img src=\"/images/Pastedimage20250616212818.png\" alt=\"[Pastedimage20250616212818.png]\"><br>我发现应该是要实现一个双链表结构(认真读题真的很重要)：<br><img src=\"/images/Pastedimage20250616213051.png\" alt=\"[Pastedimage20250616213051.png]\"><br>提示：<br><img src=\"/images/Pastedimage20250616213103.png\" alt=\"[Pastedimage20250616213103.png]\"><br>就是内部类<code>Node</code>不该自己搞泛型，用外部类的泛型，把内部类的泛型声明去掉 ：<br><img src=\"/images/Pastedimage20250616213139.png\" alt=\"[Pastedimage20250616213139.png]\"></p>\n<p><a href=\"https://leetcode.cn/problems/design-linked-list/submissions/603212018/\">707. 设计链表 - 力扣</a>参考了下这个。</p>\n<h3 id=\"Writing-and-Verifying\"><a href=\"#Writing-and-Verifying\" class=\"headerlink\" title=\"Writing and Verifying\"></a>Writing and Verifying</h3><p>下面都是先编写测试，然后实现它，就是“测试驱动开发”。我不详细写了，写一些有意思的：</p>\n<h3 id=\"The-Remaining-Methods\"><a href=\"#The-Remaining-Methods\" class=\"headerlink\" title=\"The Remaining Methods\"></a>The Remaining Methods</h3><p><a href=\"https://truth.dev/api/latest/index.html?overview-summary.html\">Truth测试库</a><br>这里要求用递归实现<code>get()</code>方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> T <span class=\"title function_\">getRecursive</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &gt;= <span class=\"built_in\">this</span>.length || index &lt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            List&lt;T&gt; lst = toList();  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> getRecindex(lst,index);  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> T <span class=\"title function_\">getRecindex</span><span class=\"params\">(List&lt;T&gt; lst,<span class=\"type\">int</span> idx)</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (idx == <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">return</span> lst.get(idx);  </span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            List&lt;T&gt; newLst = lst.subList(<span class=\"number\">1</span>,lst.size());  </span><br><span class=\"line\">            getRecindex(newLst,idx-<span class=\"number\">1</span>);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后测试一直返回<code>null</code>:<br><img src=\"/images/Pastedimage20250619132929.png\" alt=\"[Pastedimage20250619132929.png]\"><br>其实是老毛病了，写<code>python</code>的时候也经常犯，递归调用的返回值被直接丢弃了，方法最终会执行 return null;。因此，无论递归过程中是否正确找到了目标元素，最终都会返回 null。  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> T <span class=\"title function_\">getRecursive</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (index &gt;= <span class=\"built_in\">this</span>.length || index &lt; <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        List&lt;T&gt; lst = toList();  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> getRecindex(lst,index);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">public</span> T <span class=\"title function_\">getRecindex</span><span class=\"params\">(List&lt;T&gt; lst,<span class=\"type\">int</span> idx)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (idx == <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> lst.get(idx);  </span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">        List&lt;T&gt; newLst = lst.subList(<span class=\"number\">1</span>,lst.size());  </span><br><span class=\"line\">        <span class=\"comment\">// getRecindex(newLst,idx-1); </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> getRecindex(newLst,idx-<span class=\"number\">1</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最后放个胜利结算画面<br><img src=\"/images/Pastedimage20250619142148.png\" alt=\"[Pastedimage20250619142148.png]\"></p>\n"},{"title":"CS61B 目录","date":"2025-06-13T16:00:00.000Z","categories":["CS61B"],"_content":"# CS61B 学习笔记汇总\n- [proj0](proj0)\n- [proj1a](proj1a)\n- [Leb03](Leb03)\n- [proj1b](proj1b)","source":"CS61B/index.md","raw":"---\ntitle: CS61B 目录\ndate: 2025-06-14\ncategories:\n  - CS61B\n---\n# CS61B 学习笔记汇总\n- [proj0](proj0)\n- [proj1a](proj1a)\n- [Leb03](Leb03)\n- [proj1b](proj1b)","updated":"2025-06-28T03:38:05.582Z","path":"CS61B/index.html","comments":1,"layout":"page","_id":"cmdh6nnwe00049gv3fxpefg0f","content":"<h1 id=\"CS61B-学习笔记汇总\"><a href=\"#CS61B-学习笔记汇总\" class=\"headerlink\" title=\"CS61B 学习笔记汇总\"></a>CS61B 学习笔记汇总</h1><ul>\n<li><a href=\"proj0\">proj0</a></li>\n<li><a href=\"proj1a\">proj1a</a></li>\n<li><a href=\"Leb03\">Leb03</a></li>\n<li><a href=\"proj1b\">proj1b</a></li>\n</ul>\n","excerpt":"","more":"<h1 id=\"CS61B-学习笔记汇总\"><a href=\"#CS61B-学习笔记汇总\" class=\"headerlink\" title=\"CS61B 学习笔记汇总\"></a>CS61B 学习笔记汇总</h1><ul>\n<li><a href=\"proj0\">proj0</a></li>\n<li><a href=\"proj1a\">proj1a</a></li>\n<li><a href=\"Leb03\">Leb03</a></li>\n<li><a href=\"proj1b\">proj1b</a></li>\n</ul>\n"},{"title":"proj0","date":"2025-06-13T16:00:00.000Z","cssclasses":"CS61B","_content":"这次的`proj` 整体挺简单的，让我惊讶的是相比CS61A，它会提示要用到的辅助方法，不需要像之前非得看完整个框架才能开始做，而且还有风格检查和`git` ,`GitHub` 相关，刚好弥补了我不知道该怎么练习的苦恼。 \n\n---\n\n这次的项目是一个叫[2048](https://play2048.co/) 的游戏。\n\n## Task 1: Empty Space Exists\n\n如果棋盘上有空格就返回true，否则放回false 。\n遍历就解决了：\n\n```java\npublic boolean emptySpaceExists() {  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size(); y++) {  \n            if (board.tile(x, y) == null) { //空方块则返回null  \n                return true;  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 2: Max Tile Exists\n\n如果棋盘上的任何瓦片值为获胜值（MAX_PIECE = 2048），此方法应返回 true。\n同样是遍历，但是要注意获取瓦片值前要确保瓦片存在：\n\n```java\npublic boolean maxTileExists() {  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size(); y++) {  \n            if ((board.tile(x, y) != null) && (board.tile(x, y).value() == MAX_PIECE)) {  \n                return true;  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 3: At Least One Move Exists\n\n如果存在任何有效的移动，这个方法应该返回 true。\n存在有效移动的两种方式：\n*  棋盘上至少有一个空格。\n* 棋盘上有两个相邻（它们之间可以有空格）且值相同的方块。\n\n第一种很好判断，直接丢给刚刚完成的`emptySpaceExists()` 就行，第二个条件我写的很丑...QAQ也是基于遍历，分成横向遍历和纵向遍历，它们接下来的步骤差不多：创建一个‘先行者’(`x1`,`y1`),比较基础瓦片和先行者的值。\n感觉这题有点像力扣的一道棋盘题，不过那个是判断达到最终结果的最少步数，用的多叉树解决的。\n\n```java\npublic boolean atLeastOneMoveExists() {  \n    if (emptySpaceExists()) {  \n        return true;  \n    }  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size() - 1; y++) {  \n            for (int x1 = x + 1; x1 < board.size(); x1++) {  \n                if (board.tile(x, y) != null && board.tile(x1, y) != null) {  \n                    if (board.tile(x, y).value() == board.tile(x1, y).value()) {  \n                        return true;  \n                    } else {  \n                        break;  \n                    }  \n                }  \n            }  \n            for (int y1 = y + 1; y1 < board.size(); y1++) {  \n                if (board.tile(x, y) != null && board.tile(x, y1) != null) {  \n                    if (board.tile(x, y).value() == board.tile(x, y1).value()) {  \n                        return true;  \n                    } else {  \n                        break;  \n                    }  \n                }  \n  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 5: Move Tile Up (No Merging)\n\n将位置 `(x, y)` 的方块尽可能向上移动到其所在列的最上方。\n这里提示要用 `Board` 类的方法 `move(int x, int y, Tile tile)`，这个方法将给定的 `tile` 移动到棋盘上的 `(x, y)` 位置。而且要求`moveTileUpAsFarAsPossible` 解决方案应该恰好调用一次 `move` 方法。那就是先确定步数再用`move` 。\n这里有一个小坑，如果你查看`Board` 类方法 `move` ，会发现：\n```java\nif (tile1 == null) {  \n\t...\n} else {  \n    if (tile.value() != tile1.value()) {  \n    ...  \n    }  \n    next = Tile.create(2 * tile.value(), px, py);  \n    tile1.setNext(next);  \n}\n```\n也就是如果传入`move` 的瓦片如果值存在，就一定会更新值，无论它是否移动过。于是就要注意不能把顶层瓦片传入`move` :\n```java\npublic void moveTileUpAsFarAsPossible(int x, int y) {  \n    Tile currTile = board.tile(x, y);  \n    int myValue = currTile.value();  \n    int targetY = y;  \n    int step = 0;  \n    for (int i = targetY + 1; i < board.size(); i++) { //i = targetY + 1 从下一个方块开始比较  \n        if (board.tile(x, i) == null) {  \n            step += 1;  \n        } else {  \n            if (board.tile(x, i).value() == myValue && i != y) { //i != y 防止方块在顶层时加上自己的值  \n                if (!board.tile(x, i).wasMerged()) {  \n                    step += 1;  \n                }  \n            }  \n            break;  \n        }  \n    }  \n    if (step != 0) {  \n        board.move(x, targetY + step, currTile); // 顶层方块不移动但会检测合并，防止重复加上自己的值  \n    }  \n}\n```\n\n## Task 6: Merging Tiles\n\n瓦片可以通过空格向上移动。当瓦片遇到非空格时，如果那个格子里有另一个相同值的瓦片，并且那个瓦片还没有因为这个倾斜操作被合并过，那么这两个瓦片应该合并。\n我发现我在上面的题里已经解决这个问题了，于是跳过。\n\n## Task 7: Tilt Column\n\n这个方法应该将给定坐标的列向上倾斜，将列中的所有方块移动到正确的位置，并合并需要合并的方块。\n其实就是对`moveTileUpAsFarAsPossible`方法的抽象包装，把`moveTileUpAsFarAsPossible`方法用到给定`x`坐标的一列，注意要自上而下的调用：\n\n```java\npublic void tiltColumn(int x) {  \n    for (int y = board.size() - 1; y >= 0; y--) {  \n        if (board.tile(x, y) != null) {  \n            moveTileUpAsFarAsPossible(x, y);  \n        }  \n    }  \n}\n```\n\n## Task 8: Tilt Up\n\n这个方法应该将整个棋盘向上倾斜，将所有列中的所有方块移动到它们应有的位置，并合并需要合并的方块。\n其实就是对`tiltColumn`方法的抽象包装，在棋盘的每一列调用`tiltColumn`方法：\n```java\npublic void tilt(Side side) {  \n    for (int x = 0; x < board.size(); x++) {  \n        tiltColumn(x);  \n    }  \n}\n```\n\n## Task 9: Tilt in Four Directions\n\n既然我们已经实现了向上方向的倾斜功能，现在我们必须对其他三个方向做同样的事情。\n这里我的方法应该和官方期望的解法不同，我看官方的提示好像还要用到`dubug`，这里我看它给出\n1. \"`Side` 类是一种特殊的类，称为 `Enum` \"\n2. \"枚举可以用类似 `Side s = Side.NORTH` 的语法赋值。请注意，我们不是使用 `new` 关键字，而是直接将 `Side` 值设置为四个值中的一个\"\n3. \"如果你对Java枚举感兴趣请查看https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\"\n这几个提示，结合起来就是：\n```java\npublic void tiltWrapper(Side side) {  \n    board.resetMerged();  \n    switch (side) {  \n        case NORTH:  \n            board.setViewingPerspective(Side.NORTH);  \n            tilt(side);  \n            break;  \n        case WEST:  \n            board.setViewingPerspective(Side.WEST);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        case SOUTH:  \n            board.setViewingPerspective(Side.SOUTH);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        case EAST:  \n            board.setViewingPerspective(Side.EAST);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        default:  \n            break;  \n    }  \n}\n```\n\n## Task 10: Updating Score\n\n实现的分数更新。\n这个直接在`moveTileUpAsFarAsPossible`方法里插入一行就行了：\n\n```java\npublic void moveTileUpAsFarAsPossible(int x, int y) {  \n    Tile currTile = board.tile(x, y);  \n    int myValue = currTile.value();  \n    int targetY = y;  \n    int step = 0;  \n    for (int i = targetY + 1; i < board.size(); i++) { \n        if (board.tile(x, i) == null) {  \n            step += 1;  \n        } else {  \n            if (board.tile(x, i).value() == myValue && i != y) { \n                if (!board.tile(x, i).wasMerged()) {  \n                    this.score += board.tile(x, y).value() * 2;  // 插入这里\n                    step += 1; \n                }  \n            }  \n            break;  \n        }  \n    }  \n    if (step != 0) {  \n        board.move(x, targetY + step, currTile); \n}\n```","source":"CS61B/proj0.md","raw":"---\ntitle: proj0\ndate: 2025-06-14\ncssclasses: CS61B\n---\n这次的`proj` 整体挺简单的，让我惊讶的是相比CS61A，它会提示要用到的辅助方法，不需要像之前非得看完整个框架才能开始做，而且还有风格检查和`git` ,`GitHub` 相关，刚好弥补了我不知道该怎么练习的苦恼。 \n\n---\n\n这次的项目是一个叫[2048](https://play2048.co/) 的游戏。\n\n## Task 1: Empty Space Exists\n\n如果棋盘上有空格就返回true，否则放回false 。\n遍历就解决了：\n\n```java\npublic boolean emptySpaceExists() {  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size(); y++) {  \n            if (board.tile(x, y) == null) { //空方块则返回null  \n                return true;  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 2: Max Tile Exists\n\n如果棋盘上的任何瓦片值为获胜值（MAX_PIECE = 2048），此方法应返回 true。\n同样是遍历，但是要注意获取瓦片值前要确保瓦片存在：\n\n```java\npublic boolean maxTileExists() {  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size(); y++) {  \n            if ((board.tile(x, y) != null) && (board.tile(x, y).value() == MAX_PIECE)) {  \n                return true;  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 3: At Least One Move Exists\n\n如果存在任何有效的移动，这个方法应该返回 true。\n存在有效移动的两种方式：\n*  棋盘上至少有一个空格。\n* 棋盘上有两个相邻（它们之间可以有空格）且值相同的方块。\n\n第一种很好判断，直接丢给刚刚完成的`emptySpaceExists()` 就行，第二个条件我写的很丑...QAQ也是基于遍历，分成横向遍历和纵向遍历，它们接下来的步骤差不多：创建一个‘先行者’(`x1`,`y1`),比较基础瓦片和先行者的值。\n感觉这题有点像力扣的一道棋盘题，不过那个是判断达到最终结果的最少步数，用的多叉树解决的。\n\n```java\npublic boolean atLeastOneMoveExists() {  \n    if (emptySpaceExists()) {  \n        return true;  \n    }  \n    for (int x = 0; x < board.size(); x++) {  \n        for (int y = 0; y < board.size() - 1; y++) {  \n            for (int x1 = x + 1; x1 < board.size(); x1++) {  \n                if (board.tile(x, y) != null && board.tile(x1, y) != null) {  \n                    if (board.tile(x, y).value() == board.tile(x1, y).value()) {  \n                        return true;  \n                    } else {  \n                        break;  \n                    }  \n                }  \n            }  \n            for (int y1 = y + 1; y1 < board.size(); y1++) {  \n                if (board.tile(x, y) != null && board.tile(x, y1) != null) {  \n                    if (board.tile(x, y).value() == board.tile(x, y1).value()) {  \n                        return true;  \n                    } else {  \n                        break;  \n                    }  \n                }  \n  \n            }  \n        }  \n    }  \n    return false;  \n}\n```\n\n## Task 5: Move Tile Up (No Merging)\n\n将位置 `(x, y)` 的方块尽可能向上移动到其所在列的最上方。\n这里提示要用 `Board` 类的方法 `move(int x, int y, Tile tile)`，这个方法将给定的 `tile` 移动到棋盘上的 `(x, y)` 位置。而且要求`moveTileUpAsFarAsPossible` 解决方案应该恰好调用一次 `move` 方法。那就是先确定步数再用`move` 。\n这里有一个小坑，如果你查看`Board` 类方法 `move` ，会发现：\n```java\nif (tile1 == null) {  \n\t...\n} else {  \n    if (tile.value() != tile1.value()) {  \n    ...  \n    }  \n    next = Tile.create(2 * tile.value(), px, py);  \n    tile1.setNext(next);  \n}\n```\n也就是如果传入`move` 的瓦片如果值存在，就一定会更新值，无论它是否移动过。于是就要注意不能把顶层瓦片传入`move` :\n```java\npublic void moveTileUpAsFarAsPossible(int x, int y) {  \n    Tile currTile = board.tile(x, y);  \n    int myValue = currTile.value();  \n    int targetY = y;  \n    int step = 0;  \n    for (int i = targetY + 1; i < board.size(); i++) { //i = targetY + 1 从下一个方块开始比较  \n        if (board.tile(x, i) == null) {  \n            step += 1;  \n        } else {  \n            if (board.tile(x, i).value() == myValue && i != y) { //i != y 防止方块在顶层时加上自己的值  \n                if (!board.tile(x, i).wasMerged()) {  \n                    step += 1;  \n                }  \n            }  \n            break;  \n        }  \n    }  \n    if (step != 0) {  \n        board.move(x, targetY + step, currTile); // 顶层方块不移动但会检测合并，防止重复加上自己的值  \n    }  \n}\n```\n\n## Task 6: Merging Tiles\n\n瓦片可以通过空格向上移动。当瓦片遇到非空格时，如果那个格子里有另一个相同值的瓦片，并且那个瓦片还没有因为这个倾斜操作被合并过，那么这两个瓦片应该合并。\n我发现我在上面的题里已经解决这个问题了，于是跳过。\n\n## Task 7: Tilt Column\n\n这个方法应该将给定坐标的列向上倾斜，将列中的所有方块移动到正确的位置，并合并需要合并的方块。\n其实就是对`moveTileUpAsFarAsPossible`方法的抽象包装，把`moveTileUpAsFarAsPossible`方法用到给定`x`坐标的一列，注意要自上而下的调用：\n\n```java\npublic void tiltColumn(int x) {  \n    for (int y = board.size() - 1; y >= 0; y--) {  \n        if (board.tile(x, y) != null) {  \n            moveTileUpAsFarAsPossible(x, y);  \n        }  \n    }  \n}\n```\n\n## Task 8: Tilt Up\n\n这个方法应该将整个棋盘向上倾斜，将所有列中的所有方块移动到它们应有的位置，并合并需要合并的方块。\n其实就是对`tiltColumn`方法的抽象包装，在棋盘的每一列调用`tiltColumn`方法：\n```java\npublic void tilt(Side side) {  \n    for (int x = 0; x < board.size(); x++) {  \n        tiltColumn(x);  \n    }  \n}\n```\n\n## Task 9: Tilt in Four Directions\n\n既然我们已经实现了向上方向的倾斜功能，现在我们必须对其他三个方向做同样的事情。\n这里我的方法应该和官方期望的解法不同，我看官方的提示好像还要用到`dubug`，这里我看它给出\n1. \"`Side` 类是一种特殊的类，称为 `Enum` \"\n2. \"枚举可以用类似 `Side s = Side.NORTH` 的语法赋值。请注意，我们不是使用 `new` 关键字，而是直接将 `Side` 值设置为四个值中的一个\"\n3. \"如果你对Java枚举感兴趣请查看https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\"\n这几个提示，结合起来就是：\n```java\npublic void tiltWrapper(Side side) {  \n    board.resetMerged();  \n    switch (side) {  \n        case NORTH:  \n            board.setViewingPerspective(Side.NORTH);  \n            tilt(side);  \n            break;  \n        case WEST:  \n            board.setViewingPerspective(Side.WEST);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        case SOUTH:  \n            board.setViewingPerspective(Side.SOUTH);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        case EAST:  \n            board.setViewingPerspective(Side.EAST);  \n            tilt(side);  \n            board.setViewingPerspective(Side.NORTH);  \n            break;  \n        default:  \n            break;  \n    }  \n}\n```\n\n## Task 10: Updating Score\n\n实现的分数更新。\n这个直接在`moveTileUpAsFarAsPossible`方法里插入一行就行了：\n\n```java\npublic void moveTileUpAsFarAsPossible(int x, int y) {  \n    Tile currTile = board.tile(x, y);  \n    int myValue = currTile.value();  \n    int targetY = y;  \n    int step = 0;  \n    for (int i = targetY + 1; i < board.size(); i++) { \n        if (board.tile(x, i) == null) {  \n            step += 1;  \n        } else {  \n            if (board.tile(x, i).value() == myValue && i != y) { \n                if (!board.tile(x, i).wasMerged()) {  \n                    this.score += board.tile(x, y).value() * 2;  // 插入这里\n                    step += 1; \n                }  \n            }  \n            break;  \n        }  \n    }  \n    if (step != 0) {  \n        board.move(x, targetY + step, currTile); \n}\n```","updated":"2025-06-16T11:10:04.451Z","path":"CS61B/proj0.html","comments":1,"layout":"page","_id":"cmdh6nnwf00059gv3cboaepbl","content":"<p>这次的<code>proj</code> 整体挺简单的，让我惊讶的是相比CS61A，它会提示要用到的辅助方法，不需要像之前非得看完整个框架才能开始做，而且还有风格检查和<code>git</code> ,<code>GitHub</code> 相关，刚好弥补了我不知道该怎么练习的苦恼。 </p>\n<hr>\n<p>这次的项目是一个叫<a href=\"https://play2048.co/\">2048</a> 的游戏。</p>\n<h2 id=\"Task-1-Empty-Space-Exists\"><a href=\"#Task-1-Empty-Space-Exists\" class=\"headerlink\" title=\"Task 1: Empty Space Exists\"></a>Task 1: Empty Space Exists</h2><p>如果棋盘上有空格就返回true，否则放回false 。<br>遍历就解决了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">emptySpaceExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size(); y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, y) == <span class=\"literal\">null</span>) &#123; <span class=\"comment\">//空方块则返回null  </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-2-Max-Tile-Exists\"><a href=\"#Task-2-Max-Tile-Exists\" class=\"headerlink\" title=\"Task 2: Max Tile Exists\"></a>Task 2: Max Tile Exists</h2><p>如果棋盘上的任何瓦片值为获胜值（MAX_PIECE &#x3D; 2048），此方法应返回 true。<br>同样是遍历，但是要注意获取瓦片值前要确保瓦片存在：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">maxTileExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size(); y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((board.tile(x, y) != <span class=\"literal\">null</span>) &amp;&amp; (board.tile(x, y).value() == MAX_PIECE)) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-3-At-Least-One-Move-Exists\"><a href=\"#Task-3-At-Least-One-Move-Exists\" class=\"headerlink\" title=\"Task 3: At Least One Move Exists\"></a>Task 3: At Least One Move Exists</h2><p>如果存在任何有效的移动，这个方法应该返回 true。<br>存在有效移动的两种方式：</p>\n<ul>\n<li>棋盘上至少有一个空格。</li>\n<li>棋盘上有两个相邻（它们之间可以有空格）且值相同的方块。</li>\n</ul>\n<p>第一种很好判断，直接丢给刚刚完成的<code>emptySpaceExists()</code> 就行，第二个条件我写的很丑…QAQ也是基于遍历，分成横向遍历和纵向遍历，它们接下来的步骤差不多：创建一个‘先行者’(<code>x1</code>,<code>y1</code>),比较基础瓦片和先行者的值。<br>感觉这题有点像力扣的一道棋盘题，不过那个是判断达到最终结果的最少步数，用的多叉树解决的。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">atLeastOneMoveExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (emptySpaceExists()) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size() - <span class=\"number\">1</span>; y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x1</span> <span class=\"operator\">=</span> x + <span class=\"number\">1</span>; x1 &lt; board.size(); x1++) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span> &amp;&amp; board.tile(x1, y) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (board.tile(x, y).value() == board.tile(x1, y).value()) &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">                    &#125;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y1</span> <span class=\"operator\">=</span> y + <span class=\"number\">1</span>; y1 &lt; board.size(); y1++) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span> &amp;&amp; board.tile(x, y1) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (board.tile(x, y).value() == board.tile(x, y1).value()) &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">                    &#125;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-5-Move-Tile-Up-No-Merging\"><a href=\"#Task-5-Move-Tile-Up-No-Merging\" class=\"headerlink\" title=\"Task 5: Move Tile Up (No Merging)\"></a>Task 5: Move Tile Up (No Merging)</h2><p>将位置 <code>(x, y)</code> 的方块尽可能向上移动到其所在列的最上方。<br>这里提示要用 <code>Board</code> 类的方法 <code>move(int x, int y, Tile tile)</code>，这个方法将给定的 <code>tile</code> 移动到棋盘上的 <code>(x, y)</code> 位置。而且要求<code>moveTileUpAsFarAsPossible</code> 解决方案应该恰好调用一次 <code>move</code> 方法。那就是先确定步数再用<code>move</code> 。<br>这里有一个小坑，如果你查看<code>Board</code> 类方法 <code>move</code> ，会发现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (tile1 == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tile.value() != tile1.value()) &#123;  </span><br><span class=\"line\">    ...  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    next = Tile.create(<span class=\"number\">2</span> * tile.value(), px, py);  </span><br><span class=\"line\">    tile1.setNext(next);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>也就是如果传入<code>move</code> 的瓦片如果值存在，就一定会更新值，无论它是否移动过。于是就要注意不能把顶层瓦片传入<code>move</code> :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">moveTileUpAsFarAsPossible</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">Tile</span> <span class=\"variable\">currTile</span> <span class=\"operator\">=</span> board.tile(x, y);  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">myValue</span> <span class=\"operator\">=</span> currTile.value();  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">targetY</span> <span class=\"operator\">=</span> y;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">step</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> targetY + <span class=\"number\">1</span>; i &lt; board.size(); i++) &#123; <span class=\"comment\">//i = targetY + 1 从下一个方块开始比较  </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, i) == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, i).value() == myValue &amp;&amp; i != y) &#123; <span class=\"comment\">//i != y 防止方块在顶层时加上自己的值  </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!board.tile(x, i).wasMerged()) &#123;  </span><br><span class=\"line\">                    step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (step != <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        board.move(x, targetY + step, currTile); <span class=\"comment\">// 顶层方块不移动但会检测合并，防止重复加上自己的值  </span></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-6-Merging-Tiles\"><a href=\"#Task-6-Merging-Tiles\" class=\"headerlink\" title=\"Task 6: Merging Tiles\"></a>Task 6: Merging Tiles</h2><p>瓦片可以通过空格向上移动。当瓦片遇到非空格时，如果那个格子里有另一个相同值的瓦片，并且那个瓦片还没有因为这个倾斜操作被合并过，那么这两个瓦片应该合并。<br>我发现我在上面的题里已经解决这个问题了，于是跳过。</p>\n<h2 id=\"Task-7-Tilt-Column\"><a href=\"#Task-7-Tilt-Column\" class=\"headerlink\" title=\"Task 7: Tilt Column\"></a>Task 7: Tilt Column</h2><p>这个方法应该将给定坐标的列向上倾斜，将列中的所有方块移动到正确的位置，并合并需要合并的方块。<br>其实就是对<code>moveTileUpAsFarAsPossible</code>方法的抽象包装，把<code>moveTileUpAsFarAsPossible</code>方法用到给定<code>x</code>坐标的一列，注意要自上而下的调用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tiltColumn</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> board.size() - <span class=\"number\">1</span>; y &gt;= <span class=\"number\">0</span>; y--) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            moveTileUpAsFarAsPossible(x, y);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-8-Tilt-Up\"><a href=\"#Task-8-Tilt-Up\" class=\"headerlink\" title=\"Task 8: Tilt Up\"></a>Task 8: Tilt Up</h2><p>这个方法应该将整个棋盘向上倾斜，将所有列中的所有方块移动到它们应有的位置，并合并需要合并的方块。<br>其实就是对<code>tiltColumn</code>方法的抽象包装，在棋盘的每一列调用<code>tiltColumn</code>方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tilt</span><span class=\"params\">(Side side)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        tiltColumn(x);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-9-Tilt-in-Four-Directions\"><a href=\"#Task-9-Tilt-in-Four-Directions\" class=\"headerlink\" title=\"Task 9: Tilt in Four Directions\"></a>Task 9: Tilt in Four Directions</h2><p>既然我们已经实现了向上方向的倾斜功能，现在我们必须对其他三个方向做同样的事情。<br>这里我的方法应该和官方期望的解法不同，我看官方的提示好像还要用到<code>dubug</code>，这里我看它给出</p>\n<ol>\n<li>“<code>Side</code> 类是一种特殊的类，称为 <code>Enum</code> “</li>\n<li>“枚举可以用类似 <code>Side s = Side.NORTH</code> 的语法赋值。请注意，我们不是使用 <code>new</code> 关键字，而是直接将 <code>Side</code> 值设置为四个值中的一个”</li>\n<li>“如果你对Java枚举感兴趣请查看<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\">https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html</a>“<br>这几个提示，结合起来就是：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tiltWrapper</span><span class=\"params\">(Side side)</span> &#123;  </span><br><span class=\"line\">    board.resetMerged();  </span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (side) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> NORTH:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> WEST:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.WEST);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> SOUTH:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.SOUTH);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> EAST:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.EAST);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">default</span>:  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Task-10-Updating-Score\"><a href=\"#Task-10-Updating-Score\" class=\"headerlink\" title=\"Task 10: Updating Score\"></a>Task 10: Updating Score</h2><p>实现的分数更新。<br>这个直接在<code>moveTileUpAsFarAsPossible</code>方法里插入一行就行了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">moveTileUpAsFarAsPossible</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">Tile</span> <span class=\"variable\">currTile</span> <span class=\"operator\">=</span> board.tile(x, y);  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">myValue</span> <span class=\"operator\">=</span> currTile.value();  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">targetY</span> <span class=\"operator\">=</span> y;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">step</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> targetY + <span class=\"number\">1</span>; i &lt; board.size(); i++) &#123; </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, i) == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, i).value() == myValue &amp;&amp; i != y) &#123; </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!board.tile(x, i).wasMerged()) &#123;  </span><br><span class=\"line\">                    <span class=\"built_in\">this</span>.score += board.tile(x, y).value() * <span class=\"number\">2</span>;  <span class=\"comment\">// 插入这里</span></span><br><span class=\"line\">                    step += <span class=\"number\">1</span>; </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (step != <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        board.move(x, targetY + step, currTile); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<p>这次的<code>proj</code> 整体挺简单的，让我惊讶的是相比CS61A，它会提示要用到的辅助方法，不需要像之前非得看完整个框架才能开始做，而且还有风格检查和<code>git</code> ,<code>GitHub</code> 相关，刚好弥补了我不知道该怎么练习的苦恼。 </p>\n<hr>\n<p>这次的项目是一个叫<a href=\"https://play2048.co/\">2048</a> 的游戏。</p>\n<h2 id=\"Task-1-Empty-Space-Exists\"><a href=\"#Task-1-Empty-Space-Exists\" class=\"headerlink\" title=\"Task 1: Empty Space Exists\"></a>Task 1: Empty Space Exists</h2><p>如果棋盘上有空格就返回true，否则放回false 。<br>遍历就解决了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">emptySpaceExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size(); y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, y) == <span class=\"literal\">null</span>) &#123; <span class=\"comment\">//空方块则返回null  </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-2-Max-Tile-Exists\"><a href=\"#Task-2-Max-Tile-Exists\" class=\"headerlink\" title=\"Task 2: Max Tile Exists\"></a>Task 2: Max Tile Exists</h2><p>如果棋盘上的任何瓦片值为获胜值（MAX_PIECE &#x3D; 2048），此方法应返回 true。<br>同样是遍历，但是要注意获取瓦片值前要确保瓦片存在：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">maxTileExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size(); y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((board.tile(x, y) != <span class=\"literal\">null</span>) &amp;&amp; (board.tile(x, y).value() == MAX_PIECE)) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-3-At-Least-One-Move-Exists\"><a href=\"#Task-3-At-Least-One-Move-Exists\" class=\"headerlink\" title=\"Task 3: At Least One Move Exists\"></a>Task 3: At Least One Move Exists</h2><p>如果存在任何有效的移动，这个方法应该返回 true。<br>存在有效移动的两种方式：</p>\n<ul>\n<li>棋盘上至少有一个空格。</li>\n<li>棋盘上有两个相邻（它们之间可以有空格）且值相同的方块。</li>\n</ul>\n<p>第一种很好判断，直接丢给刚刚完成的<code>emptySpaceExists()</code> 就行，第二个条件我写的很丑…QAQ也是基于遍历，分成横向遍历和纵向遍历，它们接下来的步骤差不多：创建一个‘先行者’(<code>x1</code>,<code>y1</code>),比较基础瓦片和先行者的值。<br>感觉这题有点像力扣的一道棋盘题，不过那个是判断达到最终结果的最少步数，用的多叉树解决的。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">atLeastOneMoveExists</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (emptySpaceExists()) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; y &lt; board.size() - <span class=\"number\">1</span>; y++) &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x1</span> <span class=\"operator\">=</span> x + <span class=\"number\">1</span>; x1 &lt; board.size(); x1++) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span> &amp;&amp; board.tile(x1, y) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (board.tile(x, y).value() == board.tile(x1, y).value()) &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">                    &#125;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y1</span> <span class=\"operator\">=</span> y + <span class=\"number\">1</span>; y1 &lt; board.size(); y1++) &#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span> &amp;&amp; board.tile(x, y1) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (board.tile(x, y).value() == board.tile(x, y1).value()) &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;  </span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">                    &#125;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-5-Move-Tile-Up-No-Merging\"><a href=\"#Task-5-Move-Tile-Up-No-Merging\" class=\"headerlink\" title=\"Task 5: Move Tile Up (No Merging)\"></a>Task 5: Move Tile Up (No Merging)</h2><p>将位置 <code>(x, y)</code> 的方块尽可能向上移动到其所在列的最上方。<br>这里提示要用 <code>Board</code> 类的方法 <code>move(int x, int y, Tile tile)</code>，这个方法将给定的 <code>tile</code> 移动到棋盘上的 <code>(x, y)</code> 位置。而且要求<code>moveTileUpAsFarAsPossible</code> 解决方案应该恰好调用一次 <code>move</code> 方法。那就是先确定步数再用<code>move</code> 。<br>这里有一个小坑，如果你查看<code>Board</code> 类方法 <code>move</code> ，会发现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (tile1 == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tile.value() != tile1.value()) &#123;  </span><br><span class=\"line\">    ...  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    next = Tile.create(<span class=\"number\">2</span> * tile.value(), px, py);  </span><br><span class=\"line\">    tile1.setNext(next);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>也就是如果传入<code>move</code> 的瓦片如果值存在，就一定会更新值，无论它是否移动过。于是就要注意不能把顶层瓦片传入<code>move</code> :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">moveTileUpAsFarAsPossible</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">Tile</span> <span class=\"variable\">currTile</span> <span class=\"operator\">=</span> board.tile(x, y);  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">myValue</span> <span class=\"operator\">=</span> currTile.value();  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">targetY</span> <span class=\"operator\">=</span> y;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">step</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> targetY + <span class=\"number\">1</span>; i &lt; board.size(); i++) &#123; <span class=\"comment\">//i = targetY + 1 从下一个方块开始比较  </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, i) == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, i).value() == myValue &amp;&amp; i != y) &#123; <span class=\"comment\">//i != y 防止方块在顶层时加上自己的值  </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!board.tile(x, i).wasMerged()) &#123;  </span><br><span class=\"line\">                    step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (step != <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        board.move(x, targetY + step, currTile); <span class=\"comment\">// 顶层方块不移动但会检测合并，防止重复加上自己的值  </span></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-6-Merging-Tiles\"><a href=\"#Task-6-Merging-Tiles\" class=\"headerlink\" title=\"Task 6: Merging Tiles\"></a>Task 6: Merging Tiles</h2><p>瓦片可以通过空格向上移动。当瓦片遇到非空格时，如果那个格子里有另一个相同值的瓦片，并且那个瓦片还没有因为这个倾斜操作被合并过，那么这两个瓦片应该合并。<br>我发现我在上面的题里已经解决这个问题了，于是跳过。</p>\n<h2 id=\"Task-7-Tilt-Column\"><a href=\"#Task-7-Tilt-Column\" class=\"headerlink\" title=\"Task 7: Tilt Column\"></a>Task 7: Tilt Column</h2><p>这个方法应该将给定坐标的列向上倾斜，将列中的所有方块移动到正确的位置，并合并需要合并的方块。<br>其实就是对<code>moveTileUpAsFarAsPossible</code>方法的抽象包装，把<code>moveTileUpAsFarAsPossible</code>方法用到给定<code>x</code>坐标的一列，注意要自上而下的调用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tiltColumn</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">y</span> <span class=\"operator\">=</span> board.size() - <span class=\"number\">1</span>; y &gt;= <span class=\"number\">0</span>; y--) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, y) != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            moveTileUpAsFarAsPossible(x, y);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-8-Tilt-Up\"><a href=\"#Task-8-Tilt-Up\" class=\"headerlink\" title=\"Task 8: Tilt Up\"></a>Task 8: Tilt Up</h2><p>这个方法应该将整个棋盘向上倾斜，将所有列中的所有方块移动到它们应有的位置，并合并需要合并的方块。<br>其实就是对<code>tiltColumn</code>方法的抽象包装，在棋盘的每一列调用<code>tiltColumn</code>方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tilt</span><span class=\"params\">(Side side)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">x</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; x &lt; board.size(); x++) &#123;  </span><br><span class=\"line\">        tiltColumn(x);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Task-9-Tilt-in-Four-Directions\"><a href=\"#Task-9-Tilt-in-Four-Directions\" class=\"headerlink\" title=\"Task 9: Tilt in Four Directions\"></a>Task 9: Tilt in Four Directions</h2><p>既然我们已经实现了向上方向的倾斜功能，现在我们必须对其他三个方向做同样的事情。<br>这里我的方法应该和官方期望的解法不同，我看官方的提示好像还要用到<code>dubug</code>，这里我看它给出</p>\n<ol>\n<li>“<code>Side</code> 类是一种特殊的类，称为 <code>Enum</code> “</li>\n<li>“枚举可以用类似 <code>Side s = Side.NORTH</code> 的语法赋值。请注意，我们不是使用 <code>new</code> 关键字，而是直接将 <code>Side</code> 值设置为四个值中的一个”</li>\n<li>“如果你对Java枚举感兴趣请查看<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\">https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html</a>“<br>这几个提示，结合起来就是：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">tiltWrapper</span><span class=\"params\">(Side side)</span> &#123;  </span><br><span class=\"line\">    board.resetMerged();  </span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (side) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> NORTH:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> WEST:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.WEST);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> SOUTH:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.SOUTH);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">case</span> EAST:  </span><br><span class=\"line\">            board.setViewingPerspective(Side.EAST);  </span><br><span class=\"line\">            tilt(side);  </span><br><span class=\"line\">            board.setViewingPerspective(Side.NORTH);  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        <span class=\"keyword\">default</span>:  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Task-10-Updating-Score\"><a href=\"#Task-10-Updating-Score\" class=\"headerlink\" title=\"Task 10: Updating Score\"></a>Task 10: Updating Score</h2><p>实现的分数更新。<br>这个直接在<code>moveTileUpAsFarAsPossible</code>方法里插入一行就行了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">moveTileUpAsFarAsPossible</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">Tile</span> <span class=\"variable\">currTile</span> <span class=\"operator\">=</span> board.tile(x, y);  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">myValue</span> <span class=\"operator\">=</span> currTile.value();  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">targetY</span> <span class=\"operator\">=</span> y;  </span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">step</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> targetY + <span class=\"number\">1</span>; i &lt; board.size(); i++) &#123; </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (board.tile(x, i) == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            step += <span class=\"number\">1</span>;  </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (board.tile(x, i).value() == myValue &amp;&amp; i != y) &#123; </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!board.tile(x, i).wasMerged()) &#123;  </span><br><span class=\"line\">                    <span class=\"built_in\">this</span>.score += board.tile(x, y).value() * <span class=\"number\">2</span>;  <span class=\"comment\">// 插入这里</span></span><br><span class=\"line\">                    step += <span class=\"number\">1</span>; </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (step != <span class=\"number\">0</span>) &#123;  </span><br><span class=\"line\">        board.move(x, targetY + step, currTile); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"proj1b","date":"2025-06-26T16:00:00.000Z","cssclasses":["CS61B"],"_content":"---\n本来没打算写这篇博客的，但是这里的扩/缩容挺有意思的，于是就简单写写\n\n---\n\n**目标：** \n* 理解数据结构中后备数组的实现。\n* 通过测试和测试驱动开发来验证这些数据结构的正确性，获得更多经验。  \n\n这次的`proj`就是实现一个循环数组，这里不放图了\n\n---\n#### Resizing Up \n\n扩/缩容的底层逻辑就是新建一个数组，把旧数组的数据迁移过去就好了。\n不过我写的不太优雅，这里不多解释，只是浅浅提一下要注意的地方\n\n```java\npublic class ArrayDeque61B<T> implements Deque61B<T> {  \n    int size;  \n    int nextFirst;  \n    int nextLast;  \n    T[] lst;  \n  \n    public ArrayDeque61B() {  \n        this.size = 0;  \n        this.nextFirst = 0;  \n        this.nextLast = 1;  \n        this.lst = (T[]) new Object[8];  \n    }\n```\n\n```java \n// 扩容\nif (((double) this.lst.length / this.size) < 1.7) {  \n    T[] lst1 = (T[]) new Object[2 * this.lst.length];  \n    for (int i = 1; i < this.lst.length; i++ ) {  \n        lst1[i] = this.lst[ Math.floorMod((this.nextFirst + i), this.lst.length)]; \n    }  \n    this.lst = lst1;  \n    lst1 = null;  \n    this.nextLast = this.size + 1; // 插入从索引1开始  \n    this.nextFirst = 0;  \n}\n```\n\n* `if ((this.lst.length / this.size) > 0.6)`: \n\t* `/ 运算符`:当两个操作数均为整数类型（如 `int`、`long`）时，会自动截断小数部分，返回整数商。\n\t* `((double) ...)`: 将数组容量转换为 double 类型，避免整数除法截断小数部分。\n* ` for (int i = 1; i < this.lst.length; i++ )`: 理论上应该不会发生当`i`遍历到`this.nextLast`后，添加入本不应该包含的元素(删除时没有更改元素值位`null`,只是移动了`this.nestLast`),但是保险起见还是像下面缩容的写法最好\n* `lst1 = null;`: 释放内存  \n* `this.nextLast = ... ; this.nextFirst = ... ;`： 注意要改,最好和声明时保持一致，不然测试很麻烦\n\n\n```java \n// 缩容\nif (((double)this.lst.length / this.size) > 3) {\n    int num = Math.max(this.lst.length / 2 ,3);\n    T[] lst2 = (T[]) new Object[num];\n    for (int i = 1; i <= this.size + 1; i++) {\n        lst2[i] = this.lst[Math.floorMod((this.nextFirst + i),this.lst.length)];\n    }\n    this.lst = lst2;\n    lst2 = null;\n    this.nextLast = this.size + 1;\n    this.nextFirst = 0;\n}\n```\n\n* 这里上面扩容差不多，就不多写了","source":"CS61B/proj1b.md","raw":"---\ntitle: proj1b\ndate: 2025-06-27\ncssclasses:\n  - CS61B\n---\n---\n本来没打算写这篇博客的，但是这里的扩/缩容挺有意思的，于是就简单写写\n\n---\n\n**目标：** \n* 理解数据结构中后备数组的实现。\n* 通过测试和测试驱动开发来验证这些数据结构的正确性，获得更多经验。  \n\n这次的`proj`就是实现一个循环数组，这里不放图了\n\n---\n#### Resizing Up \n\n扩/缩容的底层逻辑就是新建一个数组，把旧数组的数据迁移过去就好了。\n不过我写的不太优雅，这里不多解释，只是浅浅提一下要注意的地方\n\n```java\npublic class ArrayDeque61B<T> implements Deque61B<T> {  \n    int size;  \n    int nextFirst;  \n    int nextLast;  \n    T[] lst;  \n  \n    public ArrayDeque61B() {  \n        this.size = 0;  \n        this.nextFirst = 0;  \n        this.nextLast = 1;  \n        this.lst = (T[]) new Object[8];  \n    }\n```\n\n```java \n// 扩容\nif (((double) this.lst.length / this.size) < 1.7) {  \n    T[] lst1 = (T[]) new Object[2 * this.lst.length];  \n    for (int i = 1; i < this.lst.length; i++ ) {  \n        lst1[i] = this.lst[ Math.floorMod((this.nextFirst + i), this.lst.length)]; \n    }  \n    this.lst = lst1;  \n    lst1 = null;  \n    this.nextLast = this.size + 1; // 插入从索引1开始  \n    this.nextFirst = 0;  \n}\n```\n\n* `if ((this.lst.length / this.size) > 0.6)`: \n\t* `/ 运算符`:当两个操作数均为整数类型（如 `int`、`long`）时，会自动截断小数部分，返回整数商。\n\t* `((double) ...)`: 将数组容量转换为 double 类型，避免整数除法截断小数部分。\n* ` for (int i = 1; i < this.lst.length; i++ )`: 理论上应该不会发生当`i`遍历到`this.nextLast`后，添加入本不应该包含的元素(删除时没有更改元素值位`null`,只是移动了`this.nestLast`),但是保险起见还是像下面缩容的写法最好\n* `lst1 = null;`: 释放内存  \n* `this.nextLast = ... ; this.nextFirst = ... ;`： 注意要改,最好和声明时保持一致，不然测试很麻烦\n\n\n```java \n// 缩容\nif (((double)this.lst.length / this.size) > 3) {\n    int num = Math.max(this.lst.length / 2 ,3);\n    T[] lst2 = (T[]) new Object[num];\n    for (int i = 1; i <= this.size + 1; i++) {\n        lst2[i] = this.lst[Math.floorMod((this.nextFirst + i),this.lst.length)];\n    }\n    this.lst = lst2;\n    lst2 = null;\n    this.nextLast = this.size + 1;\n    this.nextFirst = 0;\n}\n```\n\n* 这里上面扩容差不多，就不多写了","updated":"2025-06-28T03:55:50.039Z","path":"CS61B/proj1b.html","comments":1,"layout":"page","_id":"cmdh6nnwf00069gv37kol5nzk","content":"<hr>\n<p>本来没打算写这篇博客的，但是这里的扩&#x2F;缩容挺有意思的，于是就简单写写</p>\n<hr>\n<p><strong>目标：</strong> </p>\n<ul>\n<li>理解数据结构中后备数组的实现。</li>\n<li>通过测试和测试驱动开发来验证这些数据结构的正确性，获得更多经验。</li>\n</ul>\n<p>这次的<code>proj</code>就是实现一个循环数组，这里不放图了</p>\n<hr>\n<h4 id=\"Resizing-Up\"><a href=\"#Resizing-Up\" class=\"headerlink\" title=\"Resizing Up\"></a>Resizing Up</h4><p>扩&#x2F;缩容的底层逻辑就是新建一个数组，把旧数组的数据迁移过去就好了。<br>不过我写的不太优雅，这里不多解释，只是浅浅提一下要注意的地方</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ArrayDeque61B</span>&lt;T&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">Deque61B</span>&lt;T&gt; &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> size;  </span><br><span class=\"line\">    <span class=\"type\">int</span> nextFirst;  </span><br><span class=\"line\">    <span class=\"type\">int</span> nextLast;  </span><br><span class=\"line\">    T[] lst;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayDeque61B</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.nextLast = <span class=\"number\">1</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.lst = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[<span class=\"number\">8</span>];  </span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 扩容</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (((<span class=\"type\">double</span>) <span class=\"built_in\">this</span>.lst.length / <span class=\"built_in\">this</span>.size) &lt; <span class=\"number\">1.7</span>) &#123;  </span><br><span class=\"line\">    T[] lst1 = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[<span class=\"number\">2</span> * <span class=\"built_in\">this</span>.lst.length];  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; <span class=\"built_in\">this</span>.lst.length; i++ ) &#123;  </span><br><span class=\"line\">        lst1[i] = <span class=\"built_in\">this</span>.lst[ Math.floorMod((<span class=\"built_in\">this</span>.nextFirst + i), <span class=\"built_in\">this</span>.lst.length)]; </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.lst = lst1;  </span><br><span class=\"line\">    lst1 = <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextLast = <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>; <span class=\"comment\">// 插入从索引1开始  </span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>if ((this.lst.length / this.size) &gt; 0.6)</code>: <ul>\n<li><code>/ 运算符</code>:当两个操作数均为整数类型（如 <code>int</code>、<code>long</code>）时，会自动截断小数部分，返回整数商。</li>\n<li><code>((double) ...)</code>: 将数组容量转换为 double 类型，避免整数除法截断小数部分。</li>\n</ul>\n</li>\n<li><code> for (int i = 1; i &lt; this.lst.length; i++ )</code>: 理论上应该不会发生当<code>i</code>遍历到<code>this.nextLast</code>后，添加入本不应该包含的元素(删除时没有更改元素值位<code>null</code>,只是移动了<code>this.nestLast</code>),但是保险起见还是像下面缩容的写法最好</li>\n<li><code>lst1 = null;</code>: 释放内存  </li>\n<li><code>this.nextLast = ... ; this.nextFirst = ... ;</code>： 注意要改,最好和声明时保持一致，不然测试很麻烦</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 缩容</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (((<span class=\"type\">double</span>)<span class=\"built_in\">this</span>.lst.length / <span class=\"built_in\">this</span>.size) &gt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> Math.max(<span class=\"built_in\">this</span>.lst.length / <span class=\"number\">2</span> ,<span class=\"number\">3</span>);</span><br><span class=\"line\">    T[] lst2 = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[num];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;= <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">        lst2[i] = <span class=\"built_in\">this</span>.lst[Math.floorMod((<span class=\"built_in\">this</span>.nextFirst + i),<span class=\"built_in\">this</span>.lst.length)];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.lst = lst2;</span><br><span class=\"line\">    lst2 = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextLast = <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这里上面扩容差不多，就不多写了</li>\n</ul>\n","excerpt":"","more":"<hr>\n<p>本来没打算写这篇博客的，但是这里的扩&#x2F;缩容挺有意思的，于是就简单写写</p>\n<hr>\n<p><strong>目标：</strong> </p>\n<ul>\n<li>理解数据结构中后备数组的实现。</li>\n<li>通过测试和测试驱动开发来验证这些数据结构的正确性，获得更多经验。</li>\n</ul>\n<p>这次的<code>proj</code>就是实现一个循环数组，这里不放图了</p>\n<hr>\n<h4 id=\"Resizing-Up\"><a href=\"#Resizing-Up\" class=\"headerlink\" title=\"Resizing Up\"></a>Resizing Up</h4><p>扩&#x2F;缩容的底层逻辑就是新建一个数组，把旧数组的数据迁移过去就好了。<br>不过我写的不太优雅，这里不多解释，只是浅浅提一下要注意的地方</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ArrayDeque61B</span>&lt;T&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">Deque61B</span>&lt;T&gt; &#123;  </span><br><span class=\"line\">    <span class=\"type\">int</span> size;  </span><br><span class=\"line\">    <span class=\"type\">int</span> nextFirst;  </span><br><span class=\"line\">    <span class=\"type\">int</span> nextLast;  </span><br><span class=\"line\">    T[] lst;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">ArrayDeque61B</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.nextLast = <span class=\"number\">1</span>;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.lst = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[<span class=\"number\">8</span>];  </span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 扩容</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (((<span class=\"type\">double</span>) <span class=\"built_in\">this</span>.lst.length / <span class=\"built_in\">this</span>.size) &lt; <span class=\"number\">1.7</span>) &#123;  </span><br><span class=\"line\">    T[] lst1 = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[<span class=\"number\">2</span> * <span class=\"built_in\">this</span>.lst.length];  </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; <span class=\"built_in\">this</span>.lst.length; i++ ) &#123;  </span><br><span class=\"line\">        lst1[i] = <span class=\"built_in\">this</span>.lst[ Math.floorMod((<span class=\"built_in\">this</span>.nextFirst + i), <span class=\"built_in\">this</span>.lst.length)]; </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.lst = lst1;  </span><br><span class=\"line\">    lst1 = <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextLast = <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>; <span class=\"comment\">// 插入从索引1开始  </span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>if ((this.lst.length / this.size) &gt; 0.6)</code>: <ul>\n<li><code>/ 运算符</code>:当两个操作数均为整数类型（如 <code>int</code>、<code>long</code>）时，会自动截断小数部分，返回整数商。</li>\n<li><code>((double) ...)</code>: 将数组容量转换为 double 类型，避免整数除法截断小数部分。</li>\n</ul>\n</li>\n<li><code> for (int i = 1; i &lt; this.lst.length; i++ )</code>: 理论上应该不会发生当<code>i</code>遍历到<code>this.nextLast</code>后，添加入本不应该包含的元素(删除时没有更改元素值位<code>null</code>,只是移动了<code>this.nestLast</code>),但是保险起见还是像下面缩容的写法最好</li>\n<li><code>lst1 = null;</code>: 释放内存  </li>\n<li><code>this.nextLast = ... ; this.nextFirst = ... ;</code>： 注意要改,最好和声明时保持一致，不然测试很麻烦</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 缩容</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (((<span class=\"type\">double</span>)<span class=\"built_in\">this</span>.lst.length / <span class=\"built_in\">this</span>.size) &gt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> Math.max(<span class=\"built_in\">this</span>.lst.length / <span class=\"number\">2</span> ,<span class=\"number\">3</span>);</span><br><span class=\"line\">    T[] lst2 = (T[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[num];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;= <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">        lst2[i] = <span class=\"built_in\">this</span>.lst[Math.floorMod((<span class=\"built_in\">this</span>.nextFirst + i),<span class=\"built_in\">this</span>.lst.length)];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.lst = lst2;</span><br><span class=\"line\">    lst2 = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextLast = <span class=\"built_in\">this</span>.size + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.nextFirst = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>这里上面扩容差不多，就不多写了</li>\n</ul>\n"},{"title":"SSH面试","cssclasses":["Serve","SSH"],"_content":"#### 服务的底层原理是什么？\n>SSH（Secure Shell）服务是一种用于在网络中安全远程登录和执行命令的协议，其底层原理围绕**加密通信**、**身份认证**和**数据完整性校验**展开，旨在解决传统明文协议（如 Telnet、FTP）的安全漏洞。\n1. **加密技术**\n\t*  **非对称加密（公钥加密）**\n\t* **对称加密（共享密钥加密）**：\n2. **身份认证**\n\t* **密码认证**\n\t* **公钥认证** : 客户端提前将自己的公钥存入服务器的`~/.ssh/authorized_keys`文件中。连接时，服务器生成随机字符串并用客户端公钥加密，客户端用私钥解密后发回服务器，服务器验证解密结果是否匹配，无需传输密码，安全性更高。\n\t*  **主机密钥认证**：首次连接时，服务器发送自己的主机公钥，客户端确认后保存（`~/.ssh/known_hosts`），后续连接验证主机身份，防止中间人攻击。\n3. **数据完整性校验**\n#### 有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\n| 软件 / 服务        | 核心功能                   | 与 SSH 的相同点              | 与 SSH 的不同点                                                |\n| -------------- | ---------------------- | ----------------------- | --------------------------------------------------------- |\n| **FinalShell** | 远程登录、文件传输、服务器监控        | 基于 SSH 协议，支持加密传输和远程命令执行 | 集成图形化监控面板、进程管理、服务器性能分析；资源占用较高（依赖 JVM）                     |\n| **WindTerm**   | 轻量远程终端、文件传输            | 基于 SSH 协议，支持多会话管理和加密通信  | 轻量级（启动仅需几 MB 内存），支持标签页、分屏；无多余功能，专注终端体验                    |\n| **Termius**    | 跨平台远程终端、会话同步           | 基于 SSH 协议，支持密钥认证和文件传输   | 支持 Windows/macOS/Linux/iOS/Android 跨平台同步；提供触控优化界面（移动设备友好） |\n| **MobaXterm**  | 集成多协议远程工具（SSH/RDP/VNC） | 支持 SSH 核心功能，加密传输和命令交互   | 集成 RDP、VNC、FTP 等协议；提供 X 服务器功能、图形化 SFTP 文件管理器              |\n| **Telnet**     | 远程终端协议（无加密）            | 支持远程命令执行和终端交互           | 明文传输（无加密），安全性极低；协议简单，兼容性极老设备                              |\n| **RDP（远程桌面）**  | 图形化远程桌面控制              | 支持远程系统操作                | 基于图形化界面（非命令行），依赖 Windows 系统；传输效率高但协议封闭                    |\n| **VNC**        | 跨平台图形化远程控制             | 支持远程系统操作                | 基于图形化界面，开源协议；传输效率较低，需额外加密（如配合 SSH 隧道）                     |\n\n#### 我们在公司里都会在哪些场景下使用\n| 场景           | 具体用途                         | 示例 / 工具                                                                                   |\n| ------------ | ---------------------------- | ----------------------------------------------------------------------------------------- |\n| **远程服务器管理**  | 通过命令行执行系统操作（如部署服务、修改配置、监控进程） | `ssh user@server` + 命令（`systemctl`, `vim`, `top`）                                         |\n| **自动化运维**    | 结合脚本批量执行任务（如更新软件包、同步配置）      | Shell 脚本 + `sshpass` 或 Ansible（基于 SSH 协议）                                                 |\n| **安全文件传输**   | 替代 FTP/SCP，安全上传 / 下载文件       | `scp`、`sftp` 或图形化工具（如 FileZilla 通过 SSH 通道）                                                |\n| **端口转发（隧道）** | 突破网络限制访问内网服务（如数据库、Web 应用）    | 本地转发：`ssh -L 8080:localhost:80 user@server`  <br>动态转发（SOCKS 代理）：`ssh -D 1080 user@server` |\n| **跳板机（堡垒机）** | 通过中间服务器间接访问内部服务器，增强安全审计      | JumpServer、Teleport 等堡垒机系统                                                                |\n| **开发协作**     | 连接远程开发环境（如云服务器、Docker 容器）    | VS Code Remote - SSH 插件、JetBrains IDE 的远程开发功能                                             |\n#### 服务在使用或者安装中遇到过什么问题\n|问题类型|具体表现|可能原因|解决方案|\n|---|---|---|---|\n|**连接失败**|无法通过`ssh`命令连接服务器|1. 服务器 SSH 服务未启动（`systemctl status sshd`）  <br>2. 防火墙阻止 22 端口（`ufw allow 22`）  <br>3. 服务器 IP 或端口配置错误|1. 启动 SSH 服务：`systemctl start sshd`  <br>2. 开放防火墙：`sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT`  <br>3. 检查配置文件：`/etc/ssh/sshd_config`|\n|**密钥认证失败**|使用密钥登录时提示`Permission denied`|1. 公钥未正确添加到服务器`~/.ssh/authorized_keys`  <br>2. 密钥文件权限错误（私钥权限需为 600）  <br>3. 密钥类型不匹配（如 RSA vs ECDSA）|1. 重新生成密钥：`ssh-keygen -t rsa`  <br>2. 复制公钥到服务器：`ssh-copy-id user@server`  <br>3. 检查权限：`chmod 600 ~/.ssh/id_rsa`|\n|**慢连接或卡顿**|连接响应缓慢或操作延迟|1. DNS 反向解析超时（`GSSAPIAuthentication no`）  <br>2. 网络质量差  <br>3. 服务器负载过高|1. 修改配置：`/etc/ssh/sshd_config` 添加 `UseDNS no`  <br>2. 使用`mosh`（Mobile Shell）替代 SSH，支持断网续连|\n|**端口占用冲突**|无法在标准 22 端口启动 SSH 服务|1. 其他服务占用 22 端口（如 Telnet）  <br>2. 多 SSH 服务实例冲突|1. 修改 SSH 端口：`/etc/ssh/sshd_config` 中将`Port 22`改为其他端口（如 2222）  <br>2. 重启服务：`systemctl restart sshd`|\n|**中间人攻击风险**|首次连接提示`REMOTE HOST IDENTIFICATION HAS CHANGED!`|1. 服务器密钥被重置  <br>2. 中间人攻击（需高度警惕）|1. 手动删除旧密钥：`ssh-keygen -R [server_ip]`  <br>2. 联系管理员确认服务器公钥指纹|\n#### 服务的其他使用场景是什么 (在别的公司如何用）\n|行业|特色应用场景|技术实现|\n|---|---|---|\n|**金融 / 证券**|1. 加密传输交易数据  <br>2. 通过 SSH 隧道访问内部交易系统  <br>3. 堡垒机集中审计所有运维操作|1. 自定义 SSH 端口（如 2222）+ TLS 加密  <br>2. 与 LDAP/AD 集成实现用户认证  <br>3. 日志审计工具（如 ELK Stack）收集 SSH 会话记录|\n|**互联网企业**|1. 大规模集群自动化部署（Kubernetes 节点管理）  <br>2. Git 代码仓库管理（如 GitLab 基于 SSH 协议）|1. 使用 Ansible/Puppet 通过 SSH 批量配置服务器  <br>2. Git 客户端通过 SSH 协议推送 / 拉取代码：`git clone git@github.com:user/repo.git`|\n|**教育 / 科研**|1. 远程访问高性能计算集群（HPC）  <br>2. 学生远程实验室环境管理|1. 通过 SSH 连接超级计算机执行计算任务  <br>2. JupyterHub 通过 SSH 认证学生账户并分配计算资源|\n|**制造业**|1. 远程维护工业控制系统（PLC、SCADA）  <br>2. 加密传输生产数据|1. 通过 SSH 网关安全访问生产网络  <br>2. 结合 VPN 和 SSH 实现工控设备的远程运维|\n|**云服务提供商**|1. 提供 SSH 密钥对管理界面（如 AWS EC2 控制台）  <br>2. 基于 SSH 的容器远程调试|1. 用户通过控制台生成 SSH 密钥并绑定到云服务器  <br>2. Docker 通过 SSH 远程 API 管理容器：`docker -H ssh://user@server ps`|\n#### 目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\n\nSSH 协议有两个主要版本，当前主流使用**SSH-2.0**：\n\n| 协议版本      | 特点                                                                            | 安全性         | 现状                 |\n| --------- | ----------------------------------------------------------------------------- | ----------- | ------------------ |\n| **SSH-1** | 1995 年发布，早期版本  <br>2. 存在安全漏洞（如缓冲区溢出）  <br>3. 加密算法单一（如 DES）                    | 低（已被破解）     | 已淘汰，现代 SSH 服务器默认禁用 |\n| **SSH-2** | 2006 年标准化（RFC 4251-4254）  <br>2. 修复 SSH-1 安全缺陷  <br>3. 支持多种加密算法（AES、ChaCha20） | 高（持续更新加密机制） |                    |\n#### OpenSSH 版本（开源 SSH 实现）\n\n- **最新稳定版**：OpenSSH 9.5p1（2023 年 12 月发布）\n- **主流 Linux 发行版默认版本**：\n    - Ubuntu 22.04：OpenSSH 8.9p1\n    - CentOS 8：OpenSSH 8.0p1\n    - macOS Sonoma：OpenSSH 9.3p2\n\n#### 版本差异（以 OpenSSH 为例）\n\n| 版本      | 关键特性                                                        | 安全增强                                            |\n| ------- | ----------------------------------------------------------- | ----------------------------------------------- |\n| **8.x** | 1. 支持 ChaCha20-Poly1305 加密算法（移动设备优化）  <br>2. 引入证书认证（SSH CA） | 禁用弱密码哈希（如 MD5）  <br>2. 修复 CVE-2016-0777（认证绕过漏洞） |\n| **9.x** | 1. 默认禁用 RSA-1024 密钥（强度不足）  <br>2. 支持量子抗性密钥交换（实验性）           | 修复 CVE-2023-38408（拒绝服务漏洞）  <br>2. 强化密钥生成随       |\n#### 这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的\n\nSSH 服务（以 OpenSSH 为例）由多个独立模块组成：\n\n|模块 / 组件|功能描述|配置文件 / 路径|\n|---|---|---|\n|**sshd**|SSH 服务器守护进程，监听 22 端口接收客户端连接|`/etc/ssh/sshd_config`（配置文件）  <br>`/usr/sbin/sshd`（二进制文件）|\n|**ssh**|SSH 客户端命令行工具，用于发起远程连接|`/usr/bin/ssh`|\n|**scp/sftp**|基于 SSH 的文件传输工具|`/usr/bin/scp`  <br>`/usr/lib/openssh/sftp-server`|\n|**密钥管理**|生成 / 管理密钥对（如`ssh-keygen`）|私钥：`~/.ssh/id_rsa`  <br>公钥：`~/.ssh/id_rsa.pub`  <br>授权公钥：`~/.ssh/authorized_keys`|\n|**认证模块**|实现密码认证、公钥认证、GSSAPI 认证等|PAM 模块：`/etc/pam.d/sshd`|\n|**加密库**|提供加密算法支持（如 OpenSSL、libcrypto）|依赖系统加密库（如`/lib/x86_64-linux-gnu/libcrypto.s`|\n\n#### 服务的升级是怎么做的，每个版本都有哪些相应的漏洞\nSSH 服务的升级需根据操作系统（如 Linux、Windows）和具体实现（如 OpenSSH、Dropbear）选择对应方式，核心是替换旧版本程序并保留配置，步骤如下：\n\n- **Linux 系统（以 OpenSSH 为例）**：\n    - 通过包管理器升级（推荐）：  \n        如 Ubuntu/Debian 使用 `sudo apt update && sudo apt upgrade openssh-server openssh-client`，CentOS/RHEL 使用 `sudo yum update openssh-server openssh-clients`，自动处理依赖并保留配置。\n    - 源码编译升级：  \n        下载对应版本源码（如[OpenSSH 官网](https://www.openssh.com/)），解压后执行 `./configure && make && sudo make install`，需手动处理依赖（如 OpenSSL），适合需要定制化的场景。\n- **Windows 系统（以 PuTTY/OpenSSH 为例）**：\n    - PuTTY 等客户端直接下载最新版本安装包覆盖安装；\n    - 微软 OpenSSH 服务可通过 `winget upgrade` 或手动下载 MSI 包升级。\n- **升级注意事项**：\n    - 升级前备份配置文件（如 `/etc/ssh/sshd_config`）和密钥；\n    - 升级后重启服务（如 `sudo systemctl restart sshd`），并验证连接是否正常；\n    - 对于生产环境，建议先在测试环境验证兼容性。\n#### 这个服务可以与哪些服务结合有意想不到的功能或者解决方案\n\n1. **与端口转发结合：构建加密通道**\n- **场景**：通过 SSH 端口转发（本地转发、远程转发、动态转发）加密传输其他协议（如 HTTP、MySQL、VNC）的数据，解决明文传输安全问题。\n\n2. 与文件传输服务结合：替代 FTP/SCP\n- **场景**：SSH 自带的`sftp`和`scp`可替代不安全的 FTP，结合`rsync`实现增量加密备份。\n\n3. 与隧道服务结合：搭建虚拟私有网络（VPN）\n\n- **场景**：通过 SSH 隧道模拟 VPN，访问内网服务（如数据库、OA 系统）。\n- **示例**：  \n    本地机器通过 `ssh -fN -L 3306:db-server:3306 user@jump-server` 连接跳板机，将内网数据库（db-server:3306）映射到本地 3306 端口，直接通过本地客户端访问内网数据库，无需单独部署 VPN。\n\n4. 与自动化工具结合：批量管理服务器\n\n- **场景**：结合 Ansible、SaltStack 等工具，通过 SSH 协议批量执行命令、部署配置，替代手动登录操作。\n\n 5. 与容器 / 云服务结合：管理隔离环境\n\n- **场景**：在 Docker、Kubernetes 或云服务器（如 AWS EC2）中，通过 SSH 访问容器或实例内部，解决网络隔离问题。\n- **示例**：\n    - 对 Docker 容器：`docker exec -it <container> /bin/bash` 需容器运行 SSH 服务，或通过 `ssh -i key.pem user@container-ip` 直接访问；\n    - 对 K8s Pod：通过 `kubectl port-forward pod/<pod-name> 2222:22` 映射 SSH 端口到本地，再用`ssh localhost -p 2222` 访问。\n 6. 与日志 / 监控服务结合：安全传输数据\n\n- **场景**：通过 SSH 隧道将服务器日志、监控指标（如 Prometheus 数据）加密传输到管理节点，避免明文泄露。\n- **解决方案**：  \n    配置 Logstash 通过 SSH 隧道连接远程服务器，或使用`rsync over ssh`定期同步日志文件到分析服务器，确保数据在传输中不被篡改。\n\n#### 从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\n\n  - **权限过度开放**：默认允许 root 直接登录，若密钥或密码泄露，攻击者可直接获取最高权限。\n  - **日志审计缺失**：默认日志记录较简单，若未配置详细审计，攻击行为可能无法追溯。\n  - **端口暴露风险**：默认使用 22 端口，易成为扫描和攻击目标（如暴力破解）。\n  - **算法漏洞**：部分旧版本支持不安全的加密算法（如 DES、MD5）或密钥交换算法（如 diffie-hellman-group1-sha1），可能被破解。","source":"Serve/SSH面试.md","raw":"---\ntitle: SSH面试\ncssclasses:\n  - Serve\n  - SSH\n---\n#### 服务的底层原理是什么？\n>SSH（Secure Shell）服务是一种用于在网络中安全远程登录和执行命令的协议，其底层原理围绕**加密通信**、**身份认证**和**数据完整性校验**展开，旨在解决传统明文协议（如 Telnet、FTP）的安全漏洞。\n1. **加密技术**\n\t*  **非对称加密（公钥加密）**\n\t* **对称加密（共享密钥加密）**：\n2. **身份认证**\n\t* **密码认证**\n\t* **公钥认证** : 客户端提前将自己的公钥存入服务器的`~/.ssh/authorized_keys`文件中。连接时，服务器生成随机字符串并用客户端公钥加密，客户端用私钥解密后发回服务器，服务器验证解密结果是否匹配，无需传输密码，安全性更高。\n\t*  **主机密钥认证**：首次连接时，服务器发送自己的主机公钥，客户端确认后保存（`~/.ssh/known_hosts`），后续连接验证主机身份，防止中间人攻击。\n3. **数据完整性校验**\n#### 有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\n| 软件 / 服务        | 核心功能                   | 与 SSH 的相同点              | 与 SSH 的不同点                                                |\n| -------------- | ---------------------- | ----------------------- | --------------------------------------------------------- |\n| **FinalShell** | 远程登录、文件传输、服务器监控        | 基于 SSH 协议，支持加密传输和远程命令执行 | 集成图形化监控面板、进程管理、服务器性能分析；资源占用较高（依赖 JVM）                     |\n| **WindTerm**   | 轻量远程终端、文件传输            | 基于 SSH 协议，支持多会话管理和加密通信  | 轻量级（启动仅需几 MB 内存），支持标签页、分屏；无多余功能，专注终端体验                    |\n| **Termius**    | 跨平台远程终端、会话同步           | 基于 SSH 协议，支持密钥认证和文件传输   | 支持 Windows/macOS/Linux/iOS/Android 跨平台同步；提供触控优化界面（移动设备友好） |\n| **MobaXterm**  | 集成多协议远程工具（SSH/RDP/VNC） | 支持 SSH 核心功能，加密传输和命令交互   | 集成 RDP、VNC、FTP 等协议；提供 X 服务器功能、图形化 SFTP 文件管理器              |\n| **Telnet**     | 远程终端协议（无加密）            | 支持远程命令执行和终端交互           | 明文传输（无加密），安全性极低；协议简单，兼容性极老设备                              |\n| **RDP（远程桌面）**  | 图形化远程桌面控制              | 支持远程系统操作                | 基于图形化界面（非命令行），依赖 Windows 系统；传输效率高但协议封闭                    |\n| **VNC**        | 跨平台图形化远程控制             | 支持远程系统操作                | 基于图形化界面，开源协议；传输效率较低，需额外加密（如配合 SSH 隧道）                     |\n\n#### 我们在公司里都会在哪些场景下使用\n| 场景           | 具体用途                         | 示例 / 工具                                                                                   |\n| ------------ | ---------------------------- | ----------------------------------------------------------------------------------------- |\n| **远程服务器管理**  | 通过命令行执行系统操作（如部署服务、修改配置、监控进程） | `ssh user@server` + 命令（`systemctl`, `vim`, `top`）                                         |\n| **自动化运维**    | 结合脚本批量执行任务（如更新软件包、同步配置）      | Shell 脚本 + `sshpass` 或 Ansible（基于 SSH 协议）                                                 |\n| **安全文件传输**   | 替代 FTP/SCP，安全上传 / 下载文件       | `scp`、`sftp` 或图形化工具（如 FileZilla 通过 SSH 通道）                                                |\n| **端口转发（隧道）** | 突破网络限制访问内网服务（如数据库、Web 应用）    | 本地转发：`ssh -L 8080:localhost:80 user@server`  <br>动态转发（SOCKS 代理）：`ssh -D 1080 user@server` |\n| **跳板机（堡垒机）** | 通过中间服务器间接访问内部服务器，增强安全审计      | JumpServer、Teleport 等堡垒机系统                                                                |\n| **开发协作**     | 连接远程开发环境（如云服务器、Docker 容器）    | VS Code Remote - SSH 插件、JetBrains IDE 的远程开发功能                                             |\n#### 服务在使用或者安装中遇到过什么问题\n|问题类型|具体表现|可能原因|解决方案|\n|---|---|---|---|\n|**连接失败**|无法通过`ssh`命令连接服务器|1. 服务器 SSH 服务未启动（`systemctl status sshd`）  <br>2. 防火墙阻止 22 端口（`ufw allow 22`）  <br>3. 服务器 IP 或端口配置错误|1. 启动 SSH 服务：`systemctl start sshd`  <br>2. 开放防火墙：`sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT`  <br>3. 检查配置文件：`/etc/ssh/sshd_config`|\n|**密钥认证失败**|使用密钥登录时提示`Permission denied`|1. 公钥未正确添加到服务器`~/.ssh/authorized_keys`  <br>2. 密钥文件权限错误（私钥权限需为 600）  <br>3. 密钥类型不匹配（如 RSA vs ECDSA）|1. 重新生成密钥：`ssh-keygen -t rsa`  <br>2. 复制公钥到服务器：`ssh-copy-id user@server`  <br>3. 检查权限：`chmod 600 ~/.ssh/id_rsa`|\n|**慢连接或卡顿**|连接响应缓慢或操作延迟|1. DNS 反向解析超时（`GSSAPIAuthentication no`）  <br>2. 网络质量差  <br>3. 服务器负载过高|1. 修改配置：`/etc/ssh/sshd_config` 添加 `UseDNS no`  <br>2. 使用`mosh`（Mobile Shell）替代 SSH，支持断网续连|\n|**端口占用冲突**|无法在标准 22 端口启动 SSH 服务|1. 其他服务占用 22 端口（如 Telnet）  <br>2. 多 SSH 服务实例冲突|1. 修改 SSH 端口：`/etc/ssh/sshd_config` 中将`Port 22`改为其他端口（如 2222）  <br>2. 重启服务：`systemctl restart sshd`|\n|**中间人攻击风险**|首次连接提示`REMOTE HOST IDENTIFICATION HAS CHANGED!`|1. 服务器密钥被重置  <br>2. 中间人攻击（需高度警惕）|1. 手动删除旧密钥：`ssh-keygen -R [server_ip]`  <br>2. 联系管理员确认服务器公钥指纹|\n#### 服务的其他使用场景是什么 (在别的公司如何用）\n|行业|特色应用场景|技术实现|\n|---|---|---|\n|**金融 / 证券**|1. 加密传输交易数据  <br>2. 通过 SSH 隧道访问内部交易系统  <br>3. 堡垒机集中审计所有运维操作|1. 自定义 SSH 端口（如 2222）+ TLS 加密  <br>2. 与 LDAP/AD 集成实现用户认证  <br>3. 日志审计工具（如 ELK Stack）收集 SSH 会话记录|\n|**互联网企业**|1. 大规模集群自动化部署（Kubernetes 节点管理）  <br>2. Git 代码仓库管理（如 GitLab 基于 SSH 协议）|1. 使用 Ansible/Puppet 通过 SSH 批量配置服务器  <br>2. Git 客户端通过 SSH 协议推送 / 拉取代码：`git clone git@github.com:user/repo.git`|\n|**教育 / 科研**|1. 远程访问高性能计算集群（HPC）  <br>2. 学生远程实验室环境管理|1. 通过 SSH 连接超级计算机执行计算任务  <br>2. JupyterHub 通过 SSH 认证学生账户并分配计算资源|\n|**制造业**|1. 远程维护工业控制系统（PLC、SCADA）  <br>2. 加密传输生产数据|1. 通过 SSH 网关安全访问生产网络  <br>2. 结合 VPN 和 SSH 实现工控设备的远程运维|\n|**云服务提供商**|1. 提供 SSH 密钥对管理界面（如 AWS EC2 控制台）  <br>2. 基于 SSH 的容器远程调试|1. 用户通过控制台生成 SSH 密钥并绑定到云服务器  <br>2. Docker 通过 SSH 远程 API 管理容器：`docker -H ssh://user@server ps`|\n#### 目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\n\nSSH 协议有两个主要版本，当前主流使用**SSH-2.0**：\n\n| 协议版本      | 特点                                                                            | 安全性         | 现状                 |\n| --------- | ----------------------------------------------------------------------------- | ----------- | ------------------ |\n| **SSH-1** | 1995 年发布，早期版本  <br>2. 存在安全漏洞（如缓冲区溢出）  <br>3. 加密算法单一（如 DES）                    | 低（已被破解）     | 已淘汰，现代 SSH 服务器默认禁用 |\n| **SSH-2** | 2006 年标准化（RFC 4251-4254）  <br>2. 修复 SSH-1 安全缺陷  <br>3. 支持多种加密算法（AES、ChaCha20） | 高（持续更新加密机制） |                    |\n#### OpenSSH 版本（开源 SSH 实现）\n\n- **最新稳定版**：OpenSSH 9.5p1（2023 年 12 月发布）\n- **主流 Linux 发行版默认版本**：\n    - Ubuntu 22.04：OpenSSH 8.9p1\n    - CentOS 8：OpenSSH 8.0p1\n    - macOS Sonoma：OpenSSH 9.3p2\n\n#### 版本差异（以 OpenSSH 为例）\n\n| 版本      | 关键特性                                                        | 安全增强                                            |\n| ------- | ----------------------------------------------------------- | ----------------------------------------------- |\n| **8.x** | 1. 支持 ChaCha20-Poly1305 加密算法（移动设备优化）  <br>2. 引入证书认证（SSH CA） | 禁用弱密码哈希（如 MD5）  <br>2. 修复 CVE-2016-0777（认证绕过漏洞） |\n| **9.x** | 1. 默认禁用 RSA-1024 密钥（强度不足）  <br>2. 支持量子抗性密钥交换（实验性）           | 修复 CVE-2023-38408（拒绝服务漏洞）  <br>2. 强化密钥生成随       |\n#### 这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的\n\nSSH 服务（以 OpenSSH 为例）由多个独立模块组成：\n\n|模块 / 组件|功能描述|配置文件 / 路径|\n|---|---|---|\n|**sshd**|SSH 服务器守护进程，监听 22 端口接收客户端连接|`/etc/ssh/sshd_config`（配置文件）  <br>`/usr/sbin/sshd`（二进制文件）|\n|**ssh**|SSH 客户端命令行工具，用于发起远程连接|`/usr/bin/ssh`|\n|**scp/sftp**|基于 SSH 的文件传输工具|`/usr/bin/scp`  <br>`/usr/lib/openssh/sftp-server`|\n|**密钥管理**|生成 / 管理密钥对（如`ssh-keygen`）|私钥：`~/.ssh/id_rsa`  <br>公钥：`~/.ssh/id_rsa.pub`  <br>授权公钥：`~/.ssh/authorized_keys`|\n|**认证模块**|实现密码认证、公钥认证、GSSAPI 认证等|PAM 模块：`/etc/pam.d/sshd`|\n|**加密库**|提供加密算法支持（如 OpenSSL、libcrypto）|依赖系统加密库（如`/lib/x86_64-linux-gnu/libcrypto.s`|\n\n#### 服务的升级是怎么做的，每个版本都有哪些相应的漏洞\nSSH 服务的升级需根据操作系统（如 Linux、Windows）和具体实现（如 OpenSSH、Dropbear）选择对应方式，核心是替换旧版本程序并保留配置，步骤如下：\n\n- **Linux 系统（以 OpenSSH 为例）**：\n    - 通过包管理器升级（推荐）：  \n        如 Ubuntu/Debian 使用 `sudo apt update && sudo apt upgrade openssh-server openssh-client`，CentOS/RHEL 使用 `sudo yum update openssh-server openssh-clients`，自动处理依赖并保留配置。\n    - 源码编译升级：  \n        下载对应版本源码（如[OpenSSH 官网](https://www.openssh.com/)），解压后执行 `./configure && make && sudo make install`，需手动处理依赖（如 OpenSSL），适合需要定制化的场景。\n- **Windows 系统（以 PuTTY/OpenSSH 为例）**：\n    - PuTTY 等客户端直接下载最新版本安装包覆盖安装；\n    - 微软 OpenSSH 服务可通过 `winget upgrade` 或手动下载 MSI 包升级。\n- **升级注意事项**：\n    - 升级前备份配置文件（如 `/etc/ssh/sshd_config`）和密钥；\n    - 升级后重启服务（如 `sudo systemctl restart sshd`），并验证连接是否正常；\n    - 对于生产环境，建议先在测试环境验证兼容性。\n#### 这个服务可以与哪些服务结合有意想不到的功能或者解决方案\n\n1. **与端口转发结合：构建加密通道**\n- **场景**：通过 SSH 端口转发（本地转发、远程转发、动态转发）加密传输其他协议（如 HTTP、MySQL、VNC）的数据，解决明文传输安全问题。\n\n2. 与文件传输服务结合：替代 FTP/SCP\n- **场景**：SSH 自带的`sftp`和`scp`可替代不安全的 FTP，结合`rsync`实现增量加密备份。\n\n3. 与隧道服务结合：搭建虚拟私有网络（VPN）\n\n- **场景**：通过 SSH 隧道模拟 VPN，访问内网服务（如数据库、OA 系统）。\n- **示例**：  \n    本地机器通过 `ssh -fN -L 3306:db-server:3306 user@jump-server` 连接跳板机，将内网数据库（db-server:3306）映射到本地 3306 端口，直接通过本地客户端访问内网数据库，无需单独部署 VPN。\n\n4. 与自动化工具结合：批量管理服务器\n\n- **场景**：结合 Ansible、SaltStack 等工具，通过 SSH 协议批量执行命令、部署配置，替代手动登录操作。\n\n 5. 与容器 / 云服务结合：管理隔离环境\n\n- **场景**：在 Docker、Kubernetes 或云服务器（如 AWS EC2）中，通过 SSH 访问容器或实例内部，解决网络隔离问题。\n- **示例**：\n    - 对 Docker 容器：`docker exec -it <container> /bin/bash` 需容器运行 SSH 服务，或通过 `ssh -i key.pem user@container-ip` 直接访问；\n    - 对 K8s Pod：通过 `kubectl port-forward pod/<pod-name> 2222:22` 映射 SSH 端口到本地，再用`ssh localhost -p 2222` 访问。\n 6. 与日志 / 监控服务结合：安全传输数据\n\n- **场景**：通过 SSH 隧道将服务器日志、监控指标（如 Prometheus 数据）加密传输到管理节点，避免明文泄露。\n- **解决方案**：  \n    配置 Logstash 通过 SSH 隧道连接远程服务器，或使用`rsync over ssh`定期同步日志文件到分析服务器，确保数据在传输中不被篡改。\n\n#### 从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\n\n  - **权限过度开放**：默认允许 root 直接登录，若密钥或密码泄露，攻击者可直接获取最高权限。\n  - **日志审计缺失**：默认日志记录较简单，若未配置详细审计，攻击行为可能无法追溯。\n  - **端口暴露风险**：默认使用 22 端口，易成为扫描和攻击目标（如暴力破解）。\n  - **算法漏洞**：部分旧版本支持不安全的加密算法（如 DES、MD5）或密钥交换算法（如 diffie-hellman-group1-sha1），可能被破解。","date":"2025-07-24T09:16:43.709Z","updated":"2025-07-24T09:16:43.709Z","path":"Serve/SSH面试.html","comments":1,"layout":"page","_id":"cmdh6nnwf00079gv31edcdab4","content":"<h4 id=\"服务的底层原理是什么？\"><a href=\"#服务的底层原理是什么？\" class=\"headerlink\" title=\"服务的底层原理是什么？\"></a>服务的底层原理是什么？</h4><blockquote>\n<p>SSH（Secure Shell）服务是一种用于在网络中安全远程登录和执行命令的协议，其底层原理围绕<strong>加密通信</strong>、<strong>身份认证</strong>和<strong>数据完整性校验</strong>展开，旨在解决传统明文协议（如 Telnet、FTP）的安全漏洞。</p>\n</blockquote>\n<ol>\n<li><strong>加密技术</strong><ul>\n<li><strong>非对称加密（公钥加密）</strong></li>\n<li><strong>对称加密（共享密钥加密）</strong>：</li>\n</ul>\n</li>\n<li><strong>身份认证</strong><ul>\n<li><strong>密码认证</strong></li>\n<li><strong>公钥认证</strong> : 客户端提前将自己的公钥存入服务器的<code>~/.ssh/authorized_keys</code>文件中。连接时，服务器生成随机字符串并用客户端公钥加密，客户端用私钥解密后发回服务器，服务器验证解密结果是否匹配，无需传输密码，安全性更高。</li>\n<li><strong>主机密钥认证</strong>：首次连接时，服务器发送自己的主机公钥，客户端确认后保存（<code>~/.ssh/known_hosts</code>），后续连接验证主机身份，防止中间人攻击。</li>\n</ul>\n</li>\n<li><strong>数据完整性校验</strong></li>\n</ol>\n<h4 id=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"><a href=\"#有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\" class=\"headerlink\" title=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"></a>有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？</h4><table>\n<thead>\n<tr>\n<th>软件 &#x2F; 服务</th>\n<th>核心功能</th>\n<th>与 SSH 的相同点</th>\n<th>与 SSH 的不同点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>FinalShell</strong></td>\n<td>远程登录、文件传输、服务器监控</td>\n<td>基于 SSH 协议，支持加密传输和远程命令执行</td>\n<td>集成图形化监控面板、进程管理、服务器性能分析；资源占用较高（依赖 JVM）</td>\n</tr>\n<tr>\n<td><strong>WindTerm</strong></td>\n<td>轻量远程终端、文件传输</td>\n<td>基于 SSH 协议，支持多会话管理和加密通信</td>\n<td>轻量级（启动仅需几 MB 内存），支持标签页、分屏；无多余功能，专注终端体验</td>\n</tr>\n<tr>\n<td><strong>Termius</strong></td>\n<td>跨平台远程终端、会话同步</td>\n<td>基于 SSH 协议，支持密钥认证和文件传输</td>\n<td>支持 Windows&#x2F;macOS&#x2F;Linux&#x2F;iOS&#x2F;Android 跨平台同步；提供触控优化界面（移动设备友好）</td>\n</tr>\n<tr>\n<td><strong>MobaXterm</strong></td>\n<td>集成多协议远程工具（SSH&#x2F;RDP&#x2F;VNC）</td>\n<td>支持 SSH 核心功能，加密传输和命令交互</td>\n<td>集成 RDP、VNC、FTP 等协议；提供 X 服务器功能、图形化 SFTP 文件管理器</td>\n</tr>\n<tr>\n<td><strong>Telnet</strong></td>\n<td>远程终端协议（无加密）</td>\n<td>支持远程命令执行和终端交互</td>\n<td>明文传输（无加密），安全性极低；协议简单，兼容性极老设备</td>\n</tr>\n<tr>\n<td><strong>RDP（远程桌面）</strong></td>\n<td>图形化远程桌面控制</td>\n<td>支持远程系统操作</td>\n<td>基于图形化界面（非命令行），依赖 Windows 系统；传输效率高但协议封闭</td>\n</tr>\n<tr>\n<td><strong>VNC</strong></td>\n<td>跨平台图形化远程控制</td>\n<td>支持远程系统操作</td>\n<td>基于图形化界面，开源协议；传输效率较低，需额外加密（如配合 SSH 隧道）</td>\n</tr>\n</tbody></table>\n<h4 id=\"我们在公司里都会在哪些场景下使用\"><a href=\"#我们在公司里都会在哪些场景下使用\" class=\"headerlink\" title=\"我们在公司里都会在哪些场景下使用\"></a>我们在公司里都会在哪些场景下使用</h4><table>\n<thead>\n<tr>\n<th>场景</th>\n<th>具体用途</th>\n<th>示例 &#x2F; 工具</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>远程服务器管理</strong></td>\n<td>通过命令行执行系统操作（如部署服务、修改配置、监控进程）</td>\n<td><code>ssh user@server</code> + 命令（<code>systemctl</code>, <code>vim</code>, <code>top</code>）</td>\n</tr>\n<tr>\n<td><strong>自动化运维</strong></td>\n<td>结合脚本批量执行任务（如更新软件包、同步配置）</td>\n<td>Shell 脚本 + <code>sshpass</code> 或 Ansible（基于 SSH 协议）</td>\n</tr>\n<tr>\n<td><strong>安全文件传输</strong></td>\n<td>替代 FTP&#x2F;SCP，安全上传 &#x2F; 下载文件</td>\n<td><code>scp</code>、<code>sftp</code> 或图形化工具（如 FileZilla 通过 SSH 通道）</td>\n</tr>\n<tr>\n<td><strong>端口转发（隧道）</strong></td>\n<td>突破网络限制访问内网服务（如数据库、Web 应用）</td>\n<td>本地转发：<code>ssh -L 8080:localhost:80 user@server</code>  <br>动态转发（SOCKS 代理）：<code>ssh -D 1080 user@server</code></td>\n</tr>\n<tr>\n<td><strong>跳板机（堡垒机）</strong></td>\n<td>通过中间服务器间接访问内部服务器，增强安全审计</td>\n<td>JumpServer、Teleport 等堡垒机系统</td>\n</tr>\n<tr>\n<td><strong>开发协作</strong></td>\n<td>连接远程开发环境（如云服务器、Docker 容器）</td>\n<td>VS Code Remote - SSH 插件、JetBrains IDE 的远程开发功能</td>\n</tr>\n</tbody></table>\n<h4 id=\"服务在使用或者安装中遇到过什么问题\"><a href=\"#服务在使用或者安装中遇到过什么问题\" class=\"headerlink\" title=\"服务在使用或者安装中遇到过什么问题\"></a>服务在使用或者安装中遇到过什么问题</h4><table>\n<thead>\n<tr>\n<th>问题类型</th>\n<th>具体表现</th>\n<th>可能原因</th>\n<th>解决方案</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>连接失败</strong></td>\n<td>无法通过<code>ssh</code>命令连接服务器</td>\n<td>1. 服务器 SSH 服务未启动（<code>systemctl status sshd</code>）  <br>2. 防火墙阻止 22 端口（<code>ufw allow 22</code>）  <br>3. 服务器 IP 或端口配置错误</td>\n<td>1. 启动 SSH 服务：<code>systemctl start sshd</code>  <br>2. 开放防火墙：<code>sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT</code>  <br>3. 检查配置文件：<code>/etc/ssh/sshd_config</code></td>\n</tr>\n<tr>\n<td><strong>密钥认证失败</strong></td>\n<td>使用密钥登录时提示<code>Permission denied</code></td>\n<td>1. 公钥未正确添加到服务器<code>~/.ssh/authorized_keys</code>  <br>2. 密钥文件权限错误（私钥权限需为 600）  <br>3. 密钥类型不匹配（如 RSA vs ECDSA）</td>\n<td>1. 重新生成密钥：<code>ssh-keygen -t rsa</code>  <br>2. 复制公钥到服务器：<code>ssh-copy-id user@server</code>  <br>3. 检查权限：<code>chmod 600 ~/.ssh/id_rsa</code></td>\n</tr>\n<tr>\n<td><strong>慢连接或卡顿</strong></td>\n<td>连接响应缓慢或操作延迟</td>\n<td>1. DNS 反向解析超时（<code>GSSAPIAuthentication no</code>）  <br>2. 网络质量差  <br>3. 服务器负载过高</td>\n<td>1. 修改配置：<code>/etc/ssh/sshd_config</code> 添加 <code>UseDNS no</code>  <br>2. 使用<code>mosh</code>（Mobile Shell）替代 SSH，支持断网续连</td>\n</tr>\n<tr>\n<td><strong>端口占用冲突</strong></td>\n<td>无法在标准 22 端口启动 SSH 服务</td>\n<td>1. 其他服务占用 22 端口（如 Telnet）  <br>2. 多 SSH 服务实例冲突</td>\n<td>1. 修改 SSH 端口：<code>/etc/ssh/sshd_config</code> 中将<code>Port 22</code>改为其他端口（如 2222）  <br>2. 重启服务：<code>systemctl restart sshd</code></td>\n</tr>\n<tr>\n<td><strong>中间人攻击风险</strong></td>\n<td>首次连接提示<code>REMOTE HOST IDENTIFICATION HAS CHANGED!</code></td>\n<td>1. 服务器密钥被重置  <br>2. 中间人攻击（需高度警惕）</td>\n<td>1. 手动删除旧密钥：<code>ssh-keygen -R [server_ip]</code>  <br>2. 联系管理员确认服务器公钥指纹</td>\n</tr>\n</tbody></table>\n<h4 id=\"服务的其他使用场景是什么-在别的公司如何用）\"><a href=\"#服务的其他使用场景是什么-在别的公司如何用）\" class=\"headerlink\" title=\"服务的其他使用场景是什么 (在别的公司如何用）\"></a>服务的其他使用场景是什么 (在别的公司如何用）</h4><table>\n<thead>\n<tr>\n<th>行业</th>\n<th>特色应用场景</th>\n<th>技术实现</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>金融 &#x2F; 证券</strong></td>\n<td>1. 加密传输交易数据  <br>2. 通过 SSH 隧道访问内部交易系统  <br>3. 堡垒机集中审计所有运维操作</td>\n<td>1. 自定义 SSH 端口（如 2222）+ TLS 加密  <br>2. 与 LDAP&#x2F;AD 集成实现用户认证  <br>3. 日志审计工具（如 ELK Stack）收集 SSH 会话记录</td>\n</tr>\n<tr>\n<td><strong>互联网企业</strong></td>\n<td>1. 大规模集群自动化部署（Kubernetes 节点管理）  <br>2. Git 代码仓库管理（如 GitLab 基于 SSH 协议）</td>\n<td>1. 使用 Ansible&#x2F;Puppet 通过 SSH 批量配置服务器  <br>2. Git 客户端通过 SSH 协议推送 &#x2F; 拉取代码：<code>git clone git@github.com:user/repo.git</code></td>\n</tr>\n<tr>\n<td><strong>教育 &#x2F; 科研</strong></td>\n<td>1. 远程访问高性能计算集群（HPC）  <br>2. 学生远程实验室环境管理</td>\n<td>1. 通过 SSH 连接超级计算机执行计算任务  <br>2. JupyterHub 通过 SSH 认证学生账户并分配计算资源</td>\n</tr>\n<tr>\n<td><strong>制造业</strong></td>\n<td>1. 远程维护工业控制系统（PLC、SCADA）  <br>2. 加密传输生产数据</td>\n<td>1. 通过 SSH 网关安全访问生产网络  <br>2. 结合 VPN 和 SSH 实现工控设备的远程运维</td>\n</tr>\n<tr>\n<td><strong>云服务提供商</strong></td>\n<td>1. 提供 SSH 密钥对管理界面（如 AWS EC2 控制台）  <br>2. 基于 SSH 的容器远程调试</td>\n<td>1. 用户通过控制台生成 SSH 密钥并绑定到云服务器  <br>2. Docker 通过 SSH 远程 API 管理容器：<code>docker -H ssh://user@server ps</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"><a href=\"#目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\" class=\"headerlink\" title=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"></a>目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同</h4><p>SSH 协议有两个主要版本，当前主流使用<strong>SSH-2.0</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>协议版本</th>\n<th>特点</th>\n<th>安全性</th>\n<th>现状</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>SSH-1</strong></td>\n<td>1995 年发布，早期版本  <br>2. 存在安全漏洞（如缓冲区溢出）  <br>3. 加密算法单一（如 DES）</td>\n<td>低（已被破解）</td>\n<td>已淘汰，现代 SSH 服务器默认禁用</td>\n</tr>\n<tr>\n<td><strong>SSH-2</strong></td>\n<td>2006 年标准化（RFC 4251-4254）  <br>2. 修复 SSH-1 安全缺陷  <br>3. 支持多种加密算法（AES、ChaCha20）</td>\n<td>高（持续更新加密机制）</td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"OpenSSH-版本（开源-SSH-实现）\"><a href=\"#OpenSSH-版本（开源-SSH-实现）\" class=\"headerlink\" title=\"OpenSSH 版本（开源 SSH 实现）\"></a>OpenSSH 版本（开源 SSH 实现）</h4><ul>\n<li><strong>最新稳定版</strong>：OpenSSH 9.5p1（2023 年 12 月发布）</li>\n<li><strong>主流 Linux 发行版默认版本</strong>：<ul>\n<li>Ubuntu 22.04：OpenSSH 8.9p1</li>\n<li>CentOS 8：OpenSSH 8.0p1</li>\n<li>macOS Sonoma：OpenSSH 9.3p2</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"版本差异（以-OpenSSH-为例）\"><a href=\"#版本差异（以-OpenSSH-为例）\" class=\"headerlink\" title=\"版本差异（以 OpenSSH 为例）\"></a>版本差异（以 OpenSSH 为例）</h4><table>\n<thead>\n<tr>\n<th>版本</th>\n<th>关键特性</th>\n<th>安全增强</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>8.x</strong></td>\n<td>1. 支持 ChaCha20-Poly1305 加密算法（移动设备优化）  <br>2. 引入证书认证（SSH CA）</td>\n<td>禁用弱密码哈希（如 MD5）  <br>2. 修复 CVE-2016-0777（认证绕过漏洞）</td>\n</tr>\n<tr>\n<td><strong>9.x</strong></td>\n<td>1. 默认禁用 RSA-1024 密钥（强度不足）  <br>2. 支持量子抗性密钥交换（实验性）</td>\n<td>修复 CVE-2023-38408（拒绝服务漏洞）  <br>2. 强化密钥生成随</td>\n</tr>\n</tbody></table>\n<h4 id=\"这个服务或者软件有哪些常见的模块-服务的日志，服务的数据都是如何处理的\"><a href=\"#这个服务或者软件有哪些常见的模块-服务的日志，服务的数据都是如何处理的\" class=\"headerlink\" title=\"这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的\"></a>这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的</h4><p>SSH 服务（以 OpenSSH 为例）由多个独立模块组成：</p>\n<table>\n<thead>\n<tr>\n<th>模块 &#x2F; 组件</th>\n<th>功能描述</th>\n<th>配置文件 &#x2F; 路径</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>sshd</strong></td>\n<td>SSH 服务器守护进程，监听 22 端口接收客户端连接</td>\n<td><code>/etc/ssh/sshd_config</code>（配置文件）  <br><code>/usr/sbin/sshd</code>（二进制文件）</td>\n</tr>\n<tr>\n<td><strong>ssh</strong></td>\n<td>SSH 客户端命令行工具，用于发起远程连接</td>\n<td><code>/usr/bin/ssh</code></td>\n</tr>\n<tr>\n<td><strong>scp&#x2F;sftp</strong></td>\n<td>基于 SSH 的文件传输工具</td>\n<td><code>/usr/bin/scp</code>  <br><code>/usr/lib/openssh/sftp-server</code></td>\n</tr>\n<tr>\n<td><strong>密钥管理</strong></td>\n<td>生成 &#x2F; 管理密钥对（如<code>ssh-keygen</code>）</td>\n<td>私钥：<code>~/.ssh/id_rsa</code>  <br>公钥：<code>~/.ssh/id_rsa.pub</code>  <br>授权公钥：<code>~/.ssh/authorized_keys</code></td>\n</tr>\n<tr>\n<td><strong>认证模块</strong></td>\n<td>实现密码认证、公钥认证、GSSAPI 认证等</td>\n<td>PAM 模块：<code>/etc/pam.d/sshd</code></td>\n</tr>\n<tr>\n<td><strong>加密库</strong></td>\n<td>提供加密算法支持（如 OpenSSL、libcrypto）</td>\n<td>依赖系统加密库（如<code>/lib/x86_64-linux-gnu/libcrypto.s</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"><a href=\"#服务的升级是怎么做的，每个版本都有哪些相应的漏洞\" class=\"headerlink\" title=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"></a>服务的升级是怎么做的，每个版本都有哪些相应的漏洞</h4><p>SSH 服务的升级需根据操作系统（如 Linux、Windows）和具体实现（如 OpenSSH、Dropbear）选择对应方式，核心是替换旧版本程序并保留配置，步骤如下：</p>\n<ul>\n<li><strong>Linux 系统（以 OpenSSH 为例）</strong>：<ul>\n<li>通过包管理器升级（推荐）：<br>  如 Ubuntu&#x2F;Debian 使用 <code>sudo apt update &amp;&amp; sudo apt upgrade openssh-server openssh-client</code>，CentOS&#x2F;RHEL 使用 <code>sudo yum update openssh-server openssh-clients</code>，自动处理依赖并保留配置。</li>\n<li>源码编译升级：<br>  下载对应版本源码（如<a href=\"https://www.openssh.com/\">OpenSSH 官网</a>），解压后执行 <code>./configure &amp;&amp; make &amp;&amp; sudo make install</code>，需手动处理依赖（如 OpenSSL），适合需要定制化的场景。</li>\n</ul>\n</li>\n<li><strong>Windows 系统（以 PuTTY&#x2F;OpenSSH 为例）</strong>：<ul>\n<li>PuTTY 等客户端直接下载最新版本安装包覆盖安装；</li>\n<li>微软 OpenSSH 服务可通过 <code>winget upgrade</code> 或手动下载 MSI 包升级。</li>\n</ul>\n</li>\n<li><strong>升级注意事项</strong>：<ul>\n<li>升级前备份配置文件（如 <code>/etc/ssh/sshd_config</code>）和密钥；</li>\n<li>升级后重启服务（如 <code>sudo systemctl restart sshd</code>），并验证连接是否正常；</li>\n<li>对于生产环境，建议先在测试环境验证兼容性。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"><a href=\"#这个服务可以与哪些服务结合有意想不到的功能或者解决方案\" class=\"headerlink\" title=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"></a>这个服务可以与哪些服务结合有意想不到的功能或者解决方案</h4><ol>\n<li><strong>与端口转发结合：构建加密通道</strong></li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 端口转发（本地转发、远程转发、动态转发）加密传输其他协议（如 HTTP、MySQL、VNC）的数据，解决明文传输安全问题。</li>\n</ul>\n<ol start=\"2\">\n<li>与文件传输服务结合：替代 FTP&#x2F;SCP</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：SSH 自带的<code>sftp</code>和<code>scp</code>可替代不安全的 FTP，结合<code>rsync</code>实现增量加密备份。</li>\n</ul>\n<ol start=\"3\">\n<li>与隧道服务结合：搭建虚拟私有网络（VPN）</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 隧道模拟 VPN，访问内网服务（如数据库、OA 系统）。</li>\n<li><strong>示例</strong>：<br>  本地机器通过 <code>ssh -fN -L 3306:db-server:3306 user@jump-server</code> 连接跳板机，将内网数据库（db-server:3306）映射到本地 3306 端口，直接通过本地客户端访问内网数据库，无需单独部署 VPN。</li>\n</ul>\n<ol start=\"4\">\n<li>与自动化工具结合：批量管理服务器</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：结合 Ansible、SaltStack 等工具，通过 SSH 协议批量执行命令、部署配置，替代手动登录操作。</li>\n</ul>\n<ol start=\"5\">\n<li>与容器 &#x2F; 云服务结合：管理隔离环境</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：在 Docker、Kubernetes 或云服务器（如 AWS EC2）中，通过 SSH 访问容器或实例内部，解决网络隔离问题。</li>\n<li><strong>示例</strong>：<ul>\n<li>对 Docker 容器：<code>docker exec -it &lt;container&gt; /bin/bash</code> 需容器运行 SSH 服务，或通过 <code>ssh -i key.pem user@container-ip</code> 直接访问；</li>\n<li>对 K8s Pod：通过 <code>kubectl port-forward pod/&lt;pod-name&gt; 2222:22</code> 映射 SSH 端口到本地，再用<code>ssh localhost -p 2222</code> 访问。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"6\">\n<li>与日志 &#x2F; 监控服务结合：安全传输数据</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 隧道将服务器日志、监控指标（如 Prometheus 数据）加密传输到管理节点，避免明文泄露。</li>\n<li><strong>解决方案</strong>：<br>  配置 Logstash 通过 SSH 隧道连接远程服务器，或使用<code>rsync over ssh</code>定期同步日志文件到分析服务器，确保数据在传输中不被篡改。</li>\n</ul>\n<h4 id=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"><a href=\"#从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\" class=\"headerlink\" title=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"></a>从安全的角度来考虑这个软件是否安全或者需要在哪里调优？</h4><ul>\n<li><strong>权限过度开放</strong>：默认允许 root 直接登录，若密钥或密码泄露，攻击者可直接获取最高权限。</li>\n<li><strong>日志审计缺失</strong>：默认日志记录较简单，若未配置详细审计，攻击行为可能无法追溯。</li>\n<li><strong>端口暴露风险</strong>：默认使用 22 端口，易成为扫描和攻击目标（如暴力破解）。</li>\n<li><strong>算法漏洞</strong>：部分旧版本支持不安全的加密算法（如 DES、MD5）或密钥交换算法（如 diffie-hellman-group1-sha1），可能被破解。</li>\n</ul>\n","excerpt":"","more":"<h4 id=\"服务的底层原理是什么？\"><a href=\"#服务的底层原理是什么？\" class=\"headerlink\" title=\"服务的底层原理是什么？\"></a>服务的底层原理是什么？</h4><blockquote>\n<p>SSH（Secure Shell）服务是一种用于在网络中安全远程登录和执行命令的协议，其底层原理围绕<strong>加密通信</strong>、<strong>身份认证</strong>和<strong>数据完整性校验</strong>展开，旨在解决传统明文协议（如 Telnet、FTP）的安全漏洞。</p>\n</blockquote>\n<ol>\n<li><strong>加密技术</strong><ul>\n<li><strong>非对称加密（公钥加密）</strong></li>\n<li><strong>对称加密（共享密钥加密）</strong>：</li>\n</ul>\n</li>\n<li><strong>身份认证</strong><ul>\n<li><strong>密码认证</strong></li>\n<li><strong>公钥认证</strong> : 客户端提前将自己的公钥存入服务器的<code>~/.ssh/authorized_keys</code>文件中。连接时，服务器生成随机字符串并用客户端公钥加密，客户端用私钥解密后发回服务器，服务器验证解密结果是否匹配，无需传输密码，安全性更高。</li>\n<li><strong>主机密钥认证</strong>：首次连接时，服务器发送自己的主机公钥，客户端确认后保存（<code>~/.ssh/known_hosts</code>），后续连接验证主机身份，防止中间人攻击。</li>\n</ul>\n</li>\n<li><strong>数据完整性校验</strong></li>\n</ol>\n<h4 id=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"><a href=\"#有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\" class=\"headerlink\" title=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"></a>有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？</h4><table>\n<thead>\n<tr>\n<th>软件 &#x2F; 服务</th>\n<th>核心功能</th>\n<th>与 SSH 的相同点</th>\n<th>与 SSH 的不同点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>FinalShell</strong></td>\n<td>远程登录、文件传输、服务器监控</td>\n<td>基于 SSH 协议，支持加密传输和远程命令执行</td>\n<td>集成图形化监控面板、进程管理、服务器性能分析；资源占用较高（依赖 JVM）</td>\n</tr>\n<tr>\n<td><strong>WindTerm</strong></td>\n<td>轻量远程终端、文件传输</td>\n<td>基于 SSH 协议，支持多会话管理和加密通信</td>\n<td>轻量级（启动仅需几 MB 内存），支持标签页、分屏；无多余功能，专注终端体验</td>\n</tr>\n<tr>\n<td><strong>Termius</strong></td>\n<td>跨平台远程终端、会话同步</td>\n<td>基于 SSH 协议，支持密钥认证和文件传输</td>\n<td>支持 Windows&#x2F;macOS&#x2F;Linux&#x2F;iOS&#x2F;Android 跨平台同步；提供触控优化界面（移动设备友好）</td>\n</tr>\n<tr>\n<td><strong>MobaXterm</strong></td>\n<td>集成多协议远程工具（SSH&#x2F;RDP&#x2F;VNC）</td>\n<td>支持 SSH 核心功能，加密传输和命令交互</td>\n<td>集成 RDP、VNC、FTP 等协议；提供 X 服务器功能、图形化 SFTP 文件管理器</td>\n</tr>\n<tr>\n<td><strong>Telnet</strong></td>\n<td>远程终端协议（无加密）</td>\n<td>支持远程命令执行和终端交互</td>\n<td>明文传输（无加密），安全性极低；协议简单，兼容性极老设备</td>\n</tr>\n<tr>\n<td><strong>RDP（远程桌面）</strong></td>\n<td>图形化远程桌面控制</td>\n<td>支持远程系统操作</td>\n<td>基于图形化界面（非命令行），依赖 Windows 系统；传输效率高但协议封闭</td>\n</tr>\n<tr>\n<td><strong>VNC</strong></td>\n<td>跨平台图形化远程控制</td>\n<td>支持远程系统操作</td>\n<td>基于图形化界面，开源协议；传输效率较低，需额外加密（如配合 SSH 隧道）</td>\n</tr>\n</tbody></table>\n<h4 id=\"我们在公司里都会在哪些场景下使用\"><a href=\"#我们在公司里都会在哪些场景下使用\" class=\"headerlink\" title=\"我们在公司里都会在哪些场景下使用\"></a>我们在公司里都会在哪些场景下使用</h4><table>\n<thead>\n<tr>\n<th>场景</th>\n<th>具体用途</th>\n<th>示例 &#x2F; 工具</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>远程服务器管理</strong></td>\n<td>通过命令行执行系统操作（如部署服务、修改配置、监控进程）</td>\n<td><code>ssh user@server</code> + 命令（<code>systemctl</code>, <code>vim</code>, <code>top</code>）</td>\n</tr>\n<tr>\n<td><strong>自动化运维</strong></td>\n<td>结合脚本批量执行任务（如更新软件包、同步配置）</td>\n<td>Shell 脚本 + <code>sshpass</code> 或 Ansible（基于 SSH 协议）</td>\n</tr>\n<tr>\n<td><strong>安全文件传输</strong></td>\n<td>替代 FTP&#x2F;SCP，安全上传 &#x2F; 下载文件</td>\n<td><code>scp</code>、<code>sftp</code> 或图形化工具（如 FileZilla 通过 SSH 通道）</td>\n</tr>\n<tr>\n<td><strong>端口转发（隧道）</strong></td>\n<td>突破网络限制访问内网服务（如数据库、Web 应用）</td>\n<td>本地转发：<code>ssh -L 8080:localhost:80 user@server</code>  <br>动态转发（SOCKS 代理）：<code>ssh -D 1080 user@server</code></td>\n</tr>\n<tr>\n<td><strong>跳板机（堡垒机）</strong></td>\n<td>通过中间服务器间接访问内部服务器，增强安全审计</td>\n<td>JumpServer、Teleport 等堡垒机系统</td>\n</tr>\n<tr>\n<td><strong>开发协作</strong></td>\n<td>连接远程开发环境（如云服务器、Docker 容器）</td>\n<td>VS Code Remote - SSH 插件、JetBrains IDE 的远程开发功能</td>\n</tr>\n</tbody></table>\n<h4 id=\"服务在使用或者安装中遇到过什么问题\"><a href=\"#服务在使用或者安装中遇到过什么问题\" class=\"headerlink\" title=\"服务在使用或者安装中遇到过什么问题\"></a>服务在使用或者安装中遇到过什么问题</h4><table>\n<thead>\n<tr>\n<th>问题类型</th>\n<th>具体表现</th>\n<th>可能原因</th>\n<th>解决方案</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>连接失败</strong></td>\n<td>无法通过<code>ssh</code>命令连接服务器</td>\n<td>1. 服务器 SSH 服务未启动（<code>systemctl status sshd</code>）  <br>2. 防火墙阻止 22 端口（<code>ufw allow 22</code>）  <br>3. 服务器 IP 或端口配置错误</td>\n<td>1. 启动 SSH 服务：<code>systemctl start sshd</code>  <br>2. 开放防火墙：<code>sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT</code>  <br>3. 检查配置文件：<code>/etc/ssh/sshd_config</code></td>\n</tr>\n<tr>\n<td><strong>密钥认证失败</strong></td>\n<td>使用密钥登录时提示<code>Permission denied</code></td>\n<td>1. 公钥未正确添加到服务器<code>~/.ssh/authorized_keys</code>  <br>2. 密钥文件权限错误（私钥权限需为 600）  <br>3. 密钥类型不匹配（如 RSA vs ECDSA）</td>\n<td>1. 重新生成密钥：<code>ssh-keygen -t rsa</code>  <br>2. 复制公钥到服务器：<code>ssh-copy-id user@server</code>  <br>3. 检查权限：<code>chmod 600 ~/.ssh/id_rsa</code></td>\n</tr>\n<tr>\n<td><strong>慢连接或卡顿</strong></td>\n<td>连接响应缓慢或操作延迟</td>\n<td>1. DNS 反向解析超时（<code>GSSAPIAuthentication no</code>）  <br>2. 网络质量差  <br>3. 服务器负载过高</td>\n<td>1. 修改配置：<code>/etc/ssh/sshd_config</code> 添加 <code>UseDNS no</code>  <br>2. 使用<code>mosh</code>（Mobile Shell）替代 SSH，支持断网续连</td>\n</tr>\n<tr>\n<td><strong>端口占用冲突</strong></td>\n<td>无法在标准 22 端口启动 SSH 服务</td>\n<td>1. 其他服务占用 22 端口（如 Telnet）  <br>2. 多 SSH 服务实例冲突</td>\n<td>1. 修改 SSH 端口：<code>/etc/ssh/sshd_config</code> 中将<code>Port 22</code>改为其他端口（如 2222）  <br>2. 重启服务：<code>systemctl restart sshd</code></td>\n</tr>\n<tr>\n<td><strong>中间人攻击风险</strong></td>\n<td>首次连接提示<code>REMOTE HOST IDENTIFICATION HAS CHANGED!</code></td>\n<td>1. 服务器密钥被重置  <br>2. 中间人攻击（需高度警惕）</td>\n<td>1. 手动删除旧密钥：<code>ssh-keygen -R [server_ip]</code>  <br>2. 联系管理员确认服务器公钥指纹</td>\n</tr>\n</tbody></table>\n<h4 id=\"服务的其他使用场景是什么-在别的公司如何用）\"><a href=\"#服务的其他使用场景是什么-在别的公司如何用）\" class=\"headerlink\" title=\"服务的其他使用场景是什么 (在别的公司如何用）\"></a>服务的其他使用场景是什么 (在别的公司如何用）</h4><table>\n<thead>\n<tr>\n<th>行业</th>\n<th>特色应用场景</th>\n<th>技术实现</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>金融 &#x2F; 证券</strong></td>\n<td>1. 加密传输交易数据  <br>2. 通过 SSH 隧道访问内部交易系统  <br>3. 堡垒机集中审计所有运维操作</td>\n<td>1. 自定义 SSH 端口（如 2222）+ TLS 加密  <br>2. 与 LDAP&#x2F;AD 集成实现用户认证  <br>3. 日志审计工具（如 ELK Stack）收集 SSH 会话记录</td>\n</tr>\n<tr>\n<td><strong>互联网企业</strong></td>\n<td>1. 大规模集群自动化部署（Kubernetes 节点管理）  <br>2. Git 代码仓库管理（如 GitLab 基于 SSH 协议）</td>\n<td>1. 使用 Ansible&#x2F;Puppet 通过 SSH 批量配置服务器  <br>2. Git 客户端通过 SSH 协议推送 &#x2F; 拉取代码：<code>git clone git@github.com:user/repo.git</code></td>\n</tr>\n<tr>\n<td><strong>教育 &#x2F; 科研</strong></td>\n<td>1. 远程访问高性能计算集群（HPC）  <br>2. 学生远程实验室环境管理</td>\n<td>1. 通过 SSH 连接超级计算机执行计算任务  <br>2. JupyterHub 通过 SSH 认证学生账户并分配计算资源</td>\n</tr>\n<tr>\n<td><strong>制造业</strong></td>\n<td>1. 远程维护工业控制系统（PLC、SCADA）  <br>2. 加密传输生产数据</td>\n<td>1. 通过 SSH 网关安全访问生产网络  <br>2. 结合 VPN 和 SSH 实现工控设备的远程运维</td>\n</tr>\n<tr>\n<td><strong>云服务提供商</strong></td>\n<td>1. 提供 SSH 密钥对管理界面（如 AWS EC2 控制台）  <br>2. 基于 SSH 的容器远程调试</td>\n<td>1. 用户通过控制台生成 SSH 密钥并绑定到云服务器  <br>2. Docker 通过 SSH 远程 API 管理容器：<code>docker -H ssh://user@server ps</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"><a href=\"#目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\" class=\"headerlink\" title=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"></a>目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同</h4><p>SSH 协议有两个主要版本，当前主流使用<strong>SSH-2.0</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>协议版本</th>\n<th>特点</th>\n<th>安全性</th>\n<th>现状</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>SSH-1</strong></td>\n<td>1995 年发布，早期版本  <br>2. 存在安全漏洞（如缓冲区溢出）  <br>3. 加密算法单一（如 DES）</td>\n<td>低（已被破解）</td>\n<td>已淘汰，现代 SSH 服务器默认禁用</td>\n</tr>\n<tr>\n<td><strong>SSH-2</strong></td>\n<td>2006 年标准化（RFC 4251-4254）  <br>2. 修复 SSH-1 安全缺陷  <br>3. 支持多种加密算法（AES、ChaCha20）</td>\n<td>高（持续更新加密机制）</td>\n<td></td>\n</tr>\n</tbody></table>\n<h4 id=\"OpenSSH-版本（开源-SSH-实现）\"><a href=\"#OpenSSH-版本（开源-SSH-实现）\" class=\"headerlink\" title=\"OpenSSH 版本（开源 SSH 实现）\"></a>OpenSSH 版本（开源 SSH 实现）</h4><ul>\n<li><strong>最新稳定版</strong>：OpenSSH 9.5p1（2023 年 12 月发布）</li>\n<li><strong>主流 Linux 发行版默认版本</strong>：<ul>\n<li>Ubuntu 22.04：OpenSSH 8.9p1</li>\n<li>CentOS 8：OpenSSH 8.0p1</li>\n<li>macOS Sonoma：OpenSSH 9.3p2</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"版本差异（以-OpenSSH-为例）\"><a href=\"#版本差异（以-OpenSSH-为例）\" class=\"headerlink\" title=\"版本差异（以 OpenSSH 为例）\"></a>版本差异（以 OpenSSH 为例）</h4><table>\n<thead>\n<tr>\n<th>版本</th>\n<th>关键特性</th>\n<th>安全增强</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>8.x</strong></td>\n<td>1. 支持 ChaCha20-Poly1305 加密算法（移动设备优化）  <br>2. 引入证书认证（SSH CA）</td>\n<td>禁用弱密码哈希（如 MD5）  <br>2. 修复 CVE-2016-0777（认证绕过漏洞）</td>\n</tr>\n<tr>\n<td><strong>9.x</strong></td>\n<td>1. 默认禁用 RSA-1024 密钥（强度不足）  <br>2. 支持量子抗性密钥交换（实验性）</td>\n<td>修复 CVE-2023-38408（拒绝服务漏洞）  <br>2. 强化密钥生成随</td>\n</tr>\n</tbody></table>\n<h4 id=\"这个服务或者软件有哪些常见的模块-服务的日志，服务的数据都是如何处理的\"><a href=\"#这个服务或者软件有哪些常见的模块-服务的日志，服务的数据都是如何处理的\" class=\"headerlink\" title=\"这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的\"></a>这个服务或者软件有哪些常见的模块 服务的日志，服务的数据都是如何处理的</h4><p>SSH 服务（以 OpenSSH 为例）由多个独立模块组成：</p>\n<table>\n<thead>\n<tr>\n<th>模块 &#x2F; 组件</th>\n<th>功能描述</th>\n<th>配置文件 &#x2F; 路径</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>sshd</strong></td>\n<td>SSH 服务器守护进程，监听 22 端口接收客户端连接</td>\n<td><code>/etc/ssh/sshd_config</code>（配置文件）  <br><code>/usr/sbin/sshd</code>（二进制文件）</td>\n</tr>\n<tr>\n<td><strong>ssh</strong></td>\n<td>SSH 客户端命令行工具，用于发起远程连接</td>\n<td><code>/usr/bin/ssh</code></td>\n</tr>\n<tr>\n<td><strong>scp&#x2F;sftp</strong></td>\n<td>基于 SSH 的文件传输工具</td>\n<td><code>/usr/bin/scp</code>  <br><code>/usr/lib/openssh/sftp-server</code></td>\n</tr>\n<tr>\n<td><strong>密钥管理</strong></td>\n<td>生成 &#x2F; 管理密钥对（如<code>ssh-keygen</code>）</td>\n<td>私钥：<code>~/.ssh/id_rsa</code>  <br>公钥：<code>~/.ssh/id_rsa.pub</code>  <br>授权公钥：<code>~/.ssh/authorized_keys</code></td>\n</tr>\n<tr>\n<td><strong>认证模块</strong></td>\n<td>实现密码认证、公钥认证、GSSAPI 认证等</td>\n<td>PAM 模块：<code>/etc/pam.d/sshd</code></td>\n</tr>\n<tr>\n<td><strong>加密库</strong></td>\n<td>提供加密算法支持（如 OpenSSL、libcrypto）</td>\n<td>依赖系统加密库（如<code>/lib/x86_64-linux-gnu/libcrypto.s</code></td>\n</tr>\n</tbody></table>\n<h4 id=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"><a href=\"#服务的升级是怎么做的，每个版本都有哪些相应的漏洞\" class=\"headerlink\" title=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"></a>服务的升级是怎么做的，每个版本都有哪些相应的漏洞</h4><p>SSH 服务的升级需根据操作系统（如 Linux、Windows）和具体实现（如 OpenSSH、Dropbear）选择对应方式，核心是替换旧版本程序并保留配置，步骤如下：</p>\n<ul>\n<li><strong>Linux 系统（以 OpenSSH 为例）</strong>：<ul>\n<li>通过包管理器升级（推荐）：<br>  如 Ubuntu&#x2F;Debian 使用 <code>sudo apt update &amp;&amp; sudo apt upgrade openssh-server openssh-client</code>，CentOS&#x2F;RHEL 使用 <code>sudo yum update openssh-server openssh-clients</code>，自动处理依赖并保留配置。</li>\n<li>源码编译升级：<br>  下载对应版本源码（如<a href=\"https://www.openssh.com/\">OpenSSH 官网</a>），解压后执行 <code>./configure &amp;&amp; make &amp;&amp; sudo make install</code>，需手动处理依赖（如 OpenSSL），适合需要定制化的场景。</li>\n</ul>\n</li>\n<li><strong>Windows 系统（以 PuTTY&#x2F;OpenSSH 为例）</strong>：<ul>\n<li>PuTTY 等客户端直接下载最新版本安装包覆盖安装；</li>\n<li>微软 OpenSSH 服务可通过 <code>winget upgrade</code> 或手动下载 MSI 包升级。</li>\n</ul>\n</li>\n<li><strong>升级注意事项</strong>：<ul>\n<li>升级前备份配置文件（如 <code>/etc/ssh/sshd_config</code>）和密钥；</li>\n<li>升级后重启服务（如 <code>sudo systemctl restart sshd</code>），并验证连接是否正常；</li>\n<li>对于生产环境，建议先在测试环境验证兼容性。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"><a href=\"#这个服务可以与哪些服务结合有意想不到的功能或者解决方案\" class=\"headerlink\" title=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"></a>这个服务可以与哪些服务结合有意想不到的功能或者解决方案</h4><ol>\n<li><strong>与端口转发结合：构建加密通道</strong></li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 端口转发（本地转发、远程转发、动态转发）加密传输其他协议（如 HTTP、MySQL、VNC）的数据，解决明文传输安全问题。</li>\n</ul>\n<ol start=\"2\">\n<li>与文件传输服务结合：替代 FTP&#x2F;SCP</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：SSH 自带的<code>sftp</code>和<code>scp</code>可替代不安全的 FTP，结合<code>rsync</code>实现增量加密备份。</li>\n</ul>\n<ol start=\"3\">\n<li>与隧道服务结合：搭建虚拟私有网络（VPN）</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 隧道模拟 VPN，访问内网服务（如数据库、OA 系统）。</li>\n<li><strong>示例</strong>：<br>  本地机器通过 <code>ssh -fN -L 3306:db-server:3306 user@jump-server</code> 连接跳板机，将内网数据库（db-server:3306）映射到本地 3306 端口，直接通过本地客户端访问内网数据库，无需单独部署 VPN。</li>\n</ul>\n<ol start=\"4\">\n<li>与自动化工具结合：批量管理服务器</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：结合 Ansible、SaltStack 等工具，通过 SSH 协议批量执行命令、部署配置，替代手动登录操作。</li>\n</ul>\n<ol start=\"5\">\n<li>与容器 &#x2F; 云服务结合：管理隔离环境</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：在 Docker、Kubernetes 或云服务器（如 AWS EC2）中，通过 SSH 访问容器或实例内部，解决网络隔离问题。</li>\n<li><strong>示例</strong>：<ul>\n<li>对 Docker 容器：<code>docker exec -it &lt;container&gt; /bin/bash</code> 需容器运行 SSH 服务，或通过 <code>ssh -i key.pem user@container-ip</code> 直接访问；</li>\n<li>对 K8s Pod：通过 <code>kubectl port-forward pod/&lt;pod-name&gt; 2222:22</code> 映射 SSH 端口到本地，再用<code>ssh localhost -p 2222</code> 访问。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"6\">\n<li>与日志 &#x2F; 监控服务结合：安全传输数据</li>\n</ol>\n<ul>\n<li><strong>场景</strong>：通过 SSH 隧道将服务器日志、监控指标（如 Prometheus 数据）加密传输到管理节点，避免明文泄露。</li>\n<li><strong>解决方案</strong>：<br>  配置 Logstash 通过 SSH 隧道连接远程服务器，或使用<code>rsync over ssh</code>定期同步日志文件到分析服务器，确保数据在传输中不被篡改。</li>\n</ul>\n<h4 id=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"><a href=\"#从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\" class=\"headerlink\" title=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"></a>从安全的角度来考虑这个软件是否安全或者需要在哪里调优？</h4><ul>\n<li><strong>权限过度开放</strong>：默认允许 root 直接登录，若密钥或密码泄露，攻击者可直接获取最高权限。</li>\n<li><strong>日志审计缺失</strong>：默认日志记录较简单，若未配置详细审计，攻击行为可能无法追溯。</li>\n<li><strong>端口暴露风险</strong>：默认使用 22 端口，易成为扫描和攻击目标（如暴力破解）。</li>\n<li><strong>算法漏洞</strong>：部分旧版本支持不安全的加密算法（如 DES、MD5）或密钥交换算法（如 diffie-hellman-group1-sha1），可能被破解。</li>\n</ul>\n"},{"_content":" ","source":"Serve/Shell.md","raw":" ","date":"2025-07-17T12:19:17.558Z","updated":"2025-07-17T12:19:17.558Z","path":"Serve/Shell.html","title":"","comments":1,"layout":"page","_id":"cmdh6nnwg00089gv3eo3rd0yv","content":"","excerpt":"","more":""},{"title":"Tomcat基础","date":"2025-07-16T16:00:00.000Z","cssclasses":["Serve","Tomcat"],"_content":"## 目录和文件\n\n这些是 tomcat 的一些关键目录：\n* **/bin** - 启动、关闭和其他脚本。 `*.sh` 文件（适用于 Unix 系统）是 `*.bat` 文件（适用于 Windows 系统）的功能性副本。由于 Win32 命令行缺少某些功能，这里有一些额外的文件。\n* **/conf** - 配置文件和相关 DTD 文件。这里最重要的文件是 server.xml。它是容器的主配置文件。\n* **/logs** - 默认情况下，日志文件存放在这里。\n* **/webapps** - 这里是放置你的 web 应用的目录。\n\n## CATALINA_HOME 和 CATALINA_BASE\n\n在文档中，提到了以下两个关键环境变量：\n\n* **CATALINA_HOME**: 表示你的 Tomcat 安装的根目录，例如 `/home/tomcat/apache-tomcat-11.0.0`。\n* **CATALINA_BASE**：表示特定 Tomcat 实例的运行时配置的根目录。如果你想在同一台机器上运行多个 Tomcat 实例，请使用 `CATALINA_BASE` 属性。\n\n当为这两个关键环境变量设置不同路径时，`CATALINA_HOME`存放的是**静态资源**，比如.jar 文件（Java 归档文件）或二进制文件，这些是 Tomcat 运行的基础程序文件，通常不会频繁变动。\n而`CATALINA_BASE`则存放**动态或运行时相关的内容**，包括配置文件、日志文件、已部署的应用程序以及其他运行时所需的资源，这些内容会随着 Tomcat 的使用（如配置修改、应用部署、日志生成）而变化。\n\n### 为何使用 CATALINA_BASE\n\n默认情况下，CATALINA_HOME 和 CATALINA_BASE 指向同一个目录。当你需要在同一台机器上运行多个 Tomcat 实例时，手动设置 CATALINA_BASE。这样做有以下好处：\n\n* 升级到 Tomcat 新版本的更便捷管理。由于所有具有单一 CATALINA_HOME 位置的实例共享同一套 `.jar` 文件和二进制文件，你可以轻松地将文件升级到新版本，并通过使用相同 CATALIA_HOME 目录将变更传播到所有 Tomcat 实例。\n* 避免重复相同的静态 `.jar` 文件。\n* 共享某些设置的可能性，例如 `setenv` shell 或 bat 脚本文件（取决于你的操作系统）。\n\n### CATALINA_BASE 的内容\n\n在使用 CATALINA_BASE 之前，首先考虑并创建 CATALINA_BASE 所使用的目录树。请注意，如果你没有创建所有推荐的目录，Tomcat 会自动创建这些目录。如果它无法创建必要的目录，例如由于权限问题，Tomcat 可能会无法启动，或者可能无法正常运行。\n\n请考虑以下目录列表：\n* 包含 `bin` 、 `setenv.sh` 、 `setenv.bat` 和 `tomcat-juli.jar` 文件的目录。","source":"Serve/Tomcat基础.md","raw":"---\ntitle: Tomcat基础\ndate: 2025-07-17\ncssclasses:\n  - Serve\n  - Tomcat\n---\n## 目录和文件\n\n这些是 tomcat 的一些关键目录：\n* **/bin** - 启动、关闭和其他脚本。 `*.sh` 文件（适用于 Unix 系统）是 `*.bat` 文件（适用于 Windows 系统）的功能性副本。由于 Win32 命令行缺少某些功能，这里有一些额外的文件。\n* **/conf** - 配置文件和相关 DTD 文件。这里最重要的文件是 server.xml。它是容器的主配置文件。\n* **/logs** - 默认情况下，日志文件存放在这里。\n* **/webapps** - 这里是放置你的 web 应用的目录。\n\n## CATALINA_HOME 和 CATALINA_BASE\n\n在文档中，提到了以下两个关键环境变量：\n\n* **CATALINA_HOME**: 表示你的 Tomcat 安装的根目录，例如 `/home/tomcat/apache-tomcat-11.0.0`。\n* **CATALINA_BASE**：表示特定 Tomcat 实例的运行时配置的根目录。如果你想在同一台机器上运行多个 Tomcat 实例，请使用 `CATALINA_BASE` 属性。\n\n当为这两个关键环境变量设置不同路径时，`CATALINA_HOME`存放的是**静态资源**，比如.jar 文件（Java 归档文件）或二进制文件，这些是 Tomcat 运行的基础程序文件，通常不会频繁变动。\n而`CATALINA_BASE`则存放**动态或运行时相关的内容**，包括配置文件、日志文件、已部署的应用程序以及其他运行时所需的资源，这些内容会随着 Tomcat 的使用（如配置修改、应用部署、日志生成）而变化。\n\n### 为何使用 CATALINA_BASE\n\n默认情况下，CATALINA_HOME 和 CATALINA_BASE 指向同一个目录。当你需要在同一台机器上运行多个 Tomcat 实例时，手动设置 CATALINA_BASE。这样做有以下好处：\n\n* 升级到 Tomcat 新版本的更便捷管理。由于所有具有单一 CATALINA_HOME 位置的实例共享同一套 `.jar` 文件和二进制文件，你可以轻松地将文件升级到新版本，并通过使用相同 CATALIA_HOME 目录将变更传播到所有 Tomcat 实例。\n* 避免重复相同的静态 `.jar` 文件。\n* 共享某些设置的可能性，例如 `setenv` shell 或 bat 脚本文件（取决于你的操作系统）。\n\n### CATALINA_BASE 的内容\n\n在使用 CATALINA_BASE 之前，首先考虑并创建 CATALINA_BASE 所使用的目录树。请注意，如果你没有创建所有推荐的目录，Tomcat 会自动创建这些目录。如果它无法创建必要的目录，例如由于权限问题，Tomcat 可能会无法启动，或者可能无法正常运行。\n\n请考虑以下目录列表：\n* 包含 `bin` 、 `setenv.sh` 、 `setenv.bat` 和 `tomcat-juli.jar` 文件的目录。","updated":"2025-07-24T09:06:14.168Z","path":"Serve/Tomcat基础.html","comments":1,"layout":"page","_id":"cmdh6nnwg000a9gv3bslz5fg8","content":"<h2 id=\"目录和文件\"><a href=\"#目录和文件\" class=\"headerlink\" title=\"目录和文件\"></a>目录和文件</h2><p>这些是 tomcat 的一些关键目录：</p>\n<ul>\n<li><strong>&#x2F;bin</strong> - 启动、关闭和其他脚本。 <code>*.sh</code> 文件（适用于 Unix 系统）是 <code>*.bat</code> 文件（适用于 Windows 系统）的功能性副本。由于 Win32 命令行缺少某些功能，这里有一些额外的文件。</li>\n<li><strong>&#x2F;conf</strong> - 配置文件和相关 DTD 文件。这里最重要的文件是 server.xml。它是容器的主配置文件。</li>\n<li><strong>&#x2F;logs</strong> - 默认情况下，日志文件存放在这里。</li>\n<li><strong>&#x2F;webapps</strong> - 这里是放置你的 web 应用的目录。</li>\n</ul>\n<h2 id=\"CATALINA-HOME-和-CATALINA-BASE\"><a href=\"#CATALINA-HOME-和-CATALINA-BASE\" class=\"headerlink\" title=\"CATALINA_HOME 和 CATALINA_BASE\"></a>CATALINA_HOME 和 CATALINA_BASE</h2><p>在文档中，提到了以下两个关键环境变量：</p>\n<ul>\n<li><strong>CATALINA_HOME</strong>: 表示你的 Tomcat 安装的根目录，例如 <code>/home/tomcat/apache-tomcat-11.0.0</code>。</li>\n<li><strong>CATALINA_BASE</strong>：表示特定 Tomcat 实例的运行时配置的根目录。如果你想在同一台机器上运行多个 Tomcat 实例，请使用 <code>CATALINA_BASE</code> 属性。</li>\n</ul>\n<p>当为这两个关键环境变量设置不同路径时，<code>CATALINA_HOME</code>存放的是<strong>静态资源</strong>，比如.jar 文件（Java 归档文件）或二进制文件，这些是 Tomcat 运行的基础程序文件，通常不会频繁变动。<br>而<code>CATALINA_BASE</code>则存放<strong>动态或运行时相关的内容</strong>，包括配置文件、日志文件、已部署的应用程序以及其他运行时所需的资源，这些内容会随着 Tomcat 的使用（如配置修改、应用部署、日志生成）而变化。</p>\n<h3 id=\"为何使用-CATALINA-BASE\"><a href=\"#为何使用-CATALINA-BASE\" class=\"headerlink\" title=\"为何使用 CATALINA_BASE\"></a>为何使用 CATALINA_BASE</h3><p>默认情况下，CATALINA_HOME 和 CATALINA_BASE 指向同一个目录。当你需要在同一台机器上运行多个 Tomcat 实例时，手动设置 CATALINA_BASE。这样做有以下好处：</p>\n<ul>\n<li>升级到 Tomcat 新版本的更便捷管理。由于所有具有单一 CATALINA_HOME 位置的实例共享同一套 <code>.jar</code> 文件和二进制文件，你可以轻松地将文件升级到新版本，并通过使用相同 CATALIA_HOME 目录将变更传播到所有 Tomcat 实例。</li>\n<li>避免重复相同的静态 <code>.jar</code> 文件。</li>\n<li>共享某些设置的可能性，例如 <code>setenv</code> shell 或 bat 脚本文件（取决于你的操作系统）。</li>\n</ul>\n<h3 id=\"CATALINA-BASE-的内容\"><a href=\"#CATALINA-BASE-的内容\" class=\"headerlink\" title=\"CATALINA_BASE 的内容\"></a>CATALINA_BASE 的内容</h3><p>在使用 CATALINA_BASE 之前，首先考虑并创建 CATALINA_BASE 所使用的目录树。请注意，如果你没有创建所有推荐的目录，Tomcat 会自动创建这些目录。如果它无法创建必要的目录，例如由于权限问题，Tomcat 可能会无法启动，或者可能无法正常运行。</p>\n<p>请考虑以下目录列表：</p>\n<ul>\n<li>包含 <code>bin</code> 、 <code>setenv.sh</code> 、 <code>setenv.bat</code> 和 <code>tomcat-juli.jar</code> 文件的目录。</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"目录和文件\"><a href=\"#目录和文件\" class=\"headerlink\" title=\"目录和文件\"></a>目录和文件</h2><p>这些是 tomcat 的一些关键目录：</p>\n<ul>\n<li><strong>&#x2F;bin</strong> - 启动、关闭和其他脚本。 <code>*.sh</code> 文件（适用于 Unix 系统）是 <code>*.bat</code> 文件（适用于 Windows 系统）的功能性副本。由于 Win32 命令行缺少某些功能，这里有一些额外的文件。</li>\n<li><strong>&#x2F;conf</strong> - 配置文件和相关 DTD 文件。这里最重要的文件是 server.xml。它是容器的主配置文件。</li>\n<li><strong>&#x2F;logs</strong> - 默认情况下，日志文件存放在这里。</li>\n<li><strong>&#x2F;webapps</strong> - 这里是放置你的 web 应用的目录。</li>\n</ul>\n<h2 id=\"CATALINA-HOME-和-CATALINA-BASE\"><a href=\"#CATALINA-HOME-和-CATALINA-BASE\" class=\"headerlink\" title=\"CATALINA_HOME 和 CATALINA_BASE\"></a>CATALINA_HOME 和 CATALINA_BASE</h2><p>在文档中，提到了以下两个关键环境变量：</p>\n<ul>\n<li><strong>CATALINA_HOME</strong>: 表示你的 Tomcat 安装的根目录，例如 <code>/home/tomcat/apache-tomcat-11.0.0</code>。</li>\n<li><strong>CATALINA_BASE</strong>：表示特定 Tomcat 实例的运行时配置的根目录。如果你想在同一台机器上运行多个 Tomcat 实例，请使用 <code>CATALINA_BASE</code> 属性。</li>\n</ul>\n<p>当为这两个关键环境变量设置不同路径时，<code>CATALINA_HOME</code>存放的是<strong>静态资源</strong>，比如.jar 文件（Java 归档文件）或二进制文件，这些是 Tomcat 运行的基础程序文件，通常不会频繁变动。<br>而<code>CATALINA_BASE</code>则存放<strong>动态或运行时相关的内容</strong>，包括配置文件、日志文件、已部署的应用程序以及其他运行时所需的资源，这些内容会随着 Tomcat 的使用（如配置修改、应用部署、日志生成）而变化。</p>\n<h3 id=\"为何使用-CATALINA-BASE\"><a href=\"#为何使用-CATALINA-BASE\" class=\"headerlink\" title=\"为何使用 CATALINA_BASE\"></a>为何使用 CATALINA_BASE</h3><p>默认情况下，CATALINA_HOME 和 CATALINA_BASE 指向同一个目录。当你需要在同一台机器上运行多个 Tomcat 实例时，手动设置 CATALINA_BASE。这样做有以下好处：</p>\n<ul>\n<li>升级到 Tomcat 新版本的更便捷管理。由于所有具有单一 CATALINA_HOME 位置的实例共享同一套 <code>.jar</code> 文件和二进制文件，你可以轻松地将文件升级到新版本，并通过使用相同 CATALIA_HOME 目录将变更传播到所有 Tomcat 实例。</li>\n<li>避免重复相同的静态 <code>.jar</code> 文件。</li>\n<li>共享某些设置的可能性，例如 <code>setenv</code> shell 或 bat 脚本文件（取决于你的操作系统）。</li>\n</ul>\n<h3 id=\"CATALINA-BASE-的内容\"><a href=\"#CATALINA-BASE-的内容\" class=\"headerlink\" title=\"CATALINA_BASE 的内容\"></a>CATALINA_BASE 的内容</h3><p>在使用 CATALINA_BASE 之前，首先考虑并创建 CATALINA_BASE 所使用的目录树。请注意，如果你没有创建所有推荐的目录，Tomcat 会自动创建这些目录。如果它无法创建必要的目录，例如由于权限问题，Tomcat 可能会无法启动，或者可能无法正常运行。</p>\n<p>请考虑以下目录列表：</p>\n<ul>\n<li>包含 <code>bin</code> 、 <code>setenv.sh</code> 、 <code>setenv.bat</code> 和 <code>tomcat-juli.jar</code> 文件的目录。</li>\n</ul>\n"},{"title":"Tomcat面试","cssclasses":["Serve","Tomcat"],"_content":"#### 服务的底层原理是什么？\nTomcat 是一个开源的 Servlet 容器，属于 Apache 软件基金会项目，它主要用于运行 Java Web 应用程序。下面来剖析其底层工作原理：\n1. **请求处理流程**  \n    客户端向服务器发起 HTTP 请求，请求首先会到达 Tomcat 的连接器（Connector）。  \n    连接器把请求转换为 ServletRequest 对象，接着将该对象传递给容器（Container）进行处理。  \n    容器依据 Servlet 映射配置，找到对应的 Servlet，并调用其 service () 方法。  \n    Servlet 处理完请求后，会返回一个 ServletResponse 对象，连接器再把这个对象转换为 HTTP 响应返回给客户端。\n2. **核心组件**\n\t* **连接器（Connector）*：负责处理底层的网络通信，支持像 HTTP/1.1、HTTP/2 等多种协议。\n\t- **容器（Container）**：由 Engine、Host、Context 和 Wrapper 这四个层次的组件构成，主要负责 Servlet 的生命周期管理以及请求的路由。\n\t- **Servlet 引擎**：按照 Servlet 规范来执行 Servlet 和 JSP。\n\t- **生命周期管理**：借助 Lifecycle 接口对组件的生命周期（如初始化、启动、停止等）进行管理。\n3. **线程模型**  \n    Tomcat 支持多种线程模型，例如：\n\t- **BIO（阻塞 I/O）**：一个线程处理一个连接，这种方式在并发性能上表现较差。\n\t- **NIO（非阻塞 I/O）**：利用 Selector 实现多路复用，一个线程能够处理多个连接。\n\t- **APR（Apache Portable Runtime）**：基于本地库实现，在高并发场景下性能最佳。\n\n#### 有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\n下面是与 Tomcat 类似的常见 Web 服务器和 Servlet 容器：\n\n| 产品                     | 类型             | 特点                                          |\n| ---------------------- | -------------- | ------------------------------------------- |\n| **Apache HTTP Server** | Web 服务器        | 主要用于静态内容服务，不过可以通过 mod_jk 等模块与 Servlet 容器集成。 |\n| **Nginx**              | Web 服务器 / 反向代理 | 轻量级且高性能，擅长处理静态内容和反向代理，同样能和 Servlet 容器配合使用。  |\n| **Jetty**              | Servlet 容器     | 轻量级、模块化，在嵌入式场景中应用广泛，和 Tomcat 高度兼容。          |\n| **WildFly (JBoss)**    | 应用服务器          | 功能全面，支持 EJB 等 Java EE 标准，但资源占用相对较多。         |\n| **GlassFish**          | 应用服务器          | 是 Java EE 的参考实现，不过在企业级应用中的使用频率逐渐降低。         |\n**替代分析**：\n- **部分替代**：Nginx + 独立 Servlet 容器（如 Tomcat）的组合可以替代 Tomcat 的部分功能，特别是在负载均衡和静态内容处理方面。\n- **完全替代**：Jetty 由于和 Servlet 规范兼容，并且更加轻量级，所以在大多数场景下可以替代 Tomcat。\n- **不可替代点**：\n    - Tomcat 对 Apache HTTP Server 和 Nginx 起到补充作用，后两者主要侧重于静态内容服务，而 Tomcat 专注于动态内容处理。\n    - 企业级应用可能会依赖 WildFly 等应用服务器提供的完整 Java EE 功能。\n    - 对于已经深度集成 Tomcat 特定功能（如自定义 Realm、Valve）的应用，替换成本较高。\n#### 我们在公司里都会在哪些场景下使用\n\n1. **Web 应用服务器**\n- 作为 Java Web 应用的运行环境，比如 Spring Boot 应用默认就内嵌 Tomcat。\n- 部署传统的 WAR 包应用，像基于 Struts、JSF 框架开发的应用。\n2. **微服务架构**\n- 为微服务提供轻量级的运行容器。\n- 与 Spring Cloud 等框架结合，构建分布式系统。\n3. **开发测试环境**\n- 开发阶段进行本地调试。\n- CI/CD 流程中作为测试服务器，例如在 Jenkins、GitLab CI 中使用。\n4. **与其他组件集成**\n- 和 Nginx 搭配，由 Nginx 负责负载均衡和静态内容处理，Tomcat 专注于动态请求。\n- 与数据库、消息队列等后端服务集成。\n5. **嵌入式场景**\n- 作为库嵌入到 Java 应用中，为应用提供 HTTP 服务，例如在 Spring Boot 应用中。\n**典型案例**：\n- 中小型企业网站，由于流量不大，会直接使用 Tomcat 作为 Web 服务器。\n- 大型企业系统中的独立服务模块，可能会选择部署在 Tomcat 上。\n- 开发团队使用 Tomcat 作为开发和测试环境，生产环境则切换到更复杂的应用服务器。\n#### 服务在使用或者安装中遇到过什么问题\n\n在使用或安装 Tomcat 服务时，常见的问题包括：\n\n1. **安装配置问题**\n    \n    - **端口冲突**：默认使用 8080 端口，若被其他应用（如 Skype、另一个 Tomcat 实例）占用，启动会失败。\n    - **环境变量配置错误**：未正确设置 JAVA_HOME 或 CATALINA_HOME 环境变量，导致启动脚本无法找到 Java 运行时。\n    - **权限不足**：在 Linux 系统中，非 root 用户启动时可能无法绑定低于 1024 的端口（如 80）。\n2. **性能与内存问题**\n    \n    - **内存溢出（OOM）**：默认内存配置较低（如 128MB 堆内存），高并发下易触发 OutOfMemoryError。\n    - **线程池配置不合理**：默认线程数不足（如 maxThreads=200），导致请求堆积。\n    - **GC 频繁**：堆内存分配不合理，导致频繁 Full GC，影响响应时间。\n3. **安全漏洞**\n    \n    - **默认配置风险**：未修改默认的 manager/host-manager 应用密码，可能被远程攻击。\n    - **Servlet 容器漏洞**：如 Ghostcat 漏洞（CVE-2020-1938）允许读取 WEB-INF 目录下的文件。\n    - **过时依赖**：使用的 Apache Commons FileUpload 等组件存在已知漏洞。\n4. **应用部署问题**\n    \n    - **WAR 包冲突**：多个应用依赖同一库的不同版本，导致类加载冲突。\n    - **JSP 编译错误**：JSP 文件修改后未重新编译，或编译时依赖缺失。\n    - **上下文路径冲突**：多个应用配置相同的 Context Path，导致访问异常。\n5. **集群与负载均衡**\n    \n    - **Session 复制失败**：集群环境中 Session 未能正确复制，导致用户登录状态丢失。\n    - **反向代理配置错误**：Nginx/Apache 与 Tomcat 集成时，未正确配置 proxy_pass 或 sticky session。\n#### 服务的其他使用场景是什么 (在别的公司如何用）\n1. **API 网关 / 服务网关**\n    \n    - 作为轻量级网关，处理 RESTful API 请求，集成 Spring Cloud Gateway 等组件。\n    - 某金融科技公司使用 Tomcat 部署 API 网关，通过 Filter 实现请求鉴权和流量控制。\n2. **企业级 SOA 平台**\n    \n    - 在传统企业中，作为 SOAP Web 服务的容器，支撑遗留系统间的集成。\n    - 某制造业公司使用 Tomcat 运行基于 Axis2 的 Web 服务，与 ERP 系统对接。\n3. **IoT 平台后端**\n    \n    - 处理 IoT 设备的 HTTP/MQTT 请求，结合数据库存储设备数据。\n    - 某智能家居公司使用 Tomcat 接收设备状态数据，并通过 WebSocket 推送至客户端。\n4. **教学与培训**\n    \n    - 高校或培训机构作为 Java Web 开发教学的基础环境。\n    - 某培训机构使用 Tomcat 配合 Eclipse，教授 Servlet/JSP 开发。\n5. **嵌入式系统**\n    \n    - 在机顶盒、智能终端等资源受限设备中嵌入 Tomcat，提供 Web 管理界面。\n    - 某网络设备厂商在路由器中集成 Tomcat 微内核，提供 Web 配置界面。\n6. **爬虫与数据采集**\n    \n    - 部署爬虫管理平台，调度和监控分布式爬虫任务。\n    - 某电商公司使用 Tomcat 运行 Scrapy 爬虫管理系统，定时抓取竞品数据。\n#### 目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\n\n|版本系列|支持的 Servlet/JSP 规范|状态|适用场景|\n|---|---|---|---|\n|**10.x**|Servlet 5.0/JSP 3.0|活跃版本|基于 Jakarta EE 9 + 的应用|\n|**9.x**|Servlet 4.0/JSP 2.3|LTS 版本|大多数生产环境|\n **最新版本（截至 2025 年 7 月）**\n- **Tomcat 10.1.x**：最新稳定版，完全支持 Jakarta EE 10，移除了对 Java EE 的支持。\n- **Tomcat 9.0.83**：LTS 版本，仍被广泛使用，支持 Java 8-17。\n- **Tomcat 11.x**：开发中，将支持 Jakarta EE 11，计划引入 HTTP/3 等新特性。\n\n#### 这个服务或者软件有哪些常见的模块\n作以支持 Java Web 应用的运行：\n 1.**核心功能模块**\n\n- **Catalina**：Tomcat 的核心容器模块，包含以下子模块：\n    \n    - **Connector（连接器）**：处理网络协议（HTTP、AJP 等），负责接收客户端请求并转换为容器可处理的格式。\n    - **Container（容器）**：由 Engine（引擎）、Host（虚拟主机）、Context（应用上下文）、Wrapper（Servlet 包装器）四级组件构成，管理 Servlet 生命周期和请求路由。\n    - **Realm**：负责用户认证和授权，支持基于文件、数据库、LDAP 等多种认证方式。\n    - **Valve**：类似拦截器，可在请求处理的不同阶段插入逻辑（如日志记录、访问控制）。\n- **Jasper**：JSP 引擎模块，负责将 JSP 文件编译为 Servlet 类（.java→.class），支持热部署（修改 JSP 后自动重新编译）。\n    \n- **Coyote**：处理底层 I/O 通信的模块，提供 BIO、NIO、NIO2、APR 等多种 I/O 模型，支持 HTTP/1.1、HTTP/2、AJP 等协议。\n    \n- **Cluster**：集群模块，支持 Session 复制、负载均衡和故障转移，依赖组播或静态列表发现集群节点。\n    \n- **Naming**：JNDI（Java 命名与目录接口）实现模块，用于管理数据源、邮件会话等资源。\n    \n2. **扩展模块**\n\n- **WebSocket 支持**：通过`org.apache.tomcat.websocket`包实现 WebSocket 协议（RFC 6455），支持双向通信。\n- **Security**：提供 SSL/TLS 配置、CSP（内容安全策略）、CSRF 防护等安全增强功能。\n- **Manager**：Web 管理界面模块，用于部署应用、监控服务器状态（需配置用户权限）。\n- **Host-Manager**：虚拟主机管理模块，支持通过 Web 界面添加 / 删除虚拟主机。\n#### 服务的日志，服务的数据都是如何处理的\n**1.日志处理**\nTomcat 的日志分为多种类型，通过`conf/logging.properties`配置：\n- **Catalina 日志**：记录服务器启动、关闭、组件加载等系统级信息，默认输出到`logs/catalina.out`（Linux）或`logs/catalina.yyyy-MM-dd.log`（按日期滚动）。\n- **访问日志**：记录 HTTP 请求详情（IP、URL、状态码、响应时间等），默认通过`conf/server.xml`中的`AccessLogValve`配置，输出到`logs/access_log.yyyy-MM-dd.txt`，格式可自定义（如 Common Log Format）。\n- **应用日志**：Web 应用通过`java.util.logging`或 Log4j 等框架输出的日志，默认与 Catalina 日志合并，可通过配置分离到独立文件。\n- **[localhost](https://localhost/)日志**：记录虚拟主机`localhost`相关的信息，如应用部署失败的原因。\n- **manager/host-manager 日志**：记录管理界面的操作日志，用于审计管理行为。\n**日志轮转策略**：默认按日期分割日志，可配置`maxDays`限制保留天数，或通过第三方工具（如 Logrotate）实现日志归档和清理。\n#### 服务的升级是怎么做的，每个版本都有哪些相应的漏洞\n\n| Tomcat 8.5-10 | CVE-2022-23181 | 拒绝服务：HTTP/2 请求处理不当导致内存泄漏                          | 10.0.20+、9.0.62+ |\n| ------------- | -------------- | ------------------------------------------------- | ---------------- |\n| Tomcat 9-10   | CVE-2023-28709 | 远程代码执行：`WebSocket`处理不当，恶意请求可触发 ClassCastException | 10.1.8+、9.0.74+  |\n#### 这个服务可以与哪些服务结合有意想不到的功能或者解决方案\nTomcat 作为 Java Web 容器，与其他服务结合可扩展出多样化的企业级解决方案，以下是典型场景：\n\n1. **与反向代理 / 负载均衡服务结合**\n\n- **搭配 Nginx/Apache HTTP Server**：\n    \n    - Nginx 作为前端反向代理，处理静态资源（CSS/JS/ 图片），将动态请求转发给 Tomcat，提升静态资源加载速度并减轻 Tomcat 压力。\n    - 利用 Nginx 的负载均衡功能（如`upstream`模块），将请求分发到多台 Tomcat 服务器，实现集群扩容和高可用（例如电商平台秒杀场景的流量分流）。\n- **搭配 HAProxy**：\n    \n    - 针对 TCP 层的负载均衡（如 AJP 协议），支持更精细的健康检查和会话保持，适合对性能要求极高的金融交易系统。\n2. **与缓存 / 消息队列服务结合**\n\n- **搭配 Redis**：\n    \n    - 将 Tomcat 的 Session 数据存储在 Redis 中（通过`tomcat-redis-session-manager`插件），解决集群环境下 Session 共享问题，同时利用 Redis 的高读写性能提升 Session 访问速度。\n    - 结合 Redis 作为应用级缓存，Tomcat 部署的 Java Web 应用可直接读写 Redis 缓存热点数据（如商品详情），减少数据库访问压力。\n- **搭配 RabbitMQ/Kafka**：\n    \n    - Tomcat 应用作为消息生产者 / 消费者，通过消息队列异步处理非实时任务（如订单日志写入、邮件发送），避免同步操作阻塞 Tomcat 线程，提升系统吞吐量（例如电商订单提交后异步通知仓库）。\n\n3. **与容器 / 云服务结合**\n\n- **搭配 Docker/Kubernetes**：\n    \n    - 将 Tomcat 打包为 Docker 镜像，通过 Kubernetes 实现自动扩缩容、滚动更新和故障自愈，适合微服务架构（例如 Spring Cloud 应用部署在 Tomcat 容器中，通过 K8s 管理多实例）。\n    - 结合 Docker Compose 快速搭建本地开发环境（Tomcat+MySQL+Redis 一键启动），降低环境配置成本。\n- **搭配云服务（如 AWS ECS / 阿里云容器服务）**：\n    \n    - 利用云厂商的负载均衡、日志服务和监控告警功能，实现 Tomcat 应用的全托管运维，无需关注底层服务器部署。\n\n 4. **与监控 / 日志服务结合**\n\n- **搭配 Prometheus+Grafana**：\n    \n    - 通过`tomcat_exporter`采集 Tomcat 的 JVM 内存、线程数、请求响应时间等指标，结合 Grafana 可视化监控面板，实时预警性能瓶颈（如线程池满导致请求阻塞）。\n- **搭配 ELK Stack（Elasticsearch+Logstash+Kibana）**：\n    \n    - 用 Logstash 收集 Tomcat 的访问日志和应用日志，存储到 Elasticsearch，通过 Kibana 分析用户行为（如热门访问路径）或排查异常（如频繁 500 错误的触发条件）。\n\n5. **与安全工具结合**\n\n- **搭配 ModSecurity**：\n    - 作为 Web 应用防火墙（WAF），与 Nginx+Tomcat 联动，拦截 SQL 注入、XSS 等攻击请求，保护 Tomcat 部署的应用（例如政务系统的敏感数据接口防护）。\n#### 从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\nTomcat 的核心安全风险点包括：\n1. **默认配置风险**：默认安装包含`manager`、`host-manager`等管理界面，且可能存在弱密码（如默认用户`admin`无密码），易被未授权访问。\n2. **协议 / 组件漏洞**：历史版本存在高危漏洞（如 CVE-2020-1938 Ghostcat 文件读取漏洞、CVE-2023-28709 远程代码执行漏洞），多与组件缺陷或配置疏漏相关。\n3. **权限控制不足**：文件系统权限宽松（如`conf/`目录可被非 root 用户修改）、应用部署目录权限过高，可能导致恶意文件写入。\n\n","source":"Serve/Tomcat面试.md","raw":"---\ntitle: Tomcat面试\ncssclasses:\n  - Serve\n  - Tomcat\n---\n#### 服务的底层原理是什么？\nTomcat 是一个开源的 Servlet 容器，属于 Apache 软件基金会项目，它主要用于运行 Java Web 应用程序。下面来剖析其底层工作原理：\n1. **请求处理流程**  \n    客户端向服务器发起 HTTP 请求，请求首先会到达 Tomcat 的连接器（Connector）。  \n    连接器把请求转换为 ServletRequest 对象，接着将该对象传递给容器（Container）进行处理。  \n    容器依据 Servlet 映射配置，找到对应的 Servlet，并调用其 service () 方法。  \n    Servlet 处理完请求后，会返回一个 ServletResponse 对象，连接器再把这个对象转换为 HTTP 响应返回给客户端。\n2. **核心组件**\n\t* **连接器（Connector）*：负责处理底层的网络通信，支持像 HTTP/1.1、HTTP/2 等多种协议。\n\t- **容器（Container）**：由 Engine、Host、Context 和 Wrapper 这四个层次的组件构成，主要负责 Servlet 的生命周期管理以及请求的路由。\n\t- **Servlet 引擎**：按照 Servlet 规范来执行 Servlet 和 JSP。\n\t- **生命周期管理**：借助 Lifecycle 接口对组件的生命周期（如初始化、启动、停止等）进行管理。\n3. **线程模型**  \n    Tomcat 支持多种线程模型，例如：\n\t- **BIO（阻塞 I/O）**：一个线程处理一个连接，这种方式在并发性能上表现较差。\n\t- **NIO（非阻塞 I/O）**：利用 Selector 实现多路复用，一个线程能够处理多个连接。\n\t- **APR（Apache Portable Runtime）**：基于本地库实现，在高并发场景下性能最佳。\n\n#### 有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\n下面是与 Tomcat 类似的常见 Web 服务器和 Servlet 容器：\n\n| 产品                     | 类型             | 特点                                          |\n| ---------------------- | -------------- | ------------------------------------------- |\n| **Apache HTTP Server** | Web 服务器        | 主要用于静态内容服务，不过可以通过 mod_jk 等模块与 Servlet 容器集成。 |\n| **Nginx**              | Web 服务器 / 反向代理 | 轻量级且高性能，擅长处理静态内容和反向代理，同样能和 Servlet 容器配合使用。  |\n| **Jetty**              | Servlet 容器     | 轻量级、模块化，在嵌入式场景中应用广泛，和 Tomcat 高度兼容。          |\n| **WildFly (JBoss)**    | 应用服务器          | 功能全面，支持 EJB 等 Java EE 标准，但资源占用相对较多。         |\n| **GlassFish**          | 应用服务器          | 是 Java EE 的参考实现，不过在企业级应用中的使用频率逐渐降低。         |\n**替代分析**：\n- **部分替代**：Nginx + 独立 Servlet 容器（如 Tomcat）的组合可以替代 Tomcat 的部分功能，特别是在负载均衡和静态内容处理方面。\n- **完全替代**：Jetty 由于和 Servlet 规范兼容，并且更加轻量级，所以在大多数场景下可以替代 Tomcat。\n- **不可替代点**：\n    - Tomcat 对 Apache HTTP Server 和 Nginx 起到补充作用，后两者主要侧重于静态内容服务，而 Tomcat 专注于动态内容处理。\n    - 企业级应用可能会依赖 WildFly 等应用服务器提供的完整 Java EE 功能。\n    - 对于已经深度集成 Tomcat 特定功能（如自定义 Realm、Valve）的应用，替换成本较高。\n#### 我们在公司里都会在哪些场景下使用\n\n1. **Web 应用服务器**\n- 作为 Java Web 应用的运行环境，比如 Spring Boot 应用默认就内嵌 Tomcat。\n- 部署传统的 WAR 包应用，像基于 Struts、JSF 框架开发的应用。\n2. **微服务架构**\n- 为微服务提供轻量级的运行容器。\n- 与 Spring Cloud 等框架结合，构建分布式系统。\n3. **开发测试环境**\n- 开发阶段进行本地调试。\n- CI/CD 流程中作为测试服务器，例如在 Jenkins、GitLab CI 中使用。\n4. **与其他组件集成**\n- 和 Nginx 搭配，由 Nginx 负责负载均衡和静态内容处理，Tomcat 专注于动态请求。\n- 与数据库、消息队列等后端服务集成。\n5. **嵌入式场景**\n- 作为库嵌入到 Java 应用中，为应用提供 HTTP 服务，例如在 Spring Boot 应用中。\n**典型案例**：\n- 中小型企业网站，由于流量不大，会直接使用 Tomcat 作为 Web 服务器。\n- 大型企业系统中的独立服务模块，可能会选择部署在 Tomcat 上。\n- 开发团队使用 Tomcat 作为开发和测试环境，生产环境则切换到更复杂的应用服务器。\n#### 服务在使用或者安装中遇到过什么问题\n\n在使用或安装 Tomcat 服务时，常见的问题包括：\n\n1. **安装配置问题**\n    \n    - **端口冲突**：默认使用 8080 端口，若被其他应用（如 Skype、另一个 Tomcat 实例）占用，启动会失败。\n    - **环境变量配置错误**：未正确设置 JAVA_HOME 或 CATALINA_HOME 环境变量，导致启动脚本无法找到 Java 运行时。\n    - **权限不足**：在 Linux 系统中，非 root 用户启动时可能无法绑定低于 1024 的端口（如 80）。\n2. **性能与内存问题**\n    \n    - **内存溢出（OOM）**：默认内存配置较低（如 128MB 堆内存），高并发下易触发 OutOfMemoryError。\n    - **线程池配置不合理**：默认线程数不足（如 maxThreads=200），导致请求堆积。\n    - **GC 频繁**：堆内存分配不合理，导致频繁 Full GC，影响响应时间。\n3. **安全漏洞**\n    \n    - **默认配置风险**：未修改默认的 manager/host-manager 应用密码，可能被远程攻击。\n    - **Servlet 容器漏洞**：如 Ghostcat 漏洞（CVE-2020-1938）允许读取 WEB-INF 目录下的文件。\n    - **过时依赖**：使用的 Apache Commons FileUpload 等组件存在已知漏洞。\n4. **应用部署问题**\n    \n    - **WAR 包冲突**：多个应用依赖同一库的不同版本，导致类加载冲突。\n    - **JSP 编译错误**：JSP 文件修改后未重新编译，或编译时依赖缺失。\n    - **上下文路径冲突**：多个应用配置相同的 Context Path，导致访问异常。\n5. **集群与负载均衡**\n    \n    - **Session 复制失败**：集群环境中 Session 未能正确复制，导致用户登录状态丢失。\n    - **反向代理配置错误**：Nginx/Apache 与 Tomcat 集成时，未正确配置 proxy_pass 或 sticky session。\n#### 服务的其他使用场景是什么 (在别的公司如何用）\n1. **API 网关 / 服务网关**\n    \n    - 作为轻量级网关，处理 RESTful API 请求，集成 Spring Cloud Gateway 等组件。\n    - 某金融科技公司使用 Tomcat 部署 API 网关，通过 Filter 实现请求鉴权和流量控制。\n2. **企业级 SOA 平台**\n    \n    - 在传统企业中，作为 SOAP Web 服务的容器，支撑遗留系统间的集成。\n    - 某制造业公司使用 Tomcat 运行基于 Axis2 的 Web 服务，与 ERP 系统对接。\n3. **IoT 平台后端**\n    \n    - 处理 IoT 设备的 HTTP/MQTT 请求，结合数据库存储设备数据。\n    - 某智能家居公司使用 Tomcat 接收设备状态数据，并通过 WebSocket 推送至客户端。\n4. **教学与培训**\n    \n    - 高校或培训机构作为 Java Web 开发教学的基础环境。\n    - 某培训机构使用 Tomcat 配合 Eclipse，教授 Servlet/JSP 开发。\n5. **嵌入式系统**\n    \n    - 在机顶盒、智能终端等资源受限设备中嵌入 Tomcat，提供 Web 管理界面。\n    - 某网络设备厂商在路由器中集成 Tomcat 微内核，提供 Web 配置界面。\n6. **爬虫与数据采集**\n    \n    - 部署爬虫管理平台，调度和监控分布式爬虫任务。\n    - 某电商公司使用 Tomcat 运行 Scrapy 爬虫管理系统，定时抓取竞品数据。\n#### 目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\n\n|版本系列|支持的 Servlet/JSP 规范|状态|适用场景|\n|---|---|---|---|\n|**10.x**|Servlet 5.0/JSP 3.0|活跃版本|基于 Jakarta EE 9 + 的应用|\n|**9.x**|Servlet 4.0/JSP 2.3|LTS 版本|大多数生产环境|\n **最新版本（截至 2025 年 7 月）**\n- **Tomcat 10.1.x**：最新稳定版，完全支持 Jakarta EE 10，移除了对 Java EE 的支持。\n- **Tomcat 9.0.83**：LTS 版本，仍被广泛使用，支持 Java 8-17。\n- **Tomcat 11.x**：开发中，将支持 Jakarta EE 11，计划引入 HTTP/3 等新特性。\n\n#### 这个服务或者软件有哪些常见的模块\n作以支持 Java Web 应用的运行：\n 1.**核心功能模块**\n\n- **Catalina**：Tomcat 的核心容器模块，包含以下子模块：\n    \n    - **Connector（连接器）**：处理网络协议（HTTP、AJP 等），负责接收客户端请求并转换为容器可处理的格式。\n    - **Container（容器）**：由 Engine（引擎）、Host（虚拟主机）、Context（应用上下文）、Wrapper（Servlet 包装器）四级组件构成，管理 Servlet 生命周期和请求路由。\n    - **Realm**：负责用户认证和授权，支持基于文件、数据库、LDAP 等多种认证方式。\n    - **Valve**：类似拦截器，可在请求处理的不同阶段插入逻辑（如日志记录、访问控制）。\n- **Jasper**：JSP 引擎模块，负责将 JSP 文件编译为 Servlet 类（.java→.class），支持热部署（修改 JSP 后自动重新编译）。\n    \n- **Coyote**：处理底层 I/O 通信的模块，提供 BIO、NIO、NIO2、APR 等多种 I/O 模型，支持 HTTP/1.1、HTTP/2、AJP 等协议。\n    \n- **Cluster**：集群模块，支持 Session 复制、负载均衡和故障转移，依赖组播或静态列表发现集群节点。\n    \n- **Naming**：JNDI（Java 命名与目录接口）实现模块，用于管理数据源、邮件会话等资源。\n    \n2. **扩展模块**\n\n- **WebSocket 支持**：通过`org.apache.tomcat.websocket`包实现 WebSocket 协议（RFC 6455），支持双向通信。\n- **Security**：提供 SSL/TLS 配置、CSP（内容安全策略）、CSRF 防护等安全增强功能。\n- **Manager**：Web 管理界面模块，用于部署应用、监控服务器状态（需配置用户权限）。\n- **Host-Manager**：虚拟主机管理模块，支持通过 Web 界面添加 / 删除虚拟主机。\n#### 服务的日志，服务的数据都是如何处理的\n**1.日志处理**\nTomcat 的日志分为多种类型，通过`conf/logging.properties`配置：\n- **Catalina 日志**：记录服务器启动、关闭、组件加载等系统级信息，默认输出到`logs/catalina.out`（Linux）或`logs/catalina.yyyy-MM-dd.log`（按日期滚动）。\n- **访问日志**：记录 HTTP 请求详情（IP、URL、状态码、响应时间等），默认通过`conf/server.xml`中的`AccessLogValve`配置，输出到`logs/access_log.yyyy-MM-dd.txt`，格式可自定义（如 Common Log Format）。\n- **应用日志**：Web 应用通过`java.util.logging`或 Log4j 等框架输出的日志，默认与 Catalina 日志合并，可通过配置分离到独立文件。\n- **[localhost](https://localhost/)日志**：记录虚拟主机`localhost`相关的信息，如应用部署失败的原因。\n- **manager/host-manager 日志**：记录管理界面的操作日志，用于审计管理行为。\n**日志轮转策略**：默认按日期分割日志，可配置`maxDays`限制保留天数，或通过第三方工具（如 Logrotate）实现日志归档和清理。\n#### 服务的升级是怎么做的，每个版本都有哪些相应的漏洞\n\n| Tomcat 8.5-10 | CVE-2022-23181 | 拒绝服务：HTTP/2 请求处理不当导致内存泄漏                          | 10.0.20+、9.0.62+ |\n| ------------- | -------------- | ------------------------------------------------- | ---------------- |\n| Tomcat 9-10   | CVE-2023-28709 | 远程代码执行：`WebSocket`处理不当，恶意请求可触发 ClassCastException | 10.1.8+、9.0.74+  |\n#### 这个服务可以与哪些服务结合有意想不到的功能或者解决方案\nTomcat 作为 Java Web 容器，与其他服务结合可扩展出多样化的企业级解决方案，以下是典型场景：\n\n1. **与反向代理 / 负载均衡服务结合**\n\n- **搭配 Nginx/Apache HTTP Server**：\n    \n    - Nginx 作为前端反向代理，处理静态资源（CSS/JS/ 图片），将动态请求转发给 Tomcat，提升静态资源加载速度并减轻 Tomcat 压力。\n    - 利用 Nginx 的负载均衡功能（如`upstream`模块），将请求分发到多台 Tomcat 服务器，实现集群扩容和高可用（例如电商平台秒杀场景的流量分流）。\n- **搭配 HAProxy**：\n    \n    - 针对 TCP 层的负载均衡（如 AJP 协议），支持更精细的健康检查和会话保持，适合对性能要求极高的金融交易系统。\n2. **与缓存 / 消息队列服务结合**\n\n- **搭配 Redis**：\n    \n    - 将 Tomcat 的 Session 数据存储在 Redis 中（通过`tomcat-redis-session-manager`插件），解决集群环境下 Session 共享问题，同时利用 Redis 的高读写性能提升 Session 访问速度。\n    - 结合 Redis 作为应用级缓存，Tomcat 部署的 Java Web 应用可直接读写 Redis 缓存热点数据（如商品详情），减少数据库访问压力。\n- **搭配 RabbitMQ/Kafka**：\n    \n    - Tomcat 应用作为消息生产者 / 消费者，通过消息队列异步处理非实时任务（如订单日志写入、邮件发送），避免同步操作阻塞 Tomcat 线程，提升系统吞吐量（例如电商订单提交后异步通知仓库）。\n\n3. **与容器 / 云服务结合**\n\n- **搭配 Docker/Kubernetes**：\n    \n    - 将 Tomcat 打包为 Docker 镜像，通过 Kubernetes 实现自动扩缩容、滚动更新和故障自愈，适合微服务架构（例如 Spring Cloud 应用部署在 Tomcat 容器中，通过 K8s 管理多实例）。\n    - 结合 Docker Compose 快速搭建本地开发环境（Tomcat+MySQL+Redis 一键启动），降低环境配置成本。\n- **搭配云服务（如 AWS ECS / 阿里云容器服务）**：\n    \n    - 利用云厂商的负载均衡、日志服务和监控告警功能，实现 Tomcat 应用的全托管运维，无需关注底层服务器部署。\n\n 4. **与监控 / 日志服务结合**\n\n- **搭配 Prometheus+Grafana**：\n    \n    - 通过`tomcat_exporter`采集 Tomcat 的 JVM 内存、线程数、请求响应时间等指标，结合 Grafana 可视化监控面板，实时预警性能瓶颈（如线程池满导致请求阻塞）。\n- **搭配 ELK Stack（Elasticsearch+Logstash+Kibana）**：\n    \n    - 用 Logstash 收集 Tomcat 的访问日志和应用日志，存储到 Elasticsearch，通过 Kibana 分析用户行为（如热门访问路径）或排查异常（如频繁 500 错误的触发条件）。\n\n5. **与安全工具结合**\n\n- **搭配 ModSecurity**：\n    - 作为 Web 应用防火墙（WAF），与 Nginx+Tomcat 联动，拦截 SQL 注入、XSS 等攻击请求，保护 Tomcat 部署的应用（例如政务系统的敏感数据接口防护）。\n#### 从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\nTomcat 的核心安全风险点包括：\n1. **默认配置风险**：默认安装包含`manager`、`host-manager`等管理界面，且可能存在弱密码（如默认用户`admin`无密码），易被未授权访问。\n2. **协议 / 组件漏洞**：历史版本存在高危漏洞（如 CVE-2020-1938 Ghostcat 文件读取漏洞、CVE-2023-28709 远程代码执行漏洞），多与组件缺陷或配置疏漏相关。\n3. **权限控制不足**：文件系统权限宽松（如`conf/`目录可被非 root 用户修改）、应用部署目录权限过高，可能导致恶意文件写入。\n\n","date":"2025-07-24T09:08:36.632Z","updated":"2025-07-24T09:08:36.632Z","path":"Serve/Tomcat面试.html","comments":1,"layout":"page","_id":"cmdh6nnwg000b9gv30f5dfd60","content":"<h4 id=\"服务的底层原理是什么？\"><a href=\"#服务的底层原理是什么？\" class=\"headerlink\" title=\"服务的底层原理是什么？\"></a>服务的底层原理是什么？</h4><p>Tomcat 是一个开源的 Servlet 容器，属于 Apache 软件基金会项目，它主要用于运行 Java Web 应用程序。下面来剖析其底层工作原理：</p>\n<ol>\n<li><strong>请求处理流程</strong><br> 客户端向服务器发起 HTTP 请求，请求首先会到达 Tomcat 的连接器（Connector）。<br> 连接器把请求转换为 ServletRequest 对象，接着将该对象传递给容器（Container）进行处理。<br> 容器依据 Servlet 映射配置，找到对应的 Servlet，并调用其 service () 方法。<br> Servlet 处理完请求后，会返回一个 ServletResponse 对象，连接器再把这个对象转换为 HTTP 响应返回给客户端。</li>\n<li><strong>核心组件</strong><ul>\n<li>*<em>连接器（Connector）</em>：负责处理底层的网络通信，支持像 HTTP&#x2F;1.1、HTTP&#x2F;2 等多种协议。</li>\n</ul>\n<ul>\n<li><strong>容器（Container）</strong>：由 Engine、Host、Context 和 Wrapper 这四个层次的组件构成，主要负责 Servlet 的生命周期管理以及请求的路由。</li>\n<li><strong>Servlet 引擎</strong>：按照 Servlet 规范来执行 Servlet 和 JSP。</li>\n<li><strong>生命周期管理</strong>：借助 Lifecycle 接口对组件的生命周期（如初始化、启动、停止等）进行管理。</li>\n</ul>\n</li>\n<li><strong>线程模型</strong><br> Tomcat 支持多种线程模型，例如：<ul>\n<li><strong>BIO（阻塞 I&#x2F;O）</strong>：一个线程处理一个连接，这种方式在并发性能上表现较差。</li>\n<li><strong>NIO（非阻塞 I&#x2F;O）</strong>：利用 Selector 实现多路复用，一个线程能够处理多个连接。</li>\n<li><strong>APR（Apache Portable Runtime）</strong>：基于本地库实现，在高并发场景下性能最佳。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"><a href=\"#有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\" class=\"headerlink\" title=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"></a>有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？</h4><p>下面是与 Tomcat 类似的常见 Web 服务器和 Servlet 容器：</p>\n<table>\n<thead>\n<tr>\n<th>产品</th>\n<th>类型</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>Apache HTTP Server</strong></td>\n<td>Web 服务器</td>\n<td>主要用于静态内容服务，不过可以通过 mod_jk 等模块与 Servlet 容器集成。</td>\n</tr>\n<tr>\n<td><strong>Nginx</strong></td>\n<td>Web 服务器 &#x2F; 反向代理</td>\n<td>轻量级且高性能，擅长处理静态内容和反向代理，同样能和 Servlet 容器配合使用。</td>\n</tr>\n<tr>\n<td><strong>Jetty</strong></td>\n<td>Servlet 容器</td>\n<td>轻量级、模块化，在嵌入式场景中应用广泛，和 Tomcat 高度兼容。</td>\n</tr>\n<tr>\n<td><strong>WildFly (JBoss)</strong></td>\n<td>应用服务器</td>\n<td>功能全面，支持 EJB 等 Java EE 标准，但资源占用相对较多。</td>\n</tr>\n<tr>\n<td><strong>GlassFish</strong></td>\n<td>应用服务器</td>\n<td>是 Java EE 的参考实现，不过在企业级应用中的使用频率逐渐降低。</td>\n</tr>\n<tr>\n<td><strong>替代分析</strong>：</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<ul>\n<li><strong>部分替代</strong>：Nginx + 独立 Servlet 容器（如 Tomcat）的组合可以替代 Tomcat 的部分功能，特别是在负载均衡和静态内容处理方面。</li>\n<li><strong>完全替代</strong>：Jetty 由于和 Servlet 规范兼容，并且更加轻量级，所以在大多数场景下可以替代 Tomcat。</li>\n<li><strong>不可替代点</strong>：<ul>\n<li>Tomcat 对 Apache HTTP Server 和 Nginx 起到补充作用，后两者主要侧重于静态内容服务，而 Tomcat 专注于动态内容处理。</li>\n<li>企业级应用可能会依赖 WildFly 等应用服务器提供的完整 Java EE 功能。</li>\n<li>对于已经深度集成 Tomcat 特定功能（如自定义 Realm、Valve）的应用，替换成本较高。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"我们在公司里都会在哪些场景下使用\"><a href=\"#我们在公司里都会在哪些场景下使用\" class=\"headerlink\" title=\"我们在公司里都会在哪些场景下使用\"></a>我们在公司里都会在哪些场景下使用</h4><ol>\n<li><strong>Web 应用服务器</strong></li>\n</ol>\n<ul>\n<li>作为 Java Web 应用的运行环境，比如 Spring Boot 应用默认就内嵌 Tomcat。</li>\n<li>部署传统的 WAR 包应用，像基于 Struts、JSF 框架开发的应用。</li>\n</ul>\n<ol start=\"2\">\n<li><strong>微服务架构</strong></li>\n</ol>\n<ul>\n<li>为微服务提供轻量级的运行容器。</li>\n<li>与 Spring Cloud 等框架结合，构建分布式系统。</li>\n</ul>\n<ol start=\"3\">\n<li><strong>开发测试环境</strong></li>\n</ol>\n<ul>\n<li>开发阶段进行本地调试。</li>\n<li>CI&#x2F;CD 流程中作为测试服务器，例如在 Jenkins、GitLab CI 中使用。</li>\n</ul>\n<ol start=\"4\">\n<li><strong>与其他组件集成</strong></li>\n</ol>\n<ul>\n<li>和 Nginx 搭配，由 Nginx 负责负载均衡和静态内容处理，Tomcat 专注于动态请求。</li>\n<li>与数据库、消息队列等后端服务集成。</li>\n</ul>\n<ol start=\"5\">\n<li><strong>嵌入式场景</strong></li>\n</ol>\n<ul>\n<li>作为库嵌入到 Java 应用中，为应用提供 HTTP 服务，例如在 Spring Boot 应用中。<br><strong>典型案例</strong>：</li>\n<li>中小型企业网站，由于流量不大，会直接使用 Tomcat 作为 Web 服务器。</li>\n<li>大型企业系统中的独立服务模块，可能会选择部署在 Tomcat 上。</li>\n<li>开发团队使用 Tomcat 作为开发和测试环境，生产环境则切换到更复杂的应用服务器。</li>\n</ul>\n<h4 id=\"服务在使用或者安装中遇到过什么问题\"><a href=\"#服务在使用或者安装中遇到过什么问题\" class=\"headerlink\" title=\"服务在使用或者安装中遇到过什么问题\"></a>服务在使用或者安装中遇到过什么问题</h4><p>在使用或安装 Tomcat 服务时，常见的问题包括：</p>\n<ol>\n<li><p><strong>安装配置问题</strong></p>\n<ul>\n<li><strong>端口冲突</strong>：默认使用 8080 端口，若被其他应用（如 Skype、另一个 Tomcat 实例）占用，启动会失败。</li>\n<li><strong>环境变量配置错误</strong>：未正确设置 JAVA_HOME 或 CATALINA_HOME 环境变量，导致启动脚本无法找到 Java 运行时。</li>\n<li><strong>权限不足</strong>：在 Linux 系统中，非 root 用户启动时可能无法绑定低于 1024 的端口（如 80）。</li>\n</ul>\n</li>\n<li><p><strong>性能与内存问题</strong></p>\n<ul>\n<li><strong>内存溢出（OOM）</strong>：默认内存配置较低（如 128MB 堆内存），高并发下易触发 OutOfMemoryError。</li>\n<li><strong>线程池配置不合理</strong>：默认线程数不足（如 maxThreads&#x3D;200），导致请求堆积。</li>\n<li><strong>GC 频繁</strong>：堆内存分配不合理，导致频繁 Full GC，影响响应时间。</li>\n</ul>\n</li>\n<li><p><strong>安全漏洞</strong></p>\n<ul>\n<li><strong>默认配置风险</strong>：未修改默认的 manager&#x2F;host-manager 应用密码，可能被远程攻击。</li>\n<li><strong>Servlet 容器漏洞</strong>：如 Ghostcat 漏洞（CVE-2020-1938）允许读取 WEB-INF 目录下的文件。</li>\n<li><strong>过时依赖</strong>：使用的 Apache Commons FileUpload 等组件存在已知漏洞。</li>\n</ul>\n</li>\n<li><p><strong>应用部署问题</strong></p>\n<ul>\n<li><strong>WAR 包冲突</strong>：多个应用依赖同一库的不同版本，导致类加载冲突。</li>\n<li><strong>JSP 编译错误</strong>：JSP 文件修改后未重新编译，或编译时依赖缺失。</li>\n<li><strong>上下文路径冲突</strong>：多个应用配置相同的 Context Path，导致访问异常。</li>\n</ul>\n</li>\n<li><p><strong>集群与负载均衡</strong></p>\n<ul>\n<li><strong>Session 复制失败</strong>：集群环境中 Session 未能正确复制，导致用户登录状态丢失。</li>\n<li><strong>反向代理配置错误</strong>：Nginx&#x2F;Apache 与 Tomcat 集成时，未正确配置 proxy_pass 或 sticky session。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"服务的其他使用场景是什么-在别的公司如何用）\"><a href=\"#服务的其他使用场景是什么-在别的公司如何用）\" class=\"headerlink\" title=\"服务的其他使用场景是什么 (在别的公司如何用）\"></a>服务的其他使用场景是什么 (在别的公司如何用）</h4><ol>\n<li><p><strong>API 网关 &#x2F; 服务网关</strong></p>\n<ul>\n<li>作为轻量级网关，处理 RESTful API 请求，集成 Spring Cloud Gateway 等组件。</li>\n<li>某金融科技公司使用 Tomcat 部署 API 网关，通过 Filter 实现请求鉴权和流量控制。</li>\n</ul>\n</li>\n<li><p><strong>企业级 SOA 平台</strong></p>\n<ul>\n<li>在传统企业中，作为 SOAP Web 服务的容器，支撑遗留系统间的集成。</li>\n<li>某制造业公司使用 Tomcat 运行基于 Axis2 的 Web 服务，与 ERP 系统对接。</li>\n</ul>\n</li>\n<li><p><strong>IoT 平台后端</strong></p>\n<ul>\n<li>处理 IoT 设备的 HTTP&#x2F;MQTT 请求，结合数据库存储设备数据。</li>\n<li>某智能家居公司使用 Tomcat 接收设备状态数据，并通过 WebSocket 推送至客户端。</li>\n</ul>\n</li>\n<li><p><strong>教学与培训</strong></p>\n<ul>\n<li>高校或培训机构作为 Java Web 开发教学的基础环境。</li>\n<li>某培训机构使用 Tomcat 配合 Eclipse，教授 Servlet&#x2F;JSP 开发。</li>\n</ul>\n</li>\n<li><p><strong>嵌入式系统</strong></p>\n<ul>\n<li>在机顶盒、智能终端等资源受限设备中嵌入 Tomcat，提供 Web 管理界面。</li>\n<li>某网络设备厂商在路由器中集成 Tomcat 微内核，提供 Web 配置界面。</li>\n</ul>\n</li>\n<li><p><strong>爬虫与数据采集</strong></p>\n<ul>\n<li>部署爬虫管理平台，调度和监控分布式爬虫任务。</li>\n<li>某电商公司使用 Tomcat 运行 Scrapy 爬虫管理系统，定时抓取竞品数据。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"><a href=\"#目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\" class=\"headerlink\" title=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"></a>目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同</h4><table>\n<thead>\n<tr>\n<th>版本系列</th>\n<th>支持的 Servlet&#x2F;JSP 规范</th>\n<th>状态</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>10.x</strong></td>\n<td>Servlet 5.0&#x2F;JSP 3.0</td>\n<td>活跃版本</td>\n<td>基于 Jakarta EE 9 + 的应用</td>\n</tr>\n<tr>\n<td><strong>9.x</strong></td>\n<td>Servlet 4.0&#x2F;JSP 2.3</td>\n<td>LTS 版本</td>\n<td>大多数生产环境</td>\n</tr>\n<tr>\n<td><strong>最新版本（截至 2025 年 7 月）</strong></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<ul>\n<li><strong>Tomcat 10.1.x</strong>：最新稳定版，完全支持 Jakarta EE 10，移除了对 Java EE 的支持。</li>\n<li><strong>Tomcat 9.0.83</strong>：LTS 版本，仍被广泛使用，支持 Java 8-17。</li>\n<li><strong>Tomcat 11.x</strong>：开发中，将支持 Jakarta EE 11，计划引入 HTTP&#x2F;3 等新特性。</li>\n</ul>\n<h4 id=\"这个服务或者软件有哪些常见的模块\"><a href=\"#这个服务或者软件有哪些常见的模块\" class=\"headerlink\" title=\"这个服务或者软件有哪些常见的模块\"></a>这个服务或者软件有哪些常见的模块</h4><p>作以支持 Java Web 应用的运行：<br> 1.<strong>核心功能模块</strong></p>\n<ul>\n<li><p><strong>Catalina</strong>：Tomcat 的核心容器模块，包含以下子模块：</p>\n<ul>\n<li><strong>Connector（连接器）</strong>：处理网络协议（HTTP、AJP 等），负责接收客户端请求并转换为容器可处理的格式。</li>\n<li><strong>Container（容器）</strong>：由 Engine（引擎）、Host（虚拟主机）、Context（应用上下文）、Wrapper（Servlet 包装器）四级组件构成，管理 Servlet 生命周期和请求路由。</li>\n<li><strong>Realm</strong>：负责用户认证和授权，支持基于文件、数据库、LDAP 等多种认证方式。</li>\n<li><strong>Valve</strong>：类似拦截器，可在请求处理的不同阶段插入逻辑（如日志记录、访问控制）。</li>\n</ul>\n</li>\n<li><p><strong>Jasper</strong>：JSP 引擎模块，负责将 JSP 文件编译为 Servlet 类（.java→.class），支持热部署（修改 JSP 后自动重新编译）。</p>\n</li>\n<li><p><strong>Coyote</strong>：处理底层 I&#x2F;O 通信的模块，提供 BIO、NIO、NIO2、APR 等多种 I&#x2F;O 模型，支持 HTTP&#x2F;1.1、HTTP&#x2F;2、AJP 等协议。</p>\n</li>\n<li><p><strong>Cluster</strong>：集群模块，支持 Session 复制、负载均衡和故障转移，依赖组播或静态列表发现集群节点。</p>\n</li>\n<li><p><strong>Naming</strong>：JNDI（Java 命名与目录接口）实现模块，用于管理数据源、邮件会话等资源。</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li><strong>扩展模块</strong></li>\n</ol>\n<ul>\n<li><strong>WebSocket 支持</strong>：通过<code>org.apache.tomcat.websocket</code>包实现 WebSocket 协议（RFC 6455），支持双向通信。</li>\n<li><strong>Security</strong>：提供 SSL&#x2F;TLS 配置、CSP（内容安全策略）、CSRF 防护等安全增强功能。</li>\n<li><strong>Manager</strong>：Web 管理界面模块，用于部署应用、监控服务器状态（需配置用户权限）。</li>\n<li><strong>Host-Manager</strong>：虚拟主机管理模块，支持通过 Web 界面添加 &#x2F; 删除虚拟主机。</li>\n</ul>\n<h4 id=\"服务的日志，服务的数据都是如何处理的\"><a href=\"#服务的日志，服务的数据都是如何处理的\" class=\"headerlink\" title=\"服务的日志，服务的数据都是如何处理的\"></a>服务的日志，服务的数据都是如何处理的</h4><p><strong>1.日志处理</strong><br>Tomcat 的日志分为多种类型，通过<code>conf/logging.properties</code>配置：</p>\n<ul>\n<li><strong>Catalina 日志</strong>：记录服务器启动、关闭、组件加载等系统级信息，默认输出到<code>logs/catalina.out</code>（Linux）或<code>logs/catalina.yyyy-MM-dd.log</code>（按日期滚动）。</li>\n<li><strong>访问日志</strong>：记录 HTTP 请求详情（IP、URL、状态码、响应时间等），默认通过<code>conf/server.xml</code>中的<code>AccessLogValve</code>配置，输出到<code>logs/access_log.yyyy-MM-dd.txt</code>，格式可自定义（如 Common Log Format）。</li>\n<li><strong>应用日志</strong>：Web 应用通过<code>java.util.logging</code>或 Log4j 等框架输出的日志，默认与 Catalina 日志合并，可通过配置分离到独立文件。</li>\n<li><strong><a href=\"https://localhost/\">localhost</a>日志</strong>：记录虚拟主机<code>localhost</code>相关的信息，如应用部署失败的原因。</li>\n<li><strong>manager&#x2F;host-manager 日志</strong>：记录管理界面的操作日志，用于审计管理行为。<br><strong>日志轮转策略</strong>：默认按日期分割日志，可配置<code>maxDays</code>限制保留天数，或通过第三方工具（如 Logrotate）实现日志归档和清理。</li>\n</ul>\n<h4 id=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"><a href=\"#服务的升级是怎么做的，每个版本都有哪些相应的漏洞\" class=\"headerlink\" title=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"></a>服务的升级是怎么做的，每个版本都有哪些相应的漏洞</h4><table>\n<thead>\n<tr>\n<th>Tomcat 8.5-10</th>\n<th>CVE-2022-23181</th>\n<th>拒绝服务：HTTP&#x2F;2 请求处理不当导致内存泄漏</th>\n<th>10.0.20+、9.0.62+</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Tomcat 9-10</td>\n<td>CVE-2023-28709</td>\n<td>远程代码执行：<code>WebSocket</code>处理不当，恶意请求可触发 ClassCastException</td>\n<td>10.1.8+、9.0.74+</td>\n</tr>\n</tbody></table>\n<h4 id=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"><a href=\"#这个服务可以与哪些服务结合有意想不到的功能或者解决方案\" class=\"headerlink\" title=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"></a>这个服务可以与哪些服务结合有意想不到的功能或者解决方案</h4><p>Tomcat 作为 Java Web 容器，与其他服务结合可扩展出多样化的企业级解决方案，以下是典型场景：</p>\n<ol>\n<li><strong>与反向代理 &#x2F; 负载均衡服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Nginx&#x2F;Apache HTTP Server</strong>：</p>\n<ul>\n<li>Nginx 作为前端反向代理，处理静态资源（CSS&#x2F;JS&#x2F; 图片），将动态请求转发给 Tomcat，提升静态资源加载速度并减轻 Tomcat 压力。</li>\n<li>利用 Nginx 的负载均衡功能（如<code>upstream</code>模块），将请求分发到多台 Tomcat 服务器，实现集群扩容和高可用（例如电商平台秒杀场景的流量分流）。</li>\n</ul>\n</li>\n<li><p><strong>搭配 HAProxy</strong>：</p>\n<ul>\n<li>针对 TCP 层的负载均衡（如 AJP 协议），支持更精细的健康检查和会话保持，适合对性能要求极高的金融交易系统。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li><strong>与缓存 &#x2F; 消息队列服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Redis</strong>：</p>\n<ul>\n<li>将 Tomcat 的 Session 数据存储在 Redis 中（通过<code>tomcat-redis-session-manager</code>插件），解决集群环境下 Session 共享问题，同时利用 Redis 的高读写性能提升 Session 访问速度。</li>\n<li>结合 Redis 作为应用级缓存，Tomcat 部署的 Java Web 应用可直接读写 Redis 缓存热点数据（如商品详情），减少数据库访问压力。</li>\n</ul>\n</li>\n<li><p><strong>搭配 RabbitMQ&#x2F;Kafka</strong>：</p>\n<ul>\n<li>Tomcat 应用作为消息生产者 &#x2F; 消费者，通过消息队列异步处理非实时任务（如订单日志写入、邮件发送），避免同步操作阻塞 Tomcat 线程，提升系统吞吐量（例如电商订单提交后异步通知仓库）。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"3\">\n<li><strong>与容器 &#x2F; 云服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Docker&#x2F;Kubernetes</strong>：</p>\n<ul>\n<li>将 Tomcat 打包为 Docker 镜像，通过 Kubernetes 实现自动扩缩容、滚动更新和故障自愈，适合微服务架构（例如 Spring Cloud 应用部署在 Tomcat 容器中，通过 K8s 管理多实例）。</li>\n<li>结合 Docker Compose 快速搭建本地开发环境（Tomcat+MySQL+Redis 一键启动），降低环境配置成本。</li>\n</ul>\n</li>\n<li><p><strong>搭配云服务（如 AWS ECS &#x2F; 阿里云容器服务）</strong>：</p>\n<ul>\n<li>利用云厂商的负载均衡、日志服务和监控告警功能，实现 Tomcat 应用的全托管运维，无需关注底层服务器部署。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li><strong>与监控 &#x2F; 日志服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Prometheus+Grafana</strong>：</p>\n<ul>\n<li>通过<code>tomcat_exporter</code>采集 Tomcat 的 JVM 内存、线程数、请求响应时间等指标，结合 Grafana 可视化监控面板，实时预警性能瓶颈（如线程池满导致请求阻塞）。</li>\n</ul>\n</li>\n<li><p><strong>搭配 ELK Stack（Elasticsearch+Logstash+Kibana）</strong>：</p>\n<ul>\n<li>用 Logstash 收集 Tomcat 的访问日志和应用日志，存储到 Elasticsearch，通过 Kibana 分析用户行为（如热门访问路径）或排查异常（如频繁 500 错误的触发条件）。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li><strong>与安全工具结合</strong></li>\n</ol>\n<ul>\n<li><strong>搭配 ModSecurity</strong>：<ul>\n<li>作为 Web 应用防火墙（WAF），与 Nginx+Tomcat 联动，拦截 SQL 注入、XSS 等攻击请求，保护 Tomcat 部署的应用（例如政务系统的敏感数据接口防护）。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"><a href=\"#从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\" class=\"headerlink\" title=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"></a>从安全的角度来考虑这个软件是否安全或者需要在哪里调优？</h4><p>Tomcat 的核心安全风险点包括：</p>\n<ol>\n<li><strong>默认配置风险</strong>：默认安装包含<code>manager</code>、<code>host-manager</code>等管理界面，且可能存在弱密码（如默认用户<code>admin</code>无密码），易被未授权访问。</li>\n<li><strong>协议 &#x2F; 组件漏洞</strong>：历史版本存在高危漏洞（如 CVE-2020-1938 Ghostcat 文件读取漏洞、CVE-2023-28709 远程代码执行漏洞），多与组件缺陷或配置疏漏相关。</li>\n<li><strong>权限控制不足</strong>：文件系统权限宽松（如<code>conf/</code>目录可被非 root 用户修改）、应用部署目录权限过高，可能导致恶意文件写入。</li>\n</ol>\n","excerpt":"","more":"<h4 id=\"服务的底层原理是什么？\"><a href=\"#服务的底层原理是什么？\" class=\"headerlink\" title=\"服务的底层原理是什么？\"></a>服务的底层原理是什么？</h4><p>Tomcat 是一个开源的 Servlet 容器，属于 Apache 软件基金会项目，它主要用于运行 Java Web 应用程序。下面来剖析其底层工作原理：</p>\n<ol>\n<li><strong>请求处理流程</strong><br> 客户端向服务器发起 HTTP 请求，请求首先会到达 Tomcat 的连接器（Connector）。<br> 连接器把请求转换为 ServletRequest 对象，接着将该对象传递给容器（Container）进行处理。<br> 容器依据 Servlet 映射配置，找到对应的 Servlet，并调用其 service () 方法。<br> Servlet 处理完请求后，会返回一个 ServletResponse 对象，连接器再把这个对象转换为 HTTP 响应返回给客户端。</li>\n<li><strong>核心组件</strong><ul>\n<li>*<em>连接器（Connector）</em>：负责处理底层的网络通信，支持像 HTTP&#x2F;1.1、HTTP&#x2F;2 等多种协议。</li>\n</ul>\n<ul>\n<li><strong>容器（Container）</strong>：由 Engine、Host、Context 和 Wrapper 这四个层次的组件构成，主要负责 Servlet 的生命周期管理以及请求的路由。</li>\n<li><strong>Servlet 引擎</strong>：按照 Servlet 规范来执行 Servlet 和 JSP。</li>\n<li><strong>生命周期管理</strong>：借助 Lifecycle 接口对组件的生命周期（如初始化、启动、停止等）进行管理。</li>\n</ul>\n</li>\n<li><strong>线程模型</strong><br> Tomcat 支持多种线程模型，例如：<ul>\n<li><strong>BIO（阻塞 I&#x2F;O）</strong>：一个线程处理一个连接，这种方式在并发性能上表现较差。</li>\n<li><strong>NIO（非阻塞 I&#x2F;O）</strong>：利用 Selector 实现多路复用，一个线程能够处理多个连接。</li>\n<li><strong>APR（Apache Portable Runtime）</strong>：基于本地库实现，在高并发场景下性能最佳。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"><a href=\"#有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\" class=\"headerlink\" title=\"有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？\"></a>有什么软件或者服务跟要学习的服务类似，他们的异同点是什么，是否可以替代，不可替代点是什么？</h4><p>下面是与 Tomcat 类似的常见 Web 服务器和 Servlet 容器：</p>\n<table>\n<thead>\n<tr>\n<th>产品</th>\n<th>类型</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>Apache HTTP Server</strong></td>\n<td>Web 服务器</td>\n<td>主要用于静态内容服务，不过可以通过 mod_jk 等模块与 Servlet 容器集成。</td>\n</tr>\n<tr>\n<td><strong>Nginx</strong></td>\n<td>Web 服务器 &#x2F; 反向代理</td>\n<td>轻量级且高性能，擅长处理静态内容和反向代理，同样能和 Servlet 容器配合使用。</td>\n</tr>\n<tr>\n<td><strong>Jetty</strong></td>\n<td>Servlet 容器</td>\n<td>轻量级、模块化，在嵌入式场景中应用广泛，和 Tomcat 高度兼容。</td>\n</tr>\n<tr>\n<td><strong>WildFly (JBoss)</strong></td>\n<td>应用服务器</td>\n<td>功能全面，支持 EJB 等 Java EE 标准，但资源占用相对较多。</td>\n</tr>\n<tr>\n<td><strong>GlassFish</strong></td>\n<td>应用服务器</td>\n<td>是 Java EE 的参考实现，不过在企业级应用中的使用频率逐渐降低。</td>\n</tr>\n<tr>\n<td><strong>替代分析</strong>：</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<ul>\n<li><strong>部分替代</strong>：Nginx + 独立 Servlet 容器（如 Tomcat）的组合可以替代 Tomcat 的部分功能，特别是在负载均衡和静态内容处理方面。</li>\n<li><strong>完全替代</strong>：Jetty 由于和 Servlet 规范兼容，并且更加轻量级，所以在大多数场景下可以替代 Tomcat。</li>\n<li><strong>不可替代点</strong>：<ul>\n<li>Tomcat 对 Apache HTTP Server 和 Nginx 起到补充作用，后两者主要侧重于静态内容服务，而 Tomcat 专注于动态内容处理。</li>\n<li>企业级应用可能会依赖 WildFly 等应用服务器提供的完整 Java EE 功能。</li>\n<li>对于已经深度集成 Tomcat 特定功能（如自定义 Realm、Valve）的应用，替换成本较高。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"我们在公司里都会在哪些场景下使用\"><a href=\"#我们在公司里都会在哪些场景下使用\" class=\"headerlink\" title=\"我们在公司里都会在哪些场景下使用\"></a>我们在公司里都会在哪些场景下使用</h4><ol>\n<li><strong>Web 应用服务器</strong></li>\n</ol>\n<ul>\n<li>作为 Java Web 应用的运行环境，比如 Spring Boot 应用默认就内嵌 Tomcat。</li>\n<li>部署传统的 WAR 包应用，像基于 Struts、JSF 框架开发的应用。</li>\n</ul>\n<ol start=\"2\">\n<li><strong>微服务架构</strong></li>\n</ol>\n<ul>\n<li>为微服务提供轻量级的运行容器。</li>\n<li>与 Spring Cloud 等框架结合，构建分布式系统。</li>\n</ul>\n<ol start=\"3\">\n<li><strong>开发测试环境</strong></li>\n</ol>\n<ul>\n<li>开发阶段进行本地调试。</li>\n<li>CI&#x2F;CD 流程中作为测试服务器，例如在 Jenkins、GitLab CI 中使用。</li>\n</ul>\n<ol start=\"4\">\n<li><strong>与其他组件集成</strong></li>\n</ol>\n<ul>\n<li>和 Nginx 搭配，由 Nginx 负责负载均衡和静态内容处理，Tomcat 专注于动态请求。</li>\n<li>与数据库、消息队列等后端服务集成。</li>\n</ul>\n<ol start=\"5\">\n<li><strong>嵌入式场景</strong></li>\n</ol>\n<ul>\n<li>作为库嵌入到 Java 应用中，为应用提供 HTTP 服务，例如在 Spring Boot 应用中。<br><strong>典型案例</strong>：</li>\n<li>中小型企业网站，由于流量不大，会直接使用 Tomcat 作为 Web 服务器。</li>\n<li>大型企业系统中的独立服务模块，可能会选择部署在 Tomcat 上。</li>\n<li>开发团队使用 Tomcat 作为开发和测试环境，生产环境则切换到更复杂的应用服务器。</li>\n</ul>\n<h4 id=\"服务在使用或者安装中遇到过什么问题\"><a href=\"#服务在使用或者安装中遇到过什么问题\" class=\"headerlink\" title=\"服务在使用或者安装中遇到过什么问题\"></a>服务在使用或者安装中遇到过什么问题</h4><p>在使用或安装 Tomcat 服务时，常见的问题包括：</p>\n<ol>\n<li><p><strong>安装配置问题</strong></p>\n<ul>\n<li><strong>端口冲突</strong>：默认使用 8080 端口，若被其他应用（如 Skype、另一个 Tomcat 实例）占用，启动会失败。</li>\n<li><strong>环境变量配置错误</strong>：未正确设置 JAVA_HOME 或 CATALINA_HOME 环境变量，导致启动脚本无法找到 Java 运行时。</li>\n<li><strong>权限不足</strong>：在 Linux 系统中，非 root 用户启动时可能无法绑定低于 1024 的端口（如 80）。</li>\n</ul>\n</li>\n<li><p><strong>性能与内存问题</strong></p>\n<ul>\n<li><strong>内存溢出（OOM）</strong>：默认内存配置较低（如 128MB 堆内存），高并发下易触发 OutOfMemoryError。</li>\n<li><strong>线程池配置不合理</strong>：默认线程数不足（如 maxThreads&#x3D;200），导致请求堆积。</li>\n<li><strong>GC 频繁</strong>：堆内存分配不合理，导致频繁 Full GC，影响响应时间。</li>\n</ul>\n</li>\n<li><p><strong>安全漏洞</strong></p>\n<ul>\n<li><strong>默认配置风险</strong>：未修改默认的 manager&#x2F;host-manager 应用密码，可能被远程攻击。</li>\n<li><strong>Servlet 容器漏洞</strong>：如 Ghostcat 漏洞（CVE-2020-1938）允许读取 WEB-INF 目录下的文件。</li>\n<li><strong>过时依赖</strong>：使用的 Apache Commons FileUpload 等组件存在已知漏洞。</li>\n</ul>\n</li>\n<li><p><strong>应用部署问题</strong></p>\n<ul>\n<li><strong>WAR 包冲突</strong>：多个应用依赖同一库的不同版本，导致类加载冲突。</li>\n<li><strong>JSP 编译错误</strong>：JSP 文件修改后未重新编译，或编译时依赖缺失。</li>\n<li><strong>上下文路径冲突</strong>：多个应用配置相同的 Context Path，导致访问异常。</li>\n</ul>\n</li>\n<li><p><strong>集群与负载均衡</strong></p>\n<ul>\n<li><strong>Session 复制失败</strong>：集群环境中 Session 未能正确复制，导致用户登录状态丢失。</li>\n<li><strong>反向代理配置错误</strong>：Nginx&#x2F;Apache 与 Tomcat 集成时，未正确配置 proxy_pass 或 sticky session。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"服务的其他使用场景是什么-在别的公司如何用）\"><a href=\"#服务的其他使用场景是什么-在别的公司如何用）\" class=\"headerlink\" title=\"服务的其他使用场景是什么 (在别的公司如何用）\"></a>服务的其他使用场景是什么 (在别的公司如何用）</h4><ol>\n<li><p><strong>API 网关 &#x2F; 服务网关</strong></p>\n<ul>\n<li>作为轻量级网关，处理 RESTful API 请求，集成 Spring Cloud Gateway 等组件。</li>\n<li>某金融科技公司使用 Tomcat 部署 API 网关，通过 Filter 实现请求鉴权和流量控制。</li>\n</ul>\n</li>\n<li><p><strong>企业级 SOA 平台</strong></p>\n<ul>\n<li>在传统企业中，作为 SOAP Web 服务的容器，支撑遗留系统间的集成。</li>\n<li>某制造业公司使用 Tomcat 运行基于 Axis2 的 Web 服务，与 ERP 系统对接。</li>\n</ul>\n</li>\n<li><p><strong>IoT 平台后端</strong></p>\n<ul>\n<li>处理 IoT 设备的 HTTP&#x2F;MQTT 请求，结合数据库存储设备数据。</li>\n<li>某智能家居公司使用 Tomcat 接收设备状态数据，并通过 WebSocket 推送至客户端。</li>\n</ul>\n</li>\n<li><p><strong>教学与培训</strong></p>\n<ul>\n<li>高校或培训机构作为 Java Web 开发教学的基础环境。</li>\n<li>某培训机构使用 Tomcat 配合 Eclipse，教授 Servlet&#x2F;JSP 开发。</li>\n</ul>\n</li>\n<li><p><strong>嵌入式系统</strong></p>\n<ul>\n<li>在机顶盒、智能终端等资源受限设备中嵌入 Tomcat，提供 Web 管理界面。</li>\n<li>某网络设备厂商在路由器中集成 Tomcat 微内核，提供 Web 配置界面。</li>\n</ul>\n</li>\n<li><p><strong>爬虫与数据采集</strong></p>\n<ul>\n<li>部署爬虫管理平台，调度和监控分布式爬虫任务。</li>\n<li>某电商公司使用 Tomcat 运行 Scrapy 爬虫管理系统，定时抓取竞品数据。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"><a href=\"#目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\" class=\"headerlink\" title=\"目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同\"></a>目前我们用的版本号什么，有哪些版本，最新版本号更新到什么程度，各个版本有什么异同</h4><table>\n<thead>\n<tr>\n<th>版本系列</th>\n<th>支持的 Servlet&#x2F;JSP 规范</th>\n<th>状态</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>10.x</strong></td>\n<td>Servlet 5.0&#x2F;JSP 3.0</td>\n<td>活跃版本</td>\n<td>基于 Jakarta EE 9 + 的应用</td>\n</tr>\n<tr>\n<td><strong>9.x</strong></td>\n<td>Servlet 4.0&#x2F;JSP 2.3</td>\n<td>LTS 版本</td>\n<td>大多数生产环境</td>\n</tr>\n<tr>\n<td><strong>最新版本（截至 2025 年 7 月）</strong></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<ul>\n<li><strong>Tomcat 10.1.x</strong>：最新稳定版，完全支持 Jakarta EE 10，移除了对 Java EE 的支持。</li>\n<li><strong>Tomcat 9.0.83</strong>：LTS 版本，仍被广泛使用，支持 Java 8-17。</li>\n<li><strong>Tomcat 11.x</strong>：开发中，将支持 Jakarta EE 11，计划引入 HTTP&#x2F;3 等新特性。</li>\n</ul>\n<h4 id=\"这个服务或者软件有哪些常见的模块\"><a href=\"#这个服务或者软件有哪些常见的模块\" class=\"headerlink\" title=\"这个服务或者软件有哪些常见的模块\"></a>这个服务或者软件有哪些常见的模块</h4><p>作以支持 Java Web 应用的运行：<br> 1.<strong>核心功能模块</strong></p>\n<ul>\n<li><p><strong>Catalina</strong>：Tomcat 的核心容器模块，包含以下子模块：</p>\n<ul>\n<li><strong>Connector（连接器）</strong>：处理网络协议（HTTP、AJP 等），负责接收客户端请求并转换为容器可处理的格式。</li>\n<li><strong>Container（容器）</strong>：由 Engine（引擎）、Host（虚拟主机）、Context（应用上下文）、Wrapper（Servlet 包装器）四级组件构成，管理 Servlet 生命周期和请求路由。</li>\n<li><strong>Realm</strong>：负责用户认证和授权，支持基于文件、数据库、LDAP 等多种认证方式。</li>\n<li><strong>Valve</strong>：类似拦截器，可在请求处理的不同阶段插入逻辑（如日志记录、访问控制）。</li>\n</ul>\n</li>\n<li><p><strong>Jasper</strong>：JSP 引擎模块，负责将 JSP 文件编译为 Servlet 类（.java→.class），支持热部署（修改 JSP 后自动重新编译）。</p>\n</li>\n<li><p><strong>Coyote</strong>：处理底层 I&#x2F;O 通信的模块，提供 BIO、NIO、NIO2、APR 等多种 I&#x2F;O 模型，支持 HTTP&#x2F;1.1、HTTP&#x2F;2、AJP 等协议。</p>\n</li>\n<li><p><strong>Cluster</strong>：集群模块，支持 Session 复制、负载均衡和故障转移，依赖组播或静态列表发现集群节点。</p>\n</li>\n<li><p><strong>Naming</strong>：JNDI（Java 命名与目录接口）实现模块，用于管理数据源、邮件会话等资源。</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li><strong>扩展模块</strong></li>\n</ol>\n<ul>\n<li><strong>WebSocket 支持</strong>：通过<code>org.apache.tomcat.websocket</code>包实现 WebSocket 协议（RFC 6455），支持双向通信。</li>\n<li><strong>Security</strong>：提供 SSL&#x2F;TLS 配置、CSP（内容安全策略）、CSRF 防护等安全增强功能。</li>\n<li><strong>Manager</strong>：Web 管理界面模块，用于部署应用、监控服务器状态（需配置用户权限）。</li>\n<li><strong>Host-Manager</strong>：虚拟主机管理模块，支持通过 Web 界面添加 &#x2F; 删除虚拟主机。</li>\n</ul>\n<h4 id=\"服务的日志，服务的数据都是如何处理的\"><a href=\"#服务的日志，服务的数据都是如何处理的\" class=\"headerlink\" title=\"服务的日志，服务的数据都是如何处理的\"></a>服务的日志，服务的数据都是如何处理的</h4><p><strong>1.日志处理</strong><br>Tomcat 的日志分为多种类型，通过<code>conf/logging.properties</code>配置：</p>\n<ul>\n<li><strong>Catalina 日志</strong>：记录服务器启动、关闭、组件加载等系统级信息，默认输出到<code>logs/catalina.out</code>（Linux）或<code>logs/catalina.yyyy-MM-dd.log</code>（按日期滚动）。</li>\n<li><strong>访问日志</strong>：记录 HTTP 请求详情（IP、URL、状态码、响应时间等），默认通过<code>conf/server.xml</code>中的<code>AccessLogValve</code>配置，输出到<code>logs/access_log.yyyy-MM-dd.txt</code>，格式可自定义（如 Common Log Format）。</li>\n<li><strong>应用日志</strong>：Web 应用通过<code>java.util.logging</code>或 Log4j 等框架输出的日志，默认与 Catalina 日志合并，可通过配置分离到独立文件。</li>\n<li><strong><a href=\"https://localhost/\">localhost</a>日志</strong>：记录虚拟主机<code>localhost</code>相关的信息，如应用部署失败的原因。</li>\n<li><strong>manager&#x2F;host-manager 日志</strong>：记录管理界面的操作日志，用于审计管理行为。<br><strong>日志轮转策略</strong>：默认按日期分割日志，可配置<code>maxDays</code>限制保留天数，或通过第三方工具（如 Logrotate）实现日志归档和清理。</li>\n</ul>\n<h4 id=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"><a href=\"#服务的升级是怎么做的，每个版本都有哪些相应的漏洞\" class=\"headerlink\" title=\"服务的升级是怎么做的，每个版本都有哪些相应的漏洞\"></a>服务的升级是怎么做的，每个版本都有哪些相应的漏洞</h4><table>\n<thead>\n<tr>\n<th>Tomcat 8.5-10</th>\n<th>CVE-2022-23181</th>\n<th>拒绝服务：HTTP&#x2F;2 请求处理不当导致内存泄漏</th>\n<th>10.0.20+、9.0.62+</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Tomcat 9-10</td>\n<td>CVE-2023-28709</td>\n<td>远程代码执行：<code>WebSocket</code>处理不当，恶意请求可触发 ClassCastException</td>\n<td>10.1.8+、9.0.74+</td>\n</tr>\n</tbody></table>\n<h4 id=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"><a href=\"#这个服务可以与哪些服务结合有意想不到的功能或者解决方案\" class=\"headerlink\" title=\"这个服务可以与哪些服务结合有意想不到的功能或者解决方案\"></a>这个服务可以与哪些服务结合有意想不到的功能或者解决方案</h4><p>Tomcat 作为 Java Web 容器，与其他服务结合可扩展出多样化的企业级解决方案，以下是典型场景：</p>\n<ol>\n<li><strong>与反向代理 &#x2F; 负载均衡服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Nginx&#x2F;Apache HTTP Server</strong>：</p>\n<ul>\n<li>Nginx 作为前端反向代理，处理静态资源（CSS&#x2F;JS&#x2F; 图片），将动态请求转发给 Tomcat，提升静态资源加载速度并减轻 Tomcat 压力。</li>\n<li>利用 Nginx 的负载均衡功能（如<code>upstream</code>模块），将请求分发到多台 Tomcat 服务器，实现集群扩容和高可用（例如电商平台秒杀场景的流量分流）。</li>\n</ul>\n</li>\n<li><p><strong>搭配 HAProxy</strong>：</p>\n<ul>\n<li>针对 TCP 层的负载均衡（如 AJP 协议），支持更精细的健康检查和会话保持，适合对性能要求极高的金融交易系统。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li><strong>与缓存 &#x2F; 消息队列服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Redis</strong>：</p>\n<ul>\n<li>将 Tomcat 的 Session 数据存储在 Redis 中（通过<code>tomcat-redis-session-manager</code>插件），解决集群环境下 Session 共享问题，同时利用 Redis 的高读写性能提升 Session 访问速度。</li>\n<li>结合 Redis 作为应用级缓存，Tomcat 部署的 Java Web 应用可直接读写 Redis 缓存热点数据（如商品详情），减少数据库访问压力。</li>\n</ul>\n</li>\n<li><p><strong>搭配 RabbitMQ&#x2F;Kafka</strong>：</p>\n<ul>\n<li>Tomcat 应用作为消息生产者 &#x2F; 消费者，通过消息队列异步处理非实时任务（如订单日志写入、邮件发送），避免同步操作阻塞 Tomcat 线程，提升系统吞吐量（例如电商订单提交后异步通知仓库）。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"3\">\n<li><strong>与容器 &#x2F; 云服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Docker&#x2F;Kubernetes</strong>：</p>\n<ul>\n<li>将 Tomcat 打包为 Docker 镜像，通过 Kubernetes 实现自动扩缩容、滚动更新和故障自愈，适合微服务架构（例如 Spring Cloud 应用部署在 Tomcat 容器中，通过 K8s 管理多实例）。</li>\n<li>结合 Docker Compose 快速搭建本地开发环境（Tomcat+MySQL+Redis 一键启动），降低环境配置成本。</li>\n</ul>\n</li>\n<li><p><strong>搭配云服务（如 AWS ECS &#x2F; 阿里云容器服务）</strong>：</p>\n<ul>\n<li>利用云厂商的负载均衡、日志服务和监控告警功能，实现 Tomcat 应用的全托管运维，无需关注底层服务器部署。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li><strong>与监控 &#x2F; 日志服务结合</strong></li>\n</ol>\n<ul>\n<li><p><strong>搭配 Prometheus+Grafana</strong>：</p>\n<ul>\n<li>通过<code>tomcat_exporter</code>采集 Tomcat 的 JVM 内存、线程数、请求响应时间等指标，结合 Grafana 可视化监控面板，实时预警性能瓶颈（如线程池满导致请求阻塞）。</li>\n</ul>\n</li>\n<li><p><strong>搭配 ELK Stack（Elasticsearch+Logstash+Kibana）</strong>：</p>\n<ul>\n<li>用 Logstash 收集 Tomcat 的访问日志和应用日志，存储到 Elasticsearch，通过 Kibana 分析用户行为（如热门访问路径）或排查异常（如频繁 500 错误的触发条件）。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li><strong>与安全工具结合</strong></li>\n</ol>\n<ul>\n<li><strong>搭配 ModSecurity</strong>：<ul>\n<li>作为 Web 应用防火墙（WAF），与 Nginx+Tomcat 联动，拦截 SQL 注入、XSS 等攻击请求，保护 Tomcat 部署的应用（例如政务系统的敏感数据接口防护）。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"><a href=\"#从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\" class=\"headerlink\" title=\"从安全的角度来考虑这个软件是否安全或者需要在哪里调优？\"></a>从安全的角度来考虑这个软件是否安全或者需要在哪里调优？</h4><p>Tomcat 的核心安全风险点包括：</p>\n<ol>\n<li><strong>默认配置风险</strong>：默认安装包含<code>manager</code>、<code>host-manager</code>等管理界面，且可能存在弱密码（如默认用户<code>admin</code>无密码），易被未授权访问。</li>\n<li><strong>协议 &#x2F; 组件漏洞</strong>：历史版本存在高危漏洞（如 CVE-2020-1938 Ghostcat 文件读取漏洞、CVE-2023-28709 远程代码执行漏洞），多与组件缺陷或配置疏漏相关。</li>\n<li><strong>权限控制不足</strong>：文件系统权限宽松（如<code>conf/</code>目录可被非 root 用户修改）、应用部署目录权限过高，可能导致恶意文件写入。</li>\n</ol>\n"},{"title":"Serve目录","date":"2025-07-14T16:00:00.000Z","categories":["Serve"],"_content":"* [SSH 概念](SSH概念)\n* [SSH 面试](SSH面试)\n* [Tomcat 基础](Tomcat基础)\n* [Tomcat 面试](Tomcat面试)\n* [为什么称 Tomcat 为服务器？(IP,端口,域名)](为什么称Tomcat为服务器？)","source":"Serve/index.md","raw":"---\ntitle: Serve目录\ndate: 2025-07-15\ncategories:\n  - Serve\n---\n* [SSH 概念](SSH概念)\n* [SSH 面试](SSH面试)\n* [Tomcat 基础](Tomcat基础)\n* [Tomcat 面试](Tomcat面试)\n* [为什么称 Tomcat 为服务器？(IP,端口,域名)](为什么称Tomcat为服务器？)","updated":"2025-07-24T09:10:17.873Z","path":"Serve/index.html","comments":1,"layout":"page","_id":"cmdh6nnwg000c9gv3cd3f9o10","content":"<ul>\n<li><a href=\"SSH%E6%A6%82%E5%BF%B5\">SSH 概念</a></li>\n<li><a href=\"SSH%E9%9D%A2%E8%AF%95\">SSH 面试</a></li>\n<li><a href=\"Tomcat%E5%9F%BA%E7%A1%80\">Tomcat 基础</a></li>\n<li><a href=\"Tomcat%E9%9D%A2%E8%AF%95\">Tomcat 面试</a></li>\n<li><a href=\"%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A7%B0Tomcat%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9F\">为什么称 Tomcat 为服务器？(IP,端口,域名)</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"SSH%E6%A6%82%E5%BF%B5\">SSH 概念</a></li>\n<li><a href=\"SSH%E9%9D%A2%E8%AF%95\">SSH 面试</a></li>\n<li><a href=\"Tomcat%E5%9F%BA%E7%A1%80\">Tomcat 基础</a></li>\n<li><a href=\"Tomcat%E9%9D%A2%E8%AF%95\">Tomcat 面试</a></li>\n<li><a href=\"%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A7%B0Tomcat%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9F\">为什么称 Tomcat 为服务器？(IP,端口,域名)</a></li>\n</ul>\n"},{"title":"数据结构目录","date":"2025-07-14T16:00:00.000Z","categories":["数据结构"],"_content":"* [数组(顺序存储)基本原理](数组（顺序存储）基本原理)\n* [动态数组代码实现](动态数组代码实现)\n* [链表（链式存储）基本原理](链表（链式存储）基本原理)\n* [链表代码实现](链表代码实现)","source":"数据结构/index.md","raw":"---\ntitle: 数据结构目录\ndate: 2025-07-15\ncategories:\n  - 数据结构\n---\n* [数组(顺序存储)基本原理](数组（顺序存储）基本原理)\n* [动态数组代码实现](动态数组代码实现)\n* [链表（链式存储）基本原理](链表（链式存储）基本原理)\n* [链表代码实现](链表代码实现)","updated":"2025-07-24T09:01:05.290Z","path":"数据结构/index.html","comments":1,"layout":"page","_id":"cmdh6nnwh000d9gv3bqrndfva","content":"<ul>\n<li><a href=\"%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组(顺序存储)基本原理</a></li>\n<li><a href=\"%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">动态数组代码实现</a></li>\n<li><a href=\"%E9%93%BE%E8%A1%A8%EF%BC%88%E9%93%BE%E5%BC%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">链表（链式存储）基本原理</a></li>\n<li><a href=\"%E9%93%BE%E8%A1%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">链表代码实现</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组(顺序存储)基本原理</a></li>\n<li><a href=\"%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">动态数组代码实现</a></li>\n<li><a href=\"%E9%93%BE%E8%A1%A8%EF%BC%88%E9%93%BE%E5%BC%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">链表（链式存储）基本原理</a></li>\n<li><a href=\"%E9%93%BE%E8%A1%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">链表代码实现</a></li>\n</ul>\n"},{"title":"SSH概念","date":"2025-07-14T16:00:00.000Z","cssclasses":["Serve","SSH"],"_content":"\nSSH（Secure Shell）是一种用于在网络中安全远程登录和执行命令的协议\n### **一、SSH 的正常通信流程**\n\n1. **密钥交换**：客户端发起连接后，服务器向客户端发送**公钥**（用于加密后续通信）。\n2. **身份验证**：客户端验证服务器公钥的合法性（首次连接时会弹窗提示用户确认公钥指纹，后续连接则比对本地缓存）。\n3. **加密通信**：验证通过后，双方**基于公钥协商对称加密密钥，后续数据通过该密钥加密传输**[[SSH概念#关于加密]]，确保私密性和完整性。\n#### 关于加密 \n\n**一. 公钥与私钥 —— “公钥相当于一个锁，私钥就是解开这个锁的钥匙”** \n\n1. **公钥（锁）与私钥（钥匙）的角色**\n\t- **公钥（锁）**：可以公开传递，任何人都能获取。就像一把挂在门外的锁，别人可以用它锁东西，但只有钥匙的持有者才能打开。\n\t- **私钥（钥匙）**：必须严格保密，仅持有者拥有。用公钥加密的数据，只有对应的私钥才能解密（就像用锁锁上的盒子，只有钥匙能打开）。\n\n**二. 非对称加密和对称加密 —— “结合了非对称加密和对称加密”**\n\n 1. SSH 的加密机制包含**非对称加密（用于安全协商）** 和**对称加密（用于数据传输）** 两个核心环节,两者配合完成整个加密流程:\n\n\t- **非对称加密**：主要用于**身份验证和建立安全连接的初始阶段**。  \n\t    比如常见的 “公钥登录” 方式，就是通过一对非对称密钥（公钥存于服务器，私钥由客户端持有）验证客户端身份，确保连接发起方是合法用户。此外，SSH 握手时会用非对称加密协商后续对称加密的密钥（避免密钥在网络中明文传输）。\n    \n\t- **对称加密**：用于**连接建立后的实际数据传输**。  \n\t    因为非对称加密计算量大，不适合大量数据传输，所以 SSH 会在握手阶段通过非对称加密协商出一个临时的对称密钥，后续所有数据都用这个对称密钥加密，兼顾安全性和效率。\n\n2. **对称加密与非对称加密的核心区别**\n\n| **对比维度**    | **对称加密**                   | **非对称加密**                          |\n| ----------- | -------------------------- | ---------------------------------- |\n| **密钥数量与使用** | 只有**1 个密钥**（对称密钥），加密和解密都用它 | 有**2 个密钥**（公钥 + 私钥），公钥加密、私钥解密（或反之） |\n| **密钥特性**    | 密钥必须**严格保密**，且双方需提前共享      | 公钥可**公开传播**，私钥必须保密                 |\n| **加密解密效率**  | 速度极快（适合大量数据）               | 速度较慢（适合小数据）                        |\n| **典型算法**    | AES、DES、RC4                | RSA、ECDH、DSA                       |\n| **核心场景**    | 实际数据传输（如文件、会话内容）           | 密钥交换、身份认证（如 SSH 公钥验证）              |\n\n3. **混淆 “公钥” 和 “对称加密”？—— 对称加密中没有 “公钥” 概念，公钥是 “非对称加密” 的核心要素**\n\t- **公钥**属于非对称加密体系，用于**安全传递对称密钥**；\n\t- 对称加密用的是单独的**对称密钥**，用于**高效传输实际数据**。\n\n#### 公钥私钥谁持有？\n\n- 服务器有自己的公钥（给客户端用）和私钥（自己留着）；\n- 客户端（若用密钥登录）也有自己的公钥（给服务器用）和私钥（自己留着）。  \n双方通过交换公钥，用对方的公钥加密信息，再用自己的私钥解密，完成安全交互。\n\n### **二、中间人攻击**\n\nSSH（Secure Shell）的中间人攻击（Man-in-the-Middle Attack，简称 MITM）是一种针对 SSH 加密通信的网络攻击手段，攻击者通过秘密介入客户端与服务器之间的通信，伪装成 “中间人” 窃取或篡改数据，同时让双方误以为正在直接通信。以下是详细解释：\n\n1. **原理**\n\t1. **拦截连接**：攻击者通过网络劫持（如 ARP 欺骗、DNS 劫持等），让客户端的连接请求发送        到自己的设备，而非目标服务器。\n\t2. **双重伪装**：\n\t    - 攻击者向客户端发送**自己的公钥**（伪装成服务器的公钥）。\n\t    - 同时，攻击者以客户端的身份连接目标服务器，获取服务器的真实公钥。\n\t1. **数据转发与窃听**：\n\t    - 客户端用攻击者的公钥加密数据后发送，攻击者解密并获取原始数据。\n\t    - 攻击者再用服务器的真实公钥加密数据，转发给服务器；反之亦然。\n\t2. **隐藏痕迹**：客户端和服务器均无法察觉中间人的存在，误以为在直接通信。\n\n2. **攻击成功的关键条件**\n\n\t中间人攻击能得逞，核心在于**绕过 SSH 的公钥验证机制，采用密码认证**：\n\t\t- **首次连接**：用户对服务器公钥的指纹（如`SHA256:xxxx`）缺乏认知，可能直接点击 “确认”（忽略安全提示），导致接受攻击者伪造的公钥。\n\t\t- **非首次连接**：攻击者通过技术手段（如修改客户端本地缓存的公钥记录），让客户端误以为服务器公钥未发生变化，从而跳过验证。\n\n3. **如何防范中间人攻击 —— 严格验证服务器公钥的合法性，并采用更安全的认证方式（如密钥认证）** \n  \n\t 1. **严格验证公钥指纹**：\n\t    - 首次连接服务器时，务必通过**可信渠道**（如线下、加密邮件）获取服务器公钥的指纹，与客户端显示的指纹比对，确认一致后再确认。\n\t    - 非首次连接时，若客户端提示 “公钥已更改”（可能是攻击或服务器真的更换了公钥），需暂停连接并排查原因。\n\t    \n\t2. **使用密钥认证替代密码认证**：\n\t    - SSH 密钥认证（公钥 - 私钥对）比密码认证更安全，即使中间人截获数据，也无法获取私钥（私钥仅存储在客户端）。\n\t    \n\t3. **限制 SSH 访问范围**：\n\t    - 通过防火墙或 SSH 配置（如`sshd_config`）限制允许连接的 IP 地址，减少被攻击的暴露面。\n\t    \n\t4. **使用额外安全机制**：\n\t    - 启用 SSH 的**主机密钥验证**（`StrictHostKeyChecking yes`），拒绝连接未知或公钥变化的服务器。\n\t    - 结合 VPN 或专用网络，减少中间人劫持的可能性。\n","source":"Serve/SSH概念.md","raw":"---\ntitle: SSH概念\ndate: 2025-07-15\ncssclasses:\n  - Serve\n  - SSH\n---\n\nSSH（Secure Shell）是一种用于在网络中安全远程登录和执行命令的协议\n### **一、SSH 的正常通信流程**\n\n1. **密钥交换**：客户端发起连接后，服务器向客户端发送**公钥**（用于加密后续通信）。\n2. **身份验证**：客户端验证服务器公钥的合法性（首次连接时会弹窗提示用户确认公钥指纹，后续连接则比对本地缓存）。\n3. **加密通信**：验证通过后，双方**基于公钥协商对称加密密钥，后续数据通过该密钥加密传输**[[SSH概念#关于加密]]，确保私密性和完整性。\n#### 关于加密 \n\n**一. 公钥与私钥 —— “公钥相当于一个锁，私钥就是解开这个锁的钥匙”** \n\n1. **公钥（锁）与私钥（钥匙）的角色**\n\t- **公钥（锁）**：可以公开传递，任何人都能获取。就像一把挂在门外的锁，别人可以用它锁东西，但只有钥匙的持有者才能打开。\n\t- **私钥（钥匙）**：必须严格保密，仅持有者拥有。用公钥加密的数据，只有对应的私钥才能解密（就像用锁锁上的盒子，只有钥匙能打开）。\n\n**二. 非对称加密和对称加密 —— “结合了非对称加密和对称加密”**\n\n 1. SSH 的加密机制包含**非对称加密（用于安全协商）** 和**对称加密（用于数据传输）** 两个核心环节,两者配合完成整个加密流程:\n\n\t- **非对称加密**：主要用于**身份验证和建立安全连接的初始阶段**。  \n\t    比如常见的 “公钥登录” 方式，就是通过一对非对称密钥（公钥存于服务器，私钥由客户端持有）验证客户端身份，确保连接发起方是合法用户。此外，SSH 握手时会用非对称加密协商后续对称加密的密钥（避免密钥在网络中明文传输）。\n    \n\t- **对称加密**：用于**连接建立后的实际数据传输**。  \n\t    因为非对称加密计算量大，不适合大量数据传输，所以 SSH 会在握手阶段通过非对称加密协商出一个临时的对称密钥，后续所有数据都用这个对称密钥加密，兼顾安全性和效率。\n\n2. **对称加密与非对称加密的核心区别**\n\n| **对比维度**    | **对称加密**                   | **非对称加密**                          |\n| ----------- | -------------------------- | ---------------------------------- |\n| **密钥数量与使用** | 只有**1 个密钥**（对称密钥），加密和解密都用它 | 有**2 个密钥**（公钥 + 私钥），公钥加密、私钥解密（或反之） |\n| **密钥特性**    | 密钥必须**严格保密**，且双方需提前共享      | 公钥可**公开传播**，私钥必须保密                 |\n| **加密解密效率**  | 速度极快（适合大量数据）               | 速度较慢（适合小数据）                        |\n| **典型算法**    | AES、DES、RC4                | RSA、ECDH、DSA                       |\n| **核心场景**    | 实际数据传输（如文件、会话内容）           | 密钥交换、身份认证（如 SSH 公钥验证）              |\n\n3. **混淆 “公钥” 和 “对称加密”？—— 对称加密中没有 “公钥” 概念，公钥是 “非对称加密” 的核心要素**\n\t- **公钥**属于非对称加密体系，用于**安全传递对称密钥**；\n\t- 对称加密用的是单独的**对称密钥**，用于**高效传输实际数据**。\n\n#### 公钥私钥谁持有？\n\n- 服务器有自己的公钥（给客户端用）和私钥（自己留着）；\n- 客户端（若用密钥登录）也有自己的公钥（给服务器用）和私钥（自己留着）。  \n双方通过交换公钥，用对方的公钥加密信息，再用自己的私钥解密，完成安全交互。\n\n### **二、中间人攻击**\n\nSSH（Secure Shell）的中间人攻击（Man-in-the-Middle Attack，简称 MITM）是一种针对 SSH 加密通信的网络攻击手段，攻击者通过秘密介入客户端与服务器之间的通信，伪装成 “中间人” 窃取或篡改数据，同时让双方误以为正在直接通信。以下是详细解释：\n\n1. **原理**\n\t1. **拦截连接**：攻击者通过网络劫持（如 ARP 欺骗、DNS 劫持等），让客户端的连接请求发送        到自己的设备，而非目标服务器。\n\t2. **双重伪装**：\n\t    - 攻击者向客户端发送**自己的公钥**（伪装成服务器的公钥）。\n\t    - 同时，攻击者以客户端的身份连接目标服务器，获取服务器的真实公钥。\n\t1. **数据转发与窃听**：\n\t    - 客户端用攻击者的公钥加密数据后发送，攻击者解密并获取原始数据。\n\t    - 攻击者再用服务器的真实公钥加密数据，转发给服务器；反之亦然。\n\t2. **隐藏痕迹**：客户端和服务器均无法察觉中间人的存在，误以为在直接通信。\n\n2. **攻击成功的关键条件**\n\n\t中间人攻击能得逞，核心在于**绕过 SSH 的公钥验证机制，采用密码认证**：\n\t\t- **首次连接**：用户对服务器公钥的指纹（如`SHA256:xxxx`）缺乏认知，可能直接点击 “确认”（忽略安全提示），导致接受攻击者伪造的公钥。\n\t\t- **非首次连接**：攻击者通过技术手段（如修改客户端本地缓存的公钥记录），让客户端误以为服务器公钥未发生变化，从而跳过验证。\n\n3. **如何防范中间人攻击 —— 严格验证服务器公钥的合法性，并采用更安全的认证方式（如密钥认证）** \n  \n\t 1. **严格验证公钥指纹**：\n\t    - 首次连接服务器时，务必通过**可信渠道**（如线下、加密邮件）获取服务器公钥的指纹，与客户端显示的指纹比对，确认一致后再确认。\n\t    - 非首次连接时，若客户端提示 “公钥已更改”（可能是攻击或服务器真的更换了公钥），需暂停连接并排查原因。\n\t    \n\t2. **使用密钥认证替代密码认证**：\n\t    - SSH 密钥认证（公钥 - 私钥对）比密码认证更安全，即使中间人截获数据，也无法获取私钥（私钥仅存储在客户端）。\n\t    \n\t3. **限制 SSH 访问范围**：\n\t    - 通过防火墙或 SSH 配置（如`sshd_config`）限制允许连接的 IP 地址，减少被攻击的暴露面。\n\t    \n\t4. **使用额外安全机制**：\n\t    - 启用 SSH 的**主机密钥验证**（`StrictHostKeyChecking yes`），拒绝连接未知或公钥变化的服务器。\n\t    - 结合 VPN 或专用网络，减少中间人劫持的可能性。\n","updated":"2025-07-18T05:24:34.384Z","path":"Serve/SSH概念.html","comments":1,"layout":"page","_id":"cmdh6nnwh000e9gv3hugyasel","content":"<p>SSH（Secure Shell）是一种用于在网络中安全远程登录和执行命令的协议</p>\n<h3 id=\"一、SSH-的正常通信流程\"><a href=\"#一、SSH-的正常通信流程\" class=\"headerlink\" title=\"一、SSH 的正常通信流程\"></a><strong>一、SSH 的正常通信流程</strong></h3><ol>\n<li><strong>密钥交换</strong>：客户端发起连接后，服务器向客户端发送<strong>公钥</strong>（用于加密后续通信）。</li>\n<li><strong>身份验证</strong>：客户端验证服务器公钥的合法性（首次连接时会弹窗提示用户确认公钥指纹，后续连接则比对本地缓存）。</li>\n<li><strong>加密通信</strong>：验证通过后，双方<strong>基于公钥协商对称加密密钥，后续数据通过该密钥加密传输</strong>[[SSH概念#关于加密]]，确保私密性和完整性。</li>\n</ol>\n<h4 id=\"关于加密\"><a href=\"#关于加密\" class=\"headerlink\" title=\"关于加密\"></a>关于加密</h4><p><strong>一. 公钥与私钥 —— “公钥相当于一个锁，私钥就是解开这个锁的钥匙”</strong> </p>\n<ol>\n<li><strong>公钥（锁）与私钥（钥匙）的角色</strong><ul>\n<li><strong>公钥（锁）</strong>：可以公开传递，任何人都能获取。就像一把挂在门外的锁，别人可以用它锁东西，但只有钥匙的持有者才能打开。</li>\n<li><strong>私钥（钥匙）</strong>：必须严格保密，仅持有者拥有。用公钥加密的数据，只有对应的私钥才能解密（就像用锁锁上的盒子，只有钥匙能打开）。</li>\n</ul>\n</li>\n</ol>\n<p><strong>二. 非对称加密和对称加密 —— “结合了非对称加密和对称加密”</strong></p>\n<ol>\n<li><p>SSH 的加密机制包含<strong>非对称加密（用于安全协商）</strong> 和<strong>对称加密（用于数据传输）</strong> 两个核心环节,两者配合完成整个加密流程:</p>\n<ul>\n<li><p><strong>非对称加密</strong>：主要用于<strong>身份验证和建立安全连接的初始阶段</strong>。<br>  比如常见的 “公钥登录” 方式，就是通过一对非对称密钥（公钥存于服务器，私钥由客户端持有）验证客户端身份，确保连接发起方是合法用户。此外，SSH 握手时会用非对称加密协商后续对称加密的密钥（避免密钥在网络中明文传输）。</p>\n</li>\n<li><p><strong>对称加密</strong>：用于<strong>连接建立后的实际数据传输</strong>。<br>  因为非对称加密计算量大，不适合大量数据传输，所以 SSH 会在握手阶段通过非对称加密协商出一个临时的对称密钥，后续所有数据都用这个对称密钥加密，兼顾安全性和效率。</p>\n</li>\n</ul>\n</li>\n<li><p><strong>对称加密与非对称加密的核心区别</strong></p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th><strong>对比维度</strong></th>\n<th><strong>对称加密</strong></th>\n<th><strong>非对称加密</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>密钥数量与使用</strong></td>\n<td>只有<strong>1 个密钥</strong>（对称密钥），加密和解密都用它</td>\n<td>有<strong>2 个密钥</strong>（公钥 + 私钥），公钥加密、私钥解密（或反之）</td>\n</tr>\n<tr>\n<td><strong>密钥特性</strong></td>\n<td>密钥必须<strong>严格保密</strong>，且双方需提前共享</td>\n<td>公钥可<strong>公开传播</strong>，私钥必须保密</td>\n</tr>\n<tr>\n<td><strong>加密解密效率</strong></td>\n<td>速度极快（适合大量数据）</td>\n<td>速度较慢（适合小数据）</td>\n</tr>\n<tr>\n<td><strong>典型算法</strong></td>\n<td>AES、DES、RC4</td>\n<td>RSA、ECDH、DSA</td>\n</tr>\n<tr>\n<td><strong>核心场景</strong></td>\n<td>实际数据传输（如文件、会话内容）</td>\n<td>密钥交换、身份认证（如 SSH 公钥验证）</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li><strong>混淆 “公钥” 和 “对称加密”？—— 对称加密中没有 “公钥” 概念，公钥是 “非对称加密” 的核心要素</strong><ul>\n<li><strong>公钥</strong>属于非对称加密体系，用于<strong>安全传递对称密钥</strong>；</li>\n<li>对称加密用的是单独的<strong>对称密钥</strong>，用于<strong>高效传输实际数据</strong>。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"公钥私钥谁持有？\"><a href=\"#公钥私钥谁持有？\" class=\"headerlink\" title=\"公钥私钥谁持有？\"></a>公钥私钥谁持有？</h4><ul>\n<li>服务器有自己的公钥（给客户端用）和私钥（自己留着）；</li>\n<li>客户端（若用密钥登录）也有自己的公钥（给服务器用）和私钥（自己留着）。<br>双方通过交换公钥，用对方的公钥加密信息，再用自己的私钥解密，完成安全交互。</li>\n</ul>\n<h3 id=\"二、中间人攻击\"><a href=\"#二、中间人攻击\" class=\"headerlink\" title=\"二、中间人攻击\"></a><strong>二、中间人攻击</strong></h3><p>SSH（Secure Shell）的中间人攻击（Man-in-the-Middle Attack，简称 MITM）是一种针对 SSH 加密通信的网络攻击手段，攻击者通过秘密介入客户端与服务器之间的通信，伪装成 “中间人” 窃取或篡改数据，同时让双方误以为正在直接通信。以下是详细解释：</p>\n<ol>\n<li><p><strong>原理</strong></p>\n<ol>\n<li><strong>拦截连接</strong>：攻击者通过网络劫持（如 ARP 欺骗、DNS 劫持等），让客户端的连接请求发送        到自己的设备，而非目标服务器。</li>\n<li><strong>双重伪装</strong>：<ul>\n<li>攻击者向客户端发送<strong>自己的公钥</strong>（伪装成服务器的公钥）。</li>\n<li>同时，攻击者以客户端的身份连接目标服务器，获取服务器的真实公钥。</li>\n</ul>\n</li>\n<li><strong>数据转发与窃听</strong>：<ul>\n<li>客户端用攻击者的公钥加密数据后发送，攻击者解密并获取原始数据。</li>\n<li>攻击者再用服务器的真实公钥加密数据，转发给服务器；反之亦然。</li>\n</ul>\n</li>\n<li><strong>隐藏痕迹</strong>：客户端和服务器均无法察觉中间人的存在，误以为在直接通信。</li>\n</ol>\n</li>\n<li><p><strong>攻击成功的关键条件</strong></p>\n<p> 中间人攻击能得逞，核心在于<strong>绕过 SSH 的公钥验证机制，采用密码认证</strong>：<br> - <strong>首次连接</strong>：用户对服务器公钥的指纹（如<code>SHA256:xxxx</code>）缺乏认知，可能直接点击 “确认”（忽略安全提示），导致接受攻击者伪造的公钥。<br> - <strong>非首次连接</strong>：攻击者通过技术手段（如修改客户端本地缓存的公钥记录），让客户端误以为服务器公钥未发生变化，从而跳过验证。</p>\n</li>\n<li><p><strong>如何防范中间人攻击 —— 严格验证服务器公钥的合法性，并采用更安全的认证方式（如密钥认证）</strong> </p>\n<ol>\n<li><p><strong>严格验证公钥指纹</strong>：</p>\n<ul>\n<li>首次连接服务器时，务必通过<strong>可信渠道</strong>（如线下、加密邮件）获取服务器公钥的指纹，与客户端显示的指纹比对，确认一致后再确认。</li>\n<li>非首次连接时，若客户端提示 “公钥已更改”（可能是攻击或服务器真的更换了公钥），需暂停连接并排查原因。</li>\n</ul>\n</li>\n<li><p><strong>使用密钥认证替代密码认证</strong>：</p>\n<ul>\n<li>SSH 密钥认证（公钥 - 私钥对）比密码认证更安全，即使中间人截获数据，也无法获取私钥（私钥仅存储在客户端）。</li>\n</ul>\n</li>\n<li><p><strong>限制 SSH 访问范围</strong>：</p>\n<ul>\n<li>通过防火墙或 SSH 配置（如<code>sshd_config</code>）限制允许连接的 IP 地址，减少被攻击的暴露面。</li>\n</ul>\n</li>\n<li><p><strong>使用额外安全机制</strong>：</p>\n<ul>\n<li>启用 SSH 的<strong>主机密钥验证</strong>（<code>StrictHostKeyChecking yes</code>），拒绝连接未知或公钥变化的服务器。</li>\n<li>结合 VPN 或专用网络，减少中间人劫持的可能性。</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n","excerpt":"","more":"<p>SSH（Secure Shell）是一种用于在网络中安全远程登录和执行命令的协议</p>\n<h3 id=\"一、SSH-的正常通信流程\"><a href=\"#一、SSH-的正常通信流程\" class=\"headerlink\" title=\"一、SSH 的正常通信流程\"></a><strong>一、SSH 的正常通信流程</strong></h3><ol>\n<li><strong>密钥交换</strong>：客户端发起连接后，服务器向客户端发送<strong>公钥</strong>（用于加密后续通信）。</li>\n<li><strong>身份验证</strong>：客户端验证服务器公钥的合法性（首次连接时会弹窗提示用户确认公钥指纹，后续连接则比对本地缓存）。</li>\n<li><strong>加密通信</strong>：验证通过后，双方<strong>基于公钥协商对称加密密钥，后续数据通过该密钥加密传输</strong>[[SSH概念#关于加密]]，确保私密性和完整性。</li>\n</ol>\n<h4 id=\"关于加密\"><a href=\"#关于加密\" class=\"headerlink\" title=\"关于加密\"></a>关于加密</h4><p><strong>一. 公钥与私钥 —— “公钥相当于一个锁，私钥就是解开这个锁的钥匙”</strong> </p>\n<ol>\n<li><strong>公钥（锁）与私钥（钥匙）的角色</strong><ul>\n<li><strong>公钥（锁）</strong>：可以公开传递，任何人都能获取。就像一把挂在门外的锁，别人可以用它锁东西，但只有钥匙的持有者才能打开。</li>\n<li><strong>私钥（钥匙）</strong>：必须严格保密，仅持有者拥有。用公钥加密的数据，只有对应的私钥才能解密（就像用锁锁上的盒子，只有钥匙能打开）。</li>\n</ul>\n</li>\n</ol>\n<p><strong>二. 非对称加密和对称加密 —— “结合了非对称加密和对称加密”</strong></p>\n<ol>\n<li><p>SSH 的加密机制包含<strong>非对称加密（用于安全协商）</strong> 和<strong>对称加密（用于数据传输）</strong> 两个核心环节,两者配合完成整个加密流程:</p>\n<ul>\n<li><p><strong>非对称加密</strong>：主要用于<strong>身份验证和建立安全连接的初始阶段</strong>。<br>  比如常见的 “公钥登录” 方式，就是通过一对非对称密钥（公钥存于服务器，私钥由客户端持有）验证客户端身份，确保连接发起方是合法用户。此外，SSH 握手时会用非对称加密协商后续对称加密的密钥（避免密钥在网络中明文传输）。</p>\n</li>\n<li><p><strong>对称加密</strong>：用于<strong>连接建立后的实际数据传输</strong>。<br>  因为非对称加密计算量大，不适合大量数据传输，所以 SSH 会在握手阶段通过非对称加密协商出一个临时的对称密钥，后续所有数据都用这个对称密钥加密，兼顾安全性和效率。</p>\n</li>\n</ul>\n</li>\n<li><p><strong>对称加密与非对称加密的核心区别</strong></p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th><strong>对比维度</strong></th>\n<th><strong>对称加密</strong></th>\n<th><strong>非对称加密</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>密钥数量与使用</strong></td>\n<td>只有<strong>1 个密钥</strong>（对称密钥），加密和解密都用它</td>\n<td>有<strong>2 个密钥</strong>（公钥 + 私钥），公钥加密、私钥解密（或反之）</td>\n</tr>\n<tr>\n<td><strong>密钥特性</strong></td>\n<td>密钥必须<strong>严格保密</strong>，且双方需提前共享</td>\n<td>公钥可<strong>公开传播</strong>，私钥必须保密</td>\n</tr>\n<tr>\n<td><strong>加密解密效率</strong></td>\n<td>速度极快（适合大量数据）</td>\n<td>速度较慢（适合小数据）</td>\n</tr>\n<tr>\n<td><strong>典型算法</strong></td>\n<td>AES、DES、RC4</td>\n<td>RSA、ECDH、DSA</td>\n</tr>\n<tr>\n<td><strong>核心场景</strong></td>\n<td>实际数据传输（如文件、会话内容）</td>\n<td>密钥交换、身份认证（如 SSH 公钥验证）</td>\n</tr>\n</tbody></table>\n<ol start=\"3\">\n<li><strong>混淆 “公钥” 和 “对称加密”？—— 对称加密中没有 “公钥” 概念，公钥是 “非对称加密” 的核心要素</strong><ul>\n<li><strong>公钥</strong>属于非对称加密体系，用于<strong>安全传递对称密钥</strong>；</li>\n<li>对称加密用的是单独的<strong>对称密钥</strong>，用于<strong>高效传输实际数据</strong>。</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"公钥私钥谁持有？\"><a href=\"#公钥私钥谁持有？\" class=\"headerlink\" title=\"公钥私钥谁持有？\"></a>公钥私钥谁持有？</h4><ul>\n<li>服务器有自己的公钥（给客户端用）和私钥（自己留着）；</li>\n<li>客户端（若用密钥登录）也有自己的公钥（给服务器用）和私钥（自己留着）。<br>双方通过交换公钥，用对方的公钥加密信息，再用自己的私钥解密，完成安全交互。</li>\n</ul>\n<h3 id=\"二、中间人攻击\"><a href=\"#二、中间人攻击\" class=\"headerlink\" title=\"二、中间人攻击\"></a><strong>二、中间人攻击</strong></h3><p>SSH（Secure Shell）的中间人攻击（Man-in-the-Middle Attack，简称 MITM）是一种针对 SSH 加密通信的网络攻击手段，攻击者通过秘密介入客户端与服务器之间的通信，伪装成 “中间人” 窃取或篡改数据，同时让双方误以为正在直接通信。以下是详细解释：</p>\n<ol>\n<li><p><strong>原理</strong></p>\n<ol>\n<li><strong>拦截连接</strong>：攻击者通过网络劫持（如 ARP 欺骗、DNS 劫持等），让客户端的连接请求发送        到自己的设备，而非目标服务器。</li>\n<li><strong>双重伪装</strong>：<ul>\n<li>攻击者向客户端发送<strong>自己的公钥</strong>（伪装成服务器的公钥）。</li>\n<li>同时，攻击者以客户端的身份连接目标服务器，获取服务器的真实公钥。</li>\n</ul>\n</li>\n<li><strong>数据转发与窃听</strong>：<ul>\n<li>客户端用攻击者的公钥加密数据后发送，攻击者解密并获取原始数据。</li>\n<li>攻击者再用服务器的真实公钥加密数据，转发给服务器；反之亦然。</li>\n</ul>\n</li>\n<li><strong>隐藏痕迹</strong>：客户端和服务器均无法察觉中间人的存在，误以为在直接通信。</li>\n</ol>\n</li>\n<li><p><strong>攻击成功的关键条件</strong></p>\n<p> 中间人攻击能得逞，核心在于<strong>绕过 SSH 的公钥验证机制，采用密码认证</strong>：<br> - <strong>首次连接</strong>：用户对服务器公钥的指纹（如<code>SHA256:xxxx</code>）缺乏认知，可能直接点击 “确认”（忽略安全提示），导致接受攻击者伪造的公钥。<br> - <strong>非首次连接</strong>：攻击者通过技术手段（如修改客户端本地缓存的公钥记录），让客户端误以为服务器公钥未发生变化，从而跳过验证。</p>\n</li>\n<li><p><strong>如何防范中间人攻击 —— 严格验证服务器公钥的合法性，并采用更安全的认证方式（如密钥认证）</strong> </p>\n<ol>\n<li><p><strong>严格验证公钥指纹</strong>：</p>\n<ul>\n<li>首次连接服务器时，务必通过<strong>可信渠道</strong>（如线下、加密邮件）获取服务器公钥的指纹，与客户端显示的指纹比对，确认一致后再确认。</li>\n<li>非首次连接时，若客户端提示 “公钥已更改”（可能是攻击或服务器真的更换了公钥），需暂停连接并排查原因。</li>\n</ul>\n</li>\n<li><p><strong>使用密钥认证替代密码认证</strong>：</p>\n<ul>\n<li>SSH 密钥认证（公钥 - 私钥对）比密码认证更安全，即使中间人截获数据，也无法获取私钥（私钥仅存储在客户端）。</li>\n</ul>\n</li>\n<li><p><strong>限制 SSH 访问范围</strong>：</p>\n<ul>\n<li>通过防火墙或 SSH 配置（如<code>sshd_config</code>）限制允许连接的 IP 地址，减少被攻击的暴露面。</li>\n</ul>\n</li>\n<li><p><strong>使用额外安全机制</strong>：</p>\n<ul>\n<li>启用 SSH 的<strong>主机密钥验证</strong>（<code>StrictHostKeyChecking yes</code>），拒绝连接未知或公钥变化的服务器。</li>\n<li>结合 VPN 或专用网络，减少中间人劫持的可能性。</li>\n</ul>\n</li>\n</ol>\n</li>\n</ol>\n"},{"title":"Debug 目录","date":"2025-06-13T16:00:00.000Z","categories":["Debug"],"_content":"- [博客流程](博客流程)\n- [使用 Docker 自托管 Obsidian 并通过网页浏览器访问](使用Docker自托管Obsidian并通过网页浏览器访问)","source":"Debug/index.md","raw":"---\ntitle: Debug 目录\ndate: 2025-06-14\ncategories:\n  - Debug\n---\n- [博客流程](博客流程)\n- [使用 Docker 自托管 Obsidian 并通过网页浏览器访问](使用Docker自托管Obsidian并通过网页浏览器访问)","updated":"2025-07-24T09:04:09.369Z","path":"Debug/index.html","comments":1,"layout":"page","_id":"cmdh6nnwh000f9gv3914f8die","content":"<ul>\n<li><a href=\"%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B\">博客流程</a></li>\n<li><a href=\"%E4%BD%BF%E7%94%A8Docker%E8%87%AA%E6%89%98%E7%AE%A1Obsidian%E5%B9%B6%E9%80%9A%E8%BF%87%E7%BD%91%E9%A1%B5%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE\">使用 Docker 自托管 Obsidian 并通过网页浏览器访问</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B\">博客流程</a></li>\n<li><a href=\"%E4%BD%BF%E7%94%A8Docker%E8%87%AA%E6%89%98%E7%AE%A1Obsidian%E5%B9%B6%E9%80%9A%E8%BF%87%E7%BD%91%E9%A1%B5%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE\">使用 Docker 自托管 Obsidian 并通过网页浏览器访问</a></li>\n</ul>\n"},{"title":"链表代码实现","date":"2027-07-17T16:00:00.000Z","cssclasses":["数据结构","链表"],"_content":"## 关键点一、同时持有头尾节点的引用\n\n在力扣做题时，一般题目给我们传入的就是单链表的头指针。但是在实际开发中，用的都是双链表，而双链表一般会同时持有头尾节点的引用。\n\n因为在软件开发中，在容器尾部添加元素是个非常高频的操作，双链表持有尾部节点的引用，就可以在 O(1)的时间复杂度内完成尾部添加元素的操作。\n\n对于单链表来说，持有尾部节点的引用也有优化效果。比如你要在单链表尾部添加元素，如果没有尾部节点的引用，你就需要遍历整个链表找到尾部节点，时间复杂度是 O(n)；如果有尾部节点的引用，就可以在 O(1 的时间复杂度内完成尾部添加元素的操作。\n\n细心的读者可能会说，即便如此，如果删除一次单链表的尾结点，那么之前尾结点的引用就失效了，还是需要遍历一遍链表找到尾结点。\n\n是的，但你再仔细想想，删除单链表尾结点的时候，是不是也得遍历到倒数第二个节点（尾结点的前驱），才能通过指针操作把尾结点删掉？那么这个时候，你不就可以顺便把尾结点的引用给更新了吗？\n\n## 关键点二、虚拟头尾节点\n\n在创建双链表时就创建一个虚拟头节点和一个虚拟尾节点，无论双链表是否为空，这两个节点都存在。这样就不会出现空指针的问题，可以避免很多边界情况的处理。\n\n有了头尾虚拟节点，无论链表是否为空，都只需要考虑在中间插入元素的情况就可以了，这样代码会简洁很多。\n\n对于单链表，虚拟头结点有一定的简化作用，但虚拟尾节点没有太大作用。\n\n>虚拟节点是你内部实现数据结构的技巧，对外是不可见的。\n\n## 关键点三、内存泄露？\n\n在前文动态数组实现中，提到了删除元素时，要注意内存泄露的问题。那么在链表中，删除元素会不会也有内存泄露的问题呢？\n```java\n// 删除单链表头结点 head = head.next;\nhead = head.next;\n```\n实际上这样写是 OK 的，因为 Java 的垃圾回收的判断机制是看这个对象是否被别人引用，而并不会 care 这个对象是否还引用着别人。\n\n不过呢，删除节点时，最好还是把被删除节点的指针都置为 null，这是个好习惯，不会有什么代价，还可能避免一些潜在的问题。\n\n## 双链表代码实现\n\n参考力扣第 707 题「[设计链表](https://leetcode.cn/problems/design-linked-list/)」\n```java\nclass MyLinkedList {\n\n    Node head, tail;\n    int size;\n    class Node {\n        Node next, prev;\n        int val;\n        Node(int val) {\n            this.val = val;\n        }\n    }\n    public MyLinkedList() {\n        this.head = new Node(-1);\n        this.tail = new Node(-1);\n        this.size = 0;\n        this.tail.prev = this.head;\n        this.head.next = this.tail;\n    }\n    \n    public int get(int index) {\n        if (!checkGetHasNode(index)) {\n            return -1;\n        } else {\n            Node cur;\n            cur = findFrontIndexNode(index);\n            return cur.next.val;\n        }\n    }\n    \n    public void addAtHead(int val) {\n        Node newNode = new Node(val);\n        Node hasNext = this.head.next;\n        this.head.next = newNode;\n        newNode.next = hasNext;\n        hasNext.prev = newNode;\n        newNode.prev = this.head;\n        this.size++;\n    }\n    \n    public void addAtTail(int val) {\n        Node newNode = new Node(val);\n        Node hasTail = this.tail.prev;\n        hasTail.next = newNode;\n        newNode.next = this.tail;\n        this.tail.prev = newNode;\n        newNode.prev = hasTail;\n        this.size++;\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if (!checkAddHasNode(index)) {\n\n        } else if (index == this.size) {\n            addAtTail(val);\n        } else {\n            Node cur;\n            cur = findFrontIndexNode(index);\n            Node hasNext = cur.next;\n            Node newNode = new Node(val);\n            cur.next = newNode;\n            newNode.next = hasNext;\n            hasNext.prev = newNode;\n            newNode.prev = cur;\n            this.size++;\n        }\n    }\n    \n    public void deleteAtIndex(int index) {\n        if (checkGetHasNode(index)) {\n            Node cur = findFrontIndexNode(index);\n            Node hasNext = cur.next.next;\n            cur.next = hasNext;\n            hasNext.prev = cur;\n            this.size--;\n        }\n    }\n\n    public Node findFrontIndexNode(int index) {\n        if (!checkGetHasNode(index)) {\n            return null;\n        } else {\n            Node cur = this.head;\n            for (int i = 0; i < index; i++) {\n                cur = cur.next;\n            }\n            return cur;\n        }\n    }\n\n    public boolean checkAddHasNode(int index) {\n        return index <= this.size;\n    }\n\n    public boolean checkGetHasNode(int index) {\n        return index < this.size;\n    }\n}\n```\n\n## 单链表代码实现\n\n```java\nclass MyLinkedList {\n\n    Node head,tail;\n    int size;\n    class Node {\n        int val;\n        Node next;\n        Node(int val) {\n            this.val = val;\n            this.next = null;\n        }\n    }\n    public MyLinkedList() {\n        this.head = new Node(-1); //虚拟头节点\n        this.tail = this.head; //实际尾节点\n        this.size = 0;\n    }\n    \n    public int get(int index) {\n        if (!checkGetIndex(index)) {\n            return -1;\n        } else {\n            Node cur = findFountIndex(index);\n            return cur.next.val;\n        }\n    }\n    \n    public void addAtHead(int val) {\n        //当链表为空时（size == 0），添加头节点后尾指针 tail 未更新\n        Node newNode = new Node(val);\n        Node hasnext = this.head.next;\n        this.head.next = newNode;\n        newNode.next = hasnext;\n        if (this.size == 0){\n            this.tail = newNode;\n        }\n        this.size++;\n        \n    }\n    \n    public void addAtTail(int val) {  \n        //添加元素后，旧的尾节点仍留在列表中，破坏了预期的结构。\n        Node newNode = new Node(val);\n        this.tail.next = newNode;\n        this.tail = newNode;\n        this.size++;\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if (!checkAddIndex(index)) {\n        \n        } else if (index == this.size) {\n            addAtTail(val);\n        } else {\n            Node cur = findFountIndex(index);\n            Node newNode = new Node(val);\n            Node hasnext = cur.next;\n            cur.next = newNode;\n            newNode.next = hasnext;\n            this.size++;\n        }\n    }\n    \n    public void deleteAtIndex(int index) {\n        if ( index == this.size - 1 ) {\n            Node cur = findFountIndex(index);\n            this.tail = cur;\n            this.size--;\n            } else if (checkGetIndex(index)) {\n                Node cur = findFountIndex(index);\n                cur.next = cur.next.next;\n                this.size--;\n        }\n    }\n\n    public Node findFountIndex(int index) {\n        //if (checkGetIndex(index)) {\n        Node cur = this.head;\n        for (int i = 0; i < index; i++ ) {\n            cur = cur.next;\n        }\n        return cur;\n        \n        //return null;\n        /**当 checkGetIndex(index) 为 false 时返回 null，但调用它的方法（如 get、addAtIndex 等 ），未充分校验返回值是否为 null，直接用 cur.next 就会触发 NullPointerException。*/\n    }\n\n    public boolean checkGetIndex(int index) {\n        return index < this.size;\n    }\n\n    public boolean checkAddIndex(int index) {\n        return index <= this.size;\n    }\n}\n```","source":"数据结构/链表代码实现.md","raw":"---\ntitle: 链表代码实现\ndate: 2027-07-18\ncssclasses:\n  - 数据结构\n  - 链表\n---\n## 关键点一、同时持有头尾节点的引用\n\n在力扣做题时，一般题目给我们传入的就是单链表的头指针。但是在实际开发中，用的都是双链表，而双链表一般会同时持有头尾节点的引用。\n\n因为在软件开发中，在容器尾部添加元素是个非常高频的操作，双链表持有尾部节点的引用，就可以在 O(1)的时间复杂度内完成尾部添加元素的操作。\n\n对于单链表来说，持有尾部节点的引用也有优化效果。比如你要在单链表尾部添加元素，如果没有尾部节点的引用，你就需要遍历整个链表找到尾部节点，时间复杂度是 O(n)；如果有尾部节点的引用，就可以在 O(1 的时间复杂度内完成尾部添加元素的操作。\n\n细心的读者可能会说，即便如此，如果删除一次单链表的尾结点，那么之前尾结点的引用就失效了，还是需要遍历一遍链表找到尾结点。\n\n是的，但你再仔细想想，删除单链表尾结点的时候，是不是也得遍历到倒数第二个节点（尾结点的前驱），才能通过指针操作把尾结点删掉？那么这个时候，你不就可以顺便把尾结点的引用给更新了吗？\n\n## 关键点二、虚拟头尾节点\n\n在创建双链表时就创建一个虚拟头节点和一个虚拟尾节点，无论双链表是否为空，这两个节点都存在。这样就不会出现空指针的问题，可以避免很多边界情况的处理。\n\n有了头尾虚拟节点，无论链表是否为空，都只需要考虑在中间插入元素的情况就可以了，这样代码会简洁很多。\n\n对于单链表，虚拟头结点有一定的简化作用，但虚拟尾节点没有太大作用。\n\n>虚拟节点是你内部实现数据结构的技巧，对外是不可见的。\n\n## 关键点三、内存泄露？\n\n在前文动态数组实现中，提到了删除元素时，要注意内存泄露的问题。那么在链表中，删除元素会不会也有内存泄露的问题呢？\n```java\n// 删除单链表头结点 head = head.next;\nhead = head.next;\n```\n实际上这样写是 OK 的，因为 Java 的垃圾回收的判断机制是看这个对象是否被别人引用，而并不会 care 这个对象是否还引用着别人。\n\n不过呢，删除节点时，最好还是把被删除节点的指针都置为 null，这是个好习惯，不会有什么代价，还可能避免一些潜在的问题。\n\n## 双链表代码实现\n\n参考力扣第 707 题「[设计链表](https://leetcode.cn/problems/design-linked-list/)」\n```java\nclass MyLinkedList {\n\n    Node head, tail;\n    int size;\n    class Node {\n        Node next, prev;\n        int val;\n        Node(int val) {\n            this.val = val;\n        }\n    }\n    public MyLinkedList() {\n        this.head = new Node(-1);\n        this.tail = new Node(-1);\n        this.size = 0;\n        this.tail.prev = this.head;\n        this.head.next = this.tail;\n    }\n    \n    public int get(int index) {\n        if (!checkGetHasNode(index)) {\n            return -1;\n        } else {\n            Node cur;\n            cur = findFrontIndexNode(index);\n            return cur.next.val;\n        }\n    }\n    \n    public void addAtHead(int val) {\n        Node newNode = new Node(val);\n        Node hasNext = this.head.next;\n        this.head.next = newNode;\n        newNode.next = hasNext;\n        hasNext.prev = newNode;\n        newNode.prev = this.head;\n        this.size++;\n    }\n    \n    public void addAtTail(int val) {\n        Node newNode = new Node(val);\n        Node hasTail = this.tail.prev;\n        hasTail.next = newNode;\n        newNode.next = this.tail;\n        this.tail.prev = newNode;\n        newNode.prev = hasTail;\n        this.size++;\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if (!checkAddHasNode(index)) {\n\n        } else if (index == this.size) {\n            addAtTail(val);\n        } else {\n            Node cur;\n            cur = findFrontIndexNode(index);\n            Node hasNext = cur.next;\n            Node newNode = new Node(val);\n            cur.next = newNode;\n            newNode.next = hasNext;\n            hasNext.prev = newNode;\n            newNode.prev = cur;\n            this.size++;\n        }\n    }\n    \n    public void deleteAtIndex(int index) {\n        if (checkGetHasNode(index)) {\n            Node cur = findFrontIndexNode(index);\n            Node hasNext = cur.next.next;\n            cur.next = hasNext;\n            hasNext.prev = cur;\n            this.size--;\n        }\n    }\n\n    public Node findFrontIndexNode(int index) {\n        if (!checkGetHasNode(index)) {\n            return null;\n        } else {\n            Node cur = this.head;\n            for (int i = 0; i < index; i++) {\n                cur = cur.next;\n            }\n            return cur;\n        }\n    }\n\n    public boolean checkAddHasNode(int index) {\n        return index <= this.size;\n    }\n\n    public boolean checkGetHasNode(int index) {\n        return index < this.size;\n    }\n}\n```\n\n## 单链表代码实现\n\n```java\nclass MyLinkedList {\n\n    Node head,tail;\n    int size;\n    class Node {\n        int val;\n        Node next;\n        Node(int val) {\n            this.val = val;\n            this.next = null;\n        }\n    }\n    public MyLinkedList() {\n        this.head = new Node(-1); //虚拟头节点\n        this.tail = this.head; //实际尾节点\n        this.size = 0;\n    }\n    \n    public int get(int index) {\n        if (!checkGetIndex(index)) {\n            return -1;\n        } else {\n            Node cur = findFountIndex(index);\n            return cur.next.val;\n        }\n    }\n    \n    public void addAtHead(int val) {\n        //当链表为空时（size == 0），添加头节点后尾指针 tail 未更新\n        Node newNode = new Node(val);\n        Node hasnext = this.head.next;\n        this.head.next = newNode;\n        newNode.next = hasnext;\n        if (this.size == 0){\n            this.tail = newNode;\n        }\n        this.size++;\n        \n    }\n    \n    public void addAtTail(int val) {  \n        //添加元素后，旧的尾节点仍留在列表中，破坏了预期的结构。\n        Node newNode = new Node(val);\n        this.tail.next = newNode;\n        this.tail = newNode;\n        this.size++;\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if (!checkAddIndex(index)) {\n        \n        } else if (index == this.size) {\n            addAtTail(val);\n        } else {\n            Node cur = findFountIndex(index);\n            Node newNode = new Node(val);\n            Node hasnext = cur.next;\n            cur.next = newNode;\n            newNode.next = hasnext;\n            this.size++;\n        }\n    }\n    \n    public void deleteAtIndex(int index) {\n        if ( index == this.size - 1 ) {\n            Node cur = findFountIndex(index);\n            this.tail = cur;\n            this.size--;\n            } else if (checkGetIndex(index)) {\n                Node cur = findFountIndex(index);\n                cur.next = cur.next.next;\n                this.size--;\n        }\n    }\n\n    public Node findFountIndex(int index) {\n        //if (checkGetIndex(index)) {\n        Node cur = this.head;\n        for (int i = 0; i < index; i++ ) {\n            cur = cur.next;\n        }\n        return cur;\n        \n        //return null;\n        /**当 checkGetIndex(index) 为 false 时返回 null，但调用它的方法（如 get、addAtIndex 等 ），未充分校验返回值是否为 null，直接用 cur.next 就会触发 NullPointerException。*/\n    }\n\n    public boolean checkGetIndex(int index) {\n        return index < this.size;\n    }\n\n    public boolean checkAddIndex(int index) {\n        return index <= this.size;\n    }\n}\n```","updated":"2025-07-19T10:44:40.836Z","path":"数据结构/链表代码实现.html","comments":1,"layout":"page","_id":"cmdh6nnwh000g9gv3epxpe0mk","content":"<h2 id=\"关键点一、同时持有头尾节点的引用\"><a href=\"#关键点一、同时持有头尾节点的引用\" class=\"headerlink\" title=\"关键点一、同时持有头尾节点的引用\"></a>关键点一、同时持有头尾节点的引用</h2><p>在力扣做题时，一般题目给我们传入的就是单链表的头指针。但是在实际开发中，用的都是双链表，而双链表一般会同时持有头尾节点的引用。</p>\n<p>因为在软件开发中，在容器尾部添加元素是个非常高频的操作，双链表持有尾部节点的引用，就可以在 O(1)的时间复杂度内完成尾部添加元素的操作。</p>\n<p>对于单链表来说，持有尾部节点的引用也有优化效果。比如你要在单链表尾部添加元素，如果没有尾部节点的引用，你就需要遍历整个链表找到尾部节点，时间复杂度是 O(n)；如果有尾部节点的引用，就可以在 O(1 的时间复杂度内完成尾部添加元素的操作。</p>\n<p>细心的读者可能会说，即便如此，如果删除一次单链表的尾结点，那么之前尾结点的引用就失效了，还是需要遍历一遍链表找到尾结点。</p>\n<p>是的，但你再仔细想想，删除单链表尾结点的时候，是不是也得遍历到倒数第二个节点（尾结点的前驱），才能通过指针操作把尾结点删掉？那么这个时候，你不就可以顺便把尾结点的引用给更新了吗？</p>\n<h2 id=\"关键点二、虚拟头尾节点\"><a href=\"#关键点二、虚拟头尾节点\" class=\"headerlink\" title=\"关键点二、虚拟头尾节点\"></a>关键点二、虚拟头尾节点</h2><p>在创建双链表时就创建一个虚拟头节点和一个虚拟尾节点，无论双链表是否为空，这两个节点都存在。这样就不会出现空指针的问题，可以避免很多边界情况的处理。</p>\n<p>有了头尾虚拟节点，无论链表是否为空，都只需要考虑在中间插入元素的情况就可以了，这样代码会简洁很多。</p>\n<p>对于单链表，虚拟头结点有一定的简化作用，但虚拟尾节点没有太大作用。</p>\n<blockquote>\n<p>虚拟节点是你内部实现数据结构的技巧，对外是不可见的。</p>\n</blockquote>\n<h2 id=\"关键点三、内存泄露？\"><a href=\"#关键点三、内存泄露？\" class=\"headerlink\" title=\"关键点三、内存泄露？\"></a>关键点三、内存泄露？</h2><p>在前文动态数组实现中，提到了删除元素时，要注意内存泄露的问题。那么在链表中，删除元素会不会也有内存泄露的问题呢？</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 删除单链表头结点 head = head.next;</span></span><br><span class=\"line\">head = head.next;</span><br></pre></td></tr></table></figure>\n<p>实际上这样写是 OK 的，因为 Java 的垃圾回收的判断机制是看这个对象是否被别人引用，而并不会 care 这个对象是否还引用着别人。</p>\n<p>不过呢，删除节点时，最好还是把被删除节点的指针都置为 null，这是个好习惯，不会有什么代价，还可能避免一些潜在的问题。</p>\n<h2 id=\"双链表代码实现\"><a href=\"#双链表代码实现\" class=\"headerlink\" title=\"双链表代码实现\"></a>双链表代码实现</h2><p>参考力扣第 707 题「<a href=\"https://leetcode.cn/problems/design-linked-list/\">设计链表</a>」</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLinkedList</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node head, tail;</span><br><span class=\"line\">    <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">        Node next, prev;</span><br><span class=\"line\">        <span class=\"type\">int</span> val;</span><br><span class=\"line\">        Node(<span class=\"type\">int</span> val) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.val = val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLinkedList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.prev = <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = <span class=\"built_in\">this</span>.tail;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Node cur;</span><br><span class=\"line\">            cur = findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur.next.val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtHead</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head.next;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = newNode;</span><br><span class=\"line\">        newNode.next = hasNext;</span><br><span class=\"line\">        hasNext.prev = newNode;</span><br><span class=\"line\">        newNode.prev = <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtTail</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasTail</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.tail.prev;</span><br><span class=\"line\">        hasTail.next = newNode;</span><br><span class=\"line\">        newNode.next = <span class=\"built_in\">this</span>.tail;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.prev = newNode;</span><br><span class=\"line\">        newNode.prev = hasTail;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index, <span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkAddHasNode(index)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index == <span class=\"built_in\">this</span>.size) &#123;</span><br><span class=\"line\">            addAtTail(val);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Node cur;</span><br><span class=\"line\">            cur = findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> cur.next;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">            cur.next = newNode;</span><br><span class=\"line\">            newNode.next = hasNext;</span><br><span class=\"line\">            hasNext.prev = newNode;</span><br><span class=\"line\">            newNode.prev = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> cur.next.next;</span><br><span class=\"line\">            cur.next = hasNext;</span><br><span class=\"line\">            hasNext.prev = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">findFrontIndexNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; index; i++) &#123;</span><br><span class=\"line\">                cur = cur.next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkAddHasNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt;= <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkGetHasNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt; <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"单链表代码实现\"><a href=\"#单链表代码实现\" class=\"headerlink\" title=\"单链表代码实现\"></a>单链表代码实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLinkedList</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node head,tail;</span><br><span class=\"line\">    <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> val;</span><br><span class=\"line\">        Node next;</span><br><span class=\"line\">        Node(<span class=\"type\">int</span> val) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.val = val;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLinkedList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>); <span class=\"comment\">//虚拟头节点</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = <span class=\"built_in\">this</span>.head; <span class=\"comment\">//实际尾节点</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetIndex(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur.next.val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtHead</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//当链表为空时（size == 0），添加头节点后尾指针 tail 未更新</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasnext</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head.next;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = newNode;</span><br><span class=\"line\">        newNode.next = hasnext;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.size == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.tail = newNode;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtTail</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;  </span><br><span class=\"line\">        <span class=\"comment\">//添加元素后，旧的尾节点仍留在列表中，破坏了预期的结构。</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.next = newNode;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = newNode;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index, <span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkAddIndex(index)) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index == <span class=\"built_in\">this</span>.size) &#123;</span><br><span class=\"line\">            addAtTail(val);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasnext</span> <span class=\"operator\">=</span> cur.next;</span><br><span class=\"line\">            cur.next = newNode;</span><br><span class=\"line\">            newNode.next = hasnext;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ( index == <span class=\"built_in\">this</span>.size - <span class=\"number\">1</span> ) &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.tail = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (checkGetIndex(index)) &#123;</span><br><span class=\"line\">                <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">                cur.next = cur.next.next;</span><br><span class=\"line\">                <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">findFountIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//if (checkGetIndex(index)) &#123;</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; index; i++ ) &#123;</span><br><span class=\"line\">            cur = cur.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cur;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//return null;</span></span><br><span class=\"line\">        <span class=\"comment\">/**当 checkGetIndex(index) 为 false 时返回 null，但调用它的方法（如 get、addAtIndex 等 ），未充分校验返回值是否为 null，直接用 cur.next 就会触发 NullPointerException。*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkGetIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt; <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkAddIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt;= <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h2 id=\"关键点一、同时持有头尾节点的引用\"><a href=\"#关键点一、同时持有头尾节点的引用\" class=\"headerlink\" title=\"关键点一、同时持有头尾节点的引用\"></a>关键点一、同时持有头尾节点的引用</h2><p>在力扣做题时，一般题目给我们传入的就是单链表的头指针。但是在实际开发中，用的都是双链表，而双链表一般会同时持有头尾节点的引用。</p>\n<p>因为在软件开发中，在容器尾部添加元素是个非常高频的操作，双链表持有尾部节点的引用，就可以在 O(1)的时间复杂度内完成尾部添加元素的操作。</p>\n<p>对于单链表来说，持有尾部节点的引用也有优化效果。比如你要在单链表尾部添加元素，如果没有尾部节点的引用，你就需要遍历整个链表找到尾部节点，时间复杂度是 O(n)；如果有尾部节点的引用，就可以在 O(1 的时间复杂度内完成尾部添加元素的操作。</p>\n<p>细心的读者可能会说，即便如此，如果删除一次单链表的尾结点，那么之前尾结点的引用就失效了，还是需要遍历一遍链表找到尾结点。</p>\n<p>是的，但你再仔细想想，删除单链表尾结点的时候，是不是也得遍历到倒数第二个节点（尾结点的前驱），才能通过指针操作把尾结点删掉？那么这个时候，你不就可以顺便把尾结点的引用给更新了吗？</p>\n<h2 id=\"关键点二、虚拟头尾节点\"><a href=\"#关键点二、虚拟头尾节点\" class=\"headerlink\" title=\"关键点二、虚拟头尾节点\"></a>关键点二、虚拟头尾节点</h2><p>在创建双链表时就创建一个虚拟头节点和一个虚拟尾节点，无论双链表是否为空，这两个节点都存在。这样就不会出现空指针的问题，可以避免很多边界情况的处理。</p>\n<p>有了头尾虚拟节点，无论链表是否为空，都只需要考虑在中间插入元素的情况就可以了，这样代码会简洁很多。</p>\n<p>对于单链表，虚拟头结点有一定的简化作用，但虚拟尾节点没有太大作用。</p>\n<blockquote>\n<p>虚拟节点是你内部实现数据结构的技巧，对外是不可见的。</p>\n</blockquote>\n<h2 id=\"关键点三、内存泄露？\"><a href=\"#关键点三、内存泄露？\" class=\"headerlink\" title=\"关键点三、内存泄露？\"></a>关键点三、内存泄露？</h2><p>在前文动态数组实现中，提到了删除元素时，要注意内存泄露的问题。那么在链表中，删除元素会不会也有内存泄露的问题呢？</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 删除单链表头结点 head = head.next;</span></span><br><span class=\"line\">head = head.next;</span><br></pre></td></tr></table></figure>\n<p>实际上这样写是 OK 的，因为 Java 的垃圾回收的判断机制是看这个对象是否被别人引用，而并不会 care 这个对象是否还引用着别人。</p>\n<p>不过呢，删除节点时，最好还是把被删除节点的指针都置为 null，这是个好习惯，不会有什么代价，还可能避免一些潜在的问题。</p>\n<h2 id=\"双链表代码实现\"><a href=\"#双链表代码实现\" class=\"headerlink\" title=\"双链表代码实现\"></a>双链表代码实现</h2><p>参考力扣第 707 题「<a href=\"https://leetcode.cn/problems/design-linked-list/\">设计链表</a>」</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLinkedList</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node head, tail;</span><br><span class=\"line\">    <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">        Node next, prev;</span><br><span class=\"line\">        <span class=\"type\">int</span> val;</span><br><span class=\"line\">        Node(<span class=\"type\">int</span> val) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.val = val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLinkedList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.prev = <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = <span class=\"built_in\">this</span>.tail;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Node cur;</span><br><span class=\"line\">            cur = findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur.next.val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtHead</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head.next;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = newNode;</span><br><span class=\"line\">        newNode.next = hasNext;</span><br><span class=\"line\">        hasNext.prev = newNode;</span><br><span class=\"line\">        newNode.prev = <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtTail</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasTail</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.tail.prev;</span><br><span class=\"line\">        hasTail.next = newNode;</span><br><span class=\"line\">        newNode.next = <span class=\"built_in\">this</span>.tail;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.prev = newNode;</span><br><span class=\"line\">        newNode.prev = hasTail;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index, <span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkAddHasNode(index)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index == <span class=\"built_in\">this</span>.size) &#123;</span><br><span class=\"line\">            addAtTail(val);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            Node cur;</span><br><span class=\"line\">            cur = findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> cur.next;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">            cur.next = newNode;</span><br><span class=\"line\">            newNode.next = hasNext;</span><br><span class=\"line\">            hasNext.prev = newNode;</span><br><span class=\"line\">            newNode.prev = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFrontIndexNode(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasNext</span> <span class=\"operator\">=</span> cur.next.next;</span><br><span class=\"line\">            cur.next = hasNext;</span><br><span class=\"line\">            hasNext.prev = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">findFrontIndexNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetHasNode(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; index; i++) &#123;</span><br><span class=\"line\">                cur = cur.next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkAddHasNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt;= <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkGetHasNode</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt; <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"单链表代码实现\"><a href=\"#单链表代码实现\" class=\"headerlink\" title=\"单链表代码实现\"></a>单链表代码实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLinkedList</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    Node head,tail;</span><br><span class=\"line\">    <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> val;</span><br><span class=\"line\">        Node next;</span><br><span class=\"line\">        Node(<span class=\"type\">int</span> val) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.val = val;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLinkedList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(-<span class=\"number\">1</span>); <span class=\"comment\">//虚拟头节点</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = <span class=\"built_in\">this</span>.head; <span class=\"comment\">//实际尾节点</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkGetIndex(index)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> cur.next.val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtHead</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//当链表为空时（size == 0），添加头节点后尾指针 tail 未更新</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">hasnext</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head.next;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.head.next = newNode;</span><br><span class=\"line\">        newNode.next = hasnext;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.size == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.tail = newNode;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtTail</span><span class=\"params\">(<span class=\"type\">int</span> val)</span> &#123;  </span><br><span class=\"line\">        <span class=\"comment\">//添加元素后，旧的尾节点仍留在列表中，破坏了预期的结构。</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail.next = newNode;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tail = newNode;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index, <span class=\"type\">int</span> val)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!checkAddIndex(index)) &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index == <span class=\"built_in\">this</span>.size) &#123;</span><br><span class=\"line\">            addAtTail(val);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(val);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">hasnext</span> <span class=\"operator\">=</span> cur.next;</span><br><span class=\"line\">            cur.next = newNode;</span><br><span class=\"line\">            newNode.next = hasnext;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteAtIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ( index == <span class=\"built_in\">this</span>.size - <span class=\"number\">1</span> ) &#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.tail = cur;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (checkGetIndex(index)) &#123;</span><br><span class=\"line\">                <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> findFountIndex(index);</span><br><span class=\"line\">                cur.next = cur.next.next;</span><br><span class=\"line\">                <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">findFountIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//if (checkGetIndex(index)) &#123;</span></span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.head;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; index; i++ ) &#123;</span><br><span class=\"line\">            cur = cur.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cur;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//return null;</span></span><br><span class=\"line\">        <span class=\"comment\">/**当 checkGetIndex(index) 为 false 时返回 null，但调用它的方法（如 get、addAtIndex 等 ），未充分校验返回值是否为 null，直接用 cur.next 就会触发 NullPointerException。*/</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkGetIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt; <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">checkAddIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &lt;= <span class=\"built_in\">this</span>.size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"使用Docker自托管Obsidian并通过网页浏览器访问","date":"2025-07-03T16:00:00.000Z","cssclasses":["Debug","docker"],"_content":"很有意思的事，在我烦恼obsidian无法在其他任何公共电脑上随时访问的时候。过了几天，在我电子邮箱里发现了这个推文[《 Self-host Obsidian using Docker and Access it Via Web Browser》](https://linuxhandbook.com/obsidian-docker-self-host/)，简直是瞌睡送枕头。\n\n---\n\n>Obsidian 是一个笔记软件，基于纯文本 Markdown 文件构建，提供本地优先的知识管理，具有强大的图形视图、反向链接和繁荣的插件生态系统。\n\n我们将实现：\n一个自托管Obsidian的Docker容器，运行在我的家庭服务器中，可通过浏览器访问，无需桌面客户端，也无需移动应用程序，无论我身在何处，都只需这一个自托管解决方案。\n\n前提条件：\n* 一个安装了 Docker 和 Docker Compose 的 Linux 系统。\n* 对终端命令有基本的了解\n* 熟悉编辑 YAML 文件。\n\n## 设置 Obsidian\n\n### 1. 为 Obsidian 创建数据目录\n\n```bash\nmkdir -p ~/docker/obsidian\ncd ~/docker/obsidian\n```\n创建一个独立目录方便管理\n![Pasted20image20250724162824](/images/Pastedimage20250724162824.png)\n\n### 2. 创建 `docker-compose.yml` 文件\n\n设置一个 Docker Compose 文件，这个文件会告诉 Docker 如何运行 Obsidian，使用哪个镜像，打开哪些端口以及其他重要信息。\n\n创建一个名为 `docker-compose.yml` 的文件：\n```bash\nvim docker-compose.yml\n```\n将以下内容复制到一个新文件中：\n```bash\nversion: \"3.8\"\nservices:\n  obsidian:\n    image: ghcr.io/linuxserver/obsidian:latest\n    container_name: obsidian\n    security_opt:\n      - no-new-privileges:false\n      - seccomp:unconfined\n    healthcheck:\n      test: timeout 10s bash -c ':> /dev/tcp/127.0.0.1/3000' || exit 1\n      interval: 10s\n      timeout: 5s\n      retries: 3\n      start_period: 90s\n    ports:\n      - \"3000:3000\"\n    shm_size: \"2gb\"\n    volumes:\n      - ./config:/config:rw\n    environment:\n      CUSTOM_USER: yourusername\n      PASSWORD: yourpassword\n      PUID: 1000\n      PGID: 1000\n      TZ: Asia/Shanghai\n    restart: unless-stopped\n\n```\n\n分析一下其中的几个重要部分：\n* `image` : 我们正在使用 LinuxServer.io 提供的最新 Obsidian 镜像。\n* `volumes` : 将当前目录中的 `config` 文件夹映射到 Obsidian 的内部配置目录，所有你的 Obsidian 数据和设置都将存储在这里。\n* `ports` : 该应用将在您机器的 3000 端口上运行。如果您希望使用其他端口，可以更改此设置。\n* `shm_size` : 分配共享内存；对于具有 UI 的应用（如 Obsidian）很有用。\n* `environment` : 这里用于设置您的用户、密码、时区和文件所有权。\n\n需要注意有几行需要自行修改的内容：\n```bash\n    environment:\n      CUSTOM_USER: yourusername\n      PASSWORD: yourpassword\n      PUID: 1000\n      PGID: 1000\n      TZ: Asia/Shanghai\n```\n* `yourusername` : 你将用来登录 Obsidian 的用户名。\n* `yourpassword` : 选择一个强密码。\n* `TZ` : 使用你本地的时区。（示例： Asia/Shanghai ）\n* `PUID` 和 `PGID` ：这些应该与主机系统上用户的 UID 和 GID 匹配。要查找它们，请运行\n```bash\nid yourusername\n```\n\n### 3. 部署容器\n\n一旦 `docker-compose.yml` 文件准备就绪且值已自定义，即可开始启动容器：\n```bash\ndocker-compose up -d\n```\n这个命令告诉 Docker：\n* 拉取 Obsidian 镜像（如果尚未下载）\n* 使用我们定义的设置创建容器\n* 以分离模式运行（ `-d` ），以便它在后台继续运行\n\n![Pasted20image20250724161028](/images/Pastedimage20250724161028.png)\n\n### 在浏览器中访问 Obsidian\n\n完成后，你应该能够在浏览器中打开 Obsidian：\n```bash\nhttp://localhost:3000\n```\n如果你不是在本地运行，请将 `localhost` 替换为你的服务器 IP。\n\n![Pasted20image20250724161308](/images/Pastedimage20250724161308.png)\n\n进入后，它看起来是这样的：\n\n![Pastedimage20250724161951](/images/Pastedimage20250724161951.png)","source":"Debug/使用Docker自托管Obsidian并通过网页浏览器访问.md","raw":"---\ntitle: 使用Docker自托管Obsidian并通过网页浏览器访问\ndate: 2025-07-04\ncssclasses:\n  - Debug\n  - docker\n---\n很有意思的事，在我烦恼obsidian无法在其他任何公共电脑上随时访问的时候。过了几天，在我电子邮箱里发现了这个推文[《 Self-host Obsidian using Docker and Access it Via Web Browser》](https://linuxhandbook.com/obsidian-docker-self-host/)，简直是瞌睡送枕头。\n\n---\n\n>Obsidian 是一个笔记软件，基于纯文本 Markdown 文件构建，提供本地优先的知识管理，具有强大的图形视图、反向链接和繁荣的插件生态系统。\n\n我们将实现：\n一个自托管Obsidian的Docker容器，运行在我的家庭服务器中，可通过浏览器访问，无需桌面客户端，也无需移动应用程序，无论我身在何处，都只需这一个自托管解决方案。\n\n前提条件：\n* 一个安装了 Docker 和 Docker Compose 的 Linux 系统。\n* 对终端命令有基本的了解\n* 熟悉编辑 YAML 文件。\n\n## 设置 Obsidian\n\n### 1. 为 Obsidian 创建数据目录\n\n```bash\nmkdir -p ~/docker/obsidian\ncd ~/docker/obsidian\n```\n创建一个独立目录方便管理\n![Pasted20image20250724162824](/images/Pastedimage20250724162824.png)\n\n### 2. 创建 `docker-compose.yml` 文件\n\n设置一个 Docker Compose 文件，这个文件会告诉 Docker 如何运行 Obsidian，使用哪个镜像，打开哪些端口以及其他重要信息。\n\n创建一个名为 `docker-compose.yml` 的文件：\n```bash\nvim docker-compose.yml\n```\n将以下内容复制到一个新文件中：\n```bash\nversion: \"3.8\"\nservices:\n  obsidian:\n    image: ghcr.io/linuxserver/obsidian:latest\n    container_name: obsidian\n    security_opt:\n      - no-new-privileges:false\n      - seccomp:unconfined\n    healthcheck:\n      test: timeout 10s bash -c ':> /dev/tcp/127.0.0.1/3000' || exit 1\n      interval: 10s\n      timeout: 5s\n      retries: 3\n      start_period: 90s\n    ports:\n      - \"3000:3000\"\n    shm_size: \"2gb\"\n    volumes:\n      - ./config:/config:rw\n    environment:\n      CUSTOM_USER: yourusername\n      PASSWORD: yourpassword\n      PUID: 1000\n      PGID: 1000\n      TZ: Asia/Shanghai\n    restart: unless-stopped\n\n```\n\n分析一下其中的几个重要部分：\n* `image` : 我们正在使用 LinuxServer.io 提供的最新 Obsidian 镜像。\n* `volumes` : 将当前目录中的 `config` 文件夹映射到 Obsidian 的内部配置目录，所有你的 Obsidian 数据和设置都将存储在这里。\n* `ports` : 该应用将在您机器的 3000 端口上运行。如果您希望使用其他端口，可以更改此设置。\n* `shm_size` : 分配共享内存；对于具有 UI 的应用（如 Obsidian）很有用。\n* `environment` : 这里用于设置您的用户、密码、时区和文件所有权。\n\n需要注意有几行需要自行修改的内容：\n```bash\n    environment:\n      CUSTOM_USER: yourusername\n      PASSWORD: yourpassword\n      PUID: 1000\n      PGID: 1000\n      TZ: Asia/Shanghai\n```\n* `yourusername` : 你将用来登录 Obsidian 的用户名。\n* `yourpassword` : 选择一个强密码。\n* `TZ` : 使用你本地的时区。（示例： Asia/Shanghai ）\n* `PUID` 和 `PGID` ：这些应该与主机系统上用户的 UID 和 GID 匹配。要查找它们，请运行\n```bash\nid yourusername\n```\n\n### 3. 部署容器\n\n一旦 `docker-compose.yml` 文件准备就绪且值已自定义，即可开始启动容器：\n```bash\ndocker-compose up -d\n```\n这个命令告诉 Docker：\n* 拉取 Obsidian 镜像（如果尚未下载）\n* 使用我们定义的设置创建容器\n* 以分离模式运行（ `-d` ），以便它在后台继续运行\n\n![Pasted20image20250724161028](/images/Pastedimage20250724161028.png)\n\n### 在浏览器中访问 Obsidian\n\n完成后，你应该能够在浏览器中打开 Obsidian：\n```bash\nhttp://localhost:3000\n```\n如果你不是在本地运行，请将 `localhost` 替换为你的服务器 IP。\n\n![Pasted20image20250724161308](/images/Pastedimage20250724161308.png)\n\n进入后，它看起来是这样的：\n\n![Pastedimage20250724161951](/images/Pastedimage20250724161951.png)","updated":"2025-07-24T09:21:16.593Z","path":"Debug/使用Docker自托管Obsidian并通过网页浏览器访问.html","comments":1,"layout":"page","_id":"cmdh6nnwh000h9gv37xcff3oy","content":"<p>很有意思的事，在我烦恼obsidian无法在其他任何公共电脑上随时访问的时候。过了几天，在我电子邮箱里发现了这个推文<a href=\"https://linuxhandbook.com/obsidian-docker-self-host/\">《 Self-host Obsidian using Docker and Access it Via Web Browser》</a>，简直是瞌睡送枕头。</p>\n<hr>\n<blockquote>\n<p>Obsidian 是一个笔记软件，基于纯文本 Markdown 文件构建，提供本地优先的知识管理，具有强大的图形视图、反向链接和繁荣的插件生态系统。</p>\n</blockquote>\n<p>我们将实现：<br>一个自托管Obsidian的Docker容器，运行在我的家庭服务器中，可通过浏览器访问，无需桌面客户端，也无需移动应用程序，无论我身在何处，都只需这一个自托管解决方案。</p>\n<p>前提条件：</p>\n<ul>\n<li>一个安装了 Docker 和 Docker Compose 的 Linux 系统。</li>\n<li>对终端命令有基本的了解</li>\n<li>熟悉编辑 YAML 文件。</li>\n</ul>\n<h2 id=\"设置-Obsidian\"><a href=\"#设置-Obsidian\" class=\"headerlink\" title=\"设置 Obsidian\"></a>设置 Obsidian</h2><h3 id=\"1-为-Obsidian-创建数据目录\"><a href=\"#1-为-Obsidian-创建数据目录\" class=\"headerlink\" title=\"1. 为 Obsidian 创建数据目录\"></a>1. 为 Obsidian 创建数据目录</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/docker/obsidian</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/docker/obsidian</span><br></pre></td></tr></table></figure>\n<p>创建一个独立目录方便管理<br><img src=\"/images/Pastedimage20250724162824.png\" alt=\"Pasted20image20250724162824\"></p>\n<h3 id=\"2-创建-docker-compose-yml-文件\"><a href=\"#2-创建-docker-compose-yml-文件\" class=\"headerlink\" title=\"2. 创建 docker-compose.yml 文件\"></a>2. 创建 <code>docker-compose.yml</code> 文件</h3><p>设置一个 Docker Compose 文件，这个文件会告诉 Docker 如何运行 Obsidian，使用哪个镜像，打开哪些端口以及其他重要信息。</p>\n<p>创建一个名为 <code>docker-compose.yml</code> 的文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim docker-compose.yml</span><br></pre></td></tr></table></figure>\n<p>将以下内容复制到一个新文件中：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">&quot;3.8&quot;</span></span><br><span class=\"line\">services:</span><br><span class=\"line\">  obsidian:</span><br><span class=\"line\">    image: ghcr.io/linuxserver/obsidian:latest</span><br><span class=\"line\">    container_name: obsidian</span><br><span class=\"line\">    security_opt:</span><br><span class=\"line\">      - no-new-privileges:<span class=\"literal\">false</span></span><br><span class=\"line\">      - seccomp:unconfined</span><br><span class=\"line\">    healthcheck:</span><br><span class=\"line\">      <span class=\"built_in\">test</span>: <span class=\"built_in\">timeout</span> 10s bash -c <span class=\"string\">&#x27;:&gt; /dev/tcp/127.0.0.1/3000&#x27;</span> || <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">      interval: 10s</span><br><span class=\"line\">      <span class=\"built_in\">timeout</span>: 5s</span><br><span class=\"line\">      retries: 3</span><br><span class=\"line\">      start_period: 90s</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - <span class=\"string\">&quot;3000:3000&quot;</span></span><br><span class=\"line\">    shm_size: <span class=\"string\">&quot;2gb&quot;</span></span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./config:/config:rw</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      CUSTOM_USER: yourusername</span><br><span class=\"line\">      PASSWORD: yourpassword</span><br><span class=\"line\">      PUID: 1000</span><br><span class=\"line\">      PGID: 1000</span><br><span class=\"line\">      TZ: Asia/Shanghai</span><br><span class=\"line\">    restart: unless-stopped</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>分析一下其中的几个重要部分：</p>\n<ul>\n<li><code>image</code> : 我们正在使用 LinuxServer.io 提供的最新 Obsidian 镜像。</li>\n<li><code>volumes</code> : 将当前目录中的 <code>config</code> 文件夹映射到 Obsidian 的内部配置目录，所有你的 Obsidian 数据和设置都将存储在这里。</li>\n<li><code>ports</code> : 该应用将在您机器的 3000 端口上运行。如果您希望使用其他端口，可以更改此设置。</li>\n<li><code>shm_size</code> : 分配共享内存；对于具有 UI 的应用（如 Obsidian）很有用。</li>\n<li><code>environment</code> : 这里用于设置您的用户、密码、时区和文件所有权。</li>\n</ul>\n<p>需要注意有几行需要自行修改的内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">environment:</span><br><span class=\"line\">  CUSTOM_USER: yourusername</span><br><span class=\"line\">  PASSWORD: yourpassword</span><br><span class=\"line\">  PUID: 1000</span><br><span class=\"line\">  PGID: 1000</span><br><span class=\"line\">  TZ: Asia/Shanghai</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>yourusername</code> : 你将用来登录 Obsidian 的用户名。</li>\n<li><code>yourpassword</code> : 选择一个强密码。</li>\n<li><code>TZ</code> : 使用你本地的时区。（示例： Asia&#x2F;Shanghai ）</li>\n<li><code>PUID</code> 和 <code>PGID</code> ：这些应该与主机系统上用户的 UID 和 GID 匹配。要查找它们，请运行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">id</span> yourusername</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-部署容器\"><a href=\"#3-部署容器\" class=\"headerlink\" title=\"3. 部署容器\"></a>3. 部署容器</h3><p>一旦 <code>docker-compose.yml</code> 文件准备就绪且值已自定义，即可开始启动容器：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n<p>这个命令告诉 Docker：</p>\n<ul>\n<li>拉取 Obsidian 镜像（如果尚未下载）</li>\n<li>使用我们定义的设置创建容器</li>\n<li>以分离模式运行（ <code>-d</code> ），以便它在后台继续运行</li>\n</ul>\n<p><img src=\"/images/Pastedimage20250724161028.png\" alt=\"Pasted20image20250724161028\"></p>\n<h3 id=\"在浏览器中访问-Obsidian\"><a href=\"#在浏览器中访问-Obsidian\" class=\"headerlink\" title=\"在浏览器中访问 Obsidian\"></a>在浏览器中访问 Obsidian</h3><p>完成后，你应该能够在浏览器中打开 Obsidian：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://localhost:3000</span><br></pre></td></tr></table></figure>\n<p>如果你不是在本地运行，请将 <code>localhost</code> 替换为你的服务器 IP。</p>\n<p><img src=\"/images/Pastedimage20250724161308.png\" alt=\"Pasted20image20250724161308\"></p>\n<p>进入后，它看起来是这样的：</p>\n<p><img src=\"/images/Pastedimage20250724161951.png\" alt=\"Pastedimage20250724161951\"></p>\n","excerpt":"","more":"<p>很有意思的事，在我烦恼obsidian无法在其他任何公共电脑上随时访问的时候。过了几天，在我电子邮箱里发现了这个推文<a href=\"https://linuxhandbook.com/obsidian-docker-self-host/\">《 Self-host Obsidian using Docker and Access it Via Web Browser》</a>，简直是瞌睡送枕头。</p>\n<hr>\n<blockquote>\n<p>Obsidian 是一个笔记软件，基于纯文本 Markdown 文件构建，提供本地优先的知识管理，具有强大的图形视图、反向链接和繁荣的插件生态系统。</p>\n</blockquote>\n<p>我们将实现：<br>一个自托管Obsidian的Docker容器，运行在我的家庭服务器中，可通过浏览器访问，无需桌面客户端，也无需移动应用程序，无论我身在何处，都只需这一个自托管解决方案。</p>\n<p>前提条件：</p>\n<ul>\n<li>一个安装了 Docker 和 Docker Compose 的 Linux 系统。</li>\n<li>对终端命令有基本的了解</li>\n<li>熟悉编辑 YAML 文件。</li>\n</ul>\n<h2 id=\"设置-Obsidian\"><a href=\"#设置-Obsidian\" class=\"headerlink\" title=\"设置 Obsidian\"></a>设置 Obsidian</h2><h3 id=\"1-为-Obsidian-创建数据目录\"><a href=\"#1-为-Obsidian-创建数据目录\" class=\"headerlink\" title=\"1. 为 Obsidian 创建数据目录\"></a>1. 为 Obsidian 创建数据目录</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p ~/docker/obsidian</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/docker/obsidian</span><br></pre></td></tr></table></figure>\n<p>创建一个独立目录方便管理<br><img src=\"/images/Pastedimage20250724162824.png\" alt=\"Pasted20image20250724162824\"></p>\n<h3 id=\"2-创建-docker-compose-yml-文件\"><a href=\"#2-创建-docker-compose-yml-文件\" class=\"headerlink\" title=\"2. 创建 docker-compose.yml 文件\"></a>2. 创建 <code>docker-compose.yml</code> 文件</h3><p>设置一个 Docker Compose 文件，这个文件会告诉 Docker 如何运行 Obsidian，使用哪个镜像，打开哪些端口以及其他重要信息。</p>\n<p>创建一个名为 <code>docker-compose.yml</code> 的文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim docker-compose.yml</span><br></pre></td></tr></table></figure>\n<p>将以下内容复制到一个新文件中：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">&quot;3.8&quot;</span></span><br><span class=\"line\">services:</span><br><span class=\"line\">  obsidian:</span><br><span class=\"line\">    image: ghcr.io/linuxserver/obsidian:latest</span><br><span class=\"line\">    container_name: obsidian</span><br><span class=\"line\">    security_opt:</span><br><span class=\"line\">      - no-new-privileges:<span class=\"literal\">false</span></span><br><span class=\"line\">      - seccomp:unconfined</span><br><span class=\"line\">    healthcheck:</span><br><span class=\"line\">      <span class=\"built_in\">test</span>: <span class=\"built_in\">timeout</span> 10s bash -c <span class=\"string\">&#x27;:&gt; /dev/tcp/127.0.0.1/3000&#x27;</span> || <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">      interval: 10s</span><br><span class=\"line\">      <span class=\"built_in\">timeout</span>: 5s</span><br><span class=\"line\">      retries: 3</span><br><span class=\"line\">      start_period: 90s</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - <span class=\"string\">&quot;3000:3000&quot;</span></span><br><span class=\"line\">    shm_size: <span class=\"string\">&quot;2gb&quot;</span></span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./config:/config:rw</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      CUSTOM_USER: yourusername</span><br><span class=\"line\">      PASSWORD: yourpassword</span><br><span class=\"line\">      PUID: 1000</span><br><span class=\"line\">      PGID: 1000</span><br><span class=\"line\">      TZ: Asia/Shanghai</span><br><span class=\"line\">    restart: unless-stopped</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>分析一下其中的几个重要部分：</p>\n<ul>\n<li><code>image</code> : 我们正在使用 LinuxServer.io 提供的最新 Obsidian 镜像。</li>\n<li><code>volumes</code> : 将当前目录中的 <code>config</code> 文件夹映射到 Obsidian 的内部配置目录，所有你的 Obsidian 数据和设置都将存储在这里。</li>\n<li><code>ports</code> : 该应用将在您机器的 3000 端口上运行。如果您希望使用其他端口，可以更改此设置。</li>\n<li><code>shm_size</code> : 分配共享内存；对于具有 UI 的应用（如 Obsidian）很有用。</li>\n<li><code>environment</code> : 这里用于设置您的用户、密码、时区和文件所有权。</li>\n</ul>\n<p>需要注意有几行需要自行修改的内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">environment:</span><br><span class=\"line\">  CUSTOM_USER: yourusername</span><br><span class=\"line\">  PASSWORD: yourpassword</span><br><span class=\"line\">  PUID: 1000</span><br><span class=\"line\">  PGID: 1000</span><br><span class=\"line\">  TZ: Asia/Shanghai</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>yourusername</code> : 你将用来登录 Obsidian 的用户名。</li>\n<li><code>yourpassword</code> : 选择一个强密码。</li>\n<li><code>TZ</code> : 使用你本地的时区。（示例： Asia&#x2F;Shanghai ）</li>\n<li><code>PUID</code> 和 <code>PGID</code> ：这些应该与主机系统上用户的 UID 和 GID 匹配。要查找它们，请运行<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">id</span> yourusername</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-部署容器\"><a href=\"#3-部署容器\" class=\"headerlink\" title=\"3. 部署容器\"></a>3. 部署容器</h3><p>一旦 <code>docker-compose.yml</code> 文件准备就绪且值已自定义，即可开始启动容器：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-compose up -d</span><br></pre></td></tr></table></figure>\n<p>这个命令告诉 Docker：</p>\n<ul>\n<li>拉取 Obsidian 镜像（如果尚未下载）</li>\n<li>使用我们定义的设置创建容器</li>\n<li>以分离模式运行（ <code>-d</code> ），以便它在后台继续运行</li>\n</ul>\n<p><img src=\"/images/Pastedimage20250724161028.png\" alt=\"Pasted20image20250724161028\"></p>\n<h3 id=\"在浏览器中访问-Obsidian\"><a href=\"#在浏览器中访问-Obsidian\" class=\"headerlink\" title=\"在浏览器中访问 Obsidian\"></a>在浏览器中访问 Obsidian</h3><p>完成后，你应该能够在浏览器中打开 Obsidian：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://localhost:3000</span><br></pre></td></tr></table></figure>\n<p>如果你不是在本地运行，请将 <code>localhost</code> 替换为你的服务器 IP。</p>\n<p><img src=\"/images/Pastedimage20250724161308.png\" alt=\"Pasted20image20250724161308\"></p>\n<p>进入后，它看起来是这样的：</p>\n<p><img src=\"/images/Pastedimage20250724161951.png\" alt=\"Pastedimage20250724161951\"></p>\n"},{"date":"2025-07-14T16:00:00.000Z","title":"数组（顺序存储）基本原理","cssclasses":["数据结构","数组"],"_content":"## 静态/动态数组实质\n\n* 「静态数组」就是一块**连续的内存空间**，我们可以通过索引来访问这块内存空间中的元素，这是数组的原始形态。\n* 「动态数组」是编程语言为了方便我们使用，在静态数组的基础上帮我们添加了一些常用的      API，比如 `push, insert, remove` 等等方法\n\n## 静态数组\n\n静态数组在创建的时候就要确定数组的元素类型和元素数量。\n>只有在 C++、Java、Golang 这类语言中才提供了创建静态数组的方式，类似 Python、JavaScript 这类语言并没有提供静态数组的定义方式\n\n#### 定义一个静态数组的方法：\n```java\n// 定义一个大小为 10 的静态数组\nint[] arr = new int[10];\n\n// 使用索引赋值\narr[0] = 1;\narr[1] = 2;\n\n// 使用索引取值\nint a = arr[0];\n```\n\n```python\n# 严格来说，Python 没有静态数组的定义方式\n# 我们暂且使用列表模拟静态数组\n\n# 定义一个大小为 10 的静态数组\narr = [0] * 10\n\n# 使用索引赋值\narr[0] = 1\narr[1] = 2\n\n# 使用索引取值\na = arr[0]\n```\n\n#### 内核操作\n`int arr[10]` 这段代码到底做了什么事情呢？\n1. 在内存中开辟了一段**连续的内存空间**，大小是 `10 * sizeof(int)` 字节。一个 int 在计算机内存中占 4 字节，也就是总共 40 字节。\n2. 定义了一个名为 `arr` 的数组指针，指向这段内存空间的首地址。\n\n `arr[1] = 2` 这段代码又做了什么事情呢？\n1. 计算 `arr` 的首地址加上 `1 * sizeof(int)` 字节（4 字节）的偏移量，找到了内存空间中的第二个元素的**首地址**。\n2. 从这个地址开始的 4 个字节的内存空间中写入了整数 `2`。\n\n>1. 为什么数组的索引从 0 开始？\n\t就是方便取地址。`arr[0]` 就是 `arr` 的首地址，就是 `arr` 的首地址加上 `0 * 4` 字节,从这个地址往后的 4 个字节存储着第一个元素的值；`arr[1]` 就是 `arr` 的首地址加上 `1 * 4` 字节，也就是第二个元素的首地址，这个地址往后的 4 个字节存储着第二个元素的值。`arr[2], arr[3]` 以此类推。\n>2. 因为数组的名字 `arr` 就指向整块内存的首地址，所以数组名 `arr` 就是一个指针。你直接取这个地址的值，就是第一个元素的值。也就是说，`*arr` 的值就是 `乘以arr[0]`，即第一个元素的值\n\t\n==内存空间首地址已知、大小已知、内存空间连续，所以，我们获得了数组的超能力「**随机访问」**：只要给定任何一个数组索引，我可以在 O(1)O(1) 的时间内直接获取到对应元素的值。\n因为我可以通过首地址和索引直接计算出目标元素的内存地址。计算机的内存寻址时间可以认为是 O(1)O(1)，所以数组的随机访问时间复杂度是 O(1)O(1)。==\n\n### 增删查改\n\n#### 增\n##### 末尾追加 - 时间复杂度是 O(1)\n\n```java\n// 大小为 10 的数组已经装了 4 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 4; i++) {\n    arr[i] = i;\n}\n\n// 现在想在数组末尾追加一个元素 4\narr[4] = 4;\n\n// 再在数组末尾追加一个元素 5\narr[5] = 5;\n\n// 依此类推\n// ...\n```\n\n```python\n# 大小为 10 的数组已经装了 4 个元素\narr = [0] * 10\nfor i in range(4):\n    arr[i] = i\n\n# 现在想在数组末尾追加一个元素 4\narr[4] = 4\n\n# 再在数组末尾追加一个元素 5\narr[5] = 5\n\n# 依此类推\n# ...\n```\n\n##### 中间插入 - 时间复杂度是 O(N)\n\n这就要涉及「数据搬移」，给新元素腾出空位，然后再才能插入新元素。\n\n```java\n// 大小为 10 的数组已经装了 4 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 4; i++) {\n    arr[i] = i;\n}\n\n// 在索引 2 置插入元素 666\n// 需要把索引 2 以及之后的元素都往后移动一位\n// 注意要倒着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板\nfor (int i = 4; i > 2; i--) {\n    arr[i] = arr[i - 1];\n}\n\n// 现在第 3 个位置空出来了，可以插入新元素\narr[2] = 666;\n```\n\n```python\n# 大小为 10 的数组已经装了 4 个元素\narr = [0] * 10\nfor i in range(4):\n    arr[i] = i\nfor i in range(4, 2, -1):\n    arr[i] = arr[i - 1]\n# 现在第 3 个位置空出来了，可以插入新元素\narr[2] = 666\n```\n\n##### 数组空间已满 - 时间复杂度是 O(N)\n\n**连续内存必须一次性分配，分配完了之后就不能随意增减了**。因为你这块连续内存后面的内存空间可能已经被其他程序占用了，不能说你想要就给你。\n那怎么办呢？只能重新申请一块更大的内存空间，把原来的数据复制过去，再插入新的元素，这就是数组的「扩容」操作。\n\n```java\n// 大小为 10 的数组已经装满了\nint[] arr = new int[10];\nfor (int i = 0; i < 10; i++) {\n    arr[i] = i;\n}\n\n// 现在想在数组末尾追加一个元素 10\n// 需要先扩容数组\nint[] newArr = new int[20];\n// 把原来的 10 个元素复制过去\nfor (int i = 0; i < 10; i++) {\n    newArr[i] = arr[i];\n}\n\n// 旧数组的内存空间将由垃圾收集器处理\n// ...\n\n// 在新的大数组中追加新元素\nnewArr[10] = 10;\n```\n\n```python\n# 大小为 10 的数组已经装满了\narr = [i for i in range(10)]\n\nnewArr = [0] * 20\nfor i in range(10):\n    newArr[i] = arr[i]\n\n# 释放旧数组的内存空间\n# 在新的大数组中追加新元素\nnewArr[10] = 10\n```\n\n#### 删\n\n##### 删除末尾元素 - 时间复杂度是 O(1)\n\n直接把末尾元素标记为一个特殊值代表已删除就行了，我们这里简单举例，就用 -1 作为特殊值代表已删除好了。\n\n```java\n// 大小为 10 的数组已经装了 5 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 5; i++) {\n    arr[i] = i;\n}\n\n// 删除末尾元素，暂时用 -1 代表元素已删除\narr[4] = -1;\n```\n\n```python\n# 大小为 10 的数组已经装了 5 个元素\narr = [0] * 10\nfor i in range(5):\n    arr[i] = i\n\n# 删除末尾元素，暂时用 -1 代表元素已删除\narr[4] = -1\n```\n\n##### 删除中间元素 - 时间复杂度是 O(N)\n\n这也要涉及「数据搬移」，把被删元素后面的元素都往前移动一位，保持数组元素的连续性。\n\n```java\n// 大小为 10 的数组已经装了 5 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 5; i++) {\n    arr[i] = i;\n}\n\n// 删除 arr[1]\n// 需要把 arr[1] 之后的元素都往前移动一位\n// 注意要正着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板\nfor (int i = 1; i < 4; i++) {\n    arr[i] = arr[i + 1];\n}\n\n// 最后一个元素置为 -1 代表已删除\narr[4] = -1;\n```\n\n```python\n# 大小为 10 的数组已经装了 5 个元素\narr = [0] * 10\nfor i in range(5):\n    arr[i] = i\nfor i in range(1, 4):\n    arr[i] = arr[i + 1]\n\n# 最后一个元素置为 -1 代表已删除\narr[4] = -1\n```\n\n## 总结\n\n综上，静态数组的增删查改操作的时间复杂度是：\n\n1. 增：\n    - 在末尾追加元素：O(1)O(1)。\n    - 在中间（非末尾）插入元素：O(N)O(N)。\n2. 删：\n    - 删除末尾元素：O(1)O(1)。\n    - 删除中间（非末尾）元素：O(N)O(N)。\n3. 查：给定指定索引，查询索引对应的元素的值，时间复杂度 O(1)O(1)。\n4. 改：给定指定索引，修改索引对应的元素的值，时间复杂度 O(1)O(1)。\n\n\n## 动态数组\n\n**动态数组底层还是静态数组，只是自动帮我们进行数组空间的扩缩容，并把增删查改操作进行了封装，让我们使用起来更方便而已**。\n\n```java\n// 创建动态数组\n// 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容\nArrayList<Integer> arr = new ArrayList<>();\n\nfor (int i = 0; i < 10; i++) {\n    // 在末尾追加元素，时间复杂度 O(1)\n    arr.add(i);\n}\n\n// 在中间插入元素，时间复杂度 O(N)\n// 在索引 2 的位置插入元素 666\narr.add(2, 666);\n\n// 在头部插入元素，时间复杂度 O(N)\narr.add(0, -1);\n\n// 删除末尾元素，时间复杂度 O(1)\narr.remove(arr.size() - 1);\n\n// 删除中间元素，时间复杂度 O(N)\n// 删除索引 2 的元素\narr.remove(2);\n\n// 根据索引查询元素，时间复杂度 O(1)\nint a = arr.get(0);\n\n// 根据索引修改元素，时间复杂度 O(1)\narr.set(0, 100);\n\n// 根据元素值查找索引，时间复杂度 O(N)\nint index = arr.indexOf(666);\n```\n\n```python\n# 创建动态数组\n# 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容\narr = []\n\nfor i in range(10):\n    # 在末尾追加元素，时间复杂度 O(1)\n    arr.append(i)\n\n# 在中间插入元素，时间复杂度 O(N)\n# 在索引 2 的位置插入元素 666\narr.insert(2, 666)\n\n# 在头部插入元素，时间复杂度 O(N)\narr.insert(0, -1)\n\n# 删除末尾元素，时间复杂度 O(1)\narr.pop()\n\n# 删除中间元素，时间复杂度 O(N)\n# 删除索引 2 的元素\narr.pop(2)\n\n# 根据索引查询元素，时间复杂度 O(1)\na = arr[0]\n\n# 根据索引修改元素，时间复杂度 O(1)\narr[0] = 100\n\n# 根据元素值查找索引，时间复杂度 O(N)\nindex = arr.index(666)\n```","source":"数据结构/数组（顺序存储）基本原理.md","raw":"---\ndate: 2025-07-15\ntitle: 数组（顺序存储）基本原理\ncssclasses:\n  - 数据结构\n  - 数组\n---\n## 静态/动态数组实质\n\n* 「静态数组」就是一块**连续的内存空间**，我们可以通过索引来访问这块内存空间中的元素，这是数组的原始形态。\n* 「动态数组」是编程语言为了方便我们使用，在静态数组的基础上帮我们添加了一些常用的      API，比如 `push, insert, remove` 等等方法\n\n## 静态数组\n\n静态数组在创建的时候就要确定数组的元素类型和元素数量。\n>只有在 C++、Java、Golang 这类语言中才提供了创建静态数组的方式，类似 Python、JavaScript 这类语言并没有提供静态数组的定义方式\n\n#### 定义一个静态数组的方法：\n```java\n// 定义一个大小为 10 的静态数组\nint[] arr = new int[10];\n\n// 使用索引赋值\narr[0] = 1;\narr[1] = 2;\n\n// 使用索引取值\nint a = arr[0];\n```\n\n```python\n# 严格来说，Python 没有静态数组的定义方式\n# 我们暂且使用列表模拟静态数组\n\n# 定义一个大小为 10 的静态数组\narr = [0] * 10\n\n# 使用索引赋值\narr[0] = 1\narr[1] = 2\n\n# 使用索引取值\na = arr[0]\n```\n\n#### 内核操作\n`int arr[10]` 这段代码到底做了什么事情呢？\n1. 在内存中开辟了一段**连续的内存空间**，大小是 `10 * sizeof(int)` 字节。一个 int 在计算机内存中占 4 字节，也就是总共 40 字节。\n2. 定义了一个名为 `arr` 的数组指针，指向这段内存空间的首地址。\n\n `arr[1] = 2` 这段代码又做了什么事情呢？\n1. 计算 `arr` 的首地址加上 `1 * sizeof(int)` 字节（4 字节）的偏移量，找到了内存空间中的第二个元素的**首地址**。\n2. 从这个地址开始的 4 个字节的内存空间中写入了整数 `2`。\n\n>1. 为什么数组的索引从 0 开始？\n\t就是方便取地址。`arr[0]` 就是 `arr` 的首地址，就是 `arr` 的首地址加上 `0 * 4` 字节,从这个地址往后的 4 个字节存储着第一个元素的值；`arr[1]` 就是 `arr` 的首地址加上 `1 * 4` 字节，也就是第二个元素的首地址，这个地址往后的 4 个字节存储着第二个元素的值。`arr[2], arr[3]` 以此类推。\n>2. 因为数组的名字 `arr` 就指向整块内存的首地址，所以数组名 `arr` 就是一个指针。你直接取这个地址的值，就是第一个元素的值。也就是说，`*arr` 的值就是 `乘以arr[0]`，即第一个元素的值\n\t\n==内存空间首地址已知、大小已知、内存空间连续，所以，我们获得了数组的超能力「**随机访问」**：只要给定任何一个数组索引，我可以在 O(1)O(1) 的时间内直接获取到对应元素的值。\n因为我可以通过首地址和索引直接计算出目标元素的内存地址。计算机的内存寻址时间可以认为是 O(1)O(1)，所以数组的随机访问时间复杂度是 O(1)O(1)。==\n\n### 增删查改\n\n#### 增\n##### 末尾追加 - 时间复杂度是 O(1)\n\n```java\n// 大小为 10 的数组已经装了 4 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 4; i++) {\n    arr[i] = i;\n}\n\n// 现在想在数组末尾追加一个元素 4\narr[4] = 4;\n\n// 再在数组末尾追加一个元素 5\narr[5] = 5;\n\n// 依此类推\n// ...\n```\n\n```python\n# 大小为 10 的数组已经装了 4 个元素\narr = [0] * 10\nfor i in range(4):\n    arr[i] = i\n\n# 现在想在数组末尾追加一个元素 4\narr[4] = 4\n\n# 再在数组末尾追加一个元素 5\narr[5] = 5\n\n# 依此类推\n# ...\n```\n\n##### 中间插入 - 时间复杂度是 O(N)\n\n这就要涉及「数据搬移」，给新元素腾出空位，然后再才能插入新元素。\n\n```java\n// 大小为 10 的数组已经装了 4 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 4; i++) {\n    arr[i] = i;\n}\n\n// 在索引 2 置插入元素 666\n// 需要把索引 2 以及之后的元素都往后移动一位\n// 注意要倒着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板\nfor (int i = 4; i > 2; i--) {\n    arr[i] = arr[i - 1];\n}\n\n// 现在第 3 个位置空出来了，可以插入新元素\narr[2] = 666;\n```\n\n```python\n# 大小为 10 的数组已经装了 4 个元素\narr = [0] * 10\nfor i in range(4):\n    arr[i] = i\nfor i in range(4, 2, -1):\n    arr[i] = arr[i - 1]\n# 现在第 3 个位置空出来了，可以插入新元素\narr[2] = 666\n```\n\n##### 数组空间已满 - 时间复杂度是 O(N)\n\n**连续内存必须一次性分配，分配完了之后就不能随意增减了**。因为你这块连续内存后面的内存空间可能已经被其他程序占用了，不能说你想要就给你。\n那怎么办呢？只能重新申请一块更大的内存空间，把原来的数据复制过去，再插入新的元素，这就是数组的「扩容」操作。\n\n```java\n// 大小为 10 的数组已经装满了\nint[] arr = new int[10];\nfor (int i = 0; i < 10; i++) {\n    arr[i] = i;\n}\n\n// 现在想在数组末尾追加一个元素 10\n// 需要先扩容数组\nint[] newArr = new int[20];\n// 把原来的 10 个元素复制过去\nfor (int i = 0; i < 10; i++) {\n    newArr[i] = arr[i];\n}\n\n// 旧数组的内存空间将由垃圾收集器处理\n// ...\n\n// 在新的大数组中追加新元素\nnewArr[10] = 10;\n```\n\n```python\n# 大小为 10 的数组已经装满了\narr = [i for i in range(10)]\n\nnewArr = [0] * 20\nfor i in range(10):\n    newArr[i] = arr[i]\n\n# 释放旧数组的内存空间\n# 在新的大数组中追加新元素\nnewArr[10] = 10\n```\n\n#### 删\n\n##### 删除末尾元素 - 时间复杂度是 O(1)\n\n直接把末尾元素标记为一个特殊值代表已删除就行了，我们这里简单举例，就用 -1 作为特殊值代表已删除好了。\n\n```java\n// 大小为 10 的数组已经装了 5 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 5; i++) {\n    arr[i] = i;\n}\n\n// 删除末尾元素，暂时用 -1 代表元素已删除\narr[4] = -1;\n```\n\n```python\n# 大小为 10 的数组已经装了 5 个元素\narr = [0] * 10\nfor i in range(5):\n    arr[i] = i\n\n# 删除末尾元素，暂时用 -1 代表元素已删除\narr[4] = -1\n```\n\n##### 删除中间元素 - 时间复杂度是 O(N)\n\n这也要涉及「数据搬移」，把被删元素后面的元素都往前移动一位，保持数组元素的连续性。\n\n```java\n// 大小为 10 的数组已经装了 5 个元素\nint[] arr = new int[10];\nfor (int i = 0; i < 5; i++) {\n    arr[i] = i;\n}\n\n// 删除 arr[1]\n// 需要把 arr[1] 之后的元素都往前移动一位\n// 注意要正着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板\nfor (int i = 1; i < 4; i++) {\n    arr[i] = arr[i + 1];\n}\n\n// 最后一个元素置为 -1 代表已删除\narr[4] = -1;\n```\n\n```python\n# 大小为 10 的数组已经装了 5 个元素\narr = [0] * 10\nfor i in range(5):\n    arr[i] = i\nfor i in range(1, 4):\n    arr[i] = arr[i + 1]\n\n# 最后一个元素置为 -1 代表已删除\narr[4] = -1\n```\n\n## 总结\n\n综上，静态数组的增删查改操作的时间复杂度是：\n\n1. 增：\n    - 在末尾追加元素：O(1)O(1)。\n    - 在中间（非末尾）插入元素：O(N)O(N)。\n2. 删：\n    - 删除末尾元素：O(1)O(1)。\n    - 删除中间（非末尾）元素：O(N)O(N)。\n3. 查：给定指定索引，查询索引对应的元素的值，时间复杂度 O(1)O(1)。\n4. 改：给定指定索引，修改索引对应的元素的值，时间复杂度 O(1)O(1)。\n\n\n## 动态数组\n\n**动态数组底层还是静态数组，只是自动帮我们进行数组空间的扩缩容，并把增删查改操作进行了封装，让我们使用起来更方便而已**。\n\n```java\n// 创建动态数组\n// 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容\nArrayList<Integer> arr = new ArrayList<>();\n\nfor (int i = 0; i < 10; i++) {\n    // 在末尾追加元素，时间复杂度 O(1)\n    arr.add(i);\n}\n\n// 在中间插入元素，时间复杂度 O(N)\n// 在索引 2 的位置插入元素 666\narr.add(2, 666);\n\n// 在头部插入元素，时间复杂度 O(N)\narr.add(0, -1);\n\n// 删除末尾元素，时间复杂度 O(1)\narr.remove(arr.size() - 1);\n\n// 删除中间元素，时间复杂度 O(N)\n// 删除索引 2 的元素\narr.remove(2);\n\n// 根据索引查询元素，时间复杂度 O(1)\nint a = arr.get(0);\n\n// 根据索引修改元素，时间复杂度 O(1)\narr.set(0, 100);\n\n// 根据元素值查找索引，时间复杂度 O(N)\nint index = arr.indexOf(666);\n```\n\n```python\n# 创建动态数组\n# 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容\narr = []\n\nfor i in range(10):\n    # 在末尾追加元素，时间复杂度 O(1)\n    arr.append(i)\n\n# 在中间插入元素，时间复杂度 O(N)\n# 在索引 2 的位置插入元素 666\narr.insert(2, 666)\n\n# 在头部插入元素，时间复杂度 O(N)\narr.insert(0, -1)\n\n# 删除末尾元素，时间复杂度 O(1)\narr.pop()\n\n# 删除中间元素，时间复杂度 O(N)\n# 删除索引 2 的元素\narr.pop(2)\n\n# 根据索引查询元素，时间复杂度 O(1)\na = arr[0]\n\n# 根据索引修改元素，时间复杂度 O(1)\narr[0] = 100\n\n# 根据元素值查找索引，时间复杂度 O(N)\nindex = arr.index(666)\n```","updated":"2025-07-16T15:01:05.003Z","path":"数据结构/数组（顺序存储）基本原理.html","comments":1,"layout":"page","_id":"cmdh6nnwh000i9gv313m2asec","content":"<h2 id=\"静态-动态数组实质\"><a href=\"#静态-动态数组实质\" class=\"headerlink\" title=\"静态&#x2F;动态数组实质\"></a>静态&#x2F;动态数组实质</h2><ul>\n<li>「静态数组」就是一块<strong>连续的内存空间</strong>，我们可以通过索引来访问这块内存空间中的元素，这是数组的原始形态。</li>\n<li>「动态数组」是编程语言为了方便我们使用，在静态数组的基础上帮我们添加了一些常用的      API，比如 <code>push, insert, remove</code> 等等方法</li>\n</ul>\n<h2 id=\"静态数组\"><a href=\"#静态数组\" class=\"headerlink\" title=\"静态数组\"></a>静态数组</h2><p>静态数组在创建的时候就要确定数组的元素类型和元素数量。</p>\n<blockquote>\n<p>只有在 C++、Java、Golang 这类语言中才提供了创建静态数组的方式，类似 Python、JavaScript 这类语言并没有提供静态数组的定义方式</p>\n</blockquote>\n<h4 id=\"定义一个静态数组的方法：\"><a href=\"#定义一个静态数组的方法：\" class=\"headerlink\" title=\"定义一个静态数组的方法：\"></a>定义一个静态数组的方法：</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义一个大小为 10 的静态数组</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用索引赋值</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">arr[<span class=\"number\">1</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用索引取值</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> arr[<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 严格来说，Python 没有静态数组的定义方式</span></span><br><span class=\"line\"><span class=\"comment\"># 我们暂且使用列表模拟静态数组</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义一个大小为 10 的静态数组</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用索引赋值</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>] = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用索引取值</span></span><br><span class=\"line\">a = arr[<span class=\"number\">0</span>]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"内核操作\"><a href=\"#内核操作\" class=\"headerlink\" title=\"内核操作\"></a>内核操作</h4><p><code>int arr[10]</code> 这段代码到底做了什么事情呢？</p>\n<ol>\n<li>在内存中开辟了一段<strong>连续的内存空间</strong>，大小是 <code>10 * sizeof(int)</code> 字节。一个 int 在计算机内存中占 4 字节，也就是总共 40 字节。</li>\n<li>定义了一个名为 <code>arr</code> 的数组指针，指向这段内存空间的首地址。</li>\n</ol>\n<p> <code>arr[1] = 2</code> 这段代码又做了什么事情呢？</p>\n<ol>\n<li>计算 <code>arr</code> 的首地址加上 <code>1 * sizeof(int)</code> 字节（4 字节）的偏移量，找到了内存空间中的第二个元素的<strong>首地址</strong>。</li>\n<li>从这个地址开始的 4 个字节的内存空间中写入了整数 <code>2</code>。</li>\n</ol>\n<blockquote>\n<ol>\n<li>为什么数组的索引从 0 开始？<br> 就是方便取地址。<code>arr[0]</code> 就是 <code>arr</code> 的首地址，就是 <code>arr</code> 的首地址加上 <code>0 * 4</code> 字节,从这个地址往后的 4 个字节存储着第一个元素的值；<code>arr[1]</code> 就是 <code>arr</code> 的首地址加上 <code>1 * 4</code> 字节，也就是第二个元素的首地址，这个地址往后的 4 个字节存储着第二个元素的值。<code>arr[2], arr[3]</code> 以此类推。</li>\n<li>因为数组的名字 <code>arr</code> 就指向整块内存的首地址，所以数组名 <code>arr</code> 就是一个指针。你直接取这个地址的值，就是第一个元素的值。也就是说，<code>*arr</code> 的值就是 <code>乘以arr[0]</code>，即第一个元素的值</li>\n</ol>\n</blockquote>\n<p>&#x3D;&#x3D;内存空间首地址已知、大小已知、内存空间连续，所以，我们获得了数组的超能力「<strong>随机访问」</strong>：只要给定任何一个数组索引，我可以在 O(1)O(1) 的时间内直接获取到对应元素的值。<br>因为我可以通过首地址和索引直接计算出目标元素的内存地址。计算机的内存寻址时间可以认为是 O(1)O(1)，所以数组的随机访问时间复杂度是 O(1)O(1)。&#x3D;&#x3D;</p>\n<h3 id=\"增删查改\"><a href=\"#增删查改\" class=\"headerlink\" title=\"增删查改\"></a>增删查改</h3><h4 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h4><h5 id=\"末尾追加-时间复杂度是-O-1\"><a href=\"#末尾追加-时间复杂度是-O-1\" class=\"headerlink\" title=\"末尾追加 - 时间复杂度是 O(1)\"></a>末尾追加 - 时间复杂度是 O(1)</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在想在数组末尾追加一个元素 4</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = <span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 再在数组末尾追加一个元素 5</span></span><br><span class=\"line\">arr[<span class=\"number\">5</span>] = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 依此类推</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在想在数组末尾追加一个元素 4</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = <span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 再在数组末尾追加一个元素 5</span></span><br><span class=\"line\">arr[<span class=\"number\">5</span>] = <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 依此类推</span></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"中间插入-时间复杂度是-O-N\"><a href=\"#中间插入-时间复杂度是-O-N\" class=\"headerlink\" title=\"中间插入 - 时间复杂度是 O(N)\"></a>中间插入 - 时间复杂度是 O(N)</h5><p>这就要涉及「数据搬移」，给新元素腾出空位，然后再才能插入新元素。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在索引 2 置插入元素 666</span></span><br><span class=\"line\"><span class=\"comment\">// 需要把索引 2 以及之后的元素都往后移动一位</span></span><br><span class=\"line\"><span class=\"comment\">// 注意要倒着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">4</span>; i &gt; <span class=\"number\">2</span>; i--) &#123;</span><br><span class=\"line\">    arr[i] = arr[i - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在第 3 个位置空出来了，可以插入新元素</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>] = <span class=\"number\">666</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>, <span class=\"number\">2</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">    arr[i] = arr[i - <span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"comment\"># 现在第 3 个位置空出来了，可以插入新元素</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>] = <span class=\"number\">666</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"数组空间已满-时间复杂度是-O-N\"><a href=\"#数组空间已满-时间复杂度是-O-N\" class=\"headerlink\" title=\"数组空间已满 - 时间复杂度是 O(N)\"></a>数组空间已满 - 时间复杂度是 O(N)</h5><p><strong>连续内存必须一次性分配，分配完了之后就不能随意增减了</strong>。因为你这块连续内存后面的内存空间可能已经被其他程序占用了，不能说你想要就给你。<br>那怎么办呢？只能重新申请一块更大的内存空间，把原来的数据复制过去，再插入新的元素，这就是数组的「扩容」操作。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装满了</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在想在数组末尾追加一个元素 10</span></span><br><span class=\"line\"><span class=\"comment\">// 需要先扩容数组</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] newArr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"comment\">// 把原来的 10 个元素复制过去</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    newArr[i] = arr[i];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 旧数组的内存空间将由垃圾收集器处理</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在新的大数组中追加新元素</span></span><br><span class=\"line\">newArr[<span class=\"number\">10</span>] = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装满了</span></span><br><span class=\"line\">arr = [i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>)]</span><br><span class=\"line\"></span><br><span class=\"line\">newArr = [<span class=\"number\">0</span>] * <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    newArr[i] = arr[i]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 释放旧数组的内存空间</span></span><br><span class=\"line\"><span class=\"comment\"># 在新的大数组中追加新元素</span></span><br><span class=\"line\">newArr[<span class=\"number\">10</span>] = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h4><h5 id=\"删除末尾元素-时间复杂度是-O-1\"><a href=\"#删除末尾元素-时间复杂度是-O-1\" class=\"headerlink\" title=\"删除末尾元素 - 时间复杂度是 O(1)\"></a>删除末尾元素 - 时间复杂度是 O(1)</h5><p>直接把末尾元素标记为一个特殊值代表已删除就行了，我们这里简单举例，就用 -1 作为特殊值代表已删除好了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除末尾元素，暂时用 -1 代表元素已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">5</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除末尾元素，暂时用 -1 代表元素已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"删除中间元素-时间复杂度是-O-N\"><a href=\"#删除中间元素-时间复杂度是-O-N\" class=\"headerlink\" title=\"删除中间元素 - 时间复杂度是 O(N)\"></a>删除中间元素 - 时间复杂度是 O(N)</h5><p>这也要涉及「数据搬移」，把被删元素后面的元素都往前移动一位，保持数组元素的连续性。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除 arr[1]</span></span><br><span class=\"line\"><span class=\"comment\">// 需要把 arr[1] 之后的元素都往前移动一位</span></span><br><span class=\"line\"><span class=\"comment\">// 注意要正着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = arr[i + <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 最后一个元素置为 -1 代表已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">5</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = arr[i + <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 最后一个元素置为 -1 代表已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>综上，静态数组的增删查改操作的时间复杂度是：</p>\n<ol>\n<li>增：<ul>\n<li>在末尾追加元素：O(1)O(1)。</li>\n<li>在中间（非末尾）插入元素：O(N)O(N)。</li>\n</ul>\n</li>\n<li>删：<ul>\n<li>删除末尾元素：O(1)O(1)。</li>\n<li>删除中间（非末尾）元素：O(N)O(N)。</li>\n</ul>\n</li>\n<li>查：给定指定索引，查询索引对应的元素的值，时间复杂度 O(1)O(1)。</li>\n<li>改：给定指定索引，修改索引对应的元素的值，时间复杂度 O(1)O(1)。</li>\n</ol>\n<h2 id=\"动态数组\"><a href=\"#动态数组\" class=\"headerlink\" title=\"动态数组\"></a>动态数组</h2><p><strong>动态数组底层还是静态数组，只是自动帮我们进行数组空间的扩缩容，并把增删查改操作进行了封装，让我们使用起来更方便而已</strong>。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建动态数组</span></span><br><span class=\"line\"><span class=\"comment\">// 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容</span></span><br><span class=\"line\">ArrayList&lt;Integer&gt; arr = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 在末尾追加元素，时间复杂度 O(1)</span></span><br><span class=\"line\">    arr.add(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在中间插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\">// 在索引 2 的位置插入元素 666</span></span><br><span class=\"line\">arr.add(<span class=\"number\">2</span>, <span class=\"number\">666</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在头部插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\">arr.add(<span class=\"number\">0</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除末尾元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.remove(arr.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除中间元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\">// 删除索引 2 的元素</span></span><br><span class=\"line\">arr.remove(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据索引查询元素，时间复杂度 O(1)</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> arr.get(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据索引修改元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.set(<span class=\"number\">0</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据元素值查找索引，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> arr.indexOf(<span class=\"number\">666</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建动态数组</span></span><br><span class=\"line\"><span class=\"comment\"># 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容</span></span><br><span class=\"line\">arr = []</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 在末尾追加元素，时间复杂度 O(1)</span></span><br><span class=\"line\">    arr.append(i)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在中间插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\"># 在索引 2 的位置插入元素 666</span></span><br><span class=\"line\">arr.insert(<span class=\"number\">2</span>, <span class=\"number\">666</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在头部插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\">arr.insert(<span class=\"number\">0</span>, -<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除末尾元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.pop()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除中间元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\"># 删除索引 2 的元素</span></span><br><span class=\"line\">arr.pop(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据索引查询元素，时间复杂度 O(1)</span></span><br><span class=\"line\">a = arr[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据索引修改元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据元素值查找索引，时间复杂度 O(N)</span></span><br><span class=\"line\">index = arr.index(<span class=\"number\">666</span>)</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h2 id=\"静态-动态数组实质\"><a href=\"#静态-动态数组实质\" class=\"headerlink\" title=\"静态&#x2F;动态数组实质\"></a>静态&#x2F;动态数组实质</h2><ul>\n<li>「静态数组」就是一块<strong>连续的内存空间</strong>，我们可以通过索引来访问这块内存空间中的元素，这是数组的原始形态。</li>\n<li>「动态数组」是编程语言为了方便我们使用，在静态数组的基础上帮我们添加了一些常用的      API，比如 <code>push, insert, remove</code> 等等方法</li>\n</ul>\n<h2 id=\"静态数组\"><a href=\"#静态数组\" class=\"headerlink\" title=\"静态数组\"></a>静态数组</h2><p>静态数组在创建的时候就要确定数组的元素类型和元素数量。</p>\n<blockquote>\n<p>只有在 C++、Java、Golang 这类语言中才提供了创建静态数组的方式，类似 Python、JavaScript 这类语言并没有提供静态数组的定义方式</p>\n</blockquote>\n<h4 id=\"定义一个静态数组的方法：\"><a href=\"#定义一个静态数组的方法：\" class=\"headerlink\" title=\"定义一个静态数组的方法：\"></a>定义一个静态数组的方法：</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义一个大小为 10 的静态数组</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用索引赋值</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">arr[<span class=\"number\">1</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 使用索引取值</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> arr[<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 严格来说，Python 没有静态数组的定义方式</span></span><br><span class=\"line\"><span class=\"comment\"># 我们暂且使用列表模拟静态数组</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义一个大小为 10 的静态数组</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用索引赋值</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">arr[<span class=\"number\">1</span>] = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 使用索引取值</span></span><br><span class=\"line\">a = arr[<span class=\"number\">0</span>]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"内核操作\"><a href=\"#内核操作\" class=\"headerlink\" title=\"内核操作\"></a>内核操作</h4><p><code>int arr[10]</code> 这段代码到底做了什么事情呢？</p>\n<ol>\n<li>在内存中开辟了一段<strong>连续的内存空间</strong>，大小是 <code>10 * sizeof(int)</code> 字节。一个 int 在计算机内存中占 4 字节，也就是总共 40 字节。</li>\n<li>定义了一个名为 <code>arr</code> 的数组指针，指向这段内存空间的首地址。</li>\n</ol>\n<p> <code>arr[1] = 2</code> 这段代码又做了什么事情呢？</p>\n<ol>\n<li>计算 <code>arr</code> 的首地址加上 <code>1 * sizeof(int)</code> 字节（4 字节）的偏移量，找到了内存空间中的第二个元素的<strong>首地址</strong>。</li>\n<li>从这个地址开始的 4 个字节的内存空间中写入了整数 <code>2</code>。</li>\n</ol>\n<blockquote>\n<ol>\n<li>为什么数组的索引从 0 开始？<br> 就是方便取地址。<code>arr[0]</code> 就是 <code>arr</code> 的首地址，就是 <code>arr</code> 的首地址加上 <code>0 * 4</code> 字节,从这个地址往后的 4 个字节存储着第一个元素的值；<code>arr[1]</code> 就是 <code>arr</code> 的首地址加上 <code>1 * 4</code> 字节，也就是第二个元素的首地址，这个地址往后的 4 个字节存储着第二个元素的值。<code>arr[2], arr[3]</code> 以此类推。</li>\n<li>因为数组的名字 <code>arr</code> 就指向整块内存的首地址，所以数组名 <code>arr</code> 就是一个指针。你直接取这个地址的值，就是第一个元素的值。也就是说，<code>*arr</code> 的值就是 <code>乘以arr[0]</code>，即第一个元素的值</li>\n</ol>\n</blockquote>\n<p>&#x3D;&#x3D;内存空间首地址已知、大小已知、内存空间连续，所以，我们获得了数组的超能力「<strong>随机访问」</strong>：只要给定任何一个数组索引，我可以在 O(1)O(1) 的时间内直接获取到对应元素的值。<br>因为我可以通过首地址和索引直接计算出目标元素的内存地址。计算机的内存寻址时间可以认为是 O(1)O(1)，所以数组的随机访问时间复杂度是 O(1)O(1)。&#x3D;&#x3D;</p>\n<h3 id=\"增删查改\"><a href=\"#增删查改\" class=\"headerlink\" title=\"增删查改\"></a>增删查改</h3><h4 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h4><h5 id=\"末尾追加-时间复杂度是-O-1\"><a href=\"#末尾追加-时间复杂度是-O-1\" class=\"headerlink\" title=\"末尾追加 - 时间复杂度是 O(1)\"></a>末尾追加 - 时间复杂度是 O(1)</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在想在数组末尾追加一个元素 4</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = <span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 再在数组末尾追加一个元素 5</span></span><br><span class=\"line\">arr[<span class=\"number\">5</span>] = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 依此类推</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在想在数组末尾追加一个元素 4</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = <span class=\"number\">4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 再在数组末尾追加一个元素 5</span></span><br><span class=\"line\">arr[<span class=\"number\">5</span>] = <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 依此类推</span></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"中间插入-时间复杂度是-O-N\"><a href=\"#中间插入-时间复杂度是-O-N\" class=\"headerlink\" title=\"中间插入 - 时间复杂度是 O(N)\"></a>中间插入 - 时间复杂度是 O(N)</h5><p>这就要涉及「数据搬移」，给新元素腾出空位，然后再才能插入新元素。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在索引 2 置插入元素 666</span></span><br><span class=\"line\"><span class=\"comment\">// 需要把索引 2 以及之后的元素都往后移动一位</span></span><br><span class=\"line\"><span class=\"comment\">// 注意要倒着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">4</span>; i &gt; <span class=\"number\">2</span>; i--) &#123;</span><br><span class=\"line\">    arr[i] = arr[i - <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在第 3 个位置空出来了，可以插入新元素</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>] = <span class=\"number\">666</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 4 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">4</span>, <span class=\"number\">2</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">    arr[i] = arr[i - <span class=\"number\">1</span>]</span><br><span class=\"line\"><span class=\"comment\"># 现在第 3 个位置空出来了，可以插入新元素</span></span><br><span class=\"line\">arr[<span class=\"number\">2</span>] = <span class=\"number\">666</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"数组空间已满-时间复杂度是-O-N\"><a href=\"#数组空间已满-时间复杂度是-O-N\" class=\"headerlink\" title=\"数组空间已满 - 时间复杂度是 O(N)\"></a>数组空间已满 - 时间复杂度是 O(N)</h5><p><strong>连续内存必须一次性分配，分配完了之后就不能随意增减了</strong>。因为你这块连续内存后面的内存空间可能已经被其他程序占用了，不能说你想要就给你。<br>那怎么办呢？只能重新申请一块更大的内存空间，把原来的数据复制过去，再插入新的元素，这就是数组的「扩容」操作。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装满了</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在想在数组末尾追加一个元素 10</span></span><br><span class=\"line\"><span class=\"comment\">// 需要先扩容数组</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] newArr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">20</span>];</span><br><span class=\"line\"><span class=\"comment\">// 把原来的 10 个元素复制过去</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    newArr[i] = arr[i];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 旧数组的内存空间将由垃圾收集器处理</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在新的大数组中追加新元素</span></span><br><span class=\"line\">newArr[<span class=\"number\">10</span>] = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装满了</span></span><br><span class=\"line\">arr = [i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>)]</span><br><span class=\"line\"></span><br><span class=\"line\">newArr = [<span class=\"number\">0</span>] * <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    newArr[i] = arr[i]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 释放旧数组的内存空间</span></span><br><span class=\"line\"><span class=\"comment\"># 在新的大数组中追加新元素</span></span><br><span class=\"line\">newArr[<span class=\"number\">10</span>] = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h4><h5 id=\"删除末尾元素-时间复杂度是-O-1\"><a href=\"#删除末尾元素-时间复杂度是-O-1\" class=\"headerlink\" title=\"删除末尾元素 - 时间复杂度是 O(1)\"></a>删除末尾元素 - 时间复杂度是 O(1)</h5><p>直接把末尾元素标记为一个特殊值代表已删除就行了，我们这里简单举例，就用 -1 作为特殊值代表已删除好了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除末尾元素，暂时用 -1 代表元素已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">5</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除末尾元素，暂时用 -1 代表元素已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"删除中间元素-时间复杂度是-O-N\"><a href=\"#删除中间元素-时间复杂度是-O-N\" class=\"headerlink\" title=\"删除中间元素 - 时间复杂度是 O(N)\"></a>删除中间元素 - 时间复杂度是 O(N)</h5><p>这也要涉及「数据搬移」，把被删元素后面的元素都往前移动一位，保持数组元素的连续性。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\"><span class=\"type\">int</span>[] arr = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = i;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除 arr[1]</span></span><br><span class=\"line\"><span class=\"comment\">// 需要把 arr[1] 之后的元素都往前移动一位</span></span><br><span class=\"line\"><span class=\"comment\">// 注意要正着遍历数组中已有元素避免覆盖，不懂的话请看下方可视化面板</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">    arr[i] = arr[i + <span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 最后一个元素置为 -1 代表已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 大小为 10 的数组已经装了 5 个元素</span></span><br><span class=\"line\">arr = [<span class=\"number\">0</span>] * <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">5</span>):</span><br><span class=\"line\">    arr[i] = i</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">4</span>):</span><br><span class=\"line\">    arr[i] = arr[i + <span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 最后一个元素置为 -1 代表已删除</span></span><br><span class=\"line\">arr[<span class=\"number\">4</span>] = -<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>综上，静态数组的增删查改操作的时间复杂度是：</p>\n<ol>\n<li>增：<ul>\n<li>在末尾追加元素：O(1)O(1)。</li>\n<li>在中间（非末尾）插入元素：O(N)O(N)。</li>\n</ul>\n</li>\n<li>删：<ul>\n<li>删除末尾元素：O(1)O(1)。</li>\n<li>删除中间（非末尾）元素：O(N)O(N)。</li>\n</ul>\n</li>\n<li>查：给定指定索引，查询索引对应的元素的值，时间复杂度 O(1)O(1)。</li>\n<li>改：给定指定索引，修改索引对应的元素的值，时间复杂度 O(1)O(1)。</li>\n</ol>\n<h2 id=\"动态数组\"><a href=\"#动态数组\" class=\"headerlink\" title=\"动态数组\"></a>动态数组</h2><p><strong>动态数组底层还是静态数组，只是自动帮我们进行数组空间的扩缩容，并把增删查改操作进行了封装，让我们使用起来更方便而已</strong>。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建动态数组</span></span><br><span class=\"line\"><span class=\"comment\">// 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容</span></span><br><span class=\"line\">ArrayList&lt;Integer&gt; arr = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 在末尾追加元素，时间复杂度 O(1)</span></span><br><span class=\"line\">    arr.add(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在中间插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\">// 在索引 2 的位置插入元素 666</span></span><br><span class=\"line\">arr.add(<span class=\"number\">2</span>, <span class=\"number\">666</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在头部插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\">arr.add(<span class=\"number\">0</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除末尾元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.remove(arr.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除中间元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\">// 删除索引 2 的元素</span></span><br><span class=\"line\">arr.remove(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据索引查询元素，时间复杂度 O(1)</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">a</span> <span class=\"operator\">=</span> arr.get(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据索引修改元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.set(<span class=\"number\">0</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据元素值查找索引，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"variable\">index</span> <span class=\"operator\">=</span> arr.indexOf(<span class=\"number\">666</span>);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建动态数组</span></span><br><span class=\"line\"><span class=\"comment\"># 不用显式指定数组大小，它会根据实际存储的元素数量自动扩缩容</span></span><br><span class=\"line\">arr = []</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 在末尾追加元素，时间复杂度 O(1)</span></span><br><span class=\"line\">    arr.append(i)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在中间插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\"># 在索引 2 的位置插入元素 666</span></span><br><span class=\"line\">arr.insert(<span class=\"number\">2</span>, <span class=\"number\">666</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在头部插入元素，时间复杂度 O(N)</span></span><br><span class=\"line\">arr.insert(<span class=\"number\">0</span>, -<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除末尾元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr.pop()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除中间元素，时间复杂度 O(N)</span></span><br><span class=\"line\"><span class=\"comment\"># 删除索引 2 的元素</span></span><br><span class=\"line\">arr.pop(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据索引查询元素，时间复杂度 O(1)</span></span><br><span class=\"line\">a = arr[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据索引修改元素，时间复杂度 O(1)</span></span><br><span class=\"line\">arr[<span class=\"number\">0</span>] = <span class=\"number\">100</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 根据元素值查找索引，时间复杂度 O(N)</span></span><br><span class=\"line\">index = arr.index(<span class=\"number\">666</span>)</span><br></pre></td></tr></table></figure>"},{"title":"为什么称Tomcat为服务器？","date":"2025-07-15T16:00:00.000Z","cssclasses":["Serve","Tomcat"],"_content":"服务器应该是冷冰冰的大铁柜，在恒温恒湿的机房里待着，所以Tomcat是什么呢，为什么也叫服务器呢？\n\n## **我们为什么需要服务器？**\n\n在我看来，服务器最本质的作用有两个：\n\n- 将资源对外暴露\n- 配合各种传输协议进行响应输出\n\n假设现在有个问题：\n\n> 给你两台电脑，不通过蓝牙/QQ/微信，也不通过网盘或USB等可移动设备做中介，你要如何把一张图片从一台电脑传到另一台？\n\n![](https://picx.zhimg.com/50/v2-aac37732401f6a92d61e7e7887a3ace5_720w.jpg?source=2c26e567)\n\n听到这个问题，我估计大部分非科班的朋友都要懵。因为如果后期没有刻意去学习计算机网络，我们对于网络的了解基本仅限于基础班4小时的“网络编程”讲解。而大家平时又太习惯地址栏键入\"[www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com/)\"，无脑一回车就上网冲浪了。现在突然让你去访问隔壁的电脑，确实有点束手无策。\n\n解决这个问题的方法可能有多种，这里介绍其中一种：通过服务器访问。\n\n请先了解以下三个概念：\n\n- IP：电子设备（计算机）在网络中的唯一标识，一个IP对应一台**实体**电脑\n- 端口：应用程序在计算机中的唯一标识，一个端口只能被唯一程序占用\n- 传输协议：数据传输的规则\n\n中国有14亿人口，每个人都有唯一的身份标识：身份证，用以精确定位某个个体。同样的，网络上有几十亿台电脑，每台电脑都有自己的一串特有IP（不同局域网内可以相同），也就是说一个IP代表一台特定的**实体**电脑。比如《唐伯虎点秋香》中华安的编号是9527，而华府的管家从不叫他名字，而是直接喊“9527”。因为“9527”就是华安。\n\n![](https://pica.zhimg.com/50/v2-9426b26e3fc6b83d059219f332709e7b_720w.jpg?source=2c26e567)\n\n虽然根据IP可以精准定位一台电脑，但是还不足以让我们访问这台电脑。就好比你知道了我的门牌号，但是我没给你开门。所谓的门，就是一个端口，而端口的背后是应用程序。\n\n一般来说，一个端口可以定位一个软件，但一个软件可以占用多个端口（你家的门，只属于你家，但可以有前后门）。在现实生活中，你家的门如果被别人占用了或者堵了，客人（请求）就进不去了。而在程序中，如果有两个程序的端口相同，就会发生端口冲突，也就是所谓的“端口占用”。端口占用的后果往往是程序无法启动，更遑论运行。\n\n关于端口，再举个例子：\n\n微信和QQ都是腾讯公司的，你的电脑上同时装了这两个软件。为什么我用QQ给你发消息，你的微信收不到？正常人看起来很傻的问题，实际上并不是那么简单。\n\n![](https://pic1.zhimg.com/50/v2-9e08ae4c572d55eb4c6e652f14902496_720w.jpg?source=2c26e567)\n\n每个应用程序都有自己的端口号（可能有多个），它们一旦运行，就要去监听这些端口。每个程序都是电脑的囚犯，看不到外面的世界，而端口就是给这些囚犯送饭的窗口。应用程序们整天躲在电脑里盯着自己的端口们，祈求着别的计算机来访时能送个大鸡腿(Request请求)。\n\n其实QQ这些软件属于C/S架构，已经为我们屏蔽了太多底层，什么IP、端口全部都是自动封装的。相比来说，B/S架构更直观一些。比如用浏览器访问百度：\n\n![](https://picx.zhimg.com/50/v2-1ebb772d4f718d6a2fefac68bb1a15d4_720w.jpg?source=2c26e567)\n\n不知道有没有细心的朋友注意到了下面的细节：\n\n![](https://pica.zhimg.com/50/v2-8aa4aa66f571b33062fd1274f2043fa8_720w.jpg?source=2c26e567)\n\n即使DNS解析域名得到对应的IP后，Request请求里还是会带上host。为什么？\n\n**因为：域名!=IP。**\n\n实际上一个IP可以对应多个域名。也就是说**一台实体服务器（大铁柜）**，理论上可以有**多个域名（虚拟主机）。**实体服务器和网站是两个概念。**IP只是对应实体服务器，而域名对应具体的网站。**\n\n比如上面百度服务器，虽然看起来115.239.210.27这个IP完全等同于[http://www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com)，但也有可能这个IP对应的服务器上配置了两个虚拟主机：[www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com/)和[tieba.baidu.com](https://link.zhihu.com/?target=http%3A//tieba.baidu.com/)。所以即使找到了IP对应的服务器实体，Request请求还是要带上host主机名，以确定是哪个虚拟主机。\n\n![](https://picx.zhimg.com/50/v2-47a7ba9165e0081e5c6dea7a0bf0423a_720w.jpg?source=2c26e567)\n\n另外，如果两个域名对应同一个IP，那么必须设置其中一个域名为默认的，不然同一台服务器有两个虚拟主机，我该访问谁？\n\n![](https://pic1.zhimg.com/50/v2-5af11c448cb3de2311ad91df8578ed3c_720w.jpg?source=2c26e567)\n\n最后，再用Tomcat举个例子。比如，现在我有一台笔记本电脑（一个实体服务器），它的本机IP是192.168.112.1，我在上面装了Tomcat。如果Tomcat不改动配置，则默认只有一个虚拟主机localhost（默认主机）。接着我开发了一个JavaWeb程序demo1部署到Tomcat，然后我同事在浏览器输入下方地址\n\n```text\n192.168.112.1:8080/demo1/index.html\n```\n\n访问我的电脑。虽然没有带host，但是localhost是默认的，于是访问它。\n\n![](https://pic1.zhimg.com/50/v2-453c49379a5816d1f19c7f965d721151_720w.jpg?source=2c26e567)\n\n最后必须解释的是，上面的百度服务器只是举个例子，实际上百度搜索和百度贴吧的IP是不同的，也就是说它们不在同一台服务器上。通常来说，一个IP对应一台服务器，服务器上只有一个主机。拿到IP基本就可以确定要访问哪个网站。\n\n![](https://pic1.zhimg.com/50/v2-79d343e2d5d3d5d9574d075aba1e6cd6_720w.jpg?source=2c26e567)\n\n![](https://picx.zhimg.com/50/v2-79ab58d3761d889a07efbaa99e081d19_720w.jpg?source=2c26e567)\n\n---\n\n## **3个容易混淆的小概念**\n\n我们经常开口闭口“服务器”、“服务器”的，其实“服务器”是个很容易引发歧义的概念，我能想到的就有3点：\n\n### 软件概念的服务器和硬件概念的服务器\n\n软件概念上，只要是一台硬件配置正常、装有操作系统、插着电能上网，并且安装特定软件的电脑，都可以称为服务器。比如你要学习数据库了，于是你装了MySQL服务端，那么此时你的电脑就是一个MySQL服务器。然后你又装了SVN服务端，那么此时你的电脑既是MySQL服务器，又是SVN服务器。Tomcat服务器同理。\n\n硬件概念上，服务器本质上也是一台电脑，只不过配置高的同时长相丑了点，基本就是一个冰冷的大铁柜。我们的笔记本电脑既能看片又能玩游戏，而它们基本上专机专用。\n\n### Web服务器？Web容器？\n\n其实，Tomcat服务器 = Web服务器 + Servlet/JSP容器（Web容器）。\n\nWeb服务器的作用是接收客户端的请求，给客户端作出响应。但是很明显，服务器不止静态资源呀，所以客户端发起请求后，如果是动态资源，Web服务器不可能直接把它响应回去（比如JSP），因为浏览器只认识静态资源。所以对于JavaWeb程序而言，还需要JSP/Servlet容器，**JSP/Servlet容器的基本功能是把动态资源转换成静态资源。**我们JavaWeb工程师需要使用Web服务器和JSP/Servlet容器，而通常这两者会集于一身，比如Tomcat。\n\n![](https://pic1.zhimg.com/50/v2-c1761ba4e406196374fb7734966e8f97_720w.jpg?source=2c26e567)\n\n所以刚才我们画的百度服务器，其实细节还可以更丰满些：\n\n![](https://pica.zhimg.com/50/v2-3a892ca4b13c7c22d395d4e7f7b5468f_720w.jpg?source=2c26e567)\n\n![](https://pic1.zhimg.com/50/v2-2f0979f08ceb7f64d169676069720bd6_720w.jpg?source=2c26e567)\n\n### 我们开发的Web应用都是半成品！\n\n我们写代码的时候，都知道相同代码最好抽取成公共方法以复用。现在我们来想一想，上百上千的Web应用有什么共性吗？首先，资源肯定不同，无法抽取。比如优酷主打视频，知乎基本都是文字。其次，业务也肯定不同，比如百度主要是搜索，淘宝是电商。但是有一点是一样的，这些网站都需要“接收用户请求”+“响应用户请求”。\n\n嗯？桥多麻袋！！这两个概念，好像哪里见过！不错，就是上面的Web服务器。仔细回想一下，我们开发JavaWeb时，你操心过如何接收HTTP请求和响应HTTP请求吗？显然没有嘛！因为你一直忙着debug。\n\n**所以，我们用Java开发的Web应用只是一个半成品，类似于一个插件**，而服务器则像一个收发器：\n\n![](https://picx.zhimg.com/50/v2-3a0b16ad4fbe56db177c72f674988896_720w.jpg?source=2c26e567)\n\n  \n\n---\n\n## **什么是动态资源？**\n\n其实对于何谓动态资源，我也没有很精准的概念。要讲清楚一个东西是什么，有时是比较难的事。不如先说它不是什么。\n\n首先，**动态资源不等同于动态页面。**所谓动态页面，就是页面会动，而会动的页面不一定是动态资源。比如我可以用JQuery执行一段代码，让一个Div不断放大缩小，但是很显然它还是一个HTML页面。\n\n**所谓动态资源，其实最显著的特征就是它能动态地生成HTML！**比如JSP。动态资源有个“特色”：它的数据是“可拼装”的、而且“可以随时间变化”。下面用号称可以抗住8个明星同时出轨的新浪服务器举个例子：\n\n![](https://pic1.zhimg.com/50/v2-38f7da8e2645d23d7b89bfe5e6579b93_720w.jpg?source=2c26e567)\n\n突然，新浪《花花世界》专栏的小编发现，原来和bravo1988有绯闻的不是刘亦菲，而是佟丽娅，于是打开专栏做了修改：\n\n![](https://picx.zhimg.com/50/v2-7163a0b73be6115eab0d91098e53204a_720w.jpg?source=2c26e567)\n\n此时，粉丝们再次打开《花花世界》专栏，看到的就是：佟丽娅深夜买醉bravo。\n\n上面这个例子很好地说明了动态资源（JSP）的两个特性：\n\n- 可拼装：${name}\"深夜买醉bravo\"\n- 随时间变化：刘亦菲→佟丽娅\n\n那么为什么说HTML就是静态资源呢？我也可以修改HTML页面使它发生改变啊！很好，很有想法。那么请小编先学会Linux，然后远程连接服务器进入到Tomcat目录下修改吧。\n\n![](https://pica.zhimg.com/50/v2-d29651cfbd959e8d4cad551feabc1046_720w.jpg?source=2c26e567)\n\n动态资源和静态资源虽然都在服务器里，但是动态资源包含变量（“可拼装”特性），而变量维系着数据库和程序之间的联系。\n\n如果把JSP比作电子广告牌，变量比作一根电线，而电线连接着一台电脑（数据库服务器）。那么只要电脑上重新编辑文本，广告牌的内容也会变，此谓动态。而静态资源就像一张布告，当初写什么就是什么，任他风吹雨打，都不会再改变了。\n\n![](https://pica.zhimg.com/50/v2-07d5a0b4c4aea91562adfe8970a6983b_720w.jpg?source=2c26e567)\n\n  \n\n## **动手实现\"Tomcat\"**\n\n最后，还有个很无聊的问题留给大家思考：JavaSE阶段，我们无论做什么，都是上来先敲main()。学了JavaWeb后，我想问问，你有多久没敲main()了？她去哪了呢？\n\n动手实现Tomcat（黑马公开课）：\n\n链接：[https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw) 密码：35se\n\n![](https://picx.zhimg.com/50/v2-b58fff7721b59b7f784193041339c499_720w.jpg?source=2c26e567)\n\n---\n作者：bravo1988  \n链接：https://www.zhihu.com/question/391134143/answer/1777384319  \n来源：知乎  ","source":"Serve/为什么称Tomcat为服务器？.md","raw":"---\ntitle: 为什么称Tomcat为服务器？\ndate: 2025-07-16\ncssclasses:\n  - Serve\n  - Tomcat\n---\n服务器应该是冷冰冰的大铁柜，在恒温恒湿的机房里待着，所以Tomcat是什么呢，为什么也叫服务器呢？\n\n## **我们为什么需要服务器？**\n\n在我看来，服务器最本质的作用有两个：\n\n- 将资源对外暴露\n- 配合各种传输协议进行响应输出\n\n假设现在有个问题：\n\n> 给你两台电脑，不通过蓝牙/QQ/微信，也不通过网盘或USB等可移动设备做中介，你要如何把一张图片从一台电脑传到另一台？\n\n![](https://picx.zhimg.com/50/v2-aac37732401f6a92d61e7e7887a3ace5_720w.jpg?source=2c26e567)\n\n听到这个问题，我估计大部分非科班的朋友都要懵。因为如果后期没有刻意去学习计算机网络，我们对于网络的了解基本仅限于基础班4小时的“网络编程”讲解。而大家平时又太习惯地址栏键入\"[www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com/)\"，无脑一回车就上网冲浪了。现在突然让你去访问隔壁的电脑，确实有点束手无策。\n\n解决这个问题的方法可能有多种，这里介绍其中一种：通过服务器访问。\n\n请先了解以下三个概念：\n\n- IP：电子设备（计算机）在网络中的唯一标识，一个IP对应一台**实体**电脑\n- 端口：应用程序在计算机中的唯一标识，一个端口只能被唯一程序占用\n- 传输协议：数据传输的规则\n\n中国有14亿人口，每个人都有唯一的身份标识：身份证，用以精确定位某个个体。同样的，网络上有几十亿台电脑，每台电脑都有自己的一串特有IP（不同局域网内可以相同），也就是说一个IP代表一台特定的**实体**电脑。比如《唐伯虎点秋香》中华安的编号是9527，而华府的管家从不叫他名字，而是直接喊“9527”。因为“9527”就是华安。\n\n![](https://pica.zhimg.com/50/v2-9426b26e3fc6b83d059219f332709e7b_720w.jpg?source=2c26e567)\n\n虽然根据IP可以精准定位一台电脑，但是还不足以让我们访问这台电脑。就好比你知道了我的门牌号，但是我没给你开门。所谓的门，就是一个端口，而端口的背后是应用程序。\n\n一般来说，一个端口可以定位一个软件，但一个软件可以占用多个端口（你家的门，只属于你家，但可以有前后门）。在现实生活中，你家的门如果被别人占用了或者堵了，客人（请求）就进不去了。而在程序中，如果有两个程序的端口相同，就会发生端口冲突，也就是所谓的“端口占用”。端口占用的后果往往是程序无法启动，更遑论运行。\n\n关于端口，再举个例子：\n\n微信和QQ都是腾讯公司的，你的电脑上同时装了这两个软件。为什么我用QQ给你发消息，你的微信收不到？正常人看起来很傻的问题，实际上并不是那么简单。\n\n![](https://pic1.zhimg.com/50/v2-9e08ae4c572d55eb4c6e652f14902496_720w.jpg?source=2c26e567)\n\n每个应用程序都有自己的端口号（可能有多个），它们一旦运行，就要去监听这些端口。每个程序都是电脑的囚犯，看不到外面的世界，而端口就是给这些囚犯送饭的窗口。应用程序们整天躲在电脑里盯着自己的端口们，祈求着别的计算机来访时能送个大鸡腿(Request请求)。\n\n其实QQ这些软件属于C/S架构，已经为我们屏蔽了太多底层，什么IP、端口全部都是自动封装的。相比来说，B/S架构更直观一些。比如用浏览器访问百度：\n\n![](https://picx.zhimg.com/50/v2-1ebb772d4f718d6a2fefac68bb1a15d4_720w.jpg?source=2c26e567)\n\n不知道有没有细心的朋友注意到了下面的细节：\n\n![](https://pica.zhimg.com/50/v2-8aa4aa66f571b33062fd1274f2043fa8_720w.jpg?source=2c26e567)\n\n即使DNS解析域名得到对应的IP后，Request请求里还是会带上host。为什么？\n\n**因为：域名!=IP。**\n\n实际上一个IP可以对应多个域名。也就是说**一台实体服务器（大铁柜）**，理论上可以有**多个域名（虚拟主机）。**实体服务器和网站是两个概念。**IP只是对应实体服务器，而域名对应具体的网站。**\n\n比如上面百度服务器，虽然看起来115.239.210.27这个IP完全等同于[http://www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com)，但也有可能这个IP对应的服务器上配置了两个虚拟主机：[www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com/)和[tieba.baidu.com](https://link.zhihu.com/?target=http%3A//tieba.baidu.com/)。所以即使找到了IP对应的服务器实体，Request请求还是要带上host主机名，以确定是哪个虚拟主机。\n\n![](https://picx.zhimg.com/50/v2-47a7ba9165e0081e5c6dea7a0bf0423a_720w.jpg?source=2c26e567)\n\n另外，如果两个域名对应同一个IP，那么必须设置其中一个域名为默认的，不然同一台服务器有两个虚拟主机，我该访问谁？\n\n![](https://pic1.zhimg.com/50/v2-5af11c448cb3de2311ad91df8578ed3c_720w.jpg?source=2c26e567)\n\n最后，再用Tomcat举个例子。比如，现在我有一台笔记本电脑（一个实体服务器），它的本机IP是192.168.112.1，我在上面装了Tomcat。如果Tomcat不改动配置，则默认只有一个虚拟主机localhost（默认主机）。接着我开发了一个JavaWeb程序demo1部署到Tomcat，然后我同事在浏览器输入下方地址\n\n```text\n192.168.112.1:8080/demo1/index.html\n```\n\n访问我的电脑。虽然没有带host，但是localhost是默认的，于是访问它。\n\n![](https://pic1.zhimg.com/50/v2-453c49379a5816d1f19c7f965d721151_720w.jpg?source=2c26e567)\n\n最后必须解释的是，上面的百度服务器只是举个例子，实际上百度搜索和百度贴吧的IP是不同的，也就是说它们不在同一台服务器上。通常来说，一个IP对应一台服务器，服务器上只有一个主机。拿到IP基本就可以确定要访问哪个网站。\n\n![](https://pic1.zhimg.com/50/v2-79d343e2d5d3d5d9574d075aba1e6cd6_720w.jpg?source=2c26e567)\n\n![](https://picx.zhimg.com/50/v2-79ab58d3761d889a07efbaa99e081d19_720w.jpg?source=2c26e567)\n\n---\n\n## **3个容易混淆的小概念**\n\n我们经常开口闭口“服务器”、“服务器”的，其实“服务器”是个很容易引发歧义的概念，我能想到的就有3点：\n\n### 软件概念的服务器和硬件概念的服务器\n\n软件概念上，只要是一台硬件配置正常、装有操作系统、插着电能上网，并且安装特定软件的电脑，都可以称为服务器。比如你要学习数据库了，于是你装了MySQL服务端，那么此时你的电脑就是一个MySQL服务器。然后你又装了SVN服务端，那么此时你的电脑既是MySQL服务器，又是SVN服务器。Tomcat服务器同理。\n\n硬件概念上，服务器本质上也是一台电脑，只不过配置高的同时长相丑了点，基本就是一个冰冷的大铁柜。我们的笔记本电脑既能看片又能玩游戏，而它们基本上专机专用。\n\n### Web服务器？Web容器？\n\n其实，Tomcat服务器 = Web服务器 + Servlet/JSP容器（Web容器）。\n\nWeb服务器的作用是接收客户端的请求，给客户端作出响应。但是很明显，服务器不止静态资源呀，所以客户端发起请求后，如果是动态资源，Web服务器不可能直接把它响应回去（比如JSP），因为浏览器只认识静态资源。所以对于JavaWeb程序而言，还需要JSP/Servlet容器，**JSP/Servlet容器的基本功能是把动态资源转换成静态资源。**我们JavaWeb工程师需要使用Web服务器和JSP/Servlet容器，而通常这两者会集于一身，比如Tomcat。\n\n![](https://pic1.zhimg.com/50/v2-c1761ba4e406196374fb7734966e8f97_720w.jpg?source=2c26e567)\n\n所以刚才我们画的百度服务器，其实细节还可以更丰满些：\n\n![](https://pica.zhimg.com/50/v2-3a892ca4b13c7c22d395d4e7f7b5468f_720w.jpg?source=2c26e567)\n\n![](https://pic1.zhimg.com/50/v2-2f0979f08ceb7f64d169676069720bd6_720w.jpg?source=2c26e567)\n\n### 我们开发的Web应用都是半成品！\n\n我们写代码的时候，都知道相同代码最好抽取成公共方法以复用。现在我们来想一想，上百上千的Web应用有什么共性吗？首先，资源肯定不同，无法抽取。比如优酷主打视频，知乎基本都是文字。其次，业务也肯定不同，比如百度主要是搜索，淘宝是电商。但是有一点是一样的，这些网站都需要“接收用户请求”+“响应用户请求”。\n\n嗯？桥多麻袋！！这两个概念，好像哪里见过！不错，就是上面的Web服务器。仔细回想一下，我们开发JavaWeb时，你操心过如何接收HTTP请求和响应HTTP请求吗？显然没有嘛！因为你一直忙着debug。\n\n**所以，我们用Java开发的Web应用只是一个半成品，类似于一个插件**，而服务器则像一个收发器：\n\n![](https://picx.zhimg.com/50/v2-3a0b16ad4fbe56db177c72f674988896_720w.jpg?source=2c26e567)\n\n  \n\n---\n\n## **什么是动态资源？**\n\n其实对于何谓动态资源，我也没有很精准的概念。要讲清楚一个东西是什么，有时是比较难的事。不如先说它不是什么。\n\n首先，**动态资源不等同于动态页面。**所谓动态页面，就是页面会动，而会动的页面不一定是动态资源。比如我可以用JQuery执行一段代码，让一个Div不断放大缩小，但是很显然它还是一个HTML页面。\n\n**所谓动态资源，其实最显著的特征就是它能动态地生成HTML！**比如JSP。动态资源有个“特色”：它的数据是“可拼装”的、而且“可以随时间变化”。下面用号称可以抗住8个明星同时出轨的新浪服务器举个例子：\n\n![](https://pic1.zhimg.com/50/v2-38f7da8e2645d23d7b89bfe5e6579b93_720w.jpg?source=2c26e567)\n\n突然，新浪《花花世界》专栏的小编发现，原来和bravo1988有绯闻的不是刘亦菲，而是佟丽娅，于是打开专栏做了修改：\n\n![](https://picx.zhimg.com/50/v2-7163a0b73be6115eab0d91098e53204a_720w.jpg?source=2c26e567)\n\n此时，粉丝们再次打开《花花世界》专栏，看到的就是：佟丽娅深夜买醉bravo。\n\n上面这个例子很好地说明了动态资源（JSP）的两个特性：\n\n- 可拼装：${name}\"深夜买醉bravo\"\n- 随时间变化：刘亦菲→佟丽娅\n\n那么为什么说HTML就是静态资源呢？我也可以修改HTML页面使它发生改变啊！很好，很有想法。那么请小编先学会Linux，然后远程连接服务器进入到Tomcat目录下修改吧。\n\n![](https://pica.zhimg.com/50/v2-d29651cfbd959e8d4cad551feabc1046_720w.jpg?source=2c26e567)\n\n动态资源和静态资源虽然都在服务器里，但是动态资源包含变量（“可拼装”特性），而变量维系着数据库和程序之间的联系。\n\n如果把JSP比作电子广告牌，变量比作一根电线，而电线连接着一台电脑（数据库服务器）。那么只要电脑上重新编辑文本，广告牌的内容也会变，此谓动态。而静态资源就像一张布告，当初写什么就是什么，任他风吹雨打，都不会再改变了。\n\n![](https://pica.zhimg.com/50/v2-07d5a0b4c4aea91562adfe8970a6983b_720w.jpg?source=2c26e567)\n\n  \n\n## **动手实现\"Tomcat\"**\n\n最后，还有个很无聊的问题留给大家思考：JavaSE阶段，我们无论做什么，都是上来先敲main()。学了JavaWeb后，我想问问，你有多久没敲main()了？她去哪了呢？\n\n动手实现Tomcat（黑马公开课）：\n\n链接：[https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw](https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw) 密码：35se\n\n![](https://picx.zhimg.com/50/v2-b58fff7721b59b7f784193041339c499_720w.jpg?source=2c26e567)\n\n---\n作者：bravo1988  \n链接：https://www.zhihu.com/question/391134143/answer/1777384319  \n来源：知乎  ","updated":"2025-07-16T10:39:58.988Z","path":"Serve/为什么称Tomcat为服务器？.html","comments":1,"layout":"page","_id":"cmdh6nnwi000j9gv3g0kc9r3f","content":"<p>服务器应该是冷冰冰的大铁柜，在恒温恒湿的机房里待着，所以Tomcat是什么呢，为什么也叫服务器呢？</p>\n<h2 id=\"我们为什么需要服务器？\"><a href=\"#我们为什么需要服务器？\" class=\"headerlink\" title=\"我们为什么需要服务器？\"></a><strong>我们为什么需要服务器？</strong></h2><p>在我看来，服务器最本质的作用有两个：</p>\n<ul>\n<li>将资源对外暴露</li>\n<li>配合各种传输协议进行响应输出</li>\n</ul>\n<p>假设现在有个问题：</p>\n<blockquote>\n<p>给你两台电脑，不通过蓝牙&#x2F;QQ&#x2F;微信，也不通过网盘或USB等可移动设备做中介，你要如何把一张图片从一台电脑传到另一台？</p>\n</blockquote>\n<p><img src=\"https://picx.zhimg.com/50/v2-aac37732401f6a92d61e7e7887a3ace5_720w.jpg?source=2c26e567\"></p>\n<p>听到这个问题，我估计大部分非科班的朋友都要懵。因为如果后期没有刻意去学习计算机网络，我们对于网络的了解基本仅限于基础班4小时的“网络编程”讲解。而大家平时又太习惯地址栏键入”<a href=\"https://link.zhihu.com/?target=http://www.baidu.com/\">www.baidu.com</a>“，无脑一回车就上网冲浪了。现在突然让你去访问隔壁的电脑，确实有点束手无策。</p>\n<p>解决这个问题的方法可能有多种，这里介绍其中一种：通过服务器访问。</p>\n<p>请先了解以下三个概念：</p>\n<ul>\n<li>IP：电子设备（计算机）在网络中的唯一标识，一个IP对应一台<strong>实体</strong>电脑</li>\n<li>端口：应用程序在计算机中的唯一标识，一个端口只能被唯一程序占用</li>\n<li>传输协议：数据传输的规则</li>\n</ul>\n<p>中国有14亿人口，每个人都有唯一的身份标识：身份证，用以精确定位某个个体。同样的，网络上有几十亿台电脑，每台电脑都有自己的一串特有IP（不同局域网内可以相同），也就是说一个IP代表一台特定的<strong>实体</strong>电脑。比如《唐伯虎点秋香》中华安的编号是9527，而华府的管家从不叫他名字，而是直接喊“9527”。因为“9527”就是华安。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-9426b26e3fc6b83d059219f332709e7b_720w.jpg?source=2c26e567\"></p>\n<p>虽然根据IP可以精准定位一台电脑，但是还不足以让我们访问这台电脑。就好比你知道了我的门牌号，但是我没给你开门。所谓的门，就是一个端口，而端口的背后是应用程序。</p>\n<p>一般来说，一个端口可以定位一个软件，但一个软件可以占用多个端口（你家的门，只属于你家，但可以有前后门）。在现实生活中，你家的门如果被别人占用了或者堵了，客人（请求）就进不去了。而在程序中，如果有两个程序的端口相同，就会发生端口冲突，也就是所谓的“端口占用”。端口占用的后果往往是程序无法启动，更遑论运行。</p>\n<p>关于端口，再举个例子：</p>\n<p>微信和QQ都是腾讯公司的，你的电脑上同时装了这两个软件。为什么我用QQ给你发消息，你的微信收不到？正常人看起来很傻的问题，实际上并不是那么简单。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-9e08ae4c572d55eb4c6e652f14902496_720w.jpg?source=2c26e567\"></p>\n<p>每个应用程序都有自己的端口号（可能有多个），它们一旦运行，就要去监听这些端口。每个程序都是电脑的囚犯，看不到外面的世界，而端口就是给这些囚犯送饭的窗口。应用程序们整天躲在电脑里盯着自己的端口们，祈求着别的计算机来访时能送个大鸡腿(Request请求)。</p>\n<p>其实QQ这些软件属于C&#x2F;S架构，已经为我们屏蔽了太多底层，什么IP、端口全部都是自动封装的。相比来说，B&#x2F;S架构更直观一些。比如用浏览器访问百度：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-1ebb772d4f718d6a2fefac68bb1a15d4_720w.jpg?source=2c26e567\"></p>\n<p>不知道有没有细心的朋友注意到了下面的细节：</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-8aa4aa66f571b33062fd1274f2043fa8_720w.jpg?source=2c26e567\"></p>\n<p>即使DNS解析域名得到对应的IP后，Request请求里还是会带上host。为什么？</p>\n<p><strong>因为：域名!&#x3D;IP。</strong></p>\n<p>实际上一个IP可以对应多个域名。也就是说<strong>一台实体服务器（大铁柜）</strong>，理论上可以有<strong>多个域名（虚拟主机）。</strong>实体服务器和网站是两个概念。<strong>IP只是对应实体服务器，而域名对应具体的网站。</strong></p>\n<p>比如上面百度服务器，虽然看起来115.239.210.27这个IP完全等同于<a href=\"https://link.zhihu.com/?target=http://www.baidu.com\">http://www.baidu.com</a>，但也有可能这个IP对应的服务器上配置了两个虚拟主机：<a href=\"https://link.zhihu.com/?target=http://www.baidu.com/\">www.baidu.com</a>和<a href=\"https://link.zhihu.com/?target=http://tieba.baidu.com/\">tieba.baidu.com</a>。所以即使找到了IP对应的服务器实体，Request请求还是要带上host主机名，以确定是哪个虚拟主机。</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-47a7ba9165e0081e5c6dea7a0bf0423a_720w.jpg?source=2c26e567\"></p>\n<p>另外，如果两个域名对应同一个IP，那么必须设置其中一个域名为默认的，不然同一台服务器有两个虚拟主机，我该访问谁？</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-5af11c448cb3de2311ad91df8578ed3c_720w.jpg?source=2c26e567\"></p>\n<p>最后，再用Tomcat举个例子。比如，现在我有一台笔记本电脑（一个实体服务器），它的本机IP是192.168.112.1，我在上面装了Tomcat。如果Tomcat不改动配置，则默认只有一个虚拟主机localhost（默认主机）。接着我开发了一个JavaWeb程序demo1部署到Tomcat，然后我同事在浏览器输入下方地址</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.112.1:8080/demo1/index.html</span><br></pre></td></tr></table></figure>\n\n<p>访问我的电脑。虽然没有带host，但是localhost是默认的，于是访问它。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-453c49379a5816d1f19c7f965d721151_720w.jpg?source=2c26e567\"></p>\n<p>最后必须解释的是，上面的百度服务器只是举个例子，实际上百度搜索和百度贴吧的IP是不同的，也就是说它们不在同一台服务器上。通常来说，一个IP对应一台服务器，服务器上只有一个主机。拿到IP基本就可以确定要访问哪个网站。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-79d343e2d5d3d5d9574d075aba1e6cd6_720w.jpg?source=2c26e567\"></p>\n<p><img src=\"https://picx.zhimg.com/50/v2-79ab58d3761d889a07efbaa99e081d19_720w.jpg?source=2c26e567\"></p>\n<hr>\n<h2 id=\"3个容易混淆的小概念\"><a href=\"#3个容易混淆的小概念\" class=\"headerlink\" title=\"3个容易混淆的小概念\"></a><strong>3个容易混淆的小概念</strong></h2><p>我们经常开口闭口“服务器”、“服务器”的，其实“服务器”是个很容易引发歧义的概念，我能想到的就有3点：</p>\n<h3 id=\"软件概念的服务器和硬件概念的服务器\"><a href=\"#软件概念的服务器和硬件概念的服务器\" class=\"headerlink\" title=\"软件概念的服务器和硬件概念的服务器\"></a>软件概念的服务器和硬件概念的服务器</h3><p>软件概念上，只要是一台硬件配置正常、装有操作系统、插着电能上网，并且安装特定软件的电脑，都可以称为服务器。比如你要学习数据库了，于是你装了MySQL服务端，那么此时你的电脑就是一个MySQL服务器。然后你又装了SVN服务端，那么此时你的电脑既是MySQL服务器，又是SVN服务器。Tomcat服务器同理。</p>\n<p>硬件概念上，服务器本质上也是一台电脑，只不过配置高的同时长相丑了点，基本就是一个冰冷的大铁柜。我们的笔记本电脑既能看片又能玩游戏，而它们基本上专机专用。</p>\n<h3 id=\"Web服务器？Web容器？\"><a href=\"#Web服务器？Web容器？\" class=\"headerlink\" title=\"Web服务器？Web容器？\"></a>Web服务器？Web容器？</h3><p>其实，Tomcat服务器 &#x3D; Web服务器 + Servlet&#x2F;JSP容器（Web容器）。</p>\n<p>Web服务器的作用是接收客户端的请求，给客户端作出响应。但是很明显，服务器不止静态资源呀，所以客户端发起请求后，如果是动态资源，Web服务器不可能直接把它响应回去（比如JSP），因为浏览器只认识静态资源。所以对于JavaWeb程序而言，还需要JSP&#x2F;Servlet容器，<strong>JSP&#x2F;Servlet容器的基本功能是把动态资源转换成静态资源。</strong>我们JavaWeb工程师需要使用Web服务器和JSP&#x2F;Servlet容器，而通常这两者会集于一身，比如Tomcat。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-c1761ba4e406196374fb7734966e8f97_720w.jpg?source=2c26e567\"></p>\n<p>所以刚才我们画的百度服务器，其实细节还可以更丰满些：</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-3a892ca4b13c7c22d395d4e7f7b5468f_720w.jpg?source=2c26e567\"></p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-2f0979f08ceb7f64d169676069720bd6_720w.jpg?source=2c26e567\"></p>\n<h3 id=\"我们开发的Web应用都是半成品！\"><a href=\"#我们开发的Web应用都是半成品！\" class=\"headerlink\" title=\"我们开发的Web应用都是半成品！\"></a>我们开发的Web应用都是半成品！</h3><p>我们写代码的时候，都知道相同代码最好抽取成公共方法以复用。现在我们来想一想，上百上千的Web应用有什么共性吗？首先，资源肯定不同，无法抽取。比如优酷主打视频，知乎基本都是文字。其次，业务也肯定不同，比如百度主要是搜索，淘宝是电商。但是有一点是一样的，这些网站都需要“接收用户请求”+“响应用户请求”。</p>\n<p>嗯？桥多麻袋！！这两个概念，好像哪里见过！不错，就是上面的Web服务器。仔细回想一下，我们开发JavaWeb时，你操心过如何接收HTTP请求和响应HTTP请求吗？显然没有嘛！因为你一直忙着debug。</p>\n<p><strong>所以，我们用Java开发的Web应用只是一个半成品，类似于一个插件</strong>，而服务器则像一个收发器：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-3a0b16ad4fbe56db177c72f674988896_720w.jpg?source=2c26e567\"></p>\n<hr>\n<h2 id=\"什么是动态资源？\"><a href=\"#什么是动态资源？\" class=\"headerlink\" title=\"什么是动态资源？\"></a><strong>什么是动态资源？</strong></h2><p>其实对于何谓动态资源，我也没有很精准的概念。要讲清楚一个东西是什么，有时是比较难的事。不如先说它不是什么。</p>\n<p>首先，<strong>动态资源不等同于动态页面。</strong>所谓动态页面，就是页面会动，而会动的页面不一定是动态资源。比如我可以用JQuery执行一段代码，让一个Div不断放大缩小，但是很显然它还是一个HTML页面。</p>\n<p><strong>所谓动态资源，其实最显著的特征就是它能动态地生成HTML！</strong>比如JSP。动态资源有个“特色”：它的数据是“可拼装”的、而且“可以随时间变化”。下面用号称可以抗住8个明星同时出轨的新浪服务器举个例子：</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-38f7da8e2645d23d7b89bfe5e6579b93_720w.jpg?source=2c26e567\"></p>\n<p>突然，新浪《花花世界》专栏的小编发现，原来和bravo1988有绯闻的不是刘亦菲，而是佟丽娅，于是打开专栏做了修改：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-7163a0b73be6115eab0d91098e53204a_720w.jpg?source=2c26e567\"></p>\n<p>此时，粉丝们再次打开《花花世界》专栏，看到的就是：佟丽娅深夜买醉bravo。</p>\n<p>上面这个例子很好地说明了动态资源（JSP）的两个特性：</p>\n<ul>\n<li>可拼装：${name}”深夜买醉bravo”</li>\n<li>随时间变化：刘亦菲→佟丽娅</li>\n</ul>\n<p>那么为什么说HTML就是静态资源呢？我也可以修改HTML页面使它发生改变啊！很好，很有想法。那么请小编先学会Linux，然后远程连接服务器进入到Tomcat目录下修改吧。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-d29651cfbd959e8d4cad551feabc1046_720w.jpg?source=2c26e567\"></p>\n<p>动态资源和静态资源虽然都在服务器里，但是动态资源包含变量（“可拼装”特性），而变量维系着数据库和程序之间的联系。</p>\n<p>如果把JSP比作电子广告牌，变量比作一根电线，而电线连接着一台电脑（数据库服务器）。那么只要电脑上重新编辑文本，广告牌的内容也会变，此谓动态。而静态资源就像一张布告，当初写什么就是什么，任他风吹雨打，都不会再改变了。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-07d5a0b4c4aea91562adfe8970a6983b_720w.jpg?source=2c26e567\"></p>\n<h2 id=\"动手实现”Tomcat”\"><a href=\"#动手实现”Tomcat”\" class=\"headerlink\" title=\"动手实现”Tomcat”\"></a><strong>动手实现”Tomcat”</strong></h2><p>最后，还有个很无聊的问题留给大家思考：JavaSE阶段，我们无论做什么，都是上来先敲main()。学了JavaWeb后，我想问问，你有多久没敲main()了？她去哪了呢？</p>\n<p>动手实现Tomcat（黑马公开课）：</p>\n<p>链接：<a href=\"https://link.zhihu.com/?target=https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw\">https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw</a> 密码：35se</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-b58fff7721b59b7f784193041339c499_720w.jpg?source=2c26e567\"></p>\n<hr>\n<p>作者：bravo1988<br>链接：<a href=\"https://www.zhihu.com/question/391134143/answer/1777384319\">https://www.zhihu.com/question/391134143/answer/1777384319</a><br>来源：知乎  </p>\n","excerpt":"","more":"<p>服务器应该是冷冰冰的大铁柜，在恒温恒湿的机房里待着，所以Tomcat是什么呢，为什么也叫服务器呢？</p>\n<h2 id=\"我们为什么需要服务器？\"><a href=\"#我们为什么需要服务器？\" class=\"headerlink\" title=\"我们为什么需要服务器？\"></a><strong>我们为什么需要服务器？</strong></h2><p>在我看来，服务器最本质的作用有两个：</p>\n<ul>\n<li>将资源对外暴露</li>\n<li>配合各种传输协议进行响应输出</li>\n</ul>\n<p>假设现在有个问题：</p>\n<blockquote>\n<p>给你两台电脑，不通过蓝牙&#x2F;QQ&#x2F;微信，也不通过网盘或USB等可移动设备做中介，你要如何把一张图片从一台电脑传到另一台？</p>\n</blockquote>\n<p><img src=\"https://picx.zhimg.com/50/v2-aac37732401f6a92d61e7e7887a3ace5_720w.jpg?source=2c26e567\"></p>\n<p>听到这个问题，我估计大部分非科班的朋友都要懵。因为如果后期没有刻意去学习计算机网络，我们对于网络的了解基本仅限于基础班4小时的“网络编程”讲解。而大家平时又太习惯地址栏键入”<a href=\"https://link.zhihu.com/?target=http://www.baidu.com/\">www.baidu.com</a>“，无脑一回车就上网冲浪了。现在突然让你去访问隔壁的电脑，确实有点束手无策。</p>\n<p>解决这个问题的方法可能有多种，这里介绍其中一种：通过服务器访问。</p>\n<p>请先了解以下三个概念：</p>\n<ul>\n<li>IP：电子设备（计算机）在网络中的唯一标识，一个IP对应一台<strong>实体</strong>电脑</li>\n<li>端口：应用程序在计算机中的唯一标识，一个端口只能被唯一程序占用</li>\n<li>传输协议：数据传输的规则</li>\n</ul>\n<p>中国有14亿人口，每个人都有唯一的身份标识：身份证，用以精确定位某个个体。同样的，网络上有几十亿台电脑，每台电脑都有自己的一串特有IP（不同局域网内可以相同），也就是说一个IP代表一台特定的<strong>实体</strong>电脑。比如《唐伯虎点秋香》中华安的编号是9527，而华府的管家从不叫他名字，而是直接喊“9527”。因为“9527”就是华安。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-9426b26e3fc6b83d059219f332709e7b_720w.jpg?source=2c26e567\"></p>\n<p>虽然根据IP可以精准定位一台电脑，但是还不足以让我们访问这台电脑。就好比你知道了我的门牌号，但是我没给你开门。所谓的门，就是一个端口，而端口的背后是应用程序。</p>\n<p>一般来说，一个端口可以定位一个软件，但一个软件可以占用多个端口（你家的门，只属于你家，但可以有前后门）。在现实生活中，你家的门如果被别人占用了或者堵了，客人（请求）就进不去了。而在程序中，如果有两个程序的端口相同，就会发生端口冲突，也就是所谓的“端口占用”。端口占用的后果往往是程序无法启动，更遑论运行。</p>\n<p>关于端口，再举个例子：</p>\n<p>微信和QQ都是腾讯公司的，你的电脑上同时装了这两个软件。为什么我用QQ给你发消息，你的微信收不到？正常人看起来很傻的问题，实际上并不是那么简单。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-9e08ae4c572d55eb4c6e652f14902496_720w.jpg?source=2c26e567\"></p>\n<p>每个应用程序都有自己的端口号（可能有多个），它们一旦运行，就要去监听这些端口。每个程序都是电脑的囚犯，看不到外面的世界，而端口就是给这些囚犯送饭的窗口。应用程序们整天躲在电脑里盯着自己的端口们，祈求着别的计算机来访时能送个大鸡腿(Request请求)。</p>\n<p>其实QQ这些软件属于C&#x2F;S架构，已经为我们屏蔽了太多底层，什么IP、端口全部都是自动封装的。相比来说，B&#x2F;S架构更直观一些。比如用浏览器访问百度：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-1ebb772d4f718d6a2fefac68bb1a15d4_720w.jpg?source=2c26e567\"></p>\n<p>不知道有没有细心的朋友注意到了下面的细节：</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-8aa4aa66f571b33062fd1274f2043fa8_720w.jpg?source=2c26e567\"></p>\n<p>即使DNS解析域名得到对应的IP后，Request请求里还是会带上host。为什么？</p>\n<p><strong>因为：域名!&#x3D;IP。</strong></p>\n<p>实际上一个IP可以对应多个域名。也就是说<strong>一台实体服务器（大铁柜）</strong>，理论上可以有<strong>多个域名（虚拟主机）。</strong>实体服务器和网站是两个概念。<strong>IP只是对应实体服务器，而域名对应具体的网站。</strong></p>\n<p>比如上面百度服务器，虽然看起来115.239.210.27这个IP完全等同于<a href=\"https://link.zhihu.com/?target=http://www.baidu.com\">http://www.baidu.com</a>，但也有可能这个IP对应的服务器上配置了两个虚拟主机：<a href=\"https://link.zhihu.com/?target=http://www.baidu.com/\">www.baidu.com</a>和<a href=\"https://link.zhihu.com/?target=http://tieba.baidu.com/\">tieba.baidu.com</a>。所以即使找到了IP对应的服务器实体，Request请求还是要带上host主机名，以确定是哪个虚拟主机。</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-47a7ba9165e0081e5c6dea7a0bf0423a_720w.jpg?source=2c26e567\"></p>\n<p>另外，如果两个域名对应同一个IP，那么必须设置其中一个域名为默认的，不然同一台服务器有两个虚拟主机，我该访问谁？</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-5af11c448cb3de2311ad91df8578ed3c_720w.jpg?source=2c26e567\"></p>\n<p>最后，再用Tomcat举个例子。比如，现在我有一台笔记本电脑（一个实体服务器），它的本机IP是192.168.112.1，我在上面装了Tomcat。如果Tomcat不改动配置，则默认只有一个虚拟主机localhost（默认主机）。接着我开发了一个JavaWeb程序demo1部署到Tomcat，然后我同事在浏览器输入下方地址</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.112.1:8080/demo1/index.html</span><br></pre></td></tr></table></figure>\n\n<p>访问我的电脑。虽然没有带host，但是localhost是默认的，于是访问它。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-453c49379a5816d1f19c7f965d721151_720w.jpg?source=2c26e567\"></p>\n<p>最后必须解释的是，上面的百度服务器只是举个例子，实际上百度搜索和百度贴吧的IP是不同的，也就是说它们不在同一台服务器上。通常来说，一个IP对应一台服务器，服务器上只有一个主机。拿到IP基本就可以确定要访问哪个网站。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-79d343e2d5d3d5d9574d075aba1e6cd6_720w.jpg?source=2c26e567\"></p>\n<p><img src=\"https://picx.zhimg.com/50/v2-79ab58d3761d889a07efbaa99e081d19_720w.jpg?source=2c26e567\"></p>\n<hr>\n<h2 id=\"3个容易混淆的小概念\"><a href=\"#3个容易混淆的小概念\" class=\"headerlink\" title=\"3个容易混淆的小概念\"></a><strong>3个容易混淆的小概念</strong></h2><p>我们经常开口闭口“服务器”、“服务器”的，其实“服务器”是个很容易引发歧义的概念，我能想到的就有3点：</p>\n<h3 id=\"软件概念的服务器和硬件概念的服务器\"><a href=\"#软件概念的服务器和硬件概念的服务器\" class=\"headerlink\" title=\"软件概念的服务器和硬件概念的服务器\"></a>软件概念的服务器和硬件概念的服务器</h3><p>软件概念上，只要是一台硬件配置正常、装有操作系统、插着电能上网，并且安装特定软件的电脑，都可以称为服务器。比如你要学习数据库了，于是你装了MySQL服务端，那么此时你的电脑就是一个MySQL服务器。然后你又装了SVN服务端，那么此时你的电脑既是MySQL服务器，又是SVN服务器。Tomcat服务器同理。</p>\n<p>硬件概念上，服务器本质上也是一台电脑，只不过配置高的同时长相丑了点，基本就是一个冰冷的大铁柜。我们的笔记本电脑既能看片又能玩游戏，而它们基本上专机专用。</p>\n<h3 id=\"Web服务器？Web容器？\"><a href=\"#Web服务器？Web容器？\" class=\"headerlink\" title=\"Web服务器？Web容器？\"></a>Web服务器？Web容器？</h3><p>其实，Tomcat服务器 &#x3D; Web服务器 + Servlet&#x2F;JSP容器（Web容器）。</p>\n<p>Web服务器的作用是接收客户端的请求，给客户端作出响应。但是很明显，服务器不止静态资源呀，所以客户端发起请求后，如果是动态资源，Web服务器不可能直接把它响应回去（比如JSP），因为浏览器只认识静态资源。所以对于JavaWeb程序而言，还需要JSP&#x2F;Servlet容器，<strong>JSP&#x2F;Servlet容器的基本功能是把动态资源转换成静态资源。</strong>我们JavaWeb工程师需要使用Web服务器和JSP&#x2F;Servlet容器，而通常这两者会集于一身，比如Tomcat。</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-c1761ba4e406196374fb7734966e8f97_720w.jpg?source=2c26e567\"></p>\n<p>所以刚才我们画的百度服务器，其实细节还可以更丰满些：</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-3a892ca4b13c7c22d395d4e7f7b5468f_720w.jpg?source=2c26e567\"></p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-2f0979f08ceb7f64d169676069720bd6_720w.jpg?source=2c26e567\"></p>\n<h3 id=\"我们开发的Web应用都是半成品！\"><a href=\"#我们开发的Web应用都是半成品！\" class=\"headerlink\" title=\"我们开发的Web应用都是半成品！\"></a>我们开发的Web应用都是半成品！</h3><p>我们写代码的时候，都知道相同代码最好抽取成公共方法以复用。现在我们来想一想，上百上千的Web应用有什么共性吗？首先，资源肯定不同，无法抽取。比如优酷主打视频，知乎基本都是文字。其次，业务也肯定不同，比如百度主要是搜索，淘宝是电商。但是有一点是一样的，这些网站都需要“接收用户请求”+“响应用户请求”。</p>\n<p>嗯？桥多麻袋！！这两个概念，好像哪里见过！不错，就是上面的Web服务器。仔细回想一下，我们开发JavaWeb时，你操心过如何接收HTTP请求和响应HTTP请求吗？显然没有嘛！因为你一直忙着debug。</p>\n<p><strong>所以，我们用Java开发的Web应用只是一个半成品，类似于一个插件</strong>，而服务器则像一个收发器：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-3a0b16ad4fbe56db177c72f674988896_720w.jpg?source=2c26e567\"></p>\n<hr>\n<h2 id=\"什么是动态资源？\"><a href=\"#什么是动态资源？\" class=\"headerlink\" title=\"什么是动态资源？\"></a><strong>什么是动态资源？</strong></h2><p>其实对于何谓动态资源，我也没有很精准的概念。要讲清楚一个东西是什么，有时是比较难的事。不如先说它不是什么。</p>\n<p>首先，<strong>动态资源不等同于动态页面。</strong>所谓动态页面，就是页面会动，而会动的页面不一定是动态资源。比如我可以用JQuery执行一段代码，让一个Div不断放大缩小，但是很显然它还是一个HTML页面。</p>\n<p><strong>所谓动态资源，其实最显著的特征就是它能动态地生成HTML！</strong>比如JSP。动态资源有个“特色”：它的数据是“可拼装”的、而且“可以随时间变化”。下面用号称可以抗住8个明星同时出轨的新浪服务器举个例子：</p>\n<p><img src=\"https://pic1.zhimg.com/50/v2-38f7da8e2645d23d7b89bfe5e6579b93_720w.jpg?source=2c26e567\"></p>\n<p>突然，新浪《花花世界》专栏的小编发现，原来和bravo1988有绯闻的不是刘亦菲，而是佟丽娅，于是打开专栏做了修改：</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-7163a0b73be6115eab0d91098e53204a_720w.jpg?source=2c26e567\"></p>\n<p>此时，粉丝们再次打开《花花世界》专栏，看到的就是：佟丽娅深夜买醉bravo。</p>\n<p>上面这个例子很好地说明了动态资源（JSP）的两个特性：</p>\n<ul>\n<li>可拼装：${name}”深夜买醉bravo”</li>\n<li>随时间变化：刘亦菲→佟丽娅</li>\n</ul>\n<p>那么为什么说HTML就是静态资源呢？我也可以修改HTML页面使它发生改变啊！很好，很有想法。那么请小编先学会Linux，然后远程连接服务器进入到Tomcat目录下修改吧。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-d29651cfbd959e8d4cad551feabc1046_720w.jpg?source=2c26e567\"></p>\n<p>动态资源和静态资源虽然都在服务器里，但是动态资源包含变量（“可拼装”特性），而变量维系着数据库和程序之间的联系。</p>\n<p>如果把JSP比作电子广告牌，变量比作一根电线，而电线连接着一台电脑（数据库服务器）。那么只要电脑上重新编辑文本，广告牌的内容也会变，此谓动态。而静态资源就像一张布告，当初写什么就是什么，任他风吹雨打，都不会再改变了。</p>\n<p><img src=\"https://pica.zhimg.com/50/v2-07d5a0b4c4aea91562adfe8970a6983b_720w.jpg?source=2c26e567\"></p>\n<h2 id=\"动手实现”Tomcat”\"><a href=\"#动手实现”Tomcat”\" class=\"headerlink\" title=\"动手实现”Tomcat”\"></a><strong>动手实现”Tomcat”</strong></h2><p>最后，还有个很无聊的问题留给大家思考：JavaSE阶段，我们无论做什么，都是上来先敲main()。学了JavaWeb后，我想问问，你有多久没敲main()了？她去哪了呢？</p>\n<p>动手实现Tomcat（黑马公开课）：</p>\n<p>链接：<a href=\"https://link.zhihu.com/?target=https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw\">https://pan.baidu.com/s/1gCWs7Jsr2qtABXQN7HHegw</a> 密码：35se</p>\n<p><img src=\"https://picx.zhimg.com/50/v2-b58fff7721b59b7f784193041339c499_720w.jpg?source=2c26e567\"></p>\n<hr>\n<p>作者：bravo1988<br>链接：<a href=\"https://www.zhihu.com/question/391134143/answer/1777384319\">https://www.zhihu.com/question/391134143/answer/1777384319</a><br>来源：知乎  </p>\n"},{"title":"博客流程","date":"2025-06-13T16:00:00.000Z","cssclasses":["Debug"],"_content":"以下是在 Hexo 博客中，于 `CS61B` 下添加 `proj1` 文件、修改、上传并提交到 GitHub 的完整流程，清晰说明各步骤的目录和操作：\n\n### 一、添加 `proj1` 文件（本地 Hexo 项目中）\n\n#### 1. 确定文件存放目录\n\nHexo 博客中，文章等内容一般放在 `source` 目录。要在 `CS61B` 下添加 `proj1` 文件，需进入 Hexo 项目根目录（假设为 `D:\\study\\Blog` ）的 `source\\CS61B` 目录。\n\n你可以通过文件资源管理器手动进入该目录，也可在终端（PowerShell 或 CMD）中执行：\n```bash\n# 进入 Hexo 根目录\ncd D:\\study\\Blog  \n# 进入 source\\CS61B 目录\ncd source\\CS61B  \n```\n\n#### 2. 创建 `proj1` 文件\n\n- **方式 1：手动创建**  \n    在 `source\\CS61B` 目录下，新建 Markdown 文件（如 `proj1.md` ），直接编辑内容，写入 `proj1` 相关笔记、代码等。\n    \n- **方式 2：Hexo 命令创建**  \n    在 Hexo 根目录（`D:\\study\\Blog` ）执行：\n```bash\nhexo new --path \"source/CS61B/proj1\" \"CS61B proj1 标题\"  \n```\n\n此命令会在 `source\\CS61B` 目录下创建名为 `proj1.md` 的文件（`\"CS61B proj1 标题\"` 是文章标题，可自定义 ），之后你可编辑该文件内容。\n\n### 二、修改文件内容\n\n打开 `source\\CS61B\\proj1.md` 文件（不管是手动创建还是命令创建的 ），在文件中编写或修改内容，比如添加 `proj1` 的说明、代码、笔记等。\n\n文件开头的 Front-matter 可按需配置，示例：\n```markdown\n---\ntitle: CS61B proj1 笔记  \ndate: 2025-06-14  \ncategories:\n  - CS61B  \ntags:\n  - CS61B\n  - proj1  \n---\n\n# CS61B proj1 内容\n这里写具体的 proj1 相关内容，如实现思路、代码片段、遇到的问题及解决办法等...\n```\n\n\n### 三、修改`index.md` 文件\n\n添加**正文内容** 用 Markdown 语法编写，比如：\n```markdown\n---\ntitle: Debug 目录\ndate: 2025-06-14\n---\n# 显示文件索引\n- [文件名](文件相对地址)\n这里记录一些 Debug 过程中遇到的问题和解决方法：\n\n- **问题 1**：程序运行时报错 `xxx`，通过检查配置文件解决。\n- **问题 2**：网络请求超时，调整了超时时间参数。\n```\n\n### 四、生成静态文件并本地预览（可选，确保内容显示正常）\n\n在 Hexo 根目录（`D:\\study\\Blog` ）执行以下命令，生成静态站点文件并启动本地服务器：\n```bash\n# 清理旧的生成文件\nhexo clean  \n# 生成新的静态文件，会把 source 目录内容渲染成 HTML 等\nhexo generate  \n# 启动本地服务器，访问 http://localhost:4000 预览\nhexo server  \n```\n打开浏览器访问 `http://localhost:4000` ，进入 `CS61B` 相关页面，确认 `proj1` 内容显示正常。\n\n### 五、提交到 GitHub（通过 Git 操作）\n\n#### 1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）\n\n如果你的 Hexo 项目还没和 GitHub 仓库关联，先在 Hexo 根目录（`D:\\study\\Blog` ）执行：\n```bash\n# 初始化 Git 仓库\ngit init  \n# 关联 GitHub 远程仓库（替换为你自己的仓库地址）\ngit remote add origin https://github.com/你的GitHub用户名/你的仓库名.git  \n```\n\n#### 2. 暂存、提交、推送文件\n\n在 `Hexo` 根目录（`D:\\study\\Blog` ）执行以下 Git 命令：\n```bash\n# 将修改的文件（包括新增的 proj1.md 等）添加到暂存区\ngit add .  \n# 提交到本地 Git 仓库，填写提交说明（描述本次修改内容）\ngit commit -m \"添加 CS61B/proj1 文件，更新相关内容\"  \n# 推送到 GitHub 远程仓库（假设推送到 main 分支，根据实际分支名调整）\ngit push origin main  \n```\n执行完 `git push` 后，登录 GitHub，进入对应的仓库，就能看到 `CS61B` 目录及 `proj1.md` 文件已上传。\n\n### 关键目录与命令总结\n\n|操作阶段|所在目录|执行命令 / 操作|\n|---|---|---|\n|添加 `proj1` 文件|Hexo 根目录 `source\\CS61B`|手动新建 `proj1.md` 或用 `hexo new --path \"source/CS61B/proj1\" \"标题\"` 创建|\n|修改文件内容|Hexo 根目录 `source\\CS61B`|直接编辑 `proj1.md` 文件内容|\n|本地预览|Hexo 根目录|`hexo clean` → `hexo generate` → `hexo server`|\n|提交到 GitHub|Hexo 根目录|`git add .` → `git commit -m \"提交说明\"` → `git push origin main`|\n\n按照上述步骤，就能顺利在 `CS61B` 下添加、修改 `proj1` 文件，并提交到 GitHub 仓库，让你的 `CS61B` 学习记录同步到线上啦。\n\n### 在window文件目录一次性删除文件名里的空格的命令\n你可以打开 PowerShell 终端，然后运行下面这条命令。运行前，请先把路径替换成你实际的目标文件夹路径：\n```\nGet-ChildItem -Path \"D:\\study\\Blog\\source\\images\" -File | Rename-Item -NewName { $_.Name -replace ' ', '' }\n```\n","source":"Debug/博客流程.md","raw":"---\ntitle: 博客流程\ndate: 2025-06-14\ncssclasses:\n  - Debug\n---\n以下是在 Hexo 博客中，于 `CS61B` 下添加 `proj1` 文件、修改、上传并提交到 GitHub 的完整流程，清晰说明各步骤的目录和操作：\n\n### 一、添加 `proj1` 文件（本地 Hexo 项目中）\n\n#### 1. 确定文件存放目录\n\nHexo 博客中，文章等内容一般放在 `source` 目录。要在 `CS61B` 下添加 `proj1` 文件，需进入 Hexo 项目根目录（假设为 `D:\\study\\Blog` ）的 `source\\CS61B` 目录。\n\n你可以通过文件资源管理器手动进入该目录，也可在终端（PowerShell 或 CMD）中执行：\n```bash\n# 进入 Hexo 根目录\ncd D:\\study\\Blog  \n# 进入 source\\CS61B 目录\ncd source\\CS61B  \n```\n\n#### 2. 创建 `proj1` 文件\n\n- **方式 1：手动创建**  \n    在 `source\\CS61B` 目录下，新建 Markdown 文件（如 `proj1.md` ），直接编辑内容，写入 `proj1` 相关笔记、代码等。\n    \n- **方式 2：Hexo 命令创建**  \n    在 Hexo 根目录（`D:\\study\\Blog` ）执行：\n```bash\nhexo new --path \"source/CS61B/proj1\" \"CS61B proj1 标题\"  \n```\n\n此命令会在 `source\\CS61B` 目录下创建名为 `proj1.md` 的文件（`\"CS61B proj1 标题\"` 是文章标题，可自定义 ），之后你可编辑该文件内容。\n\n### 二、修改文件内容\n\n打开 `source\\CS61B\\proj1.md` 文件（不管是手动创建还是命令创建的 ），在文件中编写或修改内容，比如添加 `proj1` 的说明、代码、笔记等。\n\n文件开头的 Front-matter 可按需配置，示例：\n```markdown\n---\ntitle: CS61B proj1 笔记  \ndate: 2025-06-14  \ncategories:\n  - CS61B  \ntags:\n  - CS61B\n  - proj1  \n---\n\n# CS61B proj1 内容\n这里写具体的 proj1 相关内容，如实现思路、代码片段、遇到的问题及解决办法等...\n```\n\n\n### 三、修改`index.md` 文件\n\n添加**正文内容** 用 Markdown 语法编写，比如：\n```markdown\n---\ntitle: Debug 目录\ndate: 2025-06-14\n---\n# 显示文件索引\n- [文件名](文件相对地址)\n这里记录一些 Debug 过程中遇到的问题和解决方法：\n\n- **问题 1**：程序运行时报错 `xxx`，通过检查配置文件解决。\n- **问题 2**：网络请求超时，调整了超时时间参数。\n```\n\n### 四、生成静态文件并本地预览（可选，确保内容显示正常）\n\n在 Hexo 根目录（`D:\\study\\Blog` ）执行以下命令，生成静态站点文件并启动本地服务器：\n```bash\n# 清理旧的生成文件\nhexo clean  \n# 生成新的静态文件，会把 source 目录内容渲染成 HTML 等\nhexo generate  \n# 启动本地服务器，访问 http://localhost:4000 预览\nhexo server  \n```\n打开浏览器访问 `http://localhost:4000` ，进入 `CS61B` 相关页面，确认 `proj1` 内容显示正常。\n\n### 五、提交到 GitHub（通过 Git 操作）\n\n#### 1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）\n\n如果你的 Hexo 项目还没和 GitHub 仓库关联，先在 Hexo 根目录（`D:\\study\\Blog` ）执行：\n```bash\n# 初始化 Git 仓库\ngit init  \n# 关联 GitHub 远程仓库（替换为你自己的仓库地址）\ngit remote add origin https://github.com/你的GitHub用户名/你的仓库名.git  \n```\n\n#### 2. 暂存、提交、推送文件\n\n在 `Hexo` 根目录（`D:\\study\\Blog` ）执行以下 Git 命令：\n```bash\n# 将修改的文件（包括新增的 proj1.md 等）添加到暂存区\ngit add .  \n# 提交到本地 Git 仓库，填写提交说明（描述本次修改内容）\ngit commit -m \"添加 CS61B/proj1 文件，更新相关内容\"  \n# 推送到 GitHub 远程仓库（假设推送到 main 分支，根据实际分支名调整）\ngit push origin main  \n```\n执行完 `git push` 后，登录 GitHub，进入对应的仓库，就能看到 `CS61B` 目录及 `proj1.md` 文件已上传。\n\n### 关键目录与命令总结\n\n|操作阶段|所在目录|执行命令 / 操作|\n|---|---|---|\n|添加 `proj1` 文件|Hexo 根目录 `source\\CS61B`|手动新建 `proj1.md` 或用 `hexo new --path \"source/CS61B/proj1\" \"标题\"` 创建|\n|修改文件内容|Hexo 根目录 `source\\CS61B`|直接编辑 `proj1.md` 文件内容|\n|本地预览|Hexo 根目录|`hexo clean` → `hexo generate` → `hexo server`|\n|提交到 GitHub|Hexo 根目录|`git add .` → `git commit -m \"提交说明\"` → `git push origin main`|\n\n按照上述步骤，就能顺利在 `CS61B` 下添加、修改 `proj1` 文件，并提交到 GitHub 仓库，让你的 `CS61B` 学习记录同步到线上啦。\n\n### 在window文件目录一次性删除文件名里的空格的命令\n你可以打开 PowerShell 终端，然后运行下面这条命令。运行前，请先把路径替换成你实际的目标文件夹路径：\n```\nGet-ChildItem -Path \"D:\\study\\Blog\\source\\images\" -File | Rename-Item -NewName { $_.Name -replace ' ', '' }\n```\n","updated":"2025-07-24T09:14:10.162Z","path":"Debug/博客流程.html","comments":1,"layout":"page","_id":"cmdh6nnwi000k9gv3dx6bgj4k","content":"<p>以下是在 Hexo 博客中，于 <code>CS61B</code> 下添加 <code>proj1</code> 文件、修改、上传并提交到 GitHub 的完整流程，清晰说明各步骤的目录和操作：</p>\n<h3 id=\"一、添加-proj1-文件（本地-Hexo-项目中）\"><a href=\"#一、添加-proj1-文件（本地-Hexo-项目中）\" class=\"headerlink\" title=\"一、添加 proj1 文件（本地 Hexo 项目中）\"></a>一、添加 <code>proj1</code> 文件（本地 Hexo 项目中）</h3><h4 id=\"1-确定文件存放目录\"><a href=\"#1-确定文件存放目录\" class=\"headerlink\" title=\"1. 确定文件存放目录\"></a>1. 确定文件存放目录</h4><p>Hexo 博客中，文章等内容一般放在 <code>source</code> 目录。要在 <code>CS61B</code> 下添加 <code>proj1</code> 文件，需进入 Hexo 项目根目录（假设为 <code>D:\\study\\Blog</code> ）的 <code>source\\CS61B</code> 目录。</p>\n<p>你可以通过文件资源管理器手动进入该目录，也可在终端（PowerShell 或 CMD）中执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入 Hexo 根目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> D:\\study\\Blog  </span><br><span class=\"line\"><span class=\"comment\"># 进入 source\\CS61B 目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"built_in\">source</span>\\CS61B  </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-创建-proj1-文件\"><a href=\"#2-创建-proj1-文件\" class=\"headerlink\" title=\"2. 创建 proj1 文件\"></a>2. 创建 <code>proj1</code> 文件</h4><ul>\n<li><p><strong>方式 1：手动创建</strong><br>  在 <code>source\\CS61B</code> 目录下，新建 Markdown 文件（如 <code>proj1.md</code> ），直接编辑内容，写入 <code>proj1</code> 相关笔记、代码等。</p>\n</li>\n<li><p><strong>方式 2：Hexo 命令创建</strong><br>  在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new --path <span class=\"string\">&quot;source/CS61B/proj1&quot;</span> <span class=\"string\">&quot;CS61B proj1 标题&quot;</span>  </span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>此命令会在 <code>source\\CS61B</code> 目录下创建名为 <code>proj1.md</code> 的文件（<code>&quot;CS61B proj1 标题&quot;</code> 是文章标题，可自定义 ），之后你可编辑该文件内容。</p>\n<h3 id=\"二、修改文件内容\"><a href=\"#二、修改文件内容\" class=\"headerlink\" title=\"二、修改文件内容\"></a>二、修改文件内容</h3><p>打开 <code>source\\CS61B\\proj1.md</code> 文件（不管是手动创建还是命令创建的 ），在文件中编写或修改内容，比如添加 <code>proj1</code> 的说明、代码、笔记等。</p>\n<p>文件开头的 Front-matter 可按需配置，示例：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: CS61B proj1 笔记  </span><br><span class=\"line\">date: 2025-06-14  </span><br><span class=\"line\">categories:</span><br><span class=\"line\"><span class=\"bullet\">  -</span> CS61B  </span><br><span class=\"line\">tags:</span><br><span class=\"line\"><span class=\"bullet\">  -</span> CS61B</span><br><span class=\"line\"><span class=\"section\">  - proj1  </span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># CS61B proj1 内容</span></span><br><span class=\"line\">这里写具体的 proj1 相关内容，如实现思路、代码片段、遇到的问题及解决办法等...</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"三、修改index-md-文件\"><a href=\"#三、修改index-md-文件\" class=\"headerlink\" title=\"三、修改index.md 文件\"></a>三、修改<code>index.md</code> 文件</h3><p>添加<strong>正文内容</strong> 用 Markdown 语法编写，比如：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Debug 目录</span><br><span class=\"line\"><span class=\"section\">date: 2025-06-14</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"><span class=\"section\"># 显示文件索引</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> [<span class=\"string\">文件名</span>](<span class=\"link\">文件相对地址</span>)</span><br><span class=\"line\">这里记录一些 Debug 过程中遇到的问题和解决方法：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"strong\">**问题 1**</span>：程序运行时报错 <span class=\"code\">`xxx`</span>，通过检查配置文件解决。</span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"strong\">**问题 2**</span>：网络请求超时，调整了超时时间参数。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"四、生成静态文件并本地预览（可选，确保内容显示正常）\"><a href=\"#四、生成静态文件并本地预览（可选，确保内容显示正常）\" class=\"headerlink\" title=\"四、生成静态文件并本地预览（可选，确保内容显示正常）\"></a>四、生成静态文件并本地预览（可选，确保内容显示正常）</h3><p>在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行以下命令，生成静态站点文件并启动本地服务器：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 清理旧的生成文件</span></span><br><span class=\"line\">hexo clean  </span><br><span class=\"line\"><span class=\"comment\"># 生成新的静态文件，会把 source 目录内容渲染成 HTML 等</span></span><br><span class=\"line\">hexo generate  </span><br><span class=\"line\"><span class=\"comment\"># 启动本地服务器，访问 http://localhost:4000 预览</span></span><br><span class=\"line\">hexo server  </span><br></pre></td></tr></table></figure>\n<p>打开浏览器访问 <code>http://localhost:4000</code> ，进入 <code>CS61B</code> 相关页面，确认 <code>proj1</code> 内容显示正常。</p>\n<h3 id=\"五、提交到-GitHub（通过-Git-操作）\"><a href=\"#五、提交到-GitHub（通过-Git-操作）\" class=\"headerlink\" title=\"五、提交到 GitHub（通过 Git 操作）\"></a>五、提交到 GitHub（通过 Git 操作）</h3><h4 id=\"1-初始化-Git（若-Hexo-项目未关联-Git-仓库）\"><a href=\"#1-初始化-Git（若-Hexo-项目未关联-Git-仓库）\" class=\"headerlink\" title=\"1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）\"></a>1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）</h4><p>如果你的 Hexo 项目还没和 GitHub 仓库关联，先在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 初始化 Git 仓库</span></span><br><span class=\"line\">git init  </span><br><span class=\"line\"><span class=\"comment\"># 关联 GitHub 远程仓库（替换为你自己的仓库地址）</span></span><br><span class=\"line\">git remote add origin https://github.com/你的GitHub用户名/你的仓库名.git  </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-暂存、提交、推送文件\"><a href=\"#2-暂存、提交、推送文件\" class=\"headerlink\" title=\"2. 暂存、提交、推送文件\"></a>2. 暂存、提交、推送文件</h4><p>在 <code>Hexo</code> 根目录（<code>D:\\study\\Blog</code> ）执行以下 Git 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将修改的文件（包括新增的 proj1.md 等）添加到暂存区</span></span><br><span class=\"line\">git add .  </span><br><span class=\"line\"><span class=\"comment\"># 提交到本地 Git 仓库，填写提交说明（描述本次修改内容）</span></span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;添加 CS61B/proj1 文件，更新相关内容&quot;</span>  </span><br><span class=\"line\"><span class=\"comment\"># 推送到 GitHub 远程仓库（假设推送到 main 分支，根据实际分支名调整）</span></span><br><span class=\"line\">git push origin main  </span><br></pre></td></tr></table></figure>\n<p>执行完 <code>git push</code> 后，登录 GitHub，进入对应的仓库，就能看到 <code>CS61B</code> 目录及 <code>proj1.md</code> 文件已上传。</p>\n<h3 id=\"关键目录与命令总结\"><a href=\"#关键目录与命令总结\" class=\"headerlink\" title=\"关键目录与命令总结\"></a>关键目录与命令总结</h3><table>\n<thead>\n<tr>\n<th>操作阶段</th>\n<th>所在目录</th>\n<th>执行命令 &#x2F; 操作</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>添加 <code>proj1</code> 文件</td>\n<td>Hexo 根目录 <code>source\\CS61B</code></td>\n<td>手动新建 <code>proj1.md</code> 或用 <code>hexo new --path &quot;source/CS61B/proj1&quot; &quot;标题&quot;</code> 创建</td>\n</tr>\n<tr>\n<td>修改文件内容</td>\n<td>Hexo 根目录 <code>source\\CS61B</code></td>\n<td>直接编辑 <code>proj1.md</code> 文件内容</td>\n</tr>\n<tr>\n<td>本地预览</td>\n<td>Hexo 根目录</td>\n<td><code>hexo clean</code> → <code>hexo generate</code> → <code>hexo server</code></td>\n</tr>\n<tr>\n<td>提交到 GitHub</td>\n<td>Hexo 根目录</td>\n<td><code>git add .</code> → <code>git commit -m &quot;提交说明&quot;</code> → <code>git push origin main</code></td>\n</tr>\n</tbody></table>\n<p>按照上述步骤，就能顺利在 <code>CS61B</code> 下添加、修改 <code>proj1</code> 文件，并提交到 GitHub 仓库，让你的 <code>CS61B</code> 学习记录同步到线上啦。</p>\n<h3 id=\"在window文件目录一次性删除文件名里的空格的命令\"><a href=\"#在window文件目录一次性删除文件名里的空格的命令\" class=\"headerlink\" title=\"在window文件目录一次性删除文件名里的空格的命令\"></a>在window文件目录一次性删除文件名里的空格的命令</h3><p>你可以打开 PowerShell 终端，然后运行下面这条命令。运行前，请先把路径替换成你实际的目标文件夹路径：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get-ChildItem -Path &quot;D:\\study\\Blog\\source\\images&quot; -File | Rename-Item -NewName &#123; $_.Name -replace &#x27; &#x27;, &#x27;&#x27; &#125;</span><br></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>以下是在 Hexo 博客中，于 <code>CS61B</code> 下添加 <code>proj1</code> 文件、修改、上传并提交到 GitHub 的完整流程，清晰说明各步骤的目录和操作：</p>\n<h3 id=\"一、添加-proj1-文件（本地-Hexo-项目中）\"><a href=\"#一、添加-proj1-文件（本地-Hexo-项目中）\" class=\"headerlink\" title=\"一、添加 proj1 文件（本地 Hexo 项目中）\"></a>一、添加 <code>proj1</code> 文件（本地 Hexo 项目中）</h3><h4 id=\"1-确定文件存放目录\"><a href=\"#1-确定文件存放目录\" class=\"headerlink\" title=\"1. 确定文件存放目录\"></a>1. 确定文件存放目录</h4><p>Hexo 博客中，文章等内容一般放在 <code>source</code> 目录。要在 <code>CS61B</code> 下添加 <code>proj1</code> 文件，需进入 Hexo 项目根目录（假设为 <code>D:\\study\\Blog</code> ）的 <code>source\\CS61B</code> 目录。</p>\n<p>你可以通过文件资源管理器手动进入该目录，也可在终端（PowerShell 或 CMD）中执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 进入 Hexo 根目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> D:\\study\\Blog  </span><br><span class=\"line\"><span class=\"comment\"># 进入 source\\CS61B 目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"built_in\">source</span>\\CS61B  </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-创建-proj1-文件\"><a href=\"#2-创建-proj1-文件\" class=\"headerlink\" title=\"2. 创建 proj1 文件\"></a>2. 创建 <code>proj1</code> 文件</h4><ul>\n<li><p><strong>方式 1：手动创建</strong><br>  在 <code>source\\CS61B</code> 目录下，新建 Markdown 文件（如 <code>proj1.md</code> ），直接编辑内容，写入 <code>proj1</code> 相关笔记、代码等。</p>\n</li>\n<li><p><strong>方式 2：Hexo 命令创建</strong><br>  在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new --path <span class=\"string\">&quot;source/CS61B/proj1&quot;</span> <span class=\"string\">&quot;CS61B proj1 标题&quot;</span>  </span><br></pre></td></tr></table></figure></li>\n</ul>\n<p>此命令会在 <code>source\\CS61B</code> 目录下创建名为 <code>proj1.md</code> 的文件（<code>&quot;CS61B proj1 标题&quot;</code> 是文章标题，可自定义 ），之后你可编辑该文件内容。</p>\n<h3 id=\"二、修改文件内容\"><a href=\"#二、修改文件内容\" class=\"headerlink\" title=\"二、修改文件内容\"></a>二、修改文件内容</h3><p>打开 <code>source\\CS61B\\proj1.md</code> 文件（不管是手动创建还是命令创建的 ），在文件中编写或修改内容，比如添加 <code>proj1</code> 的说明、代码、笔记等。</p>\n<p>文件开头的 Front-matter 可按需配置，示例：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: CS61B proj1 笔记  </span><br><span class=\"line\">date: 2025-06-14  </span><br><span class=\"line\">categories:</span><br><span class=\"line\"><span class=\"bullet\">  -</span> CS61B  </span><br><span class=\"line\">tags:</span><br><span class=\"line\"><span class=\"bullet\">  -</span> CS61B</span><br><span class=\"line\"><span class=\"section\">  - proj1  </span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># CS61B proj1 内容</span></span><br><span class=\"line\">这里写具体的 proj1 相关内容，如实现思路、代码片段、遇到的问题及解决办法等...</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"三、修改index-md-文件\"><a href=\"#三、修改index-md-文件\" class=\"headerlink\" title=\"三、修改index.md 文件\"></a>三、修改<code>index.md</code> 文件</h3><p>添加<strong>正文内容</strong> 用 Markdown 语法编写，比如：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Debug 目录</span><br><span class=\"line\"><span class=\"section\">date: 2025-06-14</span></span><br><span class=\"line\"><span class=\"section\">---</span></span><br><span class=\"line\"><span class=\"section\"># 显示文件索引</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> [<span class=\"string\">文件名</span>](<span class=\"link\">文件相对地址</span>)</span><br><span class=\"line\">这里记录一些 Debug 过程中遇到的问题和解决方法：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"strong\">**问题 1**</span>：程序运行时报错 <span class=\"code\">`xxx`</span>，通过检查配置文件解决。</span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"strong\">**问题 2**</span>：网络请求超时，调整了超时时间参数。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"四、生成静态文件并本地预览（可选，确保内容显示正常）\"><a href=\"#四、生成静态文件并本地预览（可选，确保内容显示正常）\" class=\"headerlink\" title=\"四、生成静态文件并本地预览（可选，确保内容显示正常）\"></a>四、生成静态文件并本地预览（可选，确保内容显示正常）</h3><p>在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行以下命令，生成静态站点文件并启动本地服务器：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 清理旧的生成文件</span></span><br><span class=\"line\">hexo clean  </span><br><span class=\"line\"><span class=\"comment\"># 生成新的静态文件，会把 source 目录内容渲染成 HTML 等</span></span><br><span class=\"line\">hexo generate  </span><br><span class=\"line\"><span class=\"comment\"># 启动本地服务器，访问 http://localhost:4000 预览</span></span><br><span class=\"line\">hexo server  </span><br></pre></td></tr></table></figure>\n<p>打开浏览器访问 <code>http://localhost:4000</code> ，进入 <code>CS61B</code> 相关页面，确认 <code>proj1</code> 内容显示正常。</p>\n<h3 id=\"五、提交到-GitHub（通过-Git-操作）\"><a href=\"#五、提交到-GitHub（通过-Git-操作）\" class=\"headerlink\" title=\"五、提交到 GitHub（通过 Git 操作）\"></a>五、提交到 GitHub（通过 Git 操作）</h3><h4 id=\"1-初始化-Git（若-Hexo-项目未关联-Git-仓库）\"><a href=\"#1-初始化-Git（若-Hexo-项目未关联-Git-仓库）\" class=\"headerlink\" title=\"1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）\"></a>1. 初始化 Git（若 Hexo 项目未关联 Git 仓库）</h4><p>如果你的 Hexo 项目还没和 GitHub 仓库关联，先在 Hexo 根目录（<code>D:\\study\\Blog</code> ）执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 初始化 Git 仓库</span></span><br><span class=\"line\">git init  </span><br><span class=\"line\"><span class=\"comment\"># 关联 GitHub 远程仓库（替换为你自己的仓库地址）</span></span><br><span class=\"line\">git remote add origin https://github.com/你的GitHub用户名/你的仓库名.git  </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-暂存、提交、推送文件\"><a href=\"#2-暂存、提交、推送文件\" class=\"headerlink\" title=\"2. 暂存、提交、推送文件\"></a>2. 暂存、提交、推送文件</h4><p>在 <code>Hexo</code> 根目录（<code>D:\\study\\Blog</code> ）执行以下 Git 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 将修改的文件（包括新增的 proj1.md 等）添加到暂存区</span></span><br><span class=\"line\">git add .  </span><br><span class=\"line\"><span class=\"comment\"># 提交到本地 Git 仓库，填写提交说明（描述本次修改内容）</span></span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;添加 CS61B/proj1 文件，更新相关内容&quot;</span>  </span><br><span class=\"line\"><span class=\"comment\"># 推送到 GitHub 远程仓库（假设推送到 main 分支，根据实际分支名调整）</span></span><br><span class=\"line\">git push origin main  </span><br></pre></td></tr></table></figure>\n<p>执行完 <code>git push</code> 后，登录 GitHub，进入对应的仓库，就能看到 <code>CS61B</code> 目录及 <code>proj1.md</code> 文件已上传。</p>\n<h3 id=\"关键目录与命令总结\"><a href=\"#关键目录与命令总结\" class=\"headerlink\" title=\"关键目录与命令总结\"></a>关键目录与命令总结</h3><table>\n<thead>\n<tr>\n<th>操作阶段</th>\n<th>所在目录</th>\n<th>执行命令 &#x2F; 操作</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>添加 <code>proj1</code> 文件</td>\n<td>Hexo 根目录 <code>source\\CS61B</code></td>\n<td>手动新建 <code>proj1.md</code> 或用 <code>hexo new --path &quot;source/CS61B/proj1&quot; &quot;标题&quot;</code> 创建</td>\n</tr>\n<tr>\n<td>修改文件内容</td>\n<td>Hexo 根目录 <code>source\\CS61B</code></td>\n<td>直接编辑 <code>proj1.md</code> 文件内容</td>\n</tr>\n<tr>\n<td>本地预览</td>\n<td>Hexo 根目录</td>\n<td><code>hexo clean</code> → <code>hexo generate</code> → <code>hexo server</code></td>\n</tr>\n<tr>\n<td>提交到 GitHub</td>\n<td>Hexo 根目录</td>\n<td><code>git add .</code> → <code>git commit -m &quot;提交说明&quot;</code> → <code>git push origin main</code></td>\n</tr>\n</tbody></table>\n<p>按照上述步骤，就能顺利在 <code>CS61B</code> 下添加、修改 <code>proj1</code> 文件，并提交到 GitHub 仓库，让你的 <code>CS61B</code> 学习记录同步到线上啦。</p>\n<h3 id=\"在window文件目录一次性删除文件名里的空格的命令\"><a href=\"#在window文件目录一次性删除文件名里的空格的命令\" class=\"headerlink\" title=\"在window文件目录一次性删除文件名里的空格的命令\"></a>在window文件目录一次性删除文件名里的空格的命令</h3><p>你可以打开 PowerShell 终端，然后运行下面这条命令。运行前，请先把路径替换成你实际的目标文件夹路径：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get-ChildItem -Path &quot;D:\\study\\Blog\\source\\images&quot; -File | Rename-Item -NewName &#123; $_.Name -replace &#x27; &#x27;, &#x27;&#x27; &#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"链表（链式存储）基本原理","date":"2025-07-16T16:00:00.000Z","cssclasses":["数据结构","链表"],"_content":"\n## 为什么需要链表\n\n前面介绍了 [数组（顺序存储）的底层原理](数组（顺序存储）基本原理)，说白了就是一块连续的内存空间，有了这块内存空间的首地址，就能直接通过索引计算出任意位置的元素地址。\n链表不一样，一条链表并不需要一整块连续的内存空间存储元素。链表的元素可以**分散在内存空间的天涯海角**，通过每个节点上的 `next, prev` 指针，将零散的内存块串联起来形成一个链式结构。\n这样做的好处很明显，首先就是可以提高内存的利用效率\n另外一个好处，它的节点要用的时候就能接上，不用的时候拆掉就行了，从来不需要考虑扩缩容和数据搬移的问题，理论上讲，链表是没有容量限制的（除非把所有内存都占满，这不太可能）。\n当然，不可能只有好处没有局限性。数组最大的优势是支持通过索引快速访问元素，而链表就不支持。\n\n## 单链表的基本操作\n\n```java\n// java\nclass ListNode {\n    int val;\n    ListNode next;\n    ListNode(int x) { val = x; }\n}\n// 输入一个数组，转换为一条单链表\nListNode createLinkedList(int[] arr) {\n    if (arr == null || arr.length == 0) {\n        return null;\n    }\n    ListNode head = new ListNode(arr[0]);\n    ListNode cur = head;\n    for (int i = 1; i < arr.length; i++) {\n        cur.next = new ListNode(arr[i]);\n        cur = cur.next;\n    }\n    return head;\n}\n```\n\n```python\n# python\nclass ListNode:\n    def __init__(self, x):\n        self.val = x\n        self.next = None\n# 输入一个数组，转换为一条单链表\ndef createLinkedList(arr: 'List[int]') -> 'ListNode':\n    if arr is None or len(arr) == 0:\n        return None\n\n    head = ListNode(arr[0])\n    cur = head\n    for i in range(1, len(arr)):\n        cur.next = ListNode(arr[i])\n        cur = cur.next\n\n    return head\n```\n\n### 查/改\n\n#### 单链表的遍历/查找/修改\n\n要通过索引访问或修改链表中的某个节点，也只能用 for 循环从头结点开始往后找，直到找到索引对应的节点，然后进行访问或修改。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 遍历单链表\nfor (ListNode p = head; p != null; p = p.next) {\n    System.out.println(p.val);\n}\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 遍历单链表\np = head\nwhile p is not None:\n    print(p.val)\n    p = p.next\n```\n\n\n### 增\n\n#### 在单链表头部插入新元素\n\n我们会持有单链表的头结点，所以只需要将插入的节点接到头结点之前，并将新插入的节点作为头结点即可。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在单链表头部插入一个新节点 0\nListNode newNode = new ListNode(0);\nnewNode.next = head;\nhead = newNode;\n\n// 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在单链表头部插入一个新节点 0\nnewNode = ListNode(0)\nnewNode.next = head\nhead = newNode\n\n# 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n#### 在单链表尾部插入新元素\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在单链表尾部插入一个新节点 6\nListNode p = head;\n// 先走到链表的最后一个节点\nwhile (p.next != null) {\n    p = p.next;\n}\n// 现在 p 就是链表的最后一个节点\n// 在 p 后面插入新节点\np.next = new ListNode(6);\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n\n```python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在单链表尾部插入一个新节点 6\np = head\n# 先走到链表的最后一个节点\nwhile p.next is not None:\n    p = p.next\n# 现在 p 就是链表的最后一个节点\n# 在 p 后面插入新节点\np.next = ListNode(6)\n\n# 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n当然，如果我们持有对链表尾节点的引用，那么在尾部插入新节点的操作就会变得非常简单，不用每次从头去遍历了。这个优化会在后面具体实现双链表时介绍。\n\n#### 在单链表中间插入新元素\n\n这个操作稍微有点复杂，我们还是要先找到要插入位置的前驱节点，然后操作前驱节点把新节点插入进去：\n\n```java\n//java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在第 3 个节点后面插入一个新节点 66\n// 先要找到前驱节点，即第 3 个节点\nListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n// 此时 p 指向第 3 个节点\n// 组装新节点的后驱指针\nListNode newNode = new ListNode(66);\nnewNode.next = p.next;\n\n// 插入新节点\np.next = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在第 3 个节点后面插入一个新节点 66\n# 先要找到前驱节点，即第 3 个节点\np = head\nfor _ in range(2):\n    p = p.next\n# 此时 p 指向第 3 个节点\n# 组装新节点的后驱指针\nnew_node = ListNode(66)\nnew_node.next = p.next\n\n# 插入新节点\np.next = new_node\n\n# 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n\n### 删\n\n#### 在单链表中删除一个节点\n\n删除一个节点，首先要找到要被删除节点的前驱节点，然后把这个前驱节点的 `next` 指针指向被删除节点的下一个节点。这样就能把被删除节点从链表中摘除了。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除第 4 个节点，要操作前驱节点\nListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 此时 p 指向第 3 个节点，即要删除节点的前驱节点\n// 把第 4 个节点从链表中摘除\np.next = p.next.next;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n```python\n# python\nhead = createLinkedList([1, 2, 3, 4, 5])\n# 删除第 4 个节点，要操作前驱节点\np = head\nfor i in range(2):\n    p = p.next\np.next = p.next.next\n# 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n#### 在单链表尾部删除元素\n\n这个操作比较简单，找到倒数第二个节点，然后把它的 `next` 指针置为 null 就行了：\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除尾节点\nListNode p = head;\n// 找到倒数第二个节点\nwhile (p.next.next != null) {\n    p = p.next;\n}\n\n// 此时 p 指向倒数第二个节点\n// 把尾节点从链表中摘除\np.next = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4s\n```\n\n#### 在单链表头部删除元素\n\n直接把 `head` 移动到下一个节点就行了。\n\n```java\n//java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除头结点\nhead = head.next;\n\n// 现在链表变成了 2 -> 3 -> 4 -> 5\n```\n\n不过可能有读者疑惑，之前那个旧的头结点 `1` 的 next 指针依然指向着节点 `2`，这样会不会造成内存泄漏？\n\n不会的，这个节点 `1` 指向其他的节点是没关系的，只要保证没有其他引用指向这个节点 `1`，它就能被垃圾回收器回收掉。\n\n当然，如果你非要显式把节点 `1` 的 next 指针置为 null，这是个很好的习惯，在其他场景中可能可以避免指针错乱的潜在问题。\n\n## 双链表基本操作\n\n```java\n//java\nclass DoublyListNode {\n    int val;\n    DoublyListNode next, prev;\n    DoublyListNode(int x) { val = x; }\n}\n\nDoublyListNode createDoublyLinkedList(int[] arr) {\n    if (arr == null || arr.length == 0) {\n        return null;\n    }\n    DoublyListNode head = new DoublyListNode(arr[0]);\n    DoublyListNode cur = head;\n    // for 循环迭代创建双链表\n    for (int i = 1; i < arr.length; i++) {\n        DoublyListNode newNode = new DoublyListNode(arr[i]);\n        cur.next = newNode;\n        newNode.prev = cur;\n        cur = cur.next;\n    }\n    return head;\n}\n```\n\n### 查/改\n\n#### 双链表的遍历/查找/修改\n\n对于双链表的遍历和查找，我们可以从头节点或尾节点开始，根据需要向前或向后遍历,这样可以一定程度上提高效率。\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\nDoublyListNode tail = null;\n\n// 从头节点向后遍历双链表\nfor (DoublyListNode p = head; p != null; p = p.next) {\n    System.out.println(p.val);\n    tail = p;\n}\n\n// 从尾节点向前遍历双链表\nfor (DoublyListNode p = tail; p != null; p = p.prev) {\n    System.out.println(p.val);\n}\n```\n\n### 增\n\n#### 在双链表头部插入新元素\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在双链表头部插入新节点 0\nDoublyListNode newHead = new DoublyListNode(0);\nnewHead.next = head;\nhead.prev = newHead;\nhead = newHead;\n// 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n#### 在双链表尾部插入新元素\n\n在双链表尾部插入元素时，如果我们持有尾节点的引用，这个操作会非常简单：\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\nDoublyListNode tail = head;\n// 先走到链表的最后一个节点\nwhile (tail.next != null) {\n    tail = tail.next;\n}\n\n// 在双链表尾部插入新节点 6\nDoublyListNode newNode = new DoublyListNode(6);\ntail.next = newNode;\nnewNode.prev = tail;\n// 更新尾节点引用\ntail = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n\n#### 在双链表中间插入新元素\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 想要插入到索引 3（第 4 个节点）\n// 需要操作索引 2（第 3 个节点）的指针\nDoublyListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 组装新节点\nDoublyListNode newNode = new DoublyListNode(66);\nnewNode.next = p.next;\nnewNode.prev = p;\n\n// 插入新节点\np.next.prev = newNode;\np.next = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n## 删\n\n#### 在双链表中删除一个节点\n\n在双链表中删除节点时，需要调整前驱节点和后继节点的指针来摘除目标节点：\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除第 4 个节点\n// 先找到第 3 个节点\nDoublyListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 现在 p 指向第 3 个节点，我们它后面那个节点摘除出去\nDoublyListNode toDelete = p.next;\n\n// 把 toDelete 从链表中摘除\np.next = toDelete.next;\ntoDelete.next.prev = p;\n\n// 把 toDelete 的前后指针都置为 null 是个好习惯（可选）\ntoDelete.next = null;\ntoDelete.prev = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n#### 在双链表头部删除元素\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除头结点\nDoublyListNode toDelete = head;\nhead = head.next;\nhead.prev = null;\n\n// 清理已删除节点的指针\ntoDelete.next = null;\n\n// 现在链表变成了 2 -> 3 -> 4 -> 5\n```\n\n#### 在双链表尾部删除元素\n\n在单链表中，由于缺乏前驱指针，所以删除尾节点时需要遍历到倒数第二个节点，操作它的 `next` 指针，才能把尾节点摘除出去。\n\n但在双链表中，由于每个节点都存储了前驱节点的指针，所以我们可以直接操作尾节点，把它自己从链表中摘除：\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除尾节点\nDoublyListNode p = head;\n// 找到尾结点\nwhile (p.next != null) {\n    p = p.next;\n}\n\n// 现在 p 指向尾节点\n// 把尾节点从链表中摘除\np.prev.next = null;\n\n// 把被删结点的指针都断开是个好习惯（可选）\np.prev = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4\n```","source":"数据结构/链表（链式存储）基本原理.md","raw":"---\ntitle: 链表（链式存储）基本原理\ndate: 2025-07-17\ncssclasses:\n  - 数据结构\n  - 链表\n---\n\n## 为什么需要链表\n\n前面介绍了 [数组（顺序存储）的底层原理](数组（顺序存储）基本原理)，说白了就是一块连续的内存空间，有了这块内存空间的首地址，就能直接通过索引计算出任意位置的元素地址。\n链表不一样，一条链表并不需要一整块连续的内存空间存储元素。链表的元素可以**分散在内存空间的天涯海角**，通过每个节点上的 `next, prev` 指针，将零散的内存块串联起来形成一个链式结构。\n这样做的好处很明显，首先就是可以提高内存的利用效率\n另外一个好处，它的节点要用的时候就能接上，不用的时候拆掉就行了，从来不需要考虑扩缩容和数据搬移的问题，理论上讲，链表是没有容量限制的（除非把所有内存都占满，这不太可能）。\n当然，不可能只有好处没有局限性。数组最大的优势是支持通过索引快速访问元素，而链表就不支持。\n\n## 单链表的基本操作\n\n```java\n// java\nclass ListNode {\n    int val;\n    ListNode next;\n    ListNode(int x) { val = x; }\n}\n// 输入一个数组，转换为一条单链表\nListNode createLinkedList(int[] arr) {\n    if (arr == null || arr.length == 0) {\n        return null;\n    }\n    ListNode head = new ListNode(arr[0]);\n    ListNode cur = head;\n    for (int i = 1; i < arr.length; i++) {\n        cur.next = new ListNode(arr[i]);\n        cur = cur.next;\n    }\n    return head;\n}\n```\n\n```python\n# python\nclass ListNode:\n    def __init__(self, x):\n        self.val = x\n        self.next = None\n# 输入一个数组，转换为一条单链表\ndef createLinkedList(arr: 'List[int]') -> 'ListNode':\n    if arr is None or len(arr) == 0:\n        return None\n\n    head = ListNode(arr[0])\n    cur = head\n    for i in range(1, len(arr)):\n        cur.next = ListNode(arr[i])\n        cur = cur.next\n\n    return head\n```\n\n### 查/改\n\n#### 单链表的遍历/查找/修改\n\n要通过索引访问或修改链表中的某个节点，也只能用 for 循环从头结点开始往后找，直到找到索引对应的节点，然后进行访问或修改。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 遍历单链表\nfor (ListNode p = head; p != null; p = p.next) {\n    System.out.println(p.val);\n}\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 遍历单链表\np = head\nwhile p is not None:\n    print(p.val)\n    p = p.next\n```\n\n\n### 增\n\n#### 在单链表头部插入新元素\n\n我们会持有单链表的头结点，所以只需要将插入的节点接到头结点之前，并将新插入的节点作为头结点即可。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在单链表头部插入一个新节点 0\nListNode newNode = new ListNode(0);\nnewNode.next = head;\nhead = newNode;\n\n// 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在单链表头部插入一个新节点 0\nnewNode = ListNode(0)\nnewNode.next = head\nhead = newNode\n\n# 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n#### 在单链表尾部插入新元素\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在单链表尾部插入一个新节点 6\nListNode p = head;\n// 先走到链表的最后一个节点\nwhile (p.next != null) {\n    p = p.next;\n}\n// 现在 p 就是链表的最后一个节点\n// 在 p 后面插入新节点\np.next = new ListNode(6);\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n\n```python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在单链表尾部插入一个新节点 6\np = head\n# 先走到链表的最后一个节点\nwhile p.next is not None:\n    p = p.next\n# 现在 p 就是链表的最后一个节点\n# 在 p 后面插入新节点\np.next = ListNode(6)\n\n# 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n当然，如果我们持有对链表尾节点的引用，那么在尾部插入新节点的操作就会变得非常简单，不用每次从头去遍历了。这个优化会在后面具体实现双链表时介绍。\n\n#### 在单链表中间插入新元素\n\n这个操作稍微有点复杂，我们还是要先找到要插入位置的前驱节点，然后操作前驱节点把新节点插入进去：\n\n```java\n//java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在第 3 个节点后面插入一个新节点 66\n// 先要找到前驱节点，即第 3 个节点\nListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n// 此时 p 指向第 3 个节点\n// 组装新节点的后驱指针\nListNode newNode = new ListNode(66);\nnewNode.next = p.next;\n\n// 插入新节点\np.next = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n```python\n# python\n# 创建一条单链表\nhead = createLinkedList([1, 2, 3, 4, 5])\n\n# 在第 3 个节点后面插入一个新节点 66\n# 先要找到前驱节点，即第 3 个节点\np = head\nfor _ in range(2):\n    p = p.next\n# 此时 p 指向第 3 个节点\n# 组装新节点的后驱指针\nnew_node = ListNode(66)\nnew_node.next = p.next\n\n# 插入新节点\np.next = new_node\n\n# 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n\n### 删\n\n#### 在单链表中删除一个节点\n\n删除一个节点，首先要找到要被删除节点的前驱节点，然后把这个前驱节点的 `next` 指针指向被删除节点的下一个节点。这样就能把被删除节点从链表中摘除了。\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除第 4 个节点，要操作前驱节点\nListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 此时 p 指向第 3 个节点，即要删除节点的前驱节点\n// 把第 4 个节点从链表中摘除\np.next = p.next.next;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n```python\n# python\nhead = createLinkedList([1, 2, 3, 4, 5])\n# 删除第 4 个节点，要操作前驱节点\np = head\nfor i in range(2):\n    p = p.next\np.next = p.next.next\n# 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n#### 在单链表尾部删除元素\n\n这个操作比较简单，找到倒数第二个节点，然后把它的 `next` 指针置为 null 就行了：\n\n```java\n// java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除尾节点\nListNode p = head;\n// 找到倒数第二个节点\nwhile (p.next.next != null) {\n    p = p.next;\n}\n\n// 此时 p 指向倒数第二个节点\n// 把尾节点从链表中摘除\np.next = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4s\n```\n\n#### 在单链表头部删除元素\n\n直接把 `head` 移动到下一个节点就行了。\n\n```java\n//java\n// 创建一条单链表\nListNode head = createLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除头结点\nhead = head.next;\n\n// 现在链表变成了 2 -> 3 -> 4 -> 5\n```\n\n不过可能有读者疑惑，之前那个旧的头结点 `1` 的 next 指针依然指向着节点 `2`，这样会不会造成内存泄漏？\n\n不会的，这个节点 `1` 指向其他的节点是没关系的，只要保证没有其他引用指向这个节点 `1`，它就能被垃圾回收器回收掉。\n\n当然，如果你非要显式把节点 `1` 的 next 指针置为 null，这是个很好的习惯，在其他场景中可能可以避免指针错乱的潜在问题。\n\n## 双链表基本操作\n\n```java\n//java\nclass DoublyListNode {\n    int val;\n    DoublyListNode next, prev;\n    DoublyListNode(int x) { val = x; }\n}\n\nDoublyListNode createDoublyLinkedList(int[] arr) {\n    if (arr == null || arr.length == 0) {\n        return null;\n    }\n    DoublyListNode head = new DoublyListNode(arr[0]);\n    DoublyListNode cur = head;\n    // for 循环迭代创建双链表\n    for (int i = 1; i < arr.length; i++) {\n        DoublyListNode newNode = new DoublyListNode(arr[i]);\n        cur.next = newNode;\n        newNode.prev = cur;\n        cur = cur.next;\n    }\n    return head;\n}\n```\n\n### 查/改\n\n#### 双链表的遍历/查找/修改\n\n对于双链表的遍历和查找，我们可以从头节点或尾节点开始，根据需要向前或向后遍历,这样可以一定程度上提高效率。\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\nDoublyListNode tail = null;\n\n// 从头节点向后遍历双链表\nfor (DoublyListNode p = head; p != null; p = p.next) {\n    System.out.println(p.val);\n    tail = p;\n}\n\n// 从尾节点向前遍历双链表\nfor (DoublyListNode p = tail; p != null; p = p.prev) {\n    System.out.println(p.val);\n}\n```\n\n### 增\n\n#### 在双链表头部插入新元素\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 在双链表头部插入新节点 0\nDoublyListNode newHead = new DoublyListNode(0);\nnewHead.next = head;\nhead.prev = newHead;\nhead = newHead;\n// 现在链表变成了 0 -> 1 -> 2 -> 3 -> 4 -> 5\n```\n\n#### 在双链表尾部插入新元素\n\n在双链表尾部插入元素时，如果我们持有尾节点的引用，这个操作会非常简单：\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\nDoublyListNode tail = head;\n// 先走到链表的最后一个节点\nwhile (tail.next != null) {\n    tail = tail.next;\n}\n\n// 在双链表尾部插入新节点 6\nDoublyListNode newNode = new DoublyListNode(6);\ntail.next = newNode;\nnewNode.prev = tail;\n// 更新尾节点引用\ntail = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4 -> 5 -> 6\n```\n\n#### 在双链表中间插入新元素\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 想要插入到索引 3（第 4 个节点）\n// 需要操作索引 2（第 3 个节点）的指针\nDoublyListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 组装新节点\nDoublyListNode newNode = new DoublyListNode(66);\nnewNode.next = p.next;\nnewNode.prev = p;\n\n// 插入新节点\np.next.prev = newNode;\np.next = newNode;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 66 -> 4 -> 5\n```\n\n## 删\n\n#### 在双链表中删除一个节点\n\n在双链表中删除节点时，需要调整前驱节点和后继节点的指针来摘除目标节点：\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除第 4 个节点\n// 先找到第 3 个节点\nDoublyListNode p = head;\nfor (int i = 0; i < 2; i++) {\n    p = p.next;\n}\n\n// 现在 p 指向第 3 个节点，我们它后面那个节点摘除出去\nDoublyListNode toDelete = p.next;\n\n// 把 toDelete 从链表中摘除\np.next = toDelete.next;\ntoDelete.next.prev = p;\n\n// 把 toDelete 的前后指针都置为 null 是个好习惯（可选）\ntoDelete.next = null;\ntoDelete.prev = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 5\n```\n\n#### 在双链表头部删除元素\n\n```java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除头结点\nDoublyListNode toDelete = head;\nhead = head.next;\nhead.prev = null;\n\n// 清理已删除节点的指针\ntoDelete.next = null;\n\n// 现在链表变成了 2 -> 3 -> 4 -> 5\n```\n\n#### 在双链表尾部删除元素\n\n在单链表中，由于缺乏前驱指针，所以删除尾节点时需要遍历到倒数第二个节点，操作它的 `next` 指针，才能把尾节点摘除出去。\n\n但在双链表中，由于每个节点都存储了前驱节点的指针，所以我们可以直接操作尾节点，把它自己从链表中摘除：\n\n```java\n// java\n// 创建一条双链表\nDoublyListNode head = createDoublyLinkedList(new int[]{1, 2, 3, 4, 5});\n\n// 删除尾节点\nDoublyListNode p = head;\n// 找到尾结点\nwhile (p.next != null) {\n    p = p.next;\n}\n\n// 现在 p 指向尾节点\n// 把尾节点从链表中摘除\np.prev.next = null;\n\n// 把被删结点的指针都断开是个好习惯（可选）\np.prev = null;\n\n// 现在链表变成了 1 -> 2 -> 3 -> 4\n```","updated":"2025-07-17T11:03:50.588Z","path":"数据结构/链表（链式存储）基本原理.html","comments":1,"layout":"page","_id":"cmdh6nnwi000l9gv398ej44kb","content":"<h2 id=\"为什么需要链表\"><a href=\"#为什么需要链表\" class=\"headerlink\" title=\"为什么需要链表\"></a>为什么需要链表</h2><p>前面介绍了 <a href=\"%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组（顺序存储）的底层原理</a>，说白了就是一块连续的内存空间，有了这块内存空间的首地址，就能直接通过索引计算出任意位置的元素地址。<br>链表不一样，一条链表并不需要一整块连续的内存空间存储元素。链表的元素可以<strong>分散在内存空间的天涯海角</strong>，通过每个节点上的 <code>next, prev</code> 指针，将零散的内存块串联起来形成一个链式结构。<br>这样做的好处很明显，首先就是可以提高内存的利用效率<br>另外一个好处，它的节点要用的时候就能接上，不用的时候拆掉就行了，从来不需要考虑扩缩容和数据搬移的问题，理论上讲，链表是没有容量限制的（除非把所有内存都占满，这不太可能）。<br>当然，不可能只有好处没有局限性。数组最大的优势是支持通过索引快速访问元素，而链表就不支持。</p>\n<h2 id=\"单链表的基本操作\"><a href=\"#单链表的基本操作\" class=\"headerlink\" title=\"单链表的基本操作\"></a>单链表的基本操作</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ListNode</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> val;</span><br><span class=\"line\">    ListNode next;</span><br><span class=\"line\">    ListNode(<span class=\"type\">int</span> x) &#123; val = x; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输入一个数组，转换为一条单链表</span></span><br><span class=\"line\">ListNode <span class=\"title function_\">createLinkedList</span><span class=\"params\">(<span class=\"type\">int</span>[] arr)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr == <span class=\"literal\">null</span> || arr.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"type\">ListNode</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        cur.next = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(arr[i]);</span><br><span class=\"line\">        cur = cur.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ListNode</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, x</span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.val = x</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\"><span class=\"comment\"># 输入一个数组，转换为一条单链表</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">createLinkedList</span>(<span class=\"params\">arr: <span class=\"string\">&#x27;List[int]&#x27;</span></span>) -&gt; <span class=\"string\">&#x27;ListNode&#x27;</span>:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> arr <span class=\"keyword\">is</span> <span class=\"literal\">None</span> <span class=\"keyword\">or</span> <span class=\"built_in\">len</span>(arr) == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    head = ListNode(arr[<span class=\"number\">0</span>])</span><br><span class=\"line\">    cur = head</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"built_in\">len</span>(arr)):</span><br><span class=\"line\">        cur.<span class=\"built_in\">next</span> = ListNode(arr[i])</span><br><span class=\"line\">        cur = cur.<span class=\"built_in\">next</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> head</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查-改\"><a href=\"#查-改\" class=\"headerlink\" title=\"查&#x2F;改\"></a>查&#x2F;改</h3><h4 id=\"单链表的遍历-查找-修改\"><a href=\"#单链表的遍历-查找-修改\" class=\"headerlink\" title=\"单链表的遍历&#x2F;查找&#x2F;修改\"></a>单链表的遍历&#x2F;查找&#x2F;修改</h4><p>要通过索引访问或修改链表中的某个节点，也只能用 for 循环从头结点开始往后找，直到找到索引对应的节点，然后进行访问或修改。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 遍历单链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head; p != <span class=\"literal\">null</span>; p = p.next) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 遍历单链表</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">while</span> p <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(p.val)</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h3><h4 id=\"在单链表头部插入新元素\"><a href=\"#在单链表头部插入新元素\" class=\"headerlink\" title=\"在单链表头部插入新元素\"></a>在单链表头部插入新元素</h4><p>我们会持有单链表的头结点，所以只需要将插入的节点接到头结点之前，并将新插入的节点作为头结点即可。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在单链表头部插入一个新节点 0</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">newNode.next = head;</span><br><span class=\"line\">head = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在单链表头部插入一个新节点 0</span></span><br><span class=\"line\">newNode = ListNode(<span class=\"number\">0</span>)</span><br><span class=\"line\">newNode.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">head = newNode</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表尾部插入新元素\"><a href=\"#在单链表尾部插入新元素\" class=\"headerlink\" title=\"在单链表尾部插入新元素\"></a>在单链表尾部插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在单链表尾部插入一个新节点 6</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 现在 p 就是链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 在 p 后面插入新节点</span></span><br><span class=\"line\">p.next = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在单链表尾部插入一个新节点 6</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"comment\"># 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> p.<span class=\"built_in\">next</span> <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 现在 p 就是链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"comment\"># 在 p 后面插入新节点</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = ListNode(<span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n<p>当然，如果我们持有对链表尾节点的引用，那么在尾部插入新节点的操作就会变得非常简单，不用每次从头去遍历了。这个优化会在后面具体实现双链表时介绍。</p>\n<h4 id=\"在单链表中间插入新元素\"><a href=\"#在单链表中间插入新元素\" class=\"headerlink\" title=\"在单链表中间插入新元素\"></a>在单链表中间插入新元素</h4><p>这个操作稍微有点复杂，我们还是要先找到要插入位置的前驱节点，然后操作前驱节点把新节点插入进去：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在第 3 个节点后面插入一个新节点 66</span></span><br><span class=\"line\"><span class=\"comment\">// 先要找到前驱节点，即第 3 个节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向第 3 个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 组装新节点的后驱指针</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">66</span>);</span><br><span class=\"line\">newNode.next = p.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 插入新节点</span></span><br><span class=\"line\">p.next = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在第 3 个节点后面插入一个新节点 66</span></span><br><span class=\"line\"><span class=\"comment\"># 先要找到前驱节点，即第 3 个节点</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>):</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 此时 p 指向第 3 个节点</span></span><br><span class=\"line\"><span class=\"comment\"># 组装新节点的后驱指针</span></span><br><span class=\"line\">new_node = ListNode(<span class=\"number\">66</span>)</span><br><span class=\"line\">new_node.<span class=\"built_in\">next</span> = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 插入新节点</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = new_node</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h3><h4 id=\"在单链表中删除一个节点\"><a href=\"#在单链表中删除一个节点\" class=\"headerlink\" title=\"在单链表中删除一个节点\"></a>在单链表中删除一个节点</h4><p>删除一个节点，首先要找到要被删除节点的前驱节点，然后把这个前驱节点的 <code>next</code> 指针指向被删除节点的下一个节点。这样就能把被删除节点从链表中摘除了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除第 4 个节点，要操作前驱节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向第 3 个节点，即要删除节点的前驱节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把第 4 个节点从链表中摘除</span></span><br><span class=\"line\">p.next = p.next.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"><span class=\"comment\"># 删除第 4 个节点，要操作前驱节点</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>):</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = p.<span class=\"built_in\">next</span>.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表尾部删除元素\"><a href=\"#在单链表尾部删除元素\" class=\"headerlink\" title=\"在单链表尾部删除元素\"></a>在单链表尾部删除元素</h4><p>这个操作比较简单，找到倒数第二个节点，然后把它的 <code>next</code> 指针置为 null 就行了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除尾节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 找到倒数第二个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向倒数第二个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把尾节点从链表中摘除</span></span><br><span class=\"line\">p.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4s</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表头部删除元素\"><a href=\"#在单链表头部删除元素\" class=\"headerlink\" title=\"在单链表头部删除元素\"></a>在单链表头部删除元素</h4><p>直接把 <code>head</code> 移动到下一个节点就行了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除头结点</span></span><br><span class=\"line\">head = head.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<p>不过可能有读者疑惑，之前那个旧的头结点 <code>1</code> 的 next 指针依然指向着节点 <code>2</code>，这样会不会造成内存泄漏？</p>\n<p>不会的，这个节点 <code>1</code> 指向其他的节点是没关系的，只要保证没有其他引用指向这个节点 <code>1</code>，它就能被垃圾回收器回收掉。</p>\n<p>当然，如果你非要显式把节点 <code>1</code> 的 next 指针置为 null，这是个很好的习惯，在其他场景中可能可以避免指针错乱的潜在问题。</p>\n<h2 id=\"双链表基本操作\"><a href=\"#双链表基本操作\" class=\"headerlink\" title=\"双链表基本操作\"></a>双链表基本操作</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DoublyListNode</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> val;</span><br><span class=\"line\">    DoublyListNode next, prev;</span><br><span class=\"line\">    DoublyListNode(<span class=\"type\">int</span> x) &#123; val = x; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">DoublyListNode <span class=\"title function_\">createDoublyLinkedList</span><span class=\"params\">(<span class=\"type\">int</span>[] arr)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr == <span class=\"literal\">null</span> || arr.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"type\">DoublyListNode</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">    <span class=\"comment\">// for 循环迭代创建双链表</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(arr[i]);</span><br><span class=\"line\">        cur.next = newNode;</span><br><span class=\"line\">        newNode.prev = cur;</span><br><span class=\"line\">        cur = cur.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查-改-1\"><a href=\"#查-改-1\" class=\"headerlink\" title=\"查&#x2F;改\"></a>查&#x2F;改</h3><h4 id=\"双链表的遍历-查找-修改\"><a href=\"#双链表的遍历-查找-修改\" class=\"headerlink\" title=\"双链表的遍历&#x2F;查找&#x2F;修改\"></a>双链表的遍历&#x2F;查找&#x2F;修改</h4><p>对于双链表的遍历和查找，我们可以从头节点或尾节点开始，根据需要向前或向后遍历,这样可以一定程度上提高效率。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">tail</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 从头节点向后遍历双链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head; p != <span class=\"literal\">null</span>; p = p.next) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">    tail = p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 从尾节点向前遍历双链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> tail; p != <span class=\"literal\">null</span>; p = p.prev) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"增-1\"><a href=\"#增-1\" class=\"headerlink\" title=\"增\"></a>增</h3><h4 id=\"在双链表头部插入新元素\"><a href=\"#在双链表头部插入新元素\" class=\"headerlink\" title=\"在双链表头部插入新元素\"></a>在双链表头部插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在双链表头部插入新节点 0</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newHead</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">newHead.next = head;</span><br><span class=\"line\">head.prev = newHead;</span><br><span class=\"line\">head = newHead;</span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表尾部插入新元素\"><a href=\"#在双链表尾部插入新元素\" class=\"headerlink\" title=\"在双链表尾部插入新元素\"></a>在双链表尾部插入新元素</h4><p>在双链表尾部插入元素时，如果我们持有尾节点的引用，这个操作会非常简单：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">tail</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (tail.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    tail = tail.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在双链表尾部插入新节点 6</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">6</span>);</span><br><span class=\"line\">tail.next = newNode;</span><br><span class=\"line\">newNode.prev = tail;</span><br><span class=\"line\"><span class=\"comment\">// 更新尾节点引用</span></span><br><span class=\"line\">tail = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表中间插入新元素\"><a href=\"#在双链表中间插入新元素\" class=\"headerlink\" title=\"在双链表中间插入新元素\"></a>在双链表中间插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 想要插入到索引 3（第 4 个节点）</span></span><br><span class=\"line\"><span class=\"comment\">// 需要操作索引 2（第 3 个节点）的指针</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 组装新节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">66</span>);</span><br><span class=\"line\">newNode.next = p.next;</span><br><span class=\"line\">newNode.prev = p;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 插入新节点</span></span><br><span class=\"line\">p.next.prev = newNode;</span><br><span class=\"line\">p.next = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删-1\"><a href=\"#删-1\" class=\"headerlink\" title=\"删\"></a>删</h2><h4 id=\"在双链表中删除一个节点\"><a href=\"#在双链表中删除一个节点\" class=\"headerlink\" title=\"在双链表中删除一个节点\"></a>在双链表中删除一个节点</h4><p>在双链表中删除节点时，需要调整前驱节点和后继节点的指针来摘除目标节点：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除第 4 个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 先找到第 3 个节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在 p 指向第 3 个节点，我们它后面那个节点摘除出去</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">toDelete</span> <span class=\"operator\">=</span> p.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 toDelete 从链表中摘除</span></span><br><span class=\"line\">p.next = toDelete.next;</span><br><span class=\"line\">toDelete.next.prev = p;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 toDelete 的前后指针都置为 null 是个好习惯（可选）</span></span><br><span class=\"line\">toDelete.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">toDelete.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表头部删除元素\"><a href=\"#在双链表头部删除元素\" class=\"headerlink\" title=\"在双链表头部删除元素\"></a>在双链表头部删除元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除头结点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">toDelete</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">head = head.next;</span><br><span class=\"line\">head.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 清理已删除节点的指针</span></span><br><span class=\"line\">toDelete.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表尾部删除元素\"><a href=\"#在双链表尾部删除元素\" class=\"headerlink\" title=\"在双链表尾部删除元素\"></a>在双链表尾部删除元素</h4><p>在单链表中，由于缺乏前驱指针，所以删除尾节点时需要遍历到倒数第二个节点，操作它的 <code>next</code> 指针，才能把尾节点摘除出去。</p>\n<p>但在双链表中，由于每个节点都存储了前驱节点的指针，所以我们可以直接操作尾节点，把它自己从链表中摘除：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除尾节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 找到尾结点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在 p 指向尾节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把尾节点从链表中摘除</span></span><br><span class=\"line\">p.prev.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把被删结点的指针都断开是个好习惯（可选）</span></span><br><span class=\"line\">p.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4</span></span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h2 id=\"为什么需要链表\"><a href=\"#为什么需要链表\" class=\"headerlink\" title=\"为什么需要链表\"></a>为什么需要链表</h2><p>前面介绍了 <a href=\"%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组（顺序存储）的底层原理</a>，说白了就是一块连续的内存空间，有了这块内存空间的首地址，就能直接通过索引计算出任意位置的元素地址。<br>链表不一样，一条链表并不需要一整块连续的内存空间存储元素。链表的元素可以<strong>分散在内存空间的天涯海角</strong>，通过每个节点上的 <code>next, prev</code> 指针，将零散的内存块串联起来形成一个链式结构。<br>这样做的好处很明显，首先就是可以提高内存的利用效率<br>另外一个好处，它的节点要用的时候就能接上，不用的时候拆掉就行了，从来不需要考虑扩缩容和数据搬移的问题，理论上讲，链表是没有容量限制的（除非把所有内存都占满，这不太可能）。<br>当然，不可能只有好处没有局限性。数组最大的优势是支持通过索引快速访问元素，而链表就不支持。</p>\n<h2 id=\"单链表的基本操作\"><a href=\"#单链表的基本操作\" class=\"headerlink\" title=\"单链表的基本操作\"></a>单链表的基本操作</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ListNode</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> val;</span><br><span class=\"line\">    ListNode next;</span><br><span class=\"line\">    ListNode(<span class=\"type\">int</span> x) &#123; val = x; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输入一个数组，转换为一条单链表</span></span><br><span class=\"line\">ListNode <span class=\"title function_\">createLinkedList</span><span class=\"params\">(<span class=\"type\">int</span>[] arr)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr == <span class=\"literal\">null</span> || arr.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"type\">ListNode</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        cur.next = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(arr[i]);</span><br><span class=\"line\">        cur = cur.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ListNode</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, x</span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.val = x</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\"><span class=\"comment\"># 输入一个数组，转换为一条单链表</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">createLinkedList</span>(<span class=\"params\">arr: <span class=\"string\">&#x27;List[int]&#x27;</span></span>) -&gt; <span class=\"string\">&#x27;ListNode&#x27;</span>:</span><br><span class=\"line\">    <span class=\"keyword\">if</span> arr <span class=\"keyword\">is</span> <span class=\"literal\">None</span> <span class=\"keyword\">or</span> <span class=\"built_in\">len</span>(arr) == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    head = ListNode(arr[<span class=\"number\">0</span>])</span><br><span class=\"line\">    cur = head</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"built_in\">len</span>(arr)):</span><br><span class=\"line\">        cur.<span class=\"built_in\">next</span> = ListNode(arr[i])</span><br><span class=\"line\">        cur = cur.<span class=\"built_in\">next</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> head</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查-改\"><a href=\"#查-改\" class=\"headerlink\" title=\"查&#x2F;改\"></a>查&#x2F;改</h3><h4 id=\"单链表的遍历-查找-修改\"><a href=\"#单链表的遍历-查找-修改\" class=\"headerlink\" title=\"单链表的遍历&#x2F;查找&#x2F;修改\"></a>单链表的遍历&#x2F;查找&#x2F;修改</h4><p>要通过索引访问或修改链表中的某个节点，也只能用 for 循环从头结点开始往后找，直到找到索引对应的节点，然后进行访问或修改。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 遍历单链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head; p != <span class=\"literal\">null</span>; p = p.next) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 遍历单链表</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">while</span> p <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(p.val)</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h3><h4 id=\"在单链表头部插入新元素\"><a href=\"#在单链表头部插入新元素\" class=\"headerlink\" title=\"在单链表头部插入新元素\"></a>在单链表头部插入新元素</h4><p>我们会持有单链表的头结点，所以只需要将插入的节点接到头结点之前，并将新插入的节点作为头结点即可。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在单链表头部插入一个新节点 0</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">newNode.next = head;</span><br><span class=\"line\">head = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在单链表头部插入一个新节点 0</span></span><br><span class=\"line\">newNode = ListNode(<span class=\"number\">0</span>)</span><br><span class=\"line\">newNode.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">head = newNode</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表尾部插入新元素\"><a href=\"#在单链表尾部插入新元素\" class=\"headerlink\" title=\"在单链表尾部插入新元素\"></a>在单链表尾部插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在单链表尾部插入一个新节点 6</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 现在 p 就是链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 在 p 后面插入新节点</span></span><br><span class=\"line\">p.next = <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在单链表尾部插入一个新节点 6</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"comment\"># 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> p.<span class=\"built_in\">next</span> <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span>:</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 现在 p 就是链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"comment\"># 在 p 后面插入新节点</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = ListNode(<span class=\"number\">6</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n<p>当然，如果我们持有对链表尾节点的引用，那么在尾部插入新节点的操作就会变得非常简单，不用每次从头去遍历了。这个优化会在后面具体实现双链表时介绍。</p>\n<h4 id=\"在单链表中间插入新元素\"><a href=\"#在单链表中间插入新元素\" class=\"headerlink\" title=\"在单链表中间插入新元素\"></a>在单链表中间插入新元素</h4><p>这个操作稍微有点复杂，我们还是要先找到要插入位置的前驱节点，然后操作前驱节点把新节点插入进去：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在第 3 个节点后面插入一个新节点 66</span></span><br><span class=\"line\"><span class=\"comment\">// 先要找到前驱节点，即第 3 个节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向第 3 个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 组装新节点的后驱指针</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ListNode</span>(<span class=\"number\">66</span>);</span><br><span class=\"line\">newNode.next = p.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 插入新节点</span></span><br><span class=\"line\">p.next = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"comment\"># 创建一条单链表</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在第 3 个节点后面插入一个新节点 66</span></span><br><span class=\"line\"><span class=\"comment\"># 先要找到前驱节点，即第 3 个节点</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>):</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 此时 p 指向第 3 个节点</span></span><br><span class=\"line\"><span class=\"comment\"># 组装新节点的后驱指针</span></span><br><span class=\"line\">new_node = ListNode(<span class=\"number\">66</span>)</span><br><span class=\"line\">new_node.<span class=\"built_in\">next</span> = p.<span class=\"built_in\">next</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 插入新节点</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = new_node</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h3><h4 id=\"在单链表中删除一个节点\"><a href=\"#在单链表中删除一个节点\" class=\"headerlink\" title=\"在单链表中删除一个节点\"></a>在单链表中删除一个节点</h4><p>删除一个节点，首先要找到要被删除节点的前驱节点，然后把这个前驱节点的 <code>next</code> 指针指向被删除节点的下一个节点。这样就能把被删除节点从链表中摘除了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除第 4 个节点，要操作前驱节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向第 3 个节点，即要删除节点的前驱节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把第 4 个节点从链表中摘除</span></span><br><span class=\"line\">p.next = p.next.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\">head = createLinkedList([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>])</span><br><span class=\"line\"><span class=\"comment\"># 删除第 4 个节点，要操作前驱节点</span></span><br><span class=\"line\">p = head</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">2</span>):</span><br><span class=\"line\">    p = p.<span class=\"built_in\">next</span></span><br><span class=\"line\">p.<span class=\"built_in\">next</span> = p.<span class=\"built_in\">next</span>.<span class=\"built_in\">next</span></span><br><span class=\"line\"><span class=\"comment\"># 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表尾部删除元素\"><a href=\"#在单链表尾部删除元素\" class=\"headerlink\" title=\"在单链表尾部删除元素\"></a>在单链表尾部删除元素</h4><p>这个操作比较简单，找到倒数第二个节点，然后把它的 <code>next</code> 指针置为 null 就行了：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除尾节点</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 找到倒数第二个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 此时 p 指向倒数第二个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把尾节点从链表中摘除</span></span><br><span class=\"line\">p.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4s</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在单链表头部删除元素\"><a href=\"#在单链表头部删除元素\" class=\"headerlink\" title=\"在单链表头部删除元素\"></a>在单链表头部删除元素</h4><p>直接把 <code>head</code> 移动到下一个节点就行了。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条单链表</span></span><br><span class=\"line\"><span class=\"type\">ListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除头结点</span></span><br><span class=\"line\">head = head.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<p>不过可能有读者疑惑，之前那个旧的头结点 <code>1</code> 的 next 指针依然指向着节点 <code>2</code>，这样会不会造成内存泄漏？</p>\n<p>不会的，这个节点 <code>1</code> 指向其他的节点是没关系的，只要保证没有其他引用指向这个节点 <code>1</code>，它就能被垃圾回收器回收掉。</p>\n<p>当然，如果你非要显式把节点 <code>1</code> 的 next 指针置为 null，这是个很好的习惯，在其他场景中可能可以避免指针错乱的潜在问题。</p>\n<h2 id=\"双链表基本操作\"><a href=\"#双链表基本操作\" class=\"headerlink\" title=\"双链表基本操作\"></a>双链表基本操作</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//java</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DoublyListNode</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> val;</span><br><span class=\"line\">    DoublyListNode next, prev;</span><br><span class=\"line\">    DoublyListNode(<span class=\"type\">int</span> x) &#123; val = x; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">DoublyListNode <span class=\"title function_\">createDoublyLinkedList</span><span class=\"params\">(<span class=\"type\">int</span>[] arr)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr == <span class=\"literal\">null</span> || arr.length == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(arr[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    <span class=\"type\">DoublyListNode</span> <span class=\"variable\">cur</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">    <span class=\"comment\">// for 循环迭代创建双链表</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(arr[i]);</span><br><span class=\"line\">        cur.next = newNode;</span><br><span class=\"line\">        newNode.prev = cur;</span><br><span class=\"line\">        cur = cur.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查-改-1\"><a href=\"#查-改-1\" class=\"headerlink\" title=\"查&#x2F;改\"></a>查&#x2F;改</h3><h4 id=\"双链表的遍历-查找-修改\"><a href=\"#双链表的遍历-查找-修改\" class=\"headerlink\" title=\"双链表的遍历&#x2F;查找&#x2F;修改\"></a>双链表的遍历&#x2F;查找&#x2F;修改</h4><p>对于双链表的遍历和查找，我们可以从头节点或尾节点开始，根据需要向前或向后遍历,这样可以一定程度上提高效率。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">tail</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 从头节点向后遍历双链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head; p != <span class=\"literal\">null</span>; p = p.next) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">    tail = p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 从尾节点向前遍历双链表</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> tail; p != <span class=\"literal\">null</span>; p = p.prev) &#123;</span><br><span class=\"line\">    System.out.println(p.val);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"增-1\"><a href=\"#增-1\" class=\"headerlink\" title=\"增\"></a>增</h3><h4 id=\"在双链表头部插入新元素\"><a href=\"#在双链表头部插入新元素\" class=\"headerlink\" title=\"在双链表头部插入新元素\"></a>在双链表头部插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在双链表头部插入新节点 0</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newHead</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">newHead.next = head;</span><br><span class=\"line\">head.prev = newHead;</span><br><span class=\"line\">head = newHead;</span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表尾部插入新元素\"><a href=\"#在双链表尾部插入新元素\" class=\"headerlink\" title=\"在双链表尾部插入新元素\"></a>在双链表尾部插入新元素</h4><p>在双链表尾部插入元素时，如果我们持有尾节点的引用，这个操作会非常简单：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">tail</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 先走到链表的最后一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (tail.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    tail = tail.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 在双链表尾部插入新节点 6</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">6</span>);</span><br><span class=\"line\">tail.next = newNode;</span><br><span class=\"line\">newNode.prev = tail;</span><br><span class=\"line\"><span class=\"comment\">// 更新尾节点引用</span></span><br><span class=\"line\">tail = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表中间插入新元素\"><a href=\"#在双链表中间插入新元素\" class=\"headerlink\" title=\"在双链表中间插入新元素\"></a>在双链表中间插入新元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 想要插入到索引 3（第 4 个节点）</span></span><br><span class=\"line\"><span class=\"comment\">// 需要操作索引 2（第 3 个节点）的指针</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 组装新节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">DoublyListNode</span>(<span class=\"number\">66</span>);</span><br><span class=\"line\">newNode.next = p.next;</span><br><span class=\"line\">newNode.prev = p;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 插入新节点</span></span><br><span class=\"line\">p.next.prev = newNode;</span><br><span class=\"line\">p.next = newNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 66 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删-1\"><a href=\"#删-1\" class=\"headerlink\" title=\"删\"></a>删</h2><h4 id=\"在双链表中删除一个节点\"><a href=\"#在双链表中删除一个节点\" class=\"headerlink\" title=\"在双链表中删除一个节点\"></a>在双链表中删除一个节点</h4><p>在双链表中删除节点时，需要调整前驱节点和后继节点的指针来摘除目标节点：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除第 4 个节点</span></span><br><span class=\"line\"><span class=\"comment\">// 先找到第 3 个节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在 p 指向第 3 个节点，我们它后面那个节点摘除出去</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">toDelete</span> <span class=\"operator\">=</span> p.next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 toDelete 从链表中摘除</span></span><br><span class=\"line\">p.next = toDelete.next;</span><br><span class=\"line\">toDelete.next.prev = p;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把 toDelete 的前后指针都置为 null 是个好习惯（可选）</span></span><br><span class=\"line\">toDelete.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">toDelete.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表头部删除元素\"><a href=\"#在双链表头部删除元素\" class=\"headerlink\" title=\"在双链表头部删除元素\"></a>在双链表头部删除元素</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除头结点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">toDelete</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\">head = head.next;</span><br><span class=\"line\">head.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 清理已删除节点的指针</span></span><br><span class=\"line\">toDelete.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 2 -&gt; 3 -&gt; 4 -&gt; 5</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"在双链表尾部删除元素\"><a href=\"#在双链表尾部删除元素\" class=\"headerlink\" title=\"在双链表尾部删除元素\"></a>在双链表尾部删除元素</h4><p>在单链表中，由于缺乏前驱指针，所以删除尾节点时需要遍历到倒数第二个节点，操作它的 <code>next</code> 指针，才能把尾节点摘除出去。</p>\n<p>但在双链表中，由于每个节点都存储了前驱节点的指针，所以我们可以直接操作尾节点，把它自己从链表中摘除：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"comment\">// 创建一条双链表</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> createDoublyLinkedList(<span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[]&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除尾节点</span></span><br><span class=\"line\"><span class=\"type\">DoublyListNode</span> <span class=\"variable\">p</span> <span class=\"operator\">=</span> head;</span><br><span class=\"line\"><span class=\"comment\">// 找到尾结点</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (p.next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    p = p.next;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在 p 指向尾节点</span></span><br><span class=\"line\"><span class=\"comment\">// 把尾节点从链表中摘除</span></span><br><span class=\"line\">p.prev.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 把被删结点的指针都断开是个好习惯（可选）</span></span><br><span class=\"line\">p.prev = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 现在链表变成了 1 -&gt; 2 -&gt; 3 -&gt; 4</span></span><br></pre></td></tr></table></figure>"},{"date":"2025-07-05T16:00:00.000Z","title":"动态数组代码实现","cssclasses":["数据结构","数组"],"_content":"## 自动扩缩容\n\n我们这里就实现一个简单的扩缩容的策略：\n\n- 当数组元素个数达到底层静态数组的容量上限时，扩容为原来的 2 倍；\n- 当数组元素个数缩减到底层静态数组的容量的 1/4 时，缩容为原来的 1/2。\n\n## 索引边界的检查\n\n需要注意的两个检查越界的方法：\n\n| 方法名                | 越界判断条件      | 适用场景                   |\n| ------------------ | ----------- | ---------------------- |\n| checkElementIndex  | index<size  | 访问 / 修改元素操作（如 get/set） |\n| checkPositionIndex | index<=size | 插入元素操作（如 add）          |\n\n为什么会有这样的区别？\n比方说有这样一个 `nums` 数组，对于每个元素来说，合法的索引一定是 `index < size`：\n\n```\nnums = [5, 6, 7, 8]\nindex   0  1  2  3\n```\n\n但如果是要在数组中插入新元素，那么新元素可能的插入位置并不是元素的索引，而是索引之间的空隙：\n\n```\nnums = [ | 5 | 6 | 7 | 8 | ]\nindex    0   1   2   3   4\n```\n\n这些空隙都是合法的插入位置，所以说 `index == size` 也是合法的。这就是 `checkPositionIndex` 和 `checkElementIndex` 的区别。\n\n## 删除元素谨防内存泄漏\n\n单从算法的角度，其实并不需要关心被删掉的元素应该如何处理，但是具体到代码实现，我们需要注意可能出现的内存泄漏。\n\n在我给出的代码实现中，删除元素时，我都会**把被删除的元素置为 `null`** 。\n\n以 Java 为例，Java 的垃圾回收机制是基于**图算法的可达性**分析，如果一个对象再也无法被访问到，那么这个对象占用的内存才会被释放；否则，垃圾回收器会认为这个对象还在使用中，就不会释放这个对象占用的内存。\n\n如果你不执行 `data[size - 1] = null` 这行代码，那么 `data[size - 1]` 这个引用就会一直存在，你可以通过 `data[size - 1]` 访问这个对象，所以这个对象被认为是可达的，它的内存就一直不会被释放，进而造成内存泄漏。\n\n其他带垃圾回收功能的语言应该也是类似的，你可以具体了解一下你使用的编程语言的垃圾回收机制，这是写出无 bug 代码的基本要求。\n\n## 其他细节优化\n\n有不少可以进一步优化的点，比方说，我是用 for 循环复制数组数据的，实际上这种方式复制的效率比较差，大部分编程语言会提供更高效的数组复制方法，比如 Java 的 `System.arraycopy`。\n\n不过它再怎么优化，本质上也是要搬移数据，时间复杂度都是 O(n)。本文的重点在于让你理解数组增删查改 API 的基本实现思路以及时间复杂度，如果对这些细节感兴趣，可以找到编程语言标准库的源码深入研究。\n\n## 动态数组代码实现\n\n```java\n// java\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class MyArrayList<E> {\n    // 真正存储数据的底层数组\n    private E[] data;\n    // 记录当前元素个数\n    private int size;\n    // 默认初始容量\n    private static final int INIT_CAP = 1;\n\n    public MyArrayList() {\n        this(INIT_CAP);\n    }\n\n    public MyArrayList(int initCapacity) {\n        data = (E[]) new Object[initCapacity];\n        size = 0;\n    }\n\n    // 增\n    public void addLast(E e) {\n        int cap = data.length;\n        // 看 data 数组容量够不够\n        if (size == cap) {\n            resize(2 * cap);\n        }\n        // 在尾部插入元素\n        data[size] = e;\n        size++;\n    }\n\n    public void add(int index, E e) {\n        // 检查索引越界\n        checkPositionIndex(index);\n\n        int cap = data.length;\n        // 看 data 数组容量够不够\n        if (size == cap) {\n            resize(2 * cap);\n        }\n\n        // 搬移数据 data[index..] -> data[index+1..]\n        // 给新元素腾出位置\n        for (int i = size - 1; i >= index; i--) {\n            data[i + 1] = data[i];\n        }\n\n        // 插入新元素\n        data[index] = e;\n\n        size++;\n    }\n\n    public void addFirst(E e) {\n        add(0, e);\n    }\n\n    // 删\n    public E removeLast() {\n        if (size == 0) {\n            throw new NoSuchElementException();\n        }\n        int cap = data.length;\n        // 可以缩容，节约空间\n        if (size == cap / 4) {\n            resize(cap / 2);\n        }\n\n        E deletedVal = data[size - 1];\n        // 删除最后一个元素\n        // 必须给最后一个元素置为 null，否则会内存泄漏\n        data[size - 1] = null;\n        size--;\n\n        return deletedVal;\n    }\n\n    public E remove(int index) {\n        // 检查索引越界\n        checkElementIndex(index);\n\n        int cap = data.length;\n        // 可以缩容，节约空间\n        if (size == cap / 4) {\n            resize(cap / 2);\n        }\n\n        E deletedVal = data[index];\n\n        // 搬移数据 data[index+1..] -> data[index..]\n        for (int i = index + 1; i < size; i++) {\n            data[i - 1] = data[i];\n        }\n\n        data[size - 1] = null;\n        size--;\n\n        return deletedVal;\n    }\n\n    public E removeFirst() {\n        return remove(0);\n    }\n\n    // 查\n    public E get(int index) {\n        // 检查索引越界\n        checkElementIndex(index);\n\n        return data[index];\n    }\n\n    // 改\n    public E set(int index, E element) {\n        // 检查索引越界\n        checkElementIndex(index);\n        // 修改数据\n        E oldVal = data[index];\n        data[index] = element;\n        return oldVal;\n    }\n\n    // 工具方法\n    public int size() {\n        return size;\n    }\n\n    public boolean isEmpty() {\n        return size == 0;\n    }\n\n    // 将 data 的容量改为 newCap\n    private void resize(int newCap) {\n        E[] temp = (E[]) new Object[newCap];\n\n        for (int i = 0; i < size; i++) {\n            temp[i] = data[i];\n        }\n\n        data = temp;\n    }\n\n    private boolean isElementIndex(int index) {\n        return index >= 0 && index < size;\n    }\n\n    private boolean isPositionIndex(int index) {\n        return index >= 0 && index <= size;\n    }\n\n    \n    // 检查 index 索引位置是否可以存在元素\n    private void checkElementIndex(int index) {\n        if (!isElementIndex(index))\n            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + size);\n    }\n\n    \n    // 检查 index 索引位置是否可以添加元素\n    private void checkPositionIndex(int index) {\n        if (!isPositionIndex(index))\n            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + size);\n    }\n\n    private void display() {\n        System.out.println(\"size = \" + size + \" cap = \" + data.length);\n        System.out.println(Arrays.toString(data));\n    }\n\n\n    public static void main(String[] args) {\n        // 初始容量设置为 3\n        MyArrayList<Integer> arr = new MyArrayList<>(3);\n\n        // 添加 5 个元素\n        for (int i = 1; i <= 5; i++) {\n            arr.addLast(i);\n        }\n\n        arr.remove(3);\n        arr.add(1, 9);\n        arr.addFirst(100);\n        int val = arr.removeLast();\n\n        for (int i = 0; i < arr.size(); i++) {\n            System.out.println(arr.get(i));\n        }\n    }\n\n}\n```\n\n```python\n# python\nclass MyArrayList:\n    # 默认初始容量\n    INIT_CAP = 1\n\n    def __init__(self, init_capacity=None):\n        self.data = [None] * (init_capacity if init_capacity is not None else self.__class__.INIT_CAP)\n        self.size = 0\n    \n    # 增\n    def add_last(self, e):\n        cap = len(self.data)\n        # 看 data 数组容量够不够\n        if self.size == cap:\n            self._resize(2 * cap)\n        # 在尾部插入元素\n        self.data[self.size] = e\n        self.size += 1\n\n    def add(self, index, e):\n        # 检查索引越界\n        self._check_position_index(index)\n\n        cap = len(self.data)\n        # 看 data 数组容量够不够\n        if self.size == cap:\n            self._resize(2 * cap)\n\n        # 搬移数据 data[index..] -> data[index+1..]\n        # 给新元素腾出位置\n        for i in range(self.size-1, index-1, -1):\n            self.data[i+1] = self.data[i]\n        \n        # 插入新元素\n        self.data[index] = e\n\n        self.size += 1\n\n    def add_first(self, e):\n        self.add(0, e)\n\n    # 删\n    def remove_last(self):\n        if self.size == 0:\n            raise Exception(\"NoSuchElementException\")\n        cap = len(self.data)\n        # 可以缩容，节约空间\n        if self.size == cap // 4:\n            self._resize(cap // 2)\n\n        deleted_val = self.data[self.size - 1]\n        # 删除最后一个元素\n        self.data[self.size - 1] = None\n        self.size -= 1\n\n        return deleted_val\n\n    def remove(self, index):\n        # 检查索引越界\n        self._check_element_index(index)\n\n        cap = len(self.data)\n        # 可以缩容，节约空间\n        if self.size == cap // 4:\n            self._resize(cap // 2)\n\n        deleted_val = self.data[index]\n\n        # 搬移数据 data[index+1..] -> data[index..]\n        for i in range(index + 1, self.size):\n            self.data[i - 1] = self.data[i]\n\n        self.data[self.size - 1] = None\n        self.size -= 1\n\n        return deleted_val\n\n    def remove_first(self):\n        return self.remove(0)\n\n    # 查\n    def get(self, index):\n        # 检查索引越界\n        self._check_element_index(index)\n\n        return self.data[index]\n\n    # 改\n    def set(self, index, element):\n        # 检查索引越界\n        self._check_element_index(index)\n        # 修改数据\n        old_val = self.data[index]\n        self.data[index] = element\n        return old_val\n\n    # 工具方法\n    def get_size(self):\n        return self.size\n\n    def is_empty(self):\n        return self.size == 0\n\n    # 将 data 的容量改为 newCap\n    def _resize(self, new_cap):\n        temp = [None] * new_cap\n        for i in range(self.size):\n            temp[i] = self.data[i]\n        self.data = temp\n\n    def _is_element_index(self, index):\n        return 0 <= index < self.size\n\n    def _is_position_index(self, index):\n        return 0 <= index <= self.size\n\n    def _check_element_index(self, index):\n        if not self._is_element_index(index):\n            raise IndexError(f\"Index: {index}, Size: {self.size}\")\n\n    def _check_position_index(self, index):\n        if not self._is_position_index(index):\n            raise IndexError(f\"Index: {index}, Size: {self.size}\")\n\n    def display(self):\n        print(f\"size = {self.size}, cap = {len(self.data)}\")\n        print(self.data)\n\n\n# Usage example\nif __name__ == \"__main__\":\n    arr = MyArrayList(init_capacity=3)\n\n    # 添加 5 个元素\n    for i in range(1, 6):\n        arr.add_last(i)\n\n    arr.remove(3)\n    arr.add(1, 9)\n    arr.add_first(100)\n    val = arr.remove_last()\n\n    # 100 1 9 2 3\n    for i in range(arr.get_size()):\n        print(arr.get(i))\n```","source":"数据结构/动态数组代码实现.md","raw":"---\ndate: 2025-07-06\ntitle: 动态数组代码实现\ncssclasses:\n  - 数据结构\n  - 数组\n---\n## 自动扩缩容\n\n我们这里就实现一个简单的扩缩容的策略：\n\n- 当数组元素个数达到底层静态数组的容量上限时，扩容为原来的 2 倍；\n- 当数组元素个数缩减到底层静态数组的容量的 1/4 时，缩容为原来的 1/2。\n\n## 索引边界的检查\n\n需要注意的两个检查越界的方法：\n\n| 方法名                | 越界判断条件      | 适用场景                   |\n| ------------------ | ----------- | ---------------------- |\n| checkElementIndex  | index<size  | 访问 / 修改元素操作（如 get/set） |\n| checkPositionIndex | index<=size | 插入元素操作（如 add）          |\n\n为什么会有这样的区别？\n比方说有这样一个 `nums` 数组，对于每个元素来说，合法的索引一定是 `index < size`：\n\n```\nnums = [5, 6, 7, 8]\nindex   0  1  2  3\n```\n\n但如果是要在数组中插入新元素，那么新元素可能的插入位置并不是元素的索引，而是索引之间的空隙：\n\n```\nnums = [ | 5 | 6 | 7 | 8 | ]\nindex    0   1   2   3   4\n```\n\n这些空隙都是合法的插入位置，所以说 `index == size` 也是合法的。这就是 `checkPositionIndex` 和 `checkElementIndex` 的区别。\n\n## 删除元素谨防内存泄漏\n\n单从算法的角度，其实并不需要关心被删掉的元素应该如何处理，但是具体到代码实现，我们需要注意可能出现的内存泄漏。\n\n在我给出的代码实现中，删除元素时，我都会**把被删除的元素置为 `null`** 。\n\n以 Java 为例，Java 的垃圾回收机制是基于**图算法的可达性**分析，如果一个对象再也无法被访问到，那么这个对象占用的内存才会被释放；否则，垃圾回收器会认为这个对象还在使用中，就不会释放这个对象占用的内存。\n\n如果你不执行 `data[size - 1] = null` 这行代码，那么 `data[size - 1]` 这个引用就会一直存在，你可以通过 `data[size - 1]` 访问这个对象，所以这个对象被认为是可达的，它的内存就一直不会被释放，进而造成内存泄漏。\n\n其他带垃圾回收功能的语言应该也是类似的，你可以具体了解一下你使用的编程语言的垃圾回收机制，这是写出无 bug 代码的基本要求。\n\n## 其他细节优化\n\n有不少可以进一步优化的点，比方说，我是用 for 循环复制数组数据的，实际上这种方式复制的效率比较差，大部分编程语言会提供更高效的数组复制方法，比如 Java 的 `System.arraycopy`。\n\n不过它再怎么优化，本质上也是要搬移数据，时间复杂度都是 O(n)。本文的重点在于让你理解数组增删查改 API 的基本实现思路以及时间复杂度，如果对这些细节感兴趣，可以找到编程语言标准库的源码深入研究。\n\n## 动态数组代码实现\n\n```java\n// java\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class MyArrayList<E> {\n    // 真正存储数据的底层数组\n    private E[] data;\n    // 记录当前元素个数\n    private int size;\n    // 默认初始容量\n    private static final int INIT_CAP = 1;\n\n    public MyArrayList() {\n        this(INIT_CAP);\n    }\n\n    public MyArrayList(int initCapacity) {\n        data = (E[]) new Object[initCapacity];\n        size = 0;\n    }\n\n    // 增\n    public void addLast(E e) {\n        int cap = data.length;\n        // 看 data 数组容量够不够\n        if (size == cap) {\n            resize(2 * cap);\n        }\n        // 在尾部插入元素\n        data[size] = e;\n        size++;\n    }\n\n    public void add(int index, E e) {\n        // 检查索引越界\n        checkPositionIndex(index);\n\n        int cap = data.length;\n        // 看 data 数组容量够不够\n        if (size == cap) {\n            resize(2 * cap);\n        }\n\n        // 搬移数据 data[index..] -> data[index+1..]\n        // 给新元素腾出位置\n        for (int i = size - 1; i >= index; i--) {\n            data[i + 1] = data[i];\n        }\n\n        // 插入新元素\n        data[index] = e;\n\n        size++;\n    }\n\n    public void addFirst(E e) {\n        add(0, e);\n    }\n\n    // 删\n    public E removeLast() {\n        if (size == 0) {\n            throw new NoSuchElementException();\n        }\n        int cap = data.length;\n        // 可以缩容，节约空间\n        if (size == cap / 4) {\n            resize(cap / 2);\n        }\n\n        E deletedVal = data[size - 1];\n        // 删除最后一个元素\n        // 必须给最后一个元素置为 null，否则会内存泄漏\n        data[size - 1] = null;\n        size--;\n\n        return deletedVal;\n    }\n\n    public E remove(int index) {\n        // 检查索引越界\n        checkElementIndex(index);\n\n        int cap = data.length;\n        // 可以缩容，节约空间\n        if (size == cap / 4) {\n            resize(cap / 2);\n        }\n\n        E deletedVal = data[index];\n\n        // 搬移数据 data[index+1..] -> data[index..]\n        for (int i = index + 1; i < size; i++) {\n            data[i - 1] = data[i];\n        }\n\n        data[size - 1] = null;\n        size--;\n\n        return deletedVal;\n    }\n\n    public E removeFirst() {\n        return remove(0);\n    }\n\n    // 查\n    public E get(int index) {\n        // 检查索引越界\n        checkElementIndex(index);\n\n        return data[index];\n    }\n\n    // 改\n    public E set(int index, E element) {\n        // 检查索引越界\n        checkElementIndex(index);\n        // 修改数据\n        E oldVal = data[index];\n        data[index] = element;\n        return oldVal;\n    }\n\n    // 工具方法\n    public int size() {\n        return size;\n    }\n\n    public boolean isEmpty() {\n        return size == 0;\n    }\n\n    // 将 data 的容量改为 newCap\n    private void resize(int newCap) {\n        E[] temp = (E[]) new Object[newCap];\n\n        for (int i = 0; i < size; i++) {\n            temp[i] = data[i];\n        }\n\n        data = temp;\n    }\n\n    private boolean isElementIndex(int index) {\n        return index >= 0 && index < size;\n    }\n\n    private boolean isPositionIndex(int index) {\n        return index >= 0 && index <= size;\n    }\n\n    \n    // 检查 index 索引位置是否可以存在元素\n    private void checkElementIndex(int index) {\n        if (!isElementIndex(index))\n            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + size);\n    }\n\n    \n    // 检查 index 索引位置是否可以添加元素\n    private void checkPositionIndex(int index) {\n        if (!isPositionIndex(index))\n            throw new IndexOutOfBoundsException(\"Index: \" + index + \", Size: \" + size);\n    }\n\n    private void display() {\n        System.out.println(\"size = \" + size + \" cap = \" + data.length);\n        System.out.println(Arrays.toString(data));\n    }\n\n\n    public static void main(String[] args) {\n        // 初始容量设置为 3\n        MyArrayList<Integer> arr = new MyArrayList<>(3);\n\n        // 添加 5 个元素\n        for (int i = 1; i <= 5; i++) {\n            arr.addLast(i);\n        }\n\n        arr.remove(3);\n        arr.add(1, 9);\n        arr.addFirst(100);\n        int val = arr.removeLast();\n\n        for (int i = 0; i < arr.size(); i++) {\n            System.out.println(arr.get(i));\n        }\n    }\n\n}\n```\n\n```python\n# python\nclass MyArrayList:\n    # 默认初始容量\n    INIT_CAP = 1\n\n    def __init__(self, init_capacity=None):\n        self.data = [None] * (init_capacity if init_capacity is not None else self.__class__.INIT_CAP)\n        self.size = 0\n    \n    # 增\n    def add_last(self, e):\n        cap = len(self.data)\n        # 看 data 数组容量够不够\n        if self.size == cap:\n            self._resize(2 * cap)\n        # 在尾部插入元素\n        self.data[self.size] = e\n        self.size += 1\n\n    def add(self, index, e):\n        # 检查索引越界\n        self._check_position_index(index)\n\n        cap = len(self.data)\n        # 看 data 数组容量够不够\n        if self.size == cap:\n            self._resize(2 * cap)\n\n        # 搬移数据 data[index..] -> data[index+1..]\n        # 给新元素腾出位置\n        for i in range(self.size-1, index-1, -1):\n            self.data[i+1] = self.data[i]\n        \n        # 插入新元素\n        self.data[index] = e\n\n        self.size += 1\n\n    def add_first(self, e):\n        self.add(0, e)\n\n    # 删\n    def remove_last(self):\n        if self.size == 0:\n            raise Exception(\"NoSuchElementException\")\n        cap = len(self.data)\n        # 可以缩容，节约空间\n        if self.size == cap // 4:\n            self._resize(cap // 2)\n\n        deleted_val = self.data[self.size - 1]\n        # 删除最后一个元素\n        self.data[self.size - 1] = None\n        self.size -= 1\n\n        return deleted_val\n\n    def remove(self, index):\n        # 检查索引越界\n        self._check_element_index(index)\n\n        cap = len(self.data)\n        # 可以缩容，节约空间\n        if self.size == cap // 4:\n            self._resize(cap // 2)\n\n        deleted_val = self.data[index]\n\n        # 搬移数据 data[index+1..] -> data[index..]\n        for i in range(index + 1, self.size):\n            self.data[i - 1] = self.data[i]\n\n        self.data[self.size - 1] = None\n        self.size -= 1\n\n        return deleted_val\n\n    def remove_first(self):\n        return self.remove(0)\n\n    # 查\n    def get(self, index):\n        # 检查索引越界\n        self._check_element_index(index)\n\n        return self.data[index]\n\n    # 改\n    def set(self, index, element):\n        # 检查索引越界\n        self._check_element_index(index)\n        # 修改数据\n        old_val = self.data[index]\n        self.data[index] = element\n        return old_val\n\n    # 工具方法\n    def get_size(self):\n        return self.size\n\n    def is_empty(self):\n        return self.size == 0\n\n    # 将 data 的容量改为 newCap\n    def _resize(self, new_cap):\n        temp = [None] * new_cap\n        for i in range(self.size):\n            temp[i] = self.data[i]\n        self.data = temp\n\n    def _is_element_index(self, index):\n        return 0 <= index < self.size\n\n    def _is_position_index(self, index):\n        return 0 <= index <= self.size\n\n    def _check_element_index(self, index):\n        if not self._is_element_index(index):\n            raise IndexError(f\"Index: {index}, Size: {self.size}\")\n\n    def _check_position_index(self, index):\n        if not self._is_position_index(index):\n            raise IndexError(f\"Index: {index}, Size: {self.size}\")\n\n    def display(self):\n        print(f\"size = {self.size}, cap = {len(self.data)}\")\n        print(self.data)\n\n\n# Usage example\nif __name__ == \"__main__\":\n    arr = MyArrayList(init_capacity=3)\n\n    # 添加 5 个元素\n    for i in range(1, 6):\n        arr.add_last(i)\n\n    arr.remove(3)\n    arr.add(1, 9)\n    arr.add_first(100)\n    val = arr.remove_last()\n\n    # 100 1 9 2 3\n    for i in range(arr.get_size()):\n        print(arr.get(i))\n```","updated":"2025-07-19T07:32:31.749Z","path":"数据结构/动态数组代码实现.html","comments":1,"layout":"page","_id":"cmdh6nnwi000m9gv3hsc0c1fz","content":"<h2 id=\"自动扩缩容\"><a href=\"#自动扩缩容\" class=\"headerlink\" title=\"自动扩缩容\"></a>自动扩缩容</h2><p>我们这里就实现一个简单的扩缩容的策略：</p>\n<ul>\n<li>当数组元素个数达到底层静态数组的容量上限时，扩容为原来的 2 倍；</li>\n<li>当数组元素个数缩减到底层静态数组的容量的 1&#x2F;4 时，缩容为原来的 1&#x2F;2。</li>\n</ul>\n<h2 id=\"索引边界的检查\"><a href=\"#索引边界的检查\" class=\"headerlink\" title=\"索引边界的检查\"></a>索引边界的检查</h2><p>需要注意的两个检查越界的方法：</p>\n<table>\n<thead>\n<tr>\n<th>方法名</th>\n<th>越界判断条件</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>checkElementIndex</td>\n<td>index&lt;size</td>\n<td>访问 &#x2F; 修改元素操作（如 get&#x2F;set）</td>\n</tr>\n<tr>\n<td>checkPositionIndex</td>\n<td>index&lt;&#x3D;size</td>\n<td>插入元素操作（如 add）</td>\n</tr>\n</tbody></table>\n<p>为什么会有这样的区别？<br>比方说有这样一个 <code>nums</code> 数组，对于每个元素来说，合法的索引一定是 <code>index &lt; size</code>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nums = [5, 6, 7, 8]</span><br><span class=\"line\">index   0  1  2  3</span><br></pre></td></tr></table></figure>\n\n<p>但如果是要在数组中插入新元素，那么新元素可能的插入位置并不是元素的索引，而是索引之间的空隙：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nums = [ | 5 | 6 | 7 | 8 | ]</span><br><span class=\"line\">index    0   1   2   3   4</span><br></pre></td></tr></table></figure>\n\n<p>这些空隙都是合法的插入位置，所以说 <code>index == size</code> 也是合法的。这就是 <code>checkPositionIndex</code> 和 <code>checkElementIndex</code> 的区别。</p>\n<h2 id=\"删除元素谨防内存泄漏\"><a href=\"#删除元素谨防内存泄漏\" class=\"headerlink\" title=\"删除元素谨防内存泄漏\"></a>删除元素谨防内存泄漏</h2><p>单从算法的角度，其实并不需要关心被删掉的元素应该如何处理，但是具体到代码实现，我们需要注意可能出现的内存泄漏。</p>\n<p>在我给出的代码实现中，删除元素时，我都会<strong>把被删除的元素置为 <code>null</code></strong> 。</p>\n<p>以 Java 为例，Java 的垃圾回收机制是基于<strong>图算法的可达性</strong>分析，如果一个对象再也无法被访问到，那么这个对象占用的内存才会被释放；否则，垃圾回收器会认为这个对象还在使用中，就不会释放这个对象占用的内存。</p>\n<p>如果你不执行 <code>data[size - 1] = null</code> 这行代码，那么 <code>data[size - 1]</code> 这个引用就会一直存在，你可以通过 <code>data[size - 1]</code> 访问这个对象，所以这个对象被认为是可达的，它的内存就一直不会被释放，进而造成内存泄漏。</p>\n<p>其他带垃圾回收功能的语言应该也是类似的，你可以具体了解一下你使用的编程语言的垃圾回收机制，这是写出无 bug 代码的基本要求。</p>\n<h2 id=\"其他细节优化\"><a href=\"#其他细节优化\" class=\"headerlink\" title=\"其他细节优化\"></a>其他细节优化</h2><p>有不少可以进一步优化的点，比方说，我是用 for 循环复制数组数据的，实际上这种方式复制的效率比较差，大部分编程语言会提供更高效的数组复制方法，比如 Java 的 <code>System.arraycopy</code>。</p>\n<p>不过它再怎么优化，本质上也是要搬移数据，时间复杂度都是 O(n)。本文的重点在于让你理解数组增删查改 API 的基本实现思路以及时间复杂度，如果对这些细节感兴趣，可以找到编程语言标准库的源码深入研究。</p>\n<h2 id=\"动态数组代码实现\"><a href=\"#动态数组代码实现\" class=\"headerlink\" title=\"动态数组代码实现\"></a>动态数组代码实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Iterator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.NoSuchElementException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyArrayList</span>&lt;E&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 真正存储数据的底层数组</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> E[] data;</span><br><span class=\"line\">    <span class=\"comment\">// 记录当前元素个数</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"comment\">// 默认初始容量</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">INIT_CAP</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyArrayList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>(INIT_CAP);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyArrayList</span><span class=\"params\">(<span class=\"type\">int</span> initCapacity)</span> &#123;</span><br><span class=\"line\">        data = (E[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[initCapacity];</span><br><span class=\"line\">        size = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 增</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addLast</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap) &#123;</span><br><span class=\"line\">            resize(<span class=\"number\">2</span> * cap);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 在尾部插入元素</span></span><br><span class=\"line\">        data[size] = e;</span><br><span class=\"line\">        size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">int</span> index, E e)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkPositionIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap) &#123;</span><br><span class=\"line\">            resize(<span class=\"number\">2</span> * cap);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 搬移数据 data[index..] -&gt; data[index+1..]</span></span><br><span class=\"line\">        <span class=\"comment\">// 给新元素腾出位置</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> size - <span class=\"number\">1</span>; i &gt;= index; i--) &#123;</span><br><span class=\"line\">            data[i + <span class=\"number\">1</span>] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 插入新元素</span></span><br><span class=\"line\">        data[index] = e;</span><br><span class=\"line\"></span><br><span class=\"line\">        size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addFirst</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">        add(<span class=\"number\">0</span>, e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">removeLast</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NoSuchElementException</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap / <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            resize(cap / <span class=\"number\">2</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">deletedVal</span> <span class=\"operator\">=</span> data[size - <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">// 删除最后一个元素</span></span><br><span class=\"line\">        <span class=\"comment\">// 必须给最后一个元素置为 null，否则会内存泄漏</span></span><br><span class=\"line\">        data[size - <span class=\"number\">1</span>] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        size--;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deletedVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">remove</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap / <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            resize(cap / <span class=\"number\">2</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">deletedVal</span> <span class=\"operator\">=</span> data[index];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 搬移数据 data[index+1..] -&gt; data[index..]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> index + <span class=\"number\">1</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            data[i - <span class=\"number\">1</span>] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        data[size - <span class=\"number\">1</span>] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        size--;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deletedVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">removeFirst</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data[index];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 改</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">set</span><span class=\"params\">(<span class=\"type\">int</span> index, E element)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\">        <span class=\"comment\">// 修改数据</span></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">oldVal</span> <span class=\"operator\">=</span> data[index];</span><br><span class=\"line\">        data[index] = element;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> oldVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 工具方法</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">size</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isEmpty</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size == <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 将 data 的容量改为 newCap</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">resize</span><span class=\"params\">(<span class=\"type\">int</span> newCap)</span> &#123;</span><br><span class=\"line\">        E[] temp = (E[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[newCap];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            temp[i] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        data = temp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isElementIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isPositionIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt;= size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 检查 index 索引位置是否可以存在元素</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">checkElementIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isElementIndex(index))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IndexOutOfBoundsException</span>(<span class=\"string\">&quot;Index: &quot;</span> + index + <span class=\"string\">&quot;, Size: &quot;</span> + size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 检查 index 索引位置是否可以添加元素</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">checkPositionIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isPositionIndex(index))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IndexOutOfBoundsException</span>(<span class=\"string\">&quot;Index: &quot;</span> + index + <span class=\"string\">&quot;, Size: &quot;</span> + size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">display</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;size = &quot;</span> + size + <span class=\"string\">&quot; cap = &quot;</span> + data.length);</span><br><span class=\"line\">        System.out.println(Arrays.toString(data));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 初始容量设置为 3</span></span><br><span class=\"line\">        MyArrayList&lt;Integer&gt; arr = <span class=\"keyword\">new</span> <span class=\"title class_\">MyArrayList</span>&lt;&gt;(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加 5 个元素</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;= <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            arr.addLast(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        arr.remove(<span class=\"number\">3</span>);</span><br><span class=\"line\">        arr.add(<span class=\"number\">1</span>, <span class=\"number\">9</span>);</span><br><span class=\"line\">        arr.addFirst(<span class=\"number\">100</span>);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">val</span> <span class=\"operator\">=</span> arr.removeLast();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; arr.size(); i++) &#123;</span><br><span class=\"line\">            System.out.println(arr.get(i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyArrayList</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 默认初始容量</span></span><br><span class=\"line\">    INIT_CAP = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, init_capacity=<span class=\"literal\">None</span></span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data = [<span class=\"literal\">None</span>] * (init_capacity <span class=\"keyword\">if</span> init_capacity <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span> <span class=\"keyword\">else</span> <span class=\"variable language_\">self</span>.__class__.INIT_CAP)</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size = <span class=\"number\">0</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 增</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add_last</span>(<span class=\"params\">self, e</span>):</span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(<span class=\"number\">2</span> * cap)</span><br><span class=\"line\">        <span class=\"comment\"># 在尾部插入元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size] = e</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add</span>(<span class=\"params\">self, index, e</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_position_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(<span class=\"number\">2</span> * cap)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 搬移数据 data[index..] -&gt; data[index+1..]</span></span><br><span class=\"line\">        <span class=\"comment\"># 给新元素腾出位置</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"variable language_\">self</span>.size-<span class=\"number\">1</span>, index-<span class=\"number\">1</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>.data[i+<span class=\"number\">1</span>] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\"># 插入新元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[index] = e</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add_first</span>(<span class=\"params\">self, e</span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.add(<span class=\"number\">0</span>, e)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 删</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove_last</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">&quot;NoSuchElementException&quot;</span>)</span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap // <span class=\"number\">4</span>:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(cap // <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        deleted_val = <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>]</span><br><span class=\"line\">        <span class=\"comment\"># 删除最后一个元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>] = <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size -= <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deleted_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap // <span class=\"number\">4</span>:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(cap // <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        deleted_val = <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 搬移数据 data[index+1..] -&gt; data[index..]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(index + <span class=\"number\">1</span>, <span class=\"variable language_\">self</span>.size):</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>.data[i - <span class=\"number\">1</span>] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>] = <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size -= <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deleted_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove_first</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.remove(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 查</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">get</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 改</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">set</span>(<span class=\"params\">self, index, element</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\">        <span class=\"comment\"># 修改数据</span></span><br><span class=\"line\">        old_val = <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[index] = element</span><br><span class=\"line\">        <span class=\"keyword\">return</span> old_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 工具方法</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">get_size</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">is_empty</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.size == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 将 data 的容量改为 newCap</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_resize</span>(<span class=\"params\">self, new_cap</span>):</span><br><span class=\"line\">        temp = [<span class=\"literal\">None</span>] * new_cap</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"variable language_\">self</span>.size):</span><br><span class=\"line\">            temp[i] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data = temp</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_is_element_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span> &lt;= index &lt; <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_is_position_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span> &lt;= index &lt;= <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_check_element_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"variable language_\">self</span>._is_element_index(index):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> IndexError(<span class=\"string\">f&quot;Index: <span class=\"subst\">&#123;index&#125;</span>, Size: <span class=\"subst\">&#123;self.size&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_check_position_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"variable language_\">self</span>._is_position_index(index):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> IndexError(<span class=\"string\">f&quot;Index: <span class=\"subst\">&#123;index&#125;</span>, Size: <span class=\"subst\">&#123;self.size&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">display</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;size = <span class=\"subst\">&#123;self.size&#125;</span>, cap = <span class=\"subst\">&#123;<span class=\"built_in\">len</span>(self.data)&#125;</span>&quot;</span>)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Usage example</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    arr = MyArrayList(init_capacity=<span class=\"number\">3</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 添加 5 个元素</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">        arr.add_last(i)</span><br><span class=\"line\"></span><br><span class=\"line\">    arr.remove(<span class=\"number\">3</span>)</span><br><span class=\"line\">    arr.add(<span class=\"number\">1</span>, <span class=\"number\">9</span>)</span><br><span class=\"line\">    arr.add_first(<span class=\"number\">100</span>)</span><br><span class=\"line\">    val = arr.remove_last()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 100 1 9 2 3</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(arr.get_size()):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(arr.get(i))</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h2 id=\"自动扩缩容\"><a href=\"#自动扩缩容\" class=\"headerlink\" title=\"自动扩缩容\"></a>自动扩缩容</h2><p>我们这里就实现一个简单的扩缩容的策略：</p>\n<ul>\n<li>当数组元素个数达到底层静态数组的容量上限时，扩容为原来的 2 倍；</li>\n<li>当数组元素个数缩减到底层静态数组的容量的 1&#x2F;4 时，缩容为原来的 1&#x2F;2。</li>\n</ul>\n<h2 id=\"索引边界的检查\"><a href=\"#索引边界的检查\" class=\"headerlink\" title=\"索引边界的检查\"></a>索引边界的检查</h2><p>需要注意的两个检查越界的方法：</p>\n<table>\n<thead>\n<tr>\n<th>方法名</th>\n<th>越界判断条件</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>checkElementIndex</td>\n<td>index&lt;size</td>\n<td>访问 &#x2F; 修改元素操作（如 get&#x2F;set）</td>\n</tr>\n<tr>\n<td>checkPositionIndex</td>\n<td>index&lt;&#x3D;size</td>\n<td>插入元素操作（如 add）</td>\n</tr>\n</tbody></table>\n<p>为什么会有这样的区别？<br>比方说有这样一个 <code>nums</code> 数组，对于每个元素来说，合法的索引一定是 <code>index &lt; size</code>：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nums = [5, 6, 7, 8]</span><br><span class=\"line\">index   0  1  2  3</span><br></pre></td></tr></table></figure>\n\n<p>但如果是要在数组中插入新元素，那么新元素可能的插入位置并不是元素的索引，而是索引之间的空隙：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nums = [ | 5 | 6 | 7 | 8 | ]</span><br><span class=\"line\">index    0   1   2   3   4</span><br></pre></td></tr></table></figure>\n\n<p>这些空隙都是合法的插入位置，所以说 <code>index == size</code> 也是合法的。这就是 <code>checkPositionIndex</code> 和 <code>checkElementIndex</code> 的区别。</p>\n<h2 id=\"删除元素谨防内存泄漏\"><a href=\"#删除元素谨防内存泄漏\" class=\"headerlink\" title=\"删除元素谨防内存泄漏\"></a>删除元素谨防内存泄漏</h2><p>单从算法的角度，其实并不需要关心被删掉的元素应该如何处理，但是具体到代码实现，我们需要注意可能出现的内存泄漏。</p>\n<p>在我给出的代码实现中，删除元素时，我都会<strong>把被删除的元素置为 <code>null</code></strong> 。</p>\n<p>以 Java 为例，Java 的垃圾回收机制是基于<strong>图算法的可达性</strong>分析，如果一个对象再也无法被访问到，那么这个对象占用的内存才会被释放；否则，垃圾回收器会认为这个对象还在使用中，就不会释放这个对象占用的内存。</p>\n<p>如果你不执行 <code>data[size - 1] = null</code> 这行代码，那么 <code>data[size - 1]</code> 这个引用就会一直存在，你可以通过 <code>data[size - 1]</code> 访问这个对象，所以这个对象被认为是可达的，它的内存就一直不会被释放，进而造成内存泄漏。</p>\n<p>其他带垃圾回收功能的语言应该也是类似的，你可以具体了解一下你使用的编程语言的垃圾回收机制，这是写出无 bug 代码的基本要求。</p>\n<h2 id=\"其他细节优化\"><a href=\"#其他细节优化\" class=\"headerlink\" title=\"其他细节优化\"></a>其他细节优化</h2><p>有不少可以进一步优化的点，比方说，我是用 for 循环复制数组数据的，实际上这种方式复制的效率比较差，大部分编程语言会提供更高效的数组复制方法，比如 Java 的 <code>System.arraycopy</code>。</p>\n<p>不过它再怎么优化，本质上也是要搬移数据，时间复杂度都是 O(n)。本文的重点在于让你理解数组增删查改 API 的基本实现思路以及时间复杂度，如果对这些细节感兴趣，可以找到编程语言标准库的源码深入研究。</p>\n<h2 id=\"动态数组代码实现\"><a href=\"#动态数组代码实现\" class=\"headerlink\" title=\"动态数组代码实现\"></a>动态数组代码实现</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// java</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Iterator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.NoSuchElementException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyArrayList</span>&lt;E&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 真正存储数据的底层数组</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> E[] data;</span><br><span class=\"line\">    <span class=\"comment\">// 记录当前元素个数</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> size;</span><br><span class=\"line\">    <span class=\"comment\">// 默认初始容量</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> <span class=\"variable\">INIT_CAP</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyArrayList</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>(INIT_CAP);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyArrayList</span><span class=\"params\">(<span class=\"type\">int</span> initCapacity)</span> &#123;</span><br><span class=\"line\">        data = (E[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[initCapacity];</span><br><span class=\"line\">        size = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 增</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addLast</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap) &#123;</span><br><span class=\"line\">            resize(<span class=\"number\">2</span> * cap);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 在尾部插入元素</span></span><br><span class=\"line\">        data[size] = e;</span><br><span class=\"line\">        size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(<span class=\"type\">int</span> index, E e)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkPositionIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap) &#123;</span><br><span class=\"line\">            resize(<span class=\"number\">2</span> * cap);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 搬移数据 data[index..] -&gt; data[index+1..]</span></span><br><span class=\"line\">        <span class=\"comment\">// 给新元素腾出位置</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> size - <span class=\"number\">1</span>; i &gt;= index; i--) &#123;</span><br><span class=\"line\">            data[i + <span class=\"number\">1</span>] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 插入新元素</span></span><br><span class=\"line\">        data[index] = e;</span><br><span class=\"line\"></span><br><span class=\"line\">        size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addFirst</span><span class=\"params\">(E e)</span> &#123;</span><br><span class=\"line\">        add(<span class=\"number\">0</span>, e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 删</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">removeLast</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NoSuchElementException</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap / <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            resize(cap / <span class=\"number\">2</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">deletedVal</span> <span class=\"operator\">=</span> data[size - <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">// 删除最后一个元素</span></span><br><span class=\"line\">        <span class=\"comment\">// 必须给最后一个元素置为 null，否则会内存泄漏</span></span><br><span class=\"line\">        data[size - <span class=\"number\">1</span>] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        size--;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deletedVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">remove</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">cap</span> <span class=\"operator\">=</span> data.length;</span><br><span class=\"line\">        <span class=\"comment\">// 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size == cap / <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            resize(cap / <span class=\"number\">2</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">deletedVal</span> <span class=\"operator\">=</span> data[index];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 搬移数据 data[index+1..] -&gt; data[index..]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> index + <span class=\"number\">1</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            data[i - <span class=\"number\">1</span>] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        data[size - <span class=\"number\">1</span>] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        size--;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deletedVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">removeFirst</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data[index];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 改</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> E <span class=\"title function_\">set</span><span class=\"params\">(<span class=\"type\">int</span> index, E element)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 检查索引越界</span></span><br><span class=\"line\">        checkElementIndex(index);</span><br><span class=\"line\">        <span class=\"comment\">// 修改数据</span></span><br><span class=\"line\">        <span class=\"type\">E</span> <span class=\"variable\">oldVal</span> <span class=\"operator\">=</span> data[index];</span><br><span class=\"line\">        data[index] = element;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> oldVal;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 工具方法</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">size</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isEmpty</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size == <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 将 data 的容量改为 newCap</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">resize</span><span class=\"params\">(<span class=\"type\">int</span> newCap)</span> &#123;</span><br><span class=\"line\">        E[] temp = (E[]) <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>[newCap];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            temp[i] = data[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        data = temp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isElementIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">boolean</span> <span class=\"title function_\">isPositionIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt;= size;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 检查 index 索引位置是否可以存在元素</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">checkElementIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isElementIndex(index))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IndexOutOfBoundsException</span>(<span class=\"string\">&quot;Index: &quot;</span> + index + <span class=\"string\">&quot;, Size: &quot;</span> + size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 检查 index 索引位置是否可以添加元素</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">checkPositionIndex</span><span class=\"params\">(<span class=\"type\">int</span> index)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!isPositionIndex(index))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">IndexOutOfBoundsException</span>(<span class=\"string\">&quot;Index: &quot;</span> + index + <span class=\"string\">&quot;, Size: &quot;</span> + size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">display</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;size = &quot;</span> + size + <span class=\"string\">&quot; cap = &quot;</span> + data.length);</span><br><span class=\"line\">        System.out.println(Arrays.toString(data));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 初始容量设置为 3</span></span><br><span class=\"line\">        MyArrayList&lt;Integer&gt; arr = <span class=\"keyword\">new</span> <span class=\"title class_\">MyArrayList</span>&lt;&gt;(<span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加 5 个元素</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;= <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">            arr.addLast(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        arr.remove(<span class=\"number\">3</span>);</span><br><span class=\"line\">        arr.add(<span class=\"number\">1</span>, <span class=\"number\">9</span>);</span><br><span class=\"line\">        arr.addFirst(<span class=\"number\">100</span>);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">val</span> <span class=\"operator\">=</span> arr.removeLast();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; arr.size(); i++) &#123;</span><br><span class=\"line\">            System.out.println(arr.get(i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># python</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyArrayList</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 默认初始容量</span></span><br><span class=\"line\">    INIT_CAP = <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, init_capacity=<span class=\"literal\">None</span></span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data = [<span class=\"literal\">None</span>] * (init_capacity <span class=\"keyword\">if</span> init_capacity <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"literal\">None</span> <span class=\"keyword\">else</span> <span class=\"variable language_\">self</span>.__class__.INIT_CAP)</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size = <span class=\"number\">0</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 增</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add_last</span>(<span class=\"params\">self, e</span>):</span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(<span class=\"number\">2</span> * cap)</span><br><span class=\"line\">        <span class=\"comment\"># 在尾部插入元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size] = e</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add</span>(<span class=\"params\">self, index, e</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_position_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 看 data 数组容量够不够</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(<span class=\"number\">2</span> * cap)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 搬移数据 data[index..] -&gt; data[index+1..]</span></span><br><span class=\"line\">        <span class=\"comment\"># 给新元素腾出位置</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"variable language_\">self</span>.size-<span class=\"number\">1</span>, index-<span class=\"number\">1</span>, -<span class=\"number\">1</span>):</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>.data[i+<span class=\"number\">1</span>] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\"># 插入新元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[index] = e</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">add_first</span>(<span class=\"params\">self, e</span>):</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.add(<span class=\"number\">0</span>, e)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 删</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove_last</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == <span class=\"number\">0</span>:</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> Exception(<span class=\"string\">&quot;NoSuchElementException&quot;</span>)</span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap // <span class=\"number\">4</span>:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(cap // <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        deleted_val = <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>]</span><br><span class=\"line\">        <span class=\"comment\"># 删除最后一个元素</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>] = <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size -= <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deleted_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        cap = <span class=\"built_in\">len</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\">        <span class=\"comment\"># 可以缩容，节约空间</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"variable language_\">self</span>.size == cap // <span class=\"number\">4</span>:</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>._resize(cap // <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        deleted_val = <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 搬移数据 data[index+1..] -&gt; data[index..]</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(index + <span class=\"number\">1</span>, <span class=\"variable language_\">self</span>.size):</span><br><span class=\"line\">            <span class=\"variable language_\">self</span>.data[i - <span class=\"number\">1</span>] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[<span class=\"variable language_\">self</span>.size - <span class=\"number\">1</span>] = <span class=\"literal\">None</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.size -= <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deleted_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">remove_first</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.remove(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 查</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">get</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 改</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">set</span>(<span class=\"params\">self, index, element</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 检查索引越界</span></span><br><span class=\"line\">        <span class=\"variable language_\">self</span>._check_element_index(index)</span><br><span class=\"line\">        <span class=\"comment\"># 修改数据</span></span><br><span class=\"line\">        old_val = <span class=\"variable language_\">self</span>.data[index]</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data[index] = element</span><br><span class=\"line\">        <span class=\"keyword\">return</span> old_val</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 工具方法</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">get_size</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">is_empty</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">self</span>.size == <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 将 data 的容量改为 newCap</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_resize</span>(<span class=\"params\">self, new_cap</span>):</span><br><span class=\"line\">        temp = [<span class=\"literal\">None</span>] * new_cap</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"variable language_\">self</span>.size):</span><br><span class=\"line\">            temp[i] = <span class=\"variable language_\">self</span>.data[i]</span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.data = temp</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_is_element_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span> &lt;= index &lt; <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_is_position_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span> &lt;= index &lt;= <span class=\"variable language_\">self</span>.size</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_check_element_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"variable language_\">self</span>._is_element_index(index):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> IndexError(<span class=\"string\">f&quot;Index: <span class=\"subst\">&#123;index&#125;</span>, Size: <span class=\"subst\">&#123;self.size&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">_check_position_index</span>(<span class=\"params\">self, index</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"variable language_\">self</span>._is_position_index(index):</span><br><span class=\"line\">            <span class=\"keyword\">raise</span> IndexError(<span class=\"string\">f&quot;Index: <span class=\"subst\">&#123;index&#125;</span>, Size: <span class=\"subst\">&#123;self.size&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">display</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;size = <span class=\"subst\">&#123;self.size&#125;</span>, cap = <span class=\"subst\">&#123;<span class=\"built_in\">len</span>(self.data)&#125;</span>&quot;</span>)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>.data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Usage example</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    arr = MyArrayList(init_capacity=<span class=\"number\">3</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 添加 5 个元素</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">6</span>):</span><br><span class=\"line\">        arr.add_last(i)</span><br><span class=\"line\"></span><br><span class=\"line\">    arr.remove(<span class=\"number\">3</span>)</span><br><span class=\"line\">    arr.add(<span class=\"number\">1</span>, <span class=\"number\">9</span>)</span><br><span class=\"line\">    arr.add_first(<span class=\"number\">100</span>)</span><br><span class=\"line\">    val = arr.remove_last()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 100 1 9 2 3</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(arr.get_size()):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(arr.get(i))</span><br></pre></td></tr></table></figure>"}],"Post":[{"title":"CS61B 目录","date":"2025-06-13T16:00:00.000Z","_content":"- [proj0](/CS61B/proj0)\n- [proj1a](/CS61B/proj1a)\n- [Leb03](/CS61B/Leb03)\n- [proj1b](/CS61B/proj1b)\n\n","source":"_posts/CS61B/index.md","raw":"---\ntitle: CS61B 目录\ndate: 2025-06-14\ncategories:\n  - CS61B\n---\n- [proj0](/CS61B/proj0)\n- [proj1a](/CS61B/proj1a)\n- [Leb03](/CS61B/Leb03)\n- [proj1b](/CS61B/proj1b)\n\n","slug":"CS61B/index","published":1,"updated":"2025-07-15T09:03:14.285Z","comments":1,"layout":"post","photos":[],"_id":"cmdh6nnwb00019gv32tcu8pms","content":"<ul>\n<li><a href=\"/CS61B/proj0\">proj0</a></li>\n<li><a href=\"/CS61B/proj1a\">proj1a</a></li>\n<li><a href=\"/CS61B/Leb03\">Leb03</a></li>\n<li><a href=\"/CS61B/proj1b\">proj1b</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"/CS61B/proj0\">proj0</a></li>\n<li><a href=\"/CS61B/proj1a\">proj1a</a></li>\n<li><a href=\"/CS61B/Leb03\">Leb03</a></li>\n<li><a href=\"/CS61B/proj1b\">proj1b</a></li>\n</ul>\n"},{"title":"Debug 目录","date":"2025-06-13T16:00:00.000Z","_content":"- [博客流程](/Debug/博客流程)\n- [使用 Docker 自托管 Obsidian 并通过网页浏览器访问](/Debug/使用Docker自托管Obsidian并通过网页浏览器访问)","source":"_posts/Debug/index.md","raw":"---\ntitle: Debug 目录\ndate: 2025-06-14\ncategories:\n  - Debug\n---\n- [博客流程](/Debug/博客流程)\n- [使用 Docker 自托管 Obsidian 并通过网页浏览器访问](/Debug/使用Docker自托管Obsidian并通过网页浏览器访问)","slug":"Debug/index","published":1,"updated":"2025-07-24T09:05:06.824Z","comments":1,"layout":"post","photos":[],"_id":"cmdh6nnwm000n9gv322v6h3v5","content":"<ul>\n<li><a href=\"/Debug/%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B\">博客流程</a></li>\n<li><a href=\"/Debug/%E4%BD%BF%E7%94%A8Docker%E8%87%AA%E6%89%98%E7%AE%A1Obsidian%E5%B9%B6%E9%80%9A%E8%BF%87%E7%BD%91%E9%A1%B5%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE\">使用 Docker 自托管 Obsidian 并通过网页浏览器访问</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"/Debug/%E5%8D%9A%E5%AE%A2%E6%B5%81%E7%A8%8B\">博客流程</a></li>\n<li><a href=\"/Debug/%E4%BD%BF%E7%94%A8Docker%E8%87%AA%E6%89%98%E7%AE%A1Obsidian%E5%B9%B6%E9%80%9A%E8%BF%87%E7%BD%91%E9%A1%B5%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE\">使用 Docker 自托管 Obsidian 并通过网页浏览器访问</a></li>\n</ul>\n"},{"title":"Serve 目录","date":"2025-07-15T07:16:48.000Z","_content":"- [SSH概念](/Serve/SSH概念)\n- [为什么称 Tomcat 为服务器？(IP,端口,域名)](/Serve/为什么称Tomcat为服务器？)\n- [Tomcat 基础](/Serve/Tomcat基础)\n- [Tomcat 面试](/Serve/Tomcat面试)\n- [SSH 面试](/Serve/SSH面试)","source":"_posts/Serve/index.md","raw":"---\ntitle: Serve 目录\ndate: 2025-07-15 15:16:48\ntags:\n  - Serve\n---\n- [SSH概念](/Serve/SSH概念)\n- [为什么称 Tomcat 为服务器？(IP,端口,域名)](/Serve/为什么称Tomcat为服务器？)\n- [Tomcat 基础](/Serve/Tomcat基础)\n- [Tomcat 面试](/Serve/Tomcat面试)\n- [SSH 面试](/Serve/SSH面试)","slug":"Serve/index","published":1,"updated":"2025-07-24T09:19:36.413Z","comments":1,"layout":"post","photos":[],"_id":"cmdh6nnwn000o9gv371q99822","content":"<ul>\n<li><a href=\"/Serve/SSH%E6%A6%82%E5%BF%B5\">SSH概念</a></li>\n<li><a href=\"/Serve/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A7%B0Tomcat%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9F\">为什么称 Tomcat 为服务器？(IP,端口,域名)</a></li>\n<li><a href=\"/Serve/Tomcat%E5%9F%BA%E7%A1%80\">Tomcat 基础</a></li>\n<li><a href=\"/Serve/Tomcat%E9%9D%A2%E8%AF%95\">Tomcat 面试</a></li>\n<li><a href=\"/Serve/SSH%E9%9D%A2%E8%AF%95\">SSH 面试</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"/Serve/SSH%E6%A6%82%E5%BF%B5\">SSH概念</a></li>\n<li><a href=\"/Serve/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A7%B0Tomcat%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9F\">为什么称 Tomcat 为服务器？(IP,端口,域名)</a></li>\n<li><a href=\"/Serve/Tomcat%E5%9F%BA%E7%A1%80\">Tomcat 基础</a></li>\n<li><a href=\"/Serve/Tomcat%E9%9D%A2%E8%AF%95\">Tomcat 面试</a></li>\n<li><a href=\"/Serve/SSH%E9%9D%A2%E8%AF%95\">SSH 面试</a></li>\n</ul>\n"},{"title":"数据结构目录","date":"2025-07-15T16:00:00.000Z","_content":"- [数组（顺序存储）基本原理](/数据结构/数组（顺序存储）基本原理)\n- [动态数组代码实现](/数据结构/动态数组代码实现)\n- [链表（链式存储）基本原理](/数据结构/链表（链式存储）基本原理)\n- [链表代码实现](/数据结构/链表代码实现)","source":"_posts/数据结构/index.md","raw":"---\ntitle: 数据结构目录\ndate: 2025-07-16\ncategories:\n  - 数据结构\n---\n- [数组（顺序存储）基本原理](/数据结构/数组（顺序存储）基本原理)\n- [动态数组代码实现](/数据结构/动态数组代码实现)\n- [链表（链式存储）基本原理](/数据结构/链表（链式存储）基本原理)\n- [链表代码实现](/数据结构/链表代码实现)","slug":"数据结构/index","published":1,"updated":"2025-07-24T09:08:49.125Z","comments":1,"layout":"post","photos":[],"_id":"cmdh6nnwn000q9gv34yizgvzi","content":"<ul>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组（顺序存储）基本原理</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">动态数组代码实现</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%EF%BC%88%E9%93%BE%E5%BC%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">链表（链式存储）基本原理</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">链表代码实现</a></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E7%BB%84%EF%BC%88%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">数组（顺序存储）基本原理</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">动态数组代码实现</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%EF%BC%88%E9%93%BE%E5%BC%8F%E5%AD%98%E5%82%A8%EF%BC%89%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86\">链表（链式存储）基本原理</a></li>\n<li><a href=\"/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0\">链表代码实现</a></li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cmdh6nnwb00019gv32tcu8pms","category_id":"cmdh6nnwe00039gv3cjhk2kak","_id":"cmdh6nnwg00099gv371kvbs5a"},{"post_id":"cmdh6nnwm000n9gv322v6h3v5","category_id":"cmdh6nnwn000p9gv3fut24n6q","_id":"cmdh6nnwo000u9gv3bqu207ih"},{"post_id":"cmdh6nnwn000q9gv34yizgvzi","category_id":"cmdh6nnwo000s9gv3a64i9hlo","_id":"cmdh6nnwo000v9gv3f8yhh6e1"}],"PostTag":[{"post_id":"cmdh6nnwn000o9gv371q99822","tag_id":"cmdh6nnwo000r9gv3frw51o4j","_id":"cmdh6nnwo000t9gv346ncawlc"}],"Tag":[{"name":"Serve","_id":"cmdh6nnwo000r9gv3frw51o4j"}]}}